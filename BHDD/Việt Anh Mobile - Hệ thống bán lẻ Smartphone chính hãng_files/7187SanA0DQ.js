/*!CK:3325194690!*//*1446157516,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["sfzvC"]); }

__d("ComposedEntityMutability",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MUTABLE:0,IMMUTABLE:1,SEGMENTED:2};},null,{});
__d("ComposedEntityType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MENTION:0,LINK:1,IMAGE:2,VIDEO:3,EMOTICON:4,TOKEN:5,HASHTAG:6,IMPLICIT_LINK:7};},null,{});
__d("MercuryAudioType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AudioClip:"fb_voice_message",VoiceMessageWithTranscript:"fb_voice_message_with_transcript"};},null,{});
__d("MercuryParticipantTypes",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={USER:"user",THREAD:"thread",EVENT:"event",PAGE:"page",FRIEND:"friend",FB4C:"fb4c",NON_FRIEND:"non_friend"};},null,{});
__d("MercurySendMessageFields",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={AUTO_RETRY_CNT:"auto_retry_cnt",MANUAL_RETRY_CNT:"manual_retry_cnt"};},null,{});
__d("MessagesViewerSetID",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={MESSAGES:"messages",MESSAGES_VIEW_ALL_IN_THREAD:"messages:view_all_in_thread"};},null,{});
__d("MessagingRealtimeConstants",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={VIEWER_FBID:"realtime_viewer_fbid"};},null,{});
__d("MessengerView",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={DETAIL:{COMPOSE:"detail\/compose",THREAD:"detail\/thread"},MASTER:{GROUPS:"master\/groups",PEOPLE:"master\/people",RECENT:"master\/recent"}};},null,{});
__d("MNCommerceLoggerEvents",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={GEN_CALL:"gen_call",DUPLICATE_CALL:"duplicate_call",ERROR:"error",GEN_SHIPMENT_ENT:"gen_shipment_ent",GEN_SHIPMENT_TRACKING_ENT:"gen_shipment_tracking_ent",SHIPMENT_NOTIFICATION_READY:"shipment_notification_ready",SHIPMENT_NOTIFICATION_SENT:"shipment_notification_sent",SHIPMENT_NOTIF_READY:"shipment_notif_ready",SHIPMENT_NOTIF_SENT:"shipment_notif_sent",ETA_NOTIF_READY:"eta_notif_ready",ETA_NOTIF_SENT:"eta_notif_sent",DELIVERED_NOTIF_READY:"delivered_notif_ready",DELIVERED_NOTIF_SENT:"delivered_notif_sent",OUT_FOR_DELIVERY_NOTIF_READY:"out_for_delivery_notif_ready",OUT_FOR_DELIVERY_NOTIF_SENT:"out_for_delivery_notif_sent",DELAYED_NOTIF_READY:"delayed_notif_ready",DELAYED_NOTIF_SENT:"delayed_notif_sent",IN_TRANSIT_NOTIF_READY:"in_transit_notif_ready",IN_TRANSIT_NOTIF_SENT:"in_transit_notif_sent",ASYNC_EXECUTION:"async_execution",ASYNC_SCHEDULE:"async_schedule",ASYNC_THROTTLE:"async_throttle",ASYNC_USER_ACCOUNT_DISABLED:"async_user_account_disabled",ASYNC_GEN_DATA_ERROR:"async_gen_data_error",TRACKING_SHUTDOWN_WITH_EXCEPTION_ERROR:"tracking_shutdown_with_exception",TRACKING_SHUTDOWN_WITH_RETRY_ERROR:"tracking_shutdown_with_retry",DELIVERED_STATS:"delivered_stats",USER_LINKED:"user_linked",USER_LINK_FAILED:"user_link_failed",USER_TOKEN_DECRYPTION_FAILED:"user_token_decryption_failed",USER_TOKEN_DELIVERY_ATTEMPT:"user_token_delivery_attempt",USER_TOKEN_DELIVERED:"user_token_delivered",USER_TOKEN_DELIVERY_FAILED:"user_token_delivery_failed",USER_TOKEN_CRITICAL_LOOKUP:"user_token_critical_lookup",USER_TOKEN_LOOKUP_FAILED:"user_token_lookup_failed",USER_UNLINKED:"user_unlinked",USER_UNLINK_FAILED:"user_unlink_failed",USER_UNLINK_BUSINESS_NOTIFIED:"user_unlink_business_notified",USER_UNLINK_BUSINESS_NOTIFICATION_FAILED:"user_unlink_business_notification_failed",PLUGIN_CLIENT_RENDERED:"plugin_client_rendered",PLUGIN_RENDERED:"plugin_rendered",PLUGIN_HIDDEN_ALREADY_LINKED:"plugin_hidden_already_linked",PLUGIN_BLOCKED:"plugin_blocked",PLUGIN_UPDATES_DISALLOWED:"plugin_updates_disallowed",PLUGIN_UPDATES_REALLOWED:"plugin_updates_reallowed",PLUGIN_ASSOC_MUTATE_FAILED:"plugin_assoc_mutate_failed",PLUGIN_ASSOC_READ_FAILED:"plugin_assoc_read_failed",PLUGIN_MESSAGE_US_CLICK:"plugin_message_us_click",ORDER_CANCELLED:"order_cancelled",ORDER_CANCELLATION_FAILED:"order_cancellation_failed",SEND_MESSAGE_WITH_ROBOTEXT:"send_message_with_robotext",SEND_MESSAGE_WITH_ATTACHMENT:"send_message_with_attachment",SEND_MESSAGE_WITH_LOG_MESSAGE:"send_message_with_log_message",SEND_MESSAGE_FAILURE:"send_message_failure",DIALOG_OPENED:"dialog_opened",DIALOG_CLOSED:"dialog_closed",DIALOG_LOAD_ERROR:"dialog_load_error",DIALOG_LOAD_SUCCESS:"dialog_load_success",NOT_YOU_CLICKED:"not_you_clicked",PRODUCT_SUBSCRIPTION_CLICKED:"product_subscription_clicked",RECEIPTS:"receipts",CANCELLATIONS:"cancellations",SHIPMENTS:"shipments",NOW_IN_STOCK:"nowinstock",NOTIFY_ME:"notifyme",PROMOTIONAL_MESSAGE:"promotionalmessage",RETAIL_CANCELLATIONS:"retailcancellations",RETAIL_RECEIPTS:"retailreceipts",UPDATE_RECEIPTS:"updatereceipts",RETAIL_SHIPMENTS:"retailshipments",RETAIL_UPDATE_RECEIPTS:"retailupdatereceipts",AIRLINE_ITINERARY:"airlineitinerary",AIRLINE_REMINDER:"airlinereminder",AIRLINE_CHECKIN:"airlinecheckin",AIRLINE_UPDATE:"airlineupdate",BILL_PAYMENT_REQUEST:"billpaymentrequest",SIMPLE_LINK_WITH_STATE:"simplelinkwithstate",PROMOTION_ENT_CREATED:"promotion_ent_created",PROMOTION_SCHEDULED:"promotion_scheduled",PROMOTION_USER_ATTEMPTED:"promotion_user_attempted",PROMOTION_USER_GK_FAILED:"promotion_user_gk_failed",PROMOTION_USER_GK_PASSED:"promotion_user_gk_passed",PROMOTION_USER_ALREADY_LINKED:"promotion_user_already_linked",PROMOTION_USER_PREVIOUSLY_UNLINKED:"promotion_user_previously_unlinked",PROMOTION_USER_LINKED_AFTER:"promotion_user_linked_after",PROMOTION_USER_SEND_MESSAGE_EXCEPTION:"promotion_user_send_message_exception",PROMOTION_ATOMIC_MESSAGE_SENT:"promotion_atomic_message_sent",PROMOTION_ROBOTEXT_SENT:"promotion_robotext_sent",PROMOTION_ATTACHMENT_SENT:"promotion_attachment_sent",PROMOTION_ASYNC_JOB_ERROR:"promotion_async_job_error",M_SUGGESTION_CALL:"m_suggestion_call",M_SUGGESTION_ENT_CREATED:"m_suggestion_ent_created",M_SUGGESTION_LINK_IF_NECESSARY:"m_suggestion_link_if_necessary",M_SUGGESTION_SEND_MESSAGE:"m_suggestion_send_message",GEN_CANCELLATION_ENT:"gen_cancellation_ent",CANCELLATION_NOTIFICATION_READY:"cancellation_notification_ready",CANCELLATION_NOTIFICATION_SENT:"cancellation_notification_sent",LIVECHAT_HISTORY_API_SUCCESS:"livechat_history_api_success",LIVECHAT_HISTORY_API_FAILURE:"livechat_history_api_failure"};},null,{});
__d("P2PPaymentLoggerEvent",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={ACTN_ADD_CREDIT_CARD:"Actn_AddCreditCard",ACTN_UPDATE_CREDIT_CARD:"Actn_UpdateCreditCard",ACTN_REMOVE_CREDIT_CARD:"Actn_RemoveCreditCard",ACTN_UNLOCK_CREDIT_CARD:"Actn_UnlockCreditCard",ACTN_VALIDATE_CARD:"Actn_ValidateCard",ACTN_TRANSFER_MONEY:"Actn_TransferMoney",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN:"Actn_TransferMoneyWithCampaign",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_PARENT_CALL:"Actn_TransferMoneyWithCampaignParentCall",ACTN_TRANSFER_MONEY_WITH_CAMPAIGN_POST_SUCCESS:"Actn_TransferMoneyWithCampaignPostSuccess",ACTN_TRANSFER_MONEY_CHECK_NEEDS_REVERT:"Actn_TransferMoneyCheckNeedsRevert",ACTN_TRANSFER_MONEY_REVERT:"Actn_TransferMoneyRevert",ACTN_TRANSFER_MONEY_CREATE_CONTEXT:"Actn_TransferMoneyCreateContext",ACTN_TRANSFER_MONEY_CREATE_PLATFORM_ITEM:"Actn_TransferMoneyCreatePlatformItem",ACTN_ACCEPT_MONEY:"Actn_AcceptMoney",ACTN_DECLINE_MONEY:"Actn_DeclineMoney",ACTN_SET_PRIMARY:"Actn_SetPrimary",ACTN_WITHDRAW_MONEY:"Actn_WithdrawMoney",ACTN_CREATE_MSGR_COMMERCE_CART:"Actn_CreateMsgrCommerceCart",ACTN_PLACE_MSGR_COMMERCE_ORDER:"Actn_PlaceMsgrCommerceOrder",ACTN_GRAPH_API_GENERIC_WRITE:"Actn_GraphApiGenericWrite",ACTN_SEND_TRANSFER_MESSAGE:"Actn_SendTransferMessage",ACTN_SEND_TRANSFER_EMAIL:"Actn_SendTransferEmail",ACTN_SEND_EXPIRE_NOTIFICATIONS:"Actn_SendExpireNotifications",ACTN_SEND_TRANSFER_MESSAGE_QUEUED:"Actn_SendTransferMessageQueued",ACTN_UNCATEGORIZED_EXCEPTION:"Actn_Uncategorized_Exception",ACTN_INCREASE_CAMPAIGN_COUNTER:"Actn_Increase_Campaign_Counter",ACTN_CREATE_PAYMENT_REQUEST:"Actn_CreatePaymentRequest",ACTN_PAY_PAYMENT_REQUEST:"Actn_PayPaymentRequest",ACTN_DECLINE_PAYMENT_REQUEST:"Actn_DeclinePaymentRequest",ACTN_SEND_PAYMENT_REQUEST_MESSAGE:"Actn_SendPaymentRequestMessage",ACTN_AUTH_FOR_SENDER_REVIEW:"Actn_AuthForSenderReview",ACTN_COMPLETE_SENDER_REVIEW:"Actn_CompleteSenderReview",ACTN_COMPLETE_RECEIVER_REVIEW:"Actn_CompleteReceiverReview",ACTN_SUBMIT_VERIFICATION_STEP:"Actn_SubmitVerificationStep",ACTN_COMPLETE_SENDER_VERIFICATION:"Actn_CompleteSenderVerification",ACTN_COMPLETE_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_VERIFICATION:"Actn_CancelSenderVerification",ACTN_CANCEL_RECEIVER_VERIFICATION:"Actn_CancelReceiverVerification",ACTN_CANCEL_SENDER_RISK:"Actn_CancelSenderRisk",ACTN_CANCEL_EXPIRE:"Actn_CancelExpire",ACTN_CANCEL_FOR_SAME_CARD:"Actn_CancelForSameCard",ACTN_CANCEL_BY_CUSTOMER_SERVICE:"Actn_CancelByCustomerService",ACTN_CANCEL_RECEIVER_REVIEW:"Actn_CancelReceiverReview",ACTN_CANCEL_SENDER_REVIEW:"Actn_CancelSenderReview",ACTN_CANCEL_ALL_PENDING_TRANSFERS:"Actn_CancelAllPendingTransfers",ACTN_ADD_PIN:"Actn_AddPIN",ACTN_UPDATE_PIN:"Actn_UpdatePIN",ACTN_REMOVE_PIN:"Actn_RemovePIN",ACTN_RESET_PIN:"Actn_ResetPIN",ACTN_ENABLE_TOUCH_ID:"Actn_EnableTouchID",ACTN_VERIFY_TOUCH_ID:"Actn_VerifyTouchID",ACTN_DISABLE_TOUCH_ID:"Actn_DisableTouchID",ACTN_CHANNEL_NOTIF_CARD_EVENT:"Actn_ChannelNotifCardEvent",ACTN_CHANNEL_NOTIF_TRANSFER_STATUS_EVENT:"Actn_ChannelNotifTransferStatusEvent",ACTN_CHANNEL_NOTIF_PLATFORM_EVENT:"Actn_ChannelNotifPlatformEvent",ACTN_PLATFORM_BANNER_DISMISSED:"Actn_PlatformBannerDismissed",ACTN_PLATFORM_BANNER_MARK_AS_SOLD:"Actn_PlatformBannerMarkAsSold",ACTN_ADD_ADDRESS:"Actn_AddAddress",ACTN_GET_ADDRESSES:"Actn_GetAddresses",ACTN_GET_CURRENT_USER_PROFILE_DATA:"Actn_GetCurrentUserProfileData",UI_ACTN_INITIATE_SEND:"UI_Actn_Initiate_Send",UI_ACTN_CANCEL_SEND:"UI_Actn_Send_Money_Cancelled",UI_ACTN_INITIATE_ADD_CARD:"UI_Actn_Initiate_Add_Card",UI_ACTN_INITIATE_CHOOSE_CARD:"UI_Actn_Initiate_Choose_Card",UI_ACTN_CANCEL_ADD_CARD:"UI_Actn_Cancel_Add_Card",UI_ACTN_CONFIRM_CARD_DETAILS:"UI_Actn_Confirm_Card_Details",UI_ACTN_ACCEPT_MONEY_CANCEL:"UI_Actn_Accept_Money_Cancel",UI_ACTN_ACCEPT_WITH_CARD:"UI_Actn_Accept_With_Card",UI_ACTN_ADD_CARD_SUCCESS:"UI_Actn_Add_Card_Success",UI_ACTN_ADD_CARD_FAIL:"UI_Actn_Add_Card_Fail",UI_ACTN_CONFIRM_SEND:"UI_Actn_Confirm_Send",UI_ACTN_SEND_SUCCESS:"UI_Actn_Send_Success",UI_ACTN_SEND_MONEY_CANCELLED:"UI_Actn_Send_Money_Cancelled",UI_ACTN_SEND_FAIL:"UI_Actn_Send_Fail",UI_ACTN_INITIATE_EDIT_CARD:"UI_Actn_Initiate_Edit_Card",UI_ACTN_CANCEL_EDIT_CARD:"UI_Actn_Cancel_Edit_Card",UI_ACTN_CONFIRM_EDIT_CARD_DETAILS:"UI_Actn_Confirm_Edit_Card_Details",UI_ACTN_EDIT_CARD_SUCCESS:"UI_Actn_Edit_Card_Success",UI_ACTN_EDIT_CARD_FAIL:"UI_Actn_Edit_Card_Fail",UI_ACTN_INITIATE_REMOVE_CARD:"UI_Actn_Initiate_Remove_Card",UI_ACTN_CONFIRM_REMOVE_CARD:"UI_Actn_Confirm_Remove_Card",UI_ACTN_REMOVE_CARD_SUCCESS:"UI_Actn_Remove_Card_Success",UI_ACTN_REMOVE_CARD_FAIL:"UI_Actn_Remove_Card_Fail",UI_ACTN_INITIATE_PASSWORD_PROTECTION_NUX:"UI_Actn_Initiate_Password_Protection_NUX",UI_ACTN_OPT_IN_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_In_Password_Protection_NUX",UI_ACTN_OPT_OUT_PASSWORD_PROTECTION_NUX:"UI_Actn_Opt_Out_Password_Protection_NUX",UI_ACTN_ENABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Enabled_Password_Protection_Setting",UI_ACTN_DISABLED_PASSWORD_PROTECTION_SETTING:"UI_Actn_Disabled_Password_Protection_Setting",UI_ACTN_SEND_CLICKED:"UI_Actn_Send_Clicked",UI_ACTN_VERIFY_CSC:"UI_Actn_Verify_CSC",UI_ACTN_CONFIRM_AMOUNT:"UI_Actn_Confirm_Amount",UI_ACTN_EDIT_CARD:"UI_Actn_Edit_Card",UI_ACTN_CHANGE_CARD:"UI_Actn_Change_Card",UI_ACTN_INITIATE_SEND_TRIGGER:"UI_Actn_Initiate_Send_Trigger",UI_ACTN_INITIATE_GROUP_SEND:"UI_Actn_Initiate_Group_Send",UI_ACTN_GROUP_SEND_CANCELLED:"UI_Actn_Group_Send_Cancelled",UI_ACTN_INITIATE_GROUP_SEND_TRIGGER:"UI_Actn_Initiate_Group_Send_Trigger",UI_ACTN_GROUP_SEND_RECIPIENT_PICKED:"UI_Actn_Group_Send_Recipient_Picked",UI_ACTN_3RD_PARTY_RECEIPT_SHOWN:"UI_Actn_3rd_Party_Receipt_Shown",UI_ACTN_3RD_PARTY_RECEIPT_DISMISSED:"UI_Actn_3rd_Party_Receipt_Dismissed",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CLICKED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Clicked",UI_ACTN_3RD_PARTY_NON_ENABLED_LOG_MESSAGE_CANCELLED:"UI_Actn_3rd_Party_Non_Enabled_Log_Message_Cancelled",UI_ACTN_CHAT_THREAD_BANNER_CLICKED:"UI_Actn_Chat_Thread_Banner_Clicked",UI_ACTN_CHAT_THREAD_BANNER_VIEWED:"UI_Actn_Chat_Thread_Banner_Viewed",UI_ACTN_CHAT_THREAD_BANNER_DISMISSED:"UI_Actn_Chat_Thread_Banner_Dismissed",UI_ACTN_INITIATE_MONEYPENNY_ORDER:"UI_Actn_Initiate_Moneypenny_Order",UI_ACTN_CONFIRM_MONEYPENNY_ORDER:"UI_Actn_Confirm_Moneypenny_Order",UI_ACTN_MONEYPENNY_ORDER_FAIL:"UI_Actn_Moneypenny_Order_Fail",UI_ACTN_MONEYPENNY_ORDER_SUCCESS:"UI_Actn_Moneypenny_Order_Success",UI_ACTN_MONEYPENNY_ORDER_CANCEL:"UI_Actn_Moneypenny_Order_Cancel",UI_ACTN_FRIEND_PICKER_SEARCH:"UI_Actn_Friend_Picker_Search",UI_ACTN_FRIEND_PICKER_SELECT:"UI_Actn_Friend_Picker_Select",UI_ACTN_FI_CANCEL:"UI_Actn_FI_Cancel",UI_ACTN_FI_SUCCESS_DIALOG_NEXT:"UI_Action_Success_Dialog_Next",UI_ACTN_FI_BANNER_DISMISSED:"UI_Actn_FI_Banner_Dismissed",UI_ACTN_FI_BANNER_IMPRESSION:"UI_Actn_FI_Banner_Impression",UI_ACTN_INCENTIVE_TRANSFER_SUCCESS:"UI_Actn_Incentive_Transfer_Success",UI_ACTN_INCENTIVE_TRANSFER_FAILURE:"UI_Actn_Incentive_Transfer_Failure",UI_ACTN_PLATFORM_BANNER_SELLER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Seller_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_BUYER_HIDE_CLICKED:"UI_Actn_Platform_Banner_Buyer_Hide_Clicked",UI_ACTN_PLATFORM_BANNER_SOLD_CLICKED:"UI_Actn_Platform_Banner_Sold_Clicked",UI_ACTN_PLATFORM_BANNER_IMAGE_CLICKED:"UI_Actn_Platform_Banner_Image_Clicked",UI_ACTN_PLATFORM_BANNER_TITLE_CLICKED:"UI_Actn_Platform_Banner_Title_Clicked",UI_ACTN_PLATFORM_BANNER_PAY_CLICKED:"UI_Actn_Platform_Banner_Pay_Clicked",UI_ACTN_PLATFORM_BANNER_SELLER_VIEWED:"UI_Actn_Platform_Banner_Seller_Viewed",UI_ACTN_PLATFORM_BANNER_BUYER_VIEWED:"UI_Actn_Platform_Banner_Buyer_Viewed",UI_ACTN_PLATFORM_BANNER_PAY_NUX_SHOWN:"UI_Actn_Platform_Banner_Pay_Nux_Shown"};},null,{});
__d("P2PPaymentLoggerEventFlow",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={UI_FLOW_P2P_SEND:"UI_Flow_P2P_Send",UI_FLOW_P2P_RECEIVE:"UI_Flow_P2P_Receive",UI_FLOW_P2P_SETTINGS:"UI_Flow_P2P_Settings",UI_FLOW_P2P_GROUP_SEND:"UI_Flow_P2P_Group_Send",UI_FLOW_RECEIVER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Receiver_NUX_Chat_Thread_Banner",UI_FLOW_SENDER_NUX_CHAT_THREAD_BANNER:"UI_Flow_Sender_NUX_Chat_Thread_Banner",UI_FLOW_MONEYPENNY_CHECKOUT:"UI_Flow_Moneypenny_Checkout",UI_FLOW_FINANCIAL_INCENTIVES:"UI_Flow_Financial_Incentives",UI_FLOW_FINANCIAL_INCENTIVES_ZERO_INDEX_JEWEL:"UI_Flow_Financial_Incentives_Zero_Index_Jewel",UI_FLOW_PLATFORM_BANNER:"UI_Flow_Platform_Banner"};},null,{});
__d("P2PPaymentLogMessageSubtype",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SENT_IN_GROUP:"sent_in_group",CANCELED_SENDER_RISK:"canceled_sender_risk",CANCELED_DECLINED:"canceled_declined",CANCELED_RECIPIENT_RISK:"canceled_recipient_risk",CANCELED_EXPIRED:"canceled_expired",CANCELED_SAME_CARD:"canceled_same_card",CANCELED_CUSTOMER_SERVICE:"canceled_customer_service",CANCELED_CHARGEBACK:"canceled_chargeback",CANCELED_SYSTEM_FAIL:"canceled_system_fail"};},null,{});
__d("PageMessageEnumTag",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FLAG:"flag",LOW_VALUE:"low_value",SPAM_SPOOFING:"spam_spoofing"};},null,{});
__d("PagesMessagingActionPlacement",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={SPRINGBOARD_INLINE_ACTION:"springboard_inline_action",THREAD_LIST_BATCH_ACTION:"thread_list_batch_action",THREAD_ROW_ACTION_ICON:"thread_row_action_icon",MESSAGE_DIALOG_ACTION_LIST:"message_dialog_action_list",MESSAGE_DIALOG_OPENING:"message_dialog_opening",MESSAGE_DIALOG_SHOWN:"message_dialog_shown",THREAD_TITLE_BAR:"thread_title_bar",HOME_PAGE_PAGELET_INLINE_ACTION:"home_page_pagelet_inline_action",UNKNOWN:"unknown"};},null,{});
__d("PagesMessagingConst",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={LOAD_MESSAGE_THREAD_URI:"\/ajax\/pages\/messages\/load_message_thread.php",ASYNC_ENDPOINT:"\/ajax\/messaging\/async.php",UNANSWERED_FILTER:"unanswered"};},null,{});
__d("StickerAssetType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={IMAGE:"BestEffortImage",SPRITE:"SpriteImage",PADDED_SPRITE:"PaddedSpriteImage"};},null,{});
__d("StoryAttachmentStyle",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={FALLBACK:"fallback",SHARE:"share",OG_COMPOSER_SIMPLE:"og_composer_simple",SPORTS_MATCHUP:"sports_matchup",SHARE_LARGE_IMAGE:"share_large_image",PHOTO:"photo",COVER_PHOTO:"cover_photo",ALBUM:"album",NEW_ALBUM:"new_album",COUPON:"coupon",QUESTION:"question",ANSWER:"answer",OPTION:"option",GALLERY:"gallery",STREAM_PUBLISH:"stream_publish",MUSIC_AGGREGATION:"music_aggregation",ITEM_LIST:"list",HIGH_SCORE:"high_score",SCORE_LEADERBOARD:"score_leaderboard",FRIEND_LIST:"friend_list",CHECKIN:"checkin",POPULAR_OBJECTS:"popular_objects",AVATAR_LIST:"avatar_list",AVATAR:"avatar",AVATAR_WITH_VIDEO:"avatar_with_video",EVENT:"event",MINUTIAE_EVENT:"minutiae_event",EXPERIENCE:"experience",LIFE_EVENT:"life_event",TRAVEL_SLIDESHOW_LIFE_EVENT:"travel_slideshow_life_event",GIFT:"gift",IMAGE_SHARE:"image_share",ANIMATED_IMAGE_SHARE:"animated_image_share",ANIMATED_IMAGE_AUTOPLAY:"animated_image_autoplay",ANIMATED_IMAGE_VIDEO:"animated_image_video",ANIMATED_IMAGE_VIDEO_AUTOPLAY:"animated_image_video_autoplay",NOTE:"note",TOPIC:"topic",FILE_UPLOAD:"file_upload",NOTIFICATION_TARGET:"notification_target",UNAVAILABLE:"unavailable",PAGE_RECOMMENDATION:"page_recommendation",PAGE_VIDEO_PLAYLIST:"page_video_playlist",VIDEO:"video",VIDEO_INLINE:"video_inline",VIDEO_AUTOPLAY:"video_autoplay",VIDEO_SHARE:"video_share",VIDEO_SHARE_HIGHLIGHTED:"video_share_highlighted",VIDEO_SHARE_YOUTUBE:"video_share_youtube",VIDEO_DIRECT_RESPONSE:"video_direct_response",VIDEO_DIRECT_RESPONSE_AUTOPLAY:"video_direct_response_autoplay",MAP:"map",OG_MAP:"og_map",PRODUCT:"product",EXTERNAL_PRODUCT:"external_product",FITNESS_COURSE:"fitness_course",APPLICATION:"application",STICKER:"sticker",EXTERNAL_OG_PRODUCT:"external_og_product",TRAVEL_LOG:"travel_log",MULTI_SHARE:"multi_share",MULTI_SHARE_NO_END_CARD:"multi_share_no_end_card",MULTI_SHARE_SEARCH_END_CARD:"multi_share_search_end_card",YEAR_IN_REVIEW:"year_in_review",AVATAR_LARGE_COVER:"avatar_large_cover",BROADCAST_REQUEST:"broadcast_request",COMMERCE_PRODUCT_ITEM:"commerce_product_item",COMMERCE_STORE:"commerce_store",THIRD_PARTY_PHOTO:"third_party_photo",PROMPT:"prompt",BIRTHDAY:"birthday",DONATIONS_CAMPAIGN:"donations_campaign",DONATE_PROMPT:"donate_prompt",DISCUSSION_CONVERSATION:"discussion_conversation",DISCUSSION_COMMENT:"discussion_comment",GROUP_SELL_PRODUCT_ITEM:"group_sell_product_item",GROUP_SELL_PRODUCT_ITEM_MARK_AS_SOLD:"group_sell_mark_as_sold",GAMETIME:"gametime",GAMETIME_PLAY:"gametime_play",GROUP_REPORTED_POST_QUEUE:"group_reported_post_queue",GROUP_PENDING_POST_QUEUE:"group_pending_post_queue",GROUP_JOIN_REQUEST_QUEUE:"group_join_request_queue",GREETING_CARD:"greeting_card",LEAD_GEN:"lead_gen",ATTACHED_STORY:"attached_story",SOUVENIR:"souvenir",SLIDESHOW:"slideshow",ORION:"orion",ORION_REQUEST:"orion_request",INSTANT_ARTICLE:"instant_article",JOIN_TOPIC_CONVERSATION:"join_topic_conversation",MOMENTS_APP_INVITATION:"moments_app_invitation",MOMENTS_APP_PHOTO_REQUEST:"moments_app_photo_request",RIDE_ORDERED:"ride_ordered",RIDE_RECEIPT:"ride_receipt",BUSINESS_MESSAGE_ITEMS:"business_message_items",RETAIL_CANCELLATION:"retail_cancellation",RETAIL_PROMOTION:"retail_promotion",RETAIL_ITEM:"retail_item",RETAIL_NOW_IN_STOCK:"retail_now_in_stock",RETAIL_RECEIPT:"retail_receipt",RETAIL_SHIPMENT:"retail_shipment",RETAIL_SHIPMENT_FOR_SUPPORTED_CARRIER:"retail_shipment_for_supported_carrier",RETAIL_SHIPMENT_FOR_UNSUPPORTED_CARRIER:"retail_shipment_for_unsupported_carrier",RETAIL_SHIPMENT_TRACKING_EVENT:"retail_shipment_tracking_event",RETAIL_SHIPMENT_TRACKING_EVENT_ETA:"retail_shipment_tracking_event_eta",RETAIL_SHIPMENT_TRACKING_EVENT_IN_TRANSIT:"retail_shipment_tracking_event_in_transit",RETAIL_SHIPMENT_TRACKING_EVENT_OUT_FOR_DELIVERY:"retail_shipment_tracking_event_out_for_delivery",RETAIL_SHIPMENT_TRACKING_EVENT_DELAYED:"retail_shipment_tracking_event_delayed",RETAIL_SHIPMENT_TRACKING_EVENT_DELIVERED:"retail_shipment_tracking_event_delivered",SURVEY:"survey",MESSAGE_LOCATION:"message_location",JOB_OFFER:"job_offer",GROUP_ADD_MEMBERS:"group_add_memebers",RTC_CALL_LOG:"rtc_call_log",EVENT_CALENDAR:"event_calendar",FACEPILE:"facepile",ATTRIBUTED_SHARE:"attributed_share",VIDEO_CINEMAGRAPH:"video_cinemagraph",LOCAL_CONTEXT_SHARE:"local_context_share",H_SCROLL:"h_scroll",EGO_HSCROLL:"ego_hscroll",MEDIA_QUESTION:"media_question",RICH_MEDIA:"rich_media",SQUARE_IMAGE_SHARE:"square_image_share",RETAIL_AGENT_ITEM_SUGGESTION:"retail_agent_item_suggestion",RETAIL_AGENT_ITEM_RECEIPT:"retail_agent_item_receipt",NOTE_COMPOSED:"note_composed",AVATAR_WITH_BIRTHDAY:"avatar_with_birthday",AIRLINE_FLIGHT_RESCHEDULE_UPDATE_BUBBLE:"airline_flight_reschedule_update_bubble",AIRLINE_CONFIRMATION:"airline_confirmation",AIRLINE_CHECK_IN:"airline_check_in",AIRLINE_BOARDING_PASS:"airline_boarding_pass",AIRLINE_FLIGHT_RESCHEDULE_UPDATE:"airline_flight_reschedule_update",LIGHTBOX_VIDEO:"lightbox_video",GLOBALLY_DELETED_MESSAGE_PLACEHOLDER:"globally_deleted_message_placeholder",GENIE_MESSAGE:"genie_message",MOVIE_BOT_MOVIE_LIST:"movie_bot_movie_list",MOVIE_BOT_MOVIE_SHOWTIME_LIST:"movie_bot_movie_showtime_list",AVATAR_WITH_EGO_ACTION:"avatar_with_ego_action",EVENT_TICKET:"event_ticket",VERTICAL_ATTACHMENT_LIST:"vertical_attachment_list",INSTANT_ARTICLE_LEGACY:"instant_article_legacy",FUNDRAISER_PAGE:"fundraiser_page",FINANCIAL_BILL_PAYMENT_REQUEST:"financial_bill_payment_request",GOODWILL_THROWBACK_FRIENDVERSARY_POLAROIDS_CARD:"goodwill_throwback_friendversary_polaroids_card",SAHELI_IMAGE:"saheli_image",LARGE_IMAGE_LIKE:"large_image_like",ASK_FRIENDS:"ask_friends",CULTURAL_MOMENT:"cultural_moment",TELEPHONE_CALL_LOG:"telephone_call_log",SUPER_EMOJI:"super_emoji",BOOK:"book",SUBTOPIC_CUSTOMIZATION_QUESTION:"subtopic_customization_question",SUBTOPIC_CUSTOMIZATION_OPTION:"subtopic_customization_option",RESTAURANT:"restaurant",CONNECTION_QUESTION:"connection_question",CONNECTION_QUESTION_OPTION:"connection_question_option",PYMI_ITEM:"pymi_item",GOODWILL_THROWBACK_FRIENDVERSARY_COLLAGE_CARD:"goodwill_throwback_friendversary_collage_card",CITY:"city",AVATAR_WITH_SHARE:"avatar_with_share",LIGHTWEIGHT_PLACE:"lightweight_place",QUOTED_SHARE:"quoted_share"};},null,{});
__d("URLMatcherConfig",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={tlds:"(?:\\.(com|\ud55c\uad6d|\uc0bc\uc131|\ub2f7\ucef4|\ub2f7\ub137|\u9999\u6e2f|\u9910\u5385|\u98de\u5229\u6d66|\u96c6\u56e2|\u8c37\u6b4c|\u7f51\u7edc|\u7f51\u5e97|\u7f51\u5740|\u7ec4\u7ec7\u673a\u6784|\u79fb\u52a8|\u70b9\u770b|\u6e38\u620f|\u6de1\u9a6c\u9521|\u673a\u6784|\u65f6\u5c1a|\u65b0\u52a0\u5761|\u653f\u5e9c|\u653f\u52a1|\u624b\u673a|\u6211\u7231\u4f60|\u6148\u5584|\u5e7f\u4e1c|\u5de5\u884c|\u5a31\u4e50|\u5927\u62ff|\u5728\u7ebf|\u5546\u6807|\u5546\u5e97|\u5546\u57ce|\u53f0\u7063|\u53f0\u6e7e|\u516c\u76ca|\u516c\u53f8|\u516b\u5366|\u5065\u5eb7|\u4fe1\u606f|\u4f5b\u5c71|\u4f01\u4e1a|\u4e2d\u6587\u7f51|\u4e2d\u570b|\u4e2d\u56fd|\u4e2d\u4fe1|\u4e16\u754c|\u30b3\u30e0|\u30b0\u30fc\u30b0\u30eb|\u307f\u3093\u306a|\u10d2\u10d4|\u0e44\u0e17\u0e22|\u0e04\u0e2d\u0e21|\u0dbd\u0d82\u0d9a\u0dcf|\u0c2d\u0c3e\u0c30\u0c24\u0c4d|\u0b9a\u0bbf\u0b99\u0bcd\u0b95\u0baa\u0bcd\u0baa\u0bc2\u0bb0\u0bcd|\u0b87\u0bb2\u0b99\u0bcd\u0b95\u0bc8|\u0b87\u0ba8\u0bcd\u0ba4\u0bbf\u0baf\u0bbe|\u0aad\u0abe\u0ab0\u0aa4|\u0a2d\u0a3e\u0a30\u0a24|\u09ad\u09be\u09b0\u09a4|\u0938\u0902\u0917\u0920\u0928|\u092d\u093e\u0930\u0924|\u0928\u0947\u091f|\u0915\u0949\u092e|\u0645\u0648\u0642\u0639|\u0645\u0644\u064a\u0633\u064a\u0627|\u0645\u0635\u0631|\u0643\u0648\u0645|\u0642\u0637\u0631|\u0641\u0644\u0633\u0637\u064a\u0646|\u0639\u0645\u0627\u0646|\u0634\u0628\u0643\u0629|\u0633\u0648\u0631\u064a\u0629|\u0633\u0648\u062f\u0627\u0646|\u062a\u0648\u0646\u0633|\u0628\u06be\u0627\u0631\u062a|\u0628\u0627\u0632\u0627\u0631|\u0627\u06cc\u0631\u0627\u0646|\u0627\u0645\u0627\u0631\u0627\u062a|\u0627\u0644\u0645\u063a\u0631\u0628|\u0627\u0644\u0633\u0639\u0648\u062f\u064a\u0629|\u0627\u0644\u062c\u0632\u0627\u0626\u0631|\u0627\u0644\u0627\u0631\u062f\u0646|\u05e7\u05d5\u05dd|\u0570\u0561\u0575|\u049b\u0430\u0437|\u0443\u043a\u0440|\u0441\u0440\u0431|\u0441\u0430\u0439\u0442|\u0440\u0444|\u0440\u0443\u0441|\u043e\u0440\u0433|\u043e\u043d\u043b\u0430\u0439\u043d|\u043c\u043e\u0441\u043a\u0432\u0430|\u043c\u043e\u043d|\u043c\u043a\u0434|\u043a\u043e\u043c|\u0434\u0435\u0442\u0438|\u0431\u0435\u043b|zw|zuerich|zone|zm|zip|za|yt|youtube|yokohama|yoga|yodobashi|ye|yandex|yachts|xyz|xxx|xperia|xn--zfr164b|xn--ygbi2ammx|xn--yfro4i67o|xn--y9a3aq|xn--xkc2dl3a5ee0h|xn--xkc2al3hye2a|xn--xhq521b|xn--wgbl6a|xn--wgbh1c|xn--vuq861b|xn--vhquv|xn--vermgensberatung-pwb|xn--vermgensberater-ctb|xn--unup4y|xn--tckwe|xn--t60b56a|xn--ses554g|xn--s9brj9c|xn--rhqv96g|xn--qcka1pmc|xn--q9jyb4c|xn--pssy2u|xn--pgbs0dh|xn--p1ai|xn--p1acf|xn--ogbpf8fl|xn--o3cw4h|xn--nyqy26a|xn--nqv7fs00ema|xn--nqv7f|xn--node|xn--ngbc5azd|xn--mxtq1m|xn--mk1bu44c|xn--mgbx4cd0ab|xn--mgbpl2fh|xn--mgberp4a5d4ar|xn--mgbc0a9azcg|xn--mgbbh1a71e|xn--mgbayh7gpa|xn--mgbab2bd|xn--mgbaam7a8h|xn--mgba3a4f16a|xn--mgb9awbf|xn--lgbbat1ad8j|xn--l1acc|xn--kput3i|xn--kpry57d|xn--kprw13d|xn--kcrx77d1x4a|xn--j6w193g|xn--j1amh|xn--j1aef|xn--io0a7i|xn--imr513n|xn--i1b6b1a6a2e|xn--hxt814e|xn--h2brj9c|xn--gecrj9c|xn--fzc2c9e2c|xn--fpcrj9c3d|xn--flw351e|xn--fjq720a|xn--fiqz9s|xn--fiqs8s|xn--fiq64b|xn--fiq228c5hs|xn--fhbei|xn--estv75g|xn--d1alf|xn--d1acj3b|xn--czru2d|xn--czrs0t|xn--czr694b|xn--clchc0ea0b2g2a9gcd|xn--cg4bki|xn--c2br7g|xn--c1avg|xn--b4w605ferd|xn--9et52u|xn--9dbq2a|xn--90ais|xn--90a3ac|xn--80aswg|xn--80asehdb|xn--80ao21a|xn--80adxhks|xn--6qq986b3xl|xn--6frz82g|xn--55qx5d|xn--55qw42g|xn--4gbrim|xn--45q11c|xn--45brj9c|xn--42c2d9a|xn--3pxu8k|xn--3e0b707e|xn--3ds443g|xn--3bst00m|xn--30rr7y|xn--1qqw23a|xn--11b4c3d|xin|xerox|xbox|wtf|wtc|ws|world|works|work|wme|wine|windows|win|williamhill|wiki|wien|whoswho|wf|weir|wedding|wed|website|webcam|watch|wang|walter|wales|vu|voyage|voto|voting|vote|vodka|vn|vlaanderen|vistaprint|vista|vision|vin|villas|video|viajes|vi|vg|vet|versicherung|verm\u00f6gensberatung|verm\u00f6gensberater|ventures|vegas|ve|vc|vacations|va|uz|uy|us|uol|uno|university|uk|ug|ubs|ua|tz|tw|tv|tui|tt|trust|travel|training|trading|trade|tr|toys|toyota|town|tours|toshiba|toray|top|tools|tokyo|today|to|tn|tm|tl|tk|tj|tirol|tires|tips|tienda|tickets|theater|thd|th|tg|tf|tennis|temasek|telefonica|tel|technology|tech|team|td|tc|taxi|tax|tattoo|tatar|tatamotors|taipei|sz|systems|sydney|sy|sx|swiss|swatch|sv|suzuki|surgery|surf|support|supply|supplies|sucks|su|style|study|studio|statoil|starhub|st|srl|sr|spreadbetting|spiegel|space|soy|sony|solutions|solar|sohu|software|social|soccer|so|sncf|sn|sm|sl|skype|sky|ski|sk|sj|site|singles|si|shriram|show|shoes|shiksha|sh|sg|sexy|sex|sew|services|sener|seek|seat|se|sd|scot|scor|science|schwarz|schule|school|scholarships|schmidt|scb|sca|sc|sb|saxo|sarl|sap|sanofi|sandvikcoromant|sandvik|samsung|sale|sakura|saarland|sa|ryukyu|rw|run|ruhr|ru|rsvp|rs|rodeo|rocks|ro|rip|rio|ricoh|rich|reviews|review|restaurant|rest|republican|report|repair|rentals|rent|ren|reit|reisen|reise|rehab|redstone|red|recipes|realty|realtor|re|racing|quebec|qpon|qa|py|pw|pub|pt|ps|property|properties|prof|productions|prod|pro|press|praxi|pr|post|porn|poker|pohl|pn|pm|plus|plumbing|play|place|pl|pk|pizza|pink|pictures|pictet|pics|piaget|physio|photos|photography|photo|philips|pharmacy|ph|pg|pf|pet|pe|party|parts|partners|paris|panerai|page|pa|ovh|otsuka|osaka|organic|org|orange|oracle|ooo|online|onl|ong|one|omega|om|okinawa|office|nz|nyc|nu|ntt|nrw|nra|nr|np|nokia|no|nl|nissan|ninja|nico|ni|nhk|ngo|ng|nf|nexus|news|new|neustar|network|netbank|net|nec|ne|nc|navy|name|nagoya|nadex|na|mz|my|mx|mw|mv|museum|mu|mtpc|mtn|mt|ms|mr|mq|mp|movistar|movie|mov|motorcycles|moscow|mortgage|mormon|montblanc|money|monash|moe|moda|mobi|mo|mn|mma|mm|ml|mk|mini|mil|microsoft|miami|mh|mg|menu|men|memorial|meme|melbourne|meet|media|me|md|mc|mba|marriott|markets|marketing|market|mango|management|man|maison|maif|madrid|ma|ly|lv|luxury|luxe|lupin|lu|ltda|lt|ls|lr|love|lotto|lotte|london|lol|loans|loan|lk|lixil|live|link|limo|limited|lighting|life|lidl|liaison|li|lgbt|lexus|legal|leclerc|lease|lds|lc|lb|lawyer|law|latrobe|lat|lasalle|land|lancaster|lacaixa|la|kz|kyoto|ky|kw|kred|krd|kr|kp|komatsu|koeln|kn|km|kiwi|kitchen|kim|ki|kh|kg|ke|kddi|kaufen|juegos|jprs|jp|joburg|jobs|jo|jm|jll|jlc|jewelry|jetzt|je|jcb|java|iwc|itau|it|istanbul|ist|is|irish|ir|iq|ipiranga|io|investments|international|int|insure|institute|ink|ing|info|infiniti|industries|in|immobilien|immo|im|il|iinet|ifm|ie|id|icu|ice|icbc|ibm|hu|ht|hsbc|hr|how|house|hotmail|hoteles|hosting|host|horse|honda|homes|homedepot|holiday|holdings|hockey|hn|hm|hk|hiv|hitachi|hiphop|hermes|here|help|healthcare|haus|hangout|hamburg|gy|gw|guru|guitars|guide|guge|gu|gt|gs|group|gripe|green|gratis|graphics|gr|gq|gp|gov|gop|google|goog|goo|golf|goldpoint|gold|gn|gmx|gmo|gmail|gm|globo|global|gle|glass|gl|giving|gives|gifts|gift|gi|gh|ggee|gg|gf|genting|gent|ge|gdn|gd|gbiz|gb|garden|game|gallery|gal|ga|fyi|futbol|furniture|fund|frogans|frl|fr|foundation|forum|forsale|forex|football|foo|fo|fm|fly|flsmidth|flowers|florist|flights|fk|fj|fitness|fit|fishing|fish|firmdale|financial|finance|film|fi|feedback|fashion|farm|fans|fan|family|faith|fail|fage|express|exposed|expert|exchange|everbank|events|eus|eurovision|eu|et|estate|esq|es|erni|er|equipment|epson|enterprises|engineering|engineer|energy|emerck|email|eg|ee|education|edu|ec|eat|earth|dz|dvag|durban|drive|download|doosan|domains|doha|dog|docs|do|dnp|dm|dk|dj|discount|directory|direct|digital|diet|diamonds|dev|design|desi|dentist|dental|democrat|delta|delivery|degree|deals|de|dclk|day|datsun|dating|date|dance|dad|dabur|cz|cyou|cymru|cy|cx|cw|cv|cuisinella|cu|cruises|crs|crown|cricket|creditcard|credit|cr|courses|coupons|country|corsica|coop|cool|cooking|contractors|consulting|construction|condos|computer|company|community|commbank|com|cologne|college|coffee|codes|coach|co|cn|cm|club|cloud|clothing|clinic|click|cleaning|claims|cl|ck|city|citic|cisco|ci|church|chrome|christmas|chloe|cheap|chat|channel|chanel|ch|cg|cfd|cfa|cf|cern|ceo|center|ceb|cd|cc|cbn|cba|catering|cat|casino|cash|casa|cartier|cars|careers|career|care|cards|caravan|capital|capetown|canon|cancerresearch|camp|camera|cal|cafe|cab|ca|bzh|bz|by|bw|bv|buzz|business|builders|build|budapest|bt|bs|brussels|brother|broker|bridgestone|bradesco|br|boutique|boots|boo|bond|boats|bo|bnpparibas|bnl|bn|bmw|bm|blue|bloomberg|blackfriday|black|bj|biz|bio|bingo|bing|bike|bid|bible|bi|bharti|bh|bg|bf|bet|best|berlin|bentley|beer|be|bd|bcn|bbva|bbc|bb|bayern|bauhaus|bargains|barclays|barclaycard|barcelona|bar|bank|band|ba|azure|az|axa|ax|aw|autos|auto|audio|auction|au|attorney|at|associates|asia|as|arpa|army|archi|ar|aquarelle|aq|app|apartments|ao|android|amsterdam|am|alsace|allfinanz|al|airtel|airforce|aig|ai|agency|ag|afl|af|aero|aeg|ae|adult|ads|ad|actor|active|accountants|accountant|accenture|academy|ac|abogado|abbott|abb))"};},null,{});
__d('BusinessURI.brands',['BizSiteIdentifier.brands','BusinessConf','URI'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,j);l=k&&k.prototype;function m(o,p){'use strict';l.constructor.call(this,o);if(h.isBizSite()){var q=p||h.getBusinessID();if(q)this.addQueryData(i.BIZ_ID_PARAM_NAME,q);if(!this.$BusinessURI1(this.getSubdomain()))this.setSubdomain(i.DOMAIN);}return this;}m.prototype.$BusinessURI1=function(o){'use strict';return o==='developers';};var n=function(o,p){return new m(o,p);};f.exports=n;},null);
__d('AjaxRequest',['ErrorUtils','Keys','PHPQuerySerializer','TimeSlice','URI','UserAgent_DEPRECATED','getSameOriginTransport','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(t,u,v){this.xhr=n();if(!(u instanceof l))u=new l(u);if(v&&t=='GET'){u.setQueryData(v);}else this._params=v;this.method=t;this.uri=u;this.xhr.open(t,u);}var q=window.XMLHttpRequest&&'withCredentials' in new XMLHttpRequest();p.supportsCORS=function(){return q;};p.ERROR='ar:error';p.TIMEOUT='ar:timeout';p.PROXY_ERROR='ar:proxy error';p.TRANSPORT_ERROR='ar:transport error';p.SERVER_ERROR='ar:http error';p.PARSE_ERROR='ar:parse error';p.SERVICE_UNAVAILABLE='ar:noservice';p._inflight=[];function r(){var t=p._inflight;p._inflight=[];t.forEach(function(u){u.abort();});}function s(t){t.onJSON=t.onError=t.onSuccess=null;clearTimeout(t._timer);if(t.xhr&&t.xhr.readyState<4){t.xhr.abort();t.xhr=null;}p._inflight=p._inflight.filter(function(u){return u&&u!=t&&u.xhr&&u.xhr.readyState<4;});}Object.assign(p.prototype,{timeout:60000,streamMode:true,prelude:/^for \(;;\);/,status:null,_eol:-1,_call:function(t){if(this[t])this[t](this);},_parseStatus:function(){var t;try{this.status=this.xhr.status;t=this.xhr.statusText;}catch(u){if(this.xhr.readyState>=4){this.errorType=p.TRANSPORT_ERROR;this.errorText=u.message;}return;}if(this.status===0&&!/^(file|ftp)/.test(this.uri)){this.errorType=p.TRANSPORT_ERROR;}else if(this.status>=100&&this.status<200){this.errorType=p.PROXY_ERROR;}else if(this.status>=200&&this.status<300){return;}else if(this.status>=300&&this.status<400){this.errorType=p.PROXY_ERROR;}else if(this.status>=400&&this.status<500){this.errorType=p.SERVER_ERROR;}else if(this.status===503){this.errorType=p.SERVICE_UNAVAILABLE;}else if(this.status>500&&this.status<600){this.errorType=p.PROXY_ERROR;}else if(this.status==1223){return;}else if(this.status>=12001&&this.status<=12156){this.errorType=p.TRANSPORT_ERROR;}else{t='unrecognized status code: '+this.status;this.errorType=p.ERROR;}if(!this.errorText)this.errorText=t;},_parseResponse:function(){var t,u=this.xhr.readyState;try{t=this.xhr.responseText||'';}catch(v){if(u>=4){this.errorType=p.ERROR;this.errorText='responseText not available - '+v.message;}return;}while(this.xhr){var w=this._eol+1,x=this.streamMode?t.indexOf('\n',w):t.length;if(x<0&&u==4)x=t.length;if(x<=this._eol)break;var y=t;if(this.streamMode)y=t.substr(w,x-w).replace(/^\s*|\s*$/g,'');if(w===0&&this.prelude)if(this.prelude.test(y))y=y.replace(this.prelude,'');this._eol=x;if(y){try{this.json=JSON.parse(y);}catch(v){var z=/(<body[\S\s]+?<\/body>)/i.test(t)&&RegExp.$1,aa={message:v.message,'char':w,excerpt:(w===0&&z||y).substr(512)};this.errorType=p.PARSE_ERROR;this.errorText='parse error - '+JSON.stringify(aa);return;}h.applyWithGuard(this._call,this,['onJSON']);}}},_onReadyState:function(){var t=this.xhr&&this.xhr.readyState||0;if(this.status==null&&t>=2)this._parseStatus();if(!this.errorType&&this.status!=null)if(t==3&&this.streamMode||t==4)this._parseResponse();if(this.errorType||t==4){this._time=Date.now()-this._sentAt;this._call(!this.errorType?'onSuccess':'onError');s(this);}},send:function(t){this.xhr.onreadystatechange=k.guard(this._onReadyState.bind(this),'AjaxRequest xhr.onreadystatechange');var u=this.timeout;if(u)this._timer=o((function(){this.errorType=p.TIMEOUT;this.errorText='timeout';this._time=Date.now()-this._sentAt;this._call('onError');s(this);}).bind(this),u);p._inflight.push(this);if(this.method=='POST')this.xhr.setRequestHeader('Content-Type','application/x-www-form-urlencoded');this._sentAt=Date.now();this.xhr.send(t?j.serialize(t):'');},abort:function(){s(this);},toString:function(){var t='[AjaxRequest readyState='+this.xhr.readyState;if(this.errorType)t+=' errorType='+this.errorType+' ('+this.errorText+')';return t+']';},toJSON:function(){var t={json:this.json,status:this.status,errorType:this.errorType,errorText:this.errorText,time:this._time};if(this.errorType)t.uri=this.uri;for(var u in t)if(t[u]==null)delete t[u];return t;}});if(window.addEventListener&&m.firefox())window.addEventListener('keydown',function(event){if(event.keyCode===i.ESC)event.prevent();},false);if(window.attachEvent)window.attachEvent('onunload',r);f.exports=p;},null);
__d('ChannelSubdomain',['Event','JSLogger','Run','setTimeoutAcrossTransitions','LogHistory','WebStorage'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=c('LogHistory').getInstance('channel'),m=c('WebStorage').getLocalStorage(),n=i.create('channel'),o='channel_sub:',p=7,q=100*1000,r=null,s;function t(){if(s){clearTimeout(s);s=null;}if(m&&r!=null)m.removeItem(o+r);r=null;}function u(v,w,x){var y=(v-1)*p;if(x){if(s)clearTimeout(s);r=s=null;}if(w==null)w=Math.floor(Math.random()*y);if(r==null)if(m){var z=[];for(var aa=0;aa<m.length;aa++){var ba=m.key(aa);if(ba.indexOf(o)===0){var ca=parseInt(ba.substr(o.length),10);z[ca]=parseInt(m.getItem(ba),10);}}var da=Date.now()-q;for(aa=0;aa<y;aa++){var ea=(aa+w)%y;if(!z[ea]||z[ea]<da){r=ea;break;}}if(r!=null){var fa=function(){try{m.setItem(o+r,Date.now());}catch(ga){l.warn('subdomain set failed',ga.message);}s=k(fa,q/2);};fa();}else{l.warn('no channel subdomain',z);n.error('subdomain_overflow');}if(typeof window.onpageshow!='undefined'){h.listen(window,'pagehide',t);}else j.onUnload(t);}else r=w;return r==null?null:r%p;}f.exports={allocate:u,clear:t};},null);
__d('DocRPC',['ErrorUtils'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={_apis:{},_dispatch:function(j){var k;try{j=JSON.parse(j);}catch(l){throw new Error('DocRPC unparsable dispatch: "'+j+'"');}if(i._apis.hasOwnProperty(j.api)){var m=i._apis[j.api];if(m[j.method])k=h.applyWithGuard(m[j.method],m,j.args);}if(k===undefined)k=null;return JSON.stringify(k);},publish:function(j,k){i._apis[k]=j;},proxy:function(j,k,l){var m={};l.forEach(function(n){m[n]=function(){var o={api:k,method:n,args:Array.prototype.slice.call(arguments)},p;try{if(j.closed)throw new Error('DocRPC window closed');p=j.DocRPC._dispatch(JSON.stringify(o));}catch(q){h.reportError(q);return;}if(typeof p=='string')try{p=JSON.parse(p);}catch(q){throw new Error('DocRPC '+k+'.'+n+' unparsable return: "'+p+'"');}return p;};});return m;}};f.exports=b.DocRPC=i;},null);
__d('ChannelTransport',['AjaxRequest','ChannelConstants','DocRPC','LogHistory','TimeSlice','URI','bind','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=k.getInstance('channel');function q(){return (1048576*Math.random()|0).toString(36);}function r(ba,ca){var da=ba.subdomain;da=da===null?'':da+'-';var ea=new m(ca).setDomain(da+ba.host+'.'+ba.domain).setPort(ba.port).setSecure(new m(window.location.href).isSecure());return ea;}function s(ba){var ca={partition:ba.partition,cb:q(),failure:ba.pingFailuresOnSubdomain};if(ba.sticky_token)ca.sticky_token=ba.sticky_token;if(ba.sticky_pool)ca.sticky_pool=ba.sticky_pool;var da=r(ba,'/p').setQueryData(ca);p.log('start_p',{uri:da.toString()});var ea=new h('GET',da);if(h.supportsCORS())ea.xhr.withCredentials=true;var fa=function(ga){p.log('finish_p',{xhr:ga.toJSON?ga.toJSON():ga,subdomain:ba.subdomain,fullHost:ba.fullHost});};ea.onError=function(ga){fa(ga);if(ba.subdomain===null)return;ba.pingFailuresOnSubdomain++;ba.subdomain++;if(ba.subdomain>6)ba.subdomain=0;};ea.timeout=ba.P_TIMEOUT;ea.onSuccess=fa;ea.send();}function t(ba,ca,da){var ea=new Image(),fa=0,ga=function(ja){ea.abort();return ja?ca():da();};ea.onload=l.guard(function(){p.log('ping_ok',{duration:Date.now()-fa});ga(true);},'ChannelTransport image.onload');ea.onerror=l.guard(function(){s(ba);ga(false);},'ChannelTransport image.onerror');var ha=o(ea.onerror,10000);ea.abort=function(){if(ha){clearTimeout(ha);ha=null;}ea.onload=ea.onerror=null;};var ia={partition:ba.partition,cb:q()};if(ba.sticky_token)ia.sticky_token=ba.sticky_token;if(ba.sticky_pool)ia.sticky_pool=ba.sticky_pool;if(ba.lastRequestErrorReason){ia.reason=ba.lastRequestErrorReason;ba.lastRequestErrorReason=null;}if(ba.uid&&ba.viewerUid){ia.uid=ba.uid;ia.viewer_uid=ba.viewerUid;}if(ba.watchdog&&ba.watchdog.enabled)ia.wtc=ba.watchdog.doSerialize();fa=Date.now();ea.src=r(ba,'/ping').setQueryData(ia);return ea;}function u(ba,ca){var da={channel:ba.user_channel,partition:ba.partition,clientid:ba.sessionID,cb:q(),cap:0,uid:ba.uid,viewer_uid:ba.viewerUid};if(ba.sticky_token)da.sticky_token=ba.sticky_token;if(ba.sticky_pool)da.sticky_pool=ba.sticky_pool;if(ba.profile)da.profile=ba.profile;if(ba.capabilities)da.cap=ba.capabilities;da.id=ca;var ea=r(ba,'/add_bud').setQueryData(da),fa=new h('GET',ea);if(h.supportsCORS())fa.xhr.withCredentials=true;fa.onError=function(ga){p.warn('add_buddy_error');};fa.onSuccess=function(ga){p.log('add_buddy_ok');};fa.timeout=ba.P_TIMEOUT;fa.send();}function v(ba){var ca={channel:ba.user_channel,partition:ba.partition,clientid:ba.sessionID,cb:q(),cap:0,uid:ba.uid,viewer_uid:ba.viewerUid};if(ba.sticky_token)ca.sticky_token=ba.sticky_token;if(ba.sticky_pool)ca.sticky_pool=ba.sticky_pool;if(ba.is_offline||ba.shouldSuppressPresence){ca.state='offline';}else ca.state='active';if(ca.state===ba.lastPresenceState)return;ba.lastPresenceState=ca.state;if(ba.profile)ca.profile=ba.profile;if(ba.capabilities)ca.cap=ba.capabilities;var da=r(ba,'/active_ping').setQueryData(ca),ea=new h('GET',da);if(h.supportsCORS())ea.xhr.withCredentials=true;ea.onError=function(fa){p.warn('active_ping_error');};ea.onSuccess=function(fa){p.log('active_ping_ok');};ea.timeout=ba.P_TIMEOUT;ea.send();}function w(ba,ca,da,ea){var fa=new Date(),ga=-1;if(ba.userActive>0){ga=(fa-ba.userActive)/1000|0;if(ga<0)p.warn('idle_regression',{idleTime:ga,now:fa.getTime(),userActive:ba.userActive});}var ha={channel:ba.user_channel,seq:ba.seq,partition:ba.partition,clientid:ba.sessionID,cb:q(),idle:ga,qp:'y',cap:0};if(!!ba.watchdog&&ba.watchdog.enabled)ha.wtc=ba.watchdog.doSerialize();if(ba.ready)if(ba.seqTurSentAt==-1||ba.seqTurSentAt==ba.seq){ha.tur=ba.timeUntilReady;ha.qpmade=ba.queueMade;ba.seqTurSentAt=ba.seq;}if(ba.irisSequenceId)ha.isq=ba.irisSequenceId;ha.msgs_recv=ba.estimatedReceived;if(ba.uid&&ba.viewerUid){ha.uid=ba.uid;ha.viewer_uid=ba.viewerUid;}if(ba.stableDeviceId)ha.sdi=1;if(ba.sticky_token){ha.sticky_token=ba.sticky_token;}else if(ba.msgr_region)ha.msgr_region=ba.msgr_region;if(ba.sticky_pool)ha.sticky_pool=ba.sticky_pool;if('trace_id' in ba)ha.traceid=ba.trace_id;if(ba.is_offline||ba.shouldSuppressPresence){ha.state='offline';}else if(ba.userActive>0&&ga<60)ha.state='active';ba.lastPresenceState=ha.state;if(ba.streamingCapable){ha.mode='stream';ha.format='json';}if(ba.profile)ha.profile=ba.profile;if(ba.capabilities)ha.cap=ba.capabilities;var ia=r(ba,'/pull').setQueryData(ha),ja=ba.fantail_enabled?'POST':'GET',ka=new h(ja,ia);if(h.supportsCORS())ka.xhr.withCredentials=true;ka.timeout=ba.streamingCapable?ba.STREAMING_TIMEOUT:ba.LONGPOLL_TIMEOUT;ka.onJSON=ca;ka.onSuccess=da;ka.onError=function(){var na=this.status==12002&&this._time>=ba.MIN_12002_TIMEOUT||this.status==504&&this._time>=ba.MIN_504_TIMEOUT,oa=na?da:ea;return oa&&oa.apply(this,arguments);};if(ba.fantail_logs&&ba.fantail_logs.length>0){var la={};for(var ma=0;ma<ba.fantail_logs.length;ma++)Object.assign(la,ba.fantail_logs[ma]);ka.send(la);ba.fantail_logs=[];}else ka.send();ba.inStreaming=ba.streamingCapable;return ka;}function x(ba){this.manager=ba;this.init&&this.init();}function y(ba){x.apply(this,arguments);}Object.assign(y.prototype,{logName:'CORS',enterState:function(ba,ca){if(this._request){this._request.abort();this._request=null;}if(ba=='init')o(n(this.manager,'exitState',{status:i.OK,stateId:ca.stateId}),ca.fullReloadAsSuccess?0:3000);if(!/pull|ping/.test(ba))return;var da=this.manager;if(ba=='ping'){this._request=t(ca,n(da,'exitState',{status:i.OK,stateId:ca.stateId}),n(da,'exitState',{status:i.ERROR,stateId:ca.stateId}));}else if(ba=='pull')this._request=w(ca,n(da,'_processTransportData',ca.stateId),n(da,'exitState',{status:i.OK,stateId:ca.stateId}),n(da,'exitState',{status:i.ERROR,stateId:ca.stateId}));}});function z(ba){p.log('iframe_init_constructor');x.apply(this,arguments);this._iframe=document.createElement('iframe');this._iframe.style.display='none';document.body.appendChild(this._iframe);j.publish(this,'outerTransport');}Object.assign(z.prototype,{logName:'iframe',_initIframe:function(ba){p.log('iframe_init_start');window.onchanneliframeready=function(){p.log('iframe_resources');return ba.resources;};window.onchanneliframeloaded=function(){p.log('iframe_loaded');};if(ba){this._iframeURI=r(ba,ba.path);if(ba.resources){var ca=this._iframeURI.getDomain();ba.resources=ba.resources.map(function(fa){var ga=new m(fa);if(ga.getPath().startsWith('/intern/rsrc.php')&&ga.getQueryData().origin!==undefined)return ga.addQueryData('origin',ca).toString();return fa;});}if(ba.bustIframe){var da={partition:ba.partition,cb:q()};this._iframeURI.setQueryData(da);}}else this._iframeURI='about:blank';this._iframeProxy=null;try{this._iframe.contentWindow.location.replace(this._iframeURI);p.log('iframe_uri_set');}catch(ea){p.error('iframe_uri_set_error',ea);this.exitState({status:i.ERROR,stateId:ba.stateId},ea+'');}},enterState:function(ba,ca){if(ba=='init'){this._initIframe(ca);}else if(/idle|ping|pull/.test(ba)){if(this._iframeProxy){this._iframeProxy.enterState.apply(this._iframeProxy,arguments);}else if(ba!='idle')this.exitState({status:i.ERROR,stateId:ca.stateId},'iframe not yet loaded');}else if(ba=='shutdown')this._initIframe();},_processTransportData:function(){this.manager._processTransportData.apply(this.manager,arguments);},exitState:function(ba){if(this.manager.state=='init'&&ba.status==i.OK)this._iframeProxy=j.proxy(this._iframe.contentWindow,'innerTransport',['enterState'],(this._iframeURI+'').replace(/iframe.*/,''));if(/ping|pull/.test(this.manager.state)&&!this._iframeProxy)return;this.manager.exitState.apply(this.manager,arguments);}});function aa(){this.init=this.init.bind(this);x.apply(this,arguments);}Object.assign(aa.prototype,{logName:'iframe(inner)',init:function(){j.publish(this,'innerTransport');try{var ca=j.proxy(window.parent,'outerTransport',['_processTransportData','exitState'],top.DocRPC.origin);Object.assign(this,ca);this.exitState({status:i.OK,stateId:1e+06});}catch(ba){p.error('iframe_inner_init_error',ba);}},enterState:function(ba,ca){if(this._request){this._request.abort();this._request=null;}if(ba=='ping'){this._request=t(ca,n(this,'exitState',{status:i.OK,stateId:ca.stateId}),n(this,'exitState',{status:i.ERROR,stateId:ca.stateId}));}else if(ba=='pull')this._request=w(ca,n(this,'_processTransportData',ca.stateId),n(this,'exitState',{status:i.OK,stateId:ca.stateId}),n(this,'exitState',{status:i.ERROR,stateId:ca.stateId}));}});f.exports={getURI:r,Transport:x,CORSTransport:y,IframeTransport:z,IframeInnerTransport:aa,sendActivePing:v,sendAdditionalBuddyRequest:u};},null);
__d('PresenceUtil',['CurrentUser','randomInt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i(0,4294967295)+1;function k(){return j;}function l(){return h.isLoggedInNow();}f.exports={getSessionID:k,hasUserCookie:l};},null);
__d('PresencePrivacy',['Arbiter','AsyncRequest','ChannelConstants','CurrentUser','PresencePrivacyInitialData','JSLogger','PresenceUtil'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o='/ajax/chat/privacy/settings.php',p='/ajax/chat/privacy/online_policy.php',q='/ajax/chat/privacy/visibility.php',r='friend_visibility',s='visibility',t='online_policy',u=babelHelpers._extends({},l.privacyData),v=l.visibility,w=babelHelpers._extends({},l.privacyData),x=v,y=l.onlinePolicy,z=y,aa=[],ba=false;function ca(){return m.create('blackbird');}var da=Object.assign(new h(),{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1});function ea(qa){var ra;for(ra in qa){var sa=qa[ra];if(ra==k.getID()){ca().error('set_viewer_visibility');throw new Error("Invalid to set current user's visibility");}switch(sa){case da.WHITELISTED:case da.BLACKLISTED:case da.UNLISTED:break;default:ca().error('set_invalid_friend_visibility',{id:ra,value:sa});throw new Error("Invalid state: "+sa);}}for(ra in qa)u[ra]=qa[ra];da.inform('privacy-changed');}function fa(qa,ra){var sa={};sa[qa]=ra;ea(sa);}function ga(qa){switch(qa){case da.ONLINE:case da.OFFLINE:break;default:ca().error('set_invalid_visibility',{value:qa});throw new Error("Invalid visibility: "+qa);}v=qa;da.inform('privacy-changed');da.inform('privacy-user-presence-changed');h.inform('chat/visibility-changed',{sender:this});}function ha(qa){switch(qa){case da.ONLINE_TO_WHITELIST:case da.ONLINE_TO_BLACKLIST:break;default:throw new Error("Invalid default online policy: "+qa);}y=qa;da.inform('privacy-user-presence-changed');da.inform('privacy-changed');}function ia(qa,ra){ba=true;qa.send();}function ja(qa,ra){aa.push({request:qa,data:ra});if(!ba){var sa=aa.shift();ia(sa.request,sa.data);}}function ka(qa,ra){var sa=qa.type;if(sa===r){var ta=ra.payload.user_availabilities;if(!Array.isArray(ta)){da.inform('privacy-availability-changed',{user_availabilities:ta});for(var ua in qa.settings)w[ua]=qa.settings[ua];}}else{if(sa===s){x=qa.visibility;}else if(sa===t)z=qa.online_policy;da.inform('privacy-user-presence-response');}ca().log('set_update_response',{data:qa,response:ra});}function la(qa,ra){if(v!==x)ga(x);if(y!==z)ha(z);Object.assign(u,w);da.inform('privacy-changed');aa=[];ca().log('set_error_response',{data:qa,response:ra});}function ma(qa){ba=false;if(aa.length>0){var ra=aa.shift();ia(ra.request,ra.data);}}function na(qa,ra){if(n!=null){var sa=qa.getData();sa.window_id=n.getSessionID();qa.setData(sa);}qa.setHandler(ka.bind(this,ra)).setErrorHandler(la.bind(this,ra)).setTransportErrorHandler(la.bind(this,ra)).setFinallyHandler(ma.bind(this)).setAllowCrossPageTransition(true);return qa;}function oa(qa,ra,sa){return na(new i(qa).setData(ra),sa);}function pa(qa,ra){var sa=ra.obj;if(sa.viewer_id!=k.getID()){ca().error('invalid_viewer_for_channel_message',{type:qa,data:ra});throw new Error("Viewer got from the channel is not the real viewer");}if(sa.window_id===n.getSessionID())return;var ta=sa.data;if(sa.event=='access_control_entry'){ta.target_ids.forEach(function(va){fa(va,ta.setting);w[va]=ta.setting;});}else{if(sa.event=='visibility_update'){var ua=!!ta.visibility?da.ONLINE:da.OFFLINE;ga(ua);x=ua;}else if(sa.event=='online_policy_update'){ha(ta.online_policy);z=ta.online_policy;}da.inform('privacy-user-presence-response');}ca().log('channel_message_received',{data:ra.obj});}Object.assign(da,{WHITELISTED:1,BLACKLISTED:-1,UNLISTED:0,ONLINE:1,OFFLINE:0,ONLINE_TO_WHITELIST:0,ONLINE_TO_BLACKLIST:1,init:function(qa,ra,sa){},setVisibility:function(qa){x=v;ga(qa);var ra={visibility:qa},sa={type:s,visibility:qa},ta=oa(q,ra,sa);ja(ta,sa);ca().log('set_visibility',{data:ra});return qa;},getVisibility:function(){return v;},setOnlinePolicy:function(qa){z=y;ha(qa);var ra={online_policy:qa},sa={type:t,online_policy:qa},ta=oa(p,ra,sa);ja(ta,sa);ca().log('set_online_policy',{data:ra});return qa;},getOnlinePolicy:function(){return y;},getFriendVisibility:function(qa){return u[qa]||da.UNLISTED;},isUserOffline:function(){return this.getVisibility()===da.OFFLINE;},allows:function(qa){if(this.isUserOffline())return false;var ra=this.getOnlinePolicy();return ra===da.ONLINE_TO_WHITELIST?u[qa]==da.WHITELISTED:u[qa]!=da.BLACKLISTED;},setFriendsVisibility:function(qa,ra){if(qa.length>0){var sa={};for(var ta=0;ta<qa.length;ta++){var ua=qa[ta];w[ua]=u[ua];sa[ua]=ra;}ea(sa);var va=ra;if(va==da.UNLISTED)va=w[qa[0]];var wa={users:qa,setting:ra,setting_type:va},xa={type:r,settings:sa},ya=oa(o,wa,xa);ja(ya,xa);ca().log('set_friend_visibility',{data:wa});}return ra;},setFriendVisibilityMap:function(qa,ra){for(var sa in qa)w[sa]=u[sa];ea(qa);var ta={type:r,settings:qa};ja(na(ra,ta),ta);ca().log('set_friend_visibility_from_map',{data:qa});},allow:function(qa){if(this.allows(qa)){ca().error('allow_already_allowed');throw new Error("allow() should only be called for users that "+"are not already allowed");}if(this.getVisibility()===da.OFFLINE){ca().error('allow_called_while_offline');throw new Error("allow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_WHITELIST?da.WHITELISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},disallow:function(qa){if(!this.allows(qa)){ca().error('disallow_already_disallowed');throw new Error("disallow() should only be called for users that "+"are not already disallowed");}if(this.getVisibility()===da.OFFLINE){ca().error('disallow_called_while_offline');throw new Error("disallow() should only be called when the user is already online");}var ra=this.getOnlinePolicy()===da.ONLINE_TO_BLACKLIST?da.BLACKLISTED:da.UNLISTED;return this.setFriendsVisibility([qa],ra);},getBlacklist:function(){var qa=[];for(var ra in u)if(u[ra]===da.BLACKLISTED)qa.push(ra);return qa;},getWhitelist:function(){var qa=[];for(var ra in u)if(u[ra]===da.WHITELISTED)qa.push(ra);return qa;},getMapForTest:function(){return u;},setMapForTest:function(qa){u=qa;}});da.inform('privacy-changed');da.inform('privacy-user-presence-changed',h.BEHAVIOR_STATE);ca().log('initialized',{visibility:v,policy:y});h.subscribe(m.DUMP_EVENT,function(qa,ra){ra.presence_privacy={initial:l.privacyData,current:u};});h.subscribe(j.getArbiterType('privacy_changed'),pa.bind(this));h.subscribe(j.ON_CONFIG,(function(qa,ra){var sa=ra.getConfig('visibility',null);if(sa!==null&&typeof sa!=='undefined'){var ta=sa?da.ONLINE:da.OFFLINE;ga(ta);ca().log('config_visibility',{vis:ta});}}).bind(this));f.exports=da;},null);
__d('ChatVisibility',['Arbiter','JSLogger','PresencePrivacy'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={isOnline:function(){return j.getVisibility()===j.ONLINE;},hasBlackbirdEnabled:function(){return this.isVisibleToMostFriends()||this.isVisibleToSomeFriends();},isVisibleToMostFriends:function(){return j.getOnlinePolicy()===j.ONLINE_TO_BLACKLIST&&j.getBlacklist().length>0;},isVisibleToSomeFriends:function(){return j.getOnlinePolicy()===j.ONLINE_TO_WHITELIST&&j.getWhitelist().length>0;},goOnline:function(l){if(j.getVisibility()===j.OFFLINE){i.create('blackbird').log('chat_go_online');j.setVisibility(j.ONLINE);h.inform('chat-visibility/go-online');}l&&l();},goOffline:function(l){if(j.getVisibility()===j.ONLINE){i.create('blackbird').log('chat_go_offline');j.setVisibility(j.OFFLINE);h.inform('chat-visibility/go-offline');}l&&l();},toggleVisibility:function(){if(k.isOnline()){k.goOffline();}else k.goOnline();}};f.exports=k;},null);
__d('FBAjaxRequest',['AjaxRequest','getAsyncParams'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l,m){m=babelHelpers._extends({},i(k),m);var n=new h(k,l,m);n.streamMode=false;var o=n._call;n._call=function(p){if(p=='onJSON'&&this.json){if(this.json.error){this.errorType=h.SERVER_ERROR;this.errorText='AsyncResponse error: '+this.json.error;}this.json=this.json.payload;}o.apply(this,arguments);};n.ajaxReqSend=n.send;n.send=function(p){this.ajaxReqSend(babelHelpers._extends({},p,m));};return n;}f.exports=j;},null);
__d("MovingStat",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i){i=i||60000;var j={t:new Date(),count:0,v:0},k=j,l=0,m=0;function n(){var o=new Date()-i;while(k&&k.next&&k.t<o){l-=k.v;m-=k.count;k=k.next;}}this.add=function(o){l+=o;m++;var p=new Date();if(p-j.t<1000){j.v+=o;j.count++;}else{j.next={t:p,v:o,count:1};j=j.next;n();}};this.tally=function(o){o=o||1000;n();return {sum:l,count:m,timeAverage:l*o/i};};}f.exports=h;},null);
__d('Dcode',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h,i={},j={_:'%',A:'%2',B:'000',C:'%7d',D:'%7b%22',E:'%2c%22',F:'%22%3a',G:'%2c%22ut%22%3a1',H:'%2c%22bls%22%3a',I:'%2c%22n%22%3a%22%',J:'%22%3a%7b%22i%22%3a0%7d',K:'%2c%22pt%22%3a0%2c%22vis%22%3a',L:'%2c%22ch%22%3a%7b%22h%22%3a%22',M:'%7b%22v%22%3a2%2c%22time%22%3a1',N:'.channel%22%2c%22sub%22%3a%5b',O:'%2c%22sb%22%3a1%2c%22t%22%3a%5b',P:'%2c%22ud%22%3a100%2c%22lc%22%3a0',Q:'%5d%2c%22f%22%3anull%2c%22uct%22%3a',R:'.channel%22%2c%22sub%22%3a%5b1%5d',S:'%22%2c%22m%22%3a0%7d%2c%7b%22i%22%3a',T:'%2c%22blc%22%3a1%2c%22snd%22%3a1%2c%22ct%22%3a',U:'%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',V:'%2c%22blc%22%3a0%2c%22snd%22%3a0%2c%22ct%22%3a',W:'%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a',X:'%2c%22ri%22%3a0%7d%2c%22state%22%3a%7b%22p%22%3a0%2c%22ut%22%3a1',Y:'%2c%22pt%22%3a0%2c%22vis%22%3a1%2c%22bls%22%3a0%2c%22blc%22%3a0%2c%22snd%22%3a1%2c%22ct%22%3a',Z:'%2c%22sb%22%3a1%2c%22t%22%3a%5b%5d%2c%22f%22%3anull%2c%22uct%22%3a0%2c%22s%22%3a0%2c%22blo%22%3a0%7d%2c%22bl%22%3a%7b%22ac%22%3a'};(function(){var l=[];for(var m in j){i[j[m]]=m;l.push(j[m]);}l.reverse();h=new RegExp(l.join("|"),'g');})();var k={encode:function(l){return encodeURIComponent(l).replace(/([_A-Z])|%../g,function(m,n){return n?'%'+n.charCodeAt(0).toString(16):m;}).toLowerCase().replace(h,function(m){return i[m];});},decode:function(l){return decodeURIComponent(l.replace(/[_A-Z]/g,function(m){return j[m];}));}};f.exports=k;},null);
__d('PresenceCookieManager',['Cookie','CurrentUser','Dcode','ErrorUtils','JSLogger','PresenceInitialData','PresenceUtil','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=m.cookieVersion,q=m.dictEncode,r='presence',s={},t=null,u=null,v=l.create('presence_cookie');function w(){try{var aa=h.get(r);if(t!==aa){t=aa;u=null;if(aa&&aa.charAt(0)=='E')aa=j.decode(aa.substring(1));if(aa)u=JSON.parse(aa);}if(u){if(u.user&&u.user!==i.getID())return null;if(u.v!==p)return null;return u;}}catch(z){v.warn('getcookie_error',z);}return null;}function x(){return parseInt(Date.now()/1000,10);}var y={register:function(z,aa){s[z]=aa;},store:function(){var z=w();if(z&&z.v&&p<z.v){v.debug('stale_cookie',p);return;}var aa={v:p,time:x(),user:i.getID()};for(var ba in s)aa[ba]=k.applyWithGuard(s[ba],s,[z&&z[ba]],function(fa){fa.presence_subcookie=ba;});var ca=JSON.stringify(aa);if(q)ca='E'+j.encode(ca);if(n.hasUserCookie()){var da=ca.length;if(da>1024)v.warn('big_cookie',da);var ea=o.getRequestURI(false).isSecure()&&!!h.get('csm');h.set(r,ca,null,null,ea);}},clear:function(){h.clear(r);},getSubCookie:function(z){var aa=w();if(!aa)return null;return aa[z];}};f.exports=y;},null);
__d('PresenceState',['Arbiter','ErrorUtils','JSLogger','PresenceCookieManager','debounceAcrossTransitions','setIntervalAcrossTransitions','PresenceInitialData'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=n.cookiePollInterval||2000,p=n.shouldSuppress||false,q=[],r=[],s=null,t=null,u=0,v=null,w=0,x=['sb2','t2','lm2','uct2','tr','tw','at','wml'],y=j.create('presence_state');function z(){return k.getSubCookie('state');}function aa(){u=Date.now();k.store();ea(t);}var ba=l(aa,0);function ca(ja){if(typeof ja=='undefined'||isNaN(ja)||ja==Number.POSITIVE_INFINITY||ja==Number.NEGATIVE_INFINITY)ja=0;return ja;}function da(ja){var ka={};if(ja){x.forEach(function(na){ka[na]=ja[na];});if(u<ja.ut)y.error('new_cookie',{cookie_time:ja.ut,local_time:u});}ka.ut=u;for(var la=0,ma=q.length;la<ma;la++)i.applyWithGuard(q[la],null,[ka]);t=ka;return t;}function ea(ja){w++;u=ca(ja.ut);if(!s)s=m(ha,o);t=ja;if(v===null)v=ja;for(var ka=0,la=r.length;ka<la;ka++)i.applyWithGuard(r[ka],null,[ja]);w--;}function fa(ja){if(ja&&ja.ut)if(u<ja.ut){return true;}else if(ja.ut<u)y.error('old_cookie',{cookie_time:ja.ut,local_time:u});return false;}function ga(){var ja=z();if(fa(ja))t=ja;return t;}function ha(){var ja=z();if(fa(ja))ea(ja);}k.register('state',da);h.subscribe(j.DUMP_EVENT,function(ja,ka){ka.presence_state={initial:babelHelpers._extends({},v),state:babelHelpers._extends({},t),update_time:u,sync_paused:w,poll_time:o};});(function(){var ja=ga();if(ja){ea(ja);}else{y.debug('no_cookie_initial');ea(da());return;}})();var ia={doSync:function(ja){if(w)return;if(ja){aa();}else ba();},registerStateStorer:function(ja){q.push(ja);},registerStateLoader:function(ja){r.push(ja);},get:function(){return ga();},getInitial:function(){return v;},shouldSuppress:function(){return p;},verifyNumber:ca};f.exports=ia;},null);
__d('RTISession',['URI','AjaxRequest','invariant','ErrorUtils'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l='.facebook.com';function m(n,o,p,q,r,s,t,u,v){!n?j(0):undefined;!q?j(0):undefined;!r?j(0):undefined;this.domain=n;this.port=o;this.edgePoolName=p;this.stickyToken=q;this.loggedInId=r;this.accountId=s;this.clientProfile=t||'desktop';this.clientId=u;this.capabilities=v;}m.prototype.issueRequest=function(n,o,p,q,r){!n?j(0):undefined;!o?j(0):undefined;!q?j(0):undefined;var s=this.domain.length-l.length,t=s>0&&this.domain.indexOf(l,s)!==-1,u=t?this.domain:this.domain+l,v=(1048576*Math.random()|0).toString(36),w={cb:v,sticky_token:this.stickyToken,uid:this.loggedInId,viewer_uid:this.accountId,sticky_pool:this.edgePoolName,profile:this.clientProfile,clientid:this.clientId,cap:this.capabilities};for(var x in w)!!o[x]?j(0):undefined;Object.assign(w,o);var y=new h(n).setDomain(u).setPort(this.port).setSecure(new h(window.location.href).isSecure()).setQueryData(w),z=p?'POST':'GET',aa=new i(z,y);aa.timeout=r?r*1000:30000;if(aa.xhr)aa.xhr.withCredentials=true;var ba={};aa.onSuccess=function(){};aa.onJSON=(function(){ba.data=aa.json;ba.error=null;k.applyWithGuard(q,this,[ba]);}).bind(this);aa.onError=(function(){ba.data=null;ba.error=aa.errorType||'error';k.applyWithGuard(q,this,[ba]);}).bind(this);aa.send(JSON.stringify(p));};f.exports=m;},null);
__d('ChannelManager',['AjaxRequest','Arbiter','AsyncRequest','ChannelConstants','ChannelInitialData','ChannelSubdomain','ChannelTransport','ChatVisibility','DTSG','Env','FBAjaxRequest','ISB','JSLogger','MessagingRealtimeConstants','MovingStat','PresenceCookieManager','PresenceState','PresenceUtil','Run','SystemEvents','URI','UserActivity','FBRTCSupport','RTISession','createArrayFromMixed','errorCode','setIntervalAcrossTransitions','setTimeoutAcrossTransitions','WebStorage'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia){if(c.__markCompiled)c.__markCompiled();var ja=c('WebStorage').getSessionStorage(),ka='chproxy_base_sess',la,ma=t.create('channel'),na=null;function oa(eb){na=eb;}var pa={idle:{ok:'init!'},init:{ok:'pull!',error:'reconnect',sys_online:'init',sys_timetravel:'init'},pull:{ok:'pull!',error:'ping',error_missing:'pull',error_msg_type:'pull',refresh_0:'reconnect',refresh_110:'reconnect',refresh_111:'reconnect',refresh_112:'pull',refresh_113:'pull',refresh_117:'reconnect'},ping:{ok:'pull!',error:'ping',error_stale:'reconnect!'},reconnect:{ok:'init!',error:'reconnect',sys_online:'reconnect',sys_timetravel:'reconnect'},shutdown:{},_all:{error_max:'shutdown!',error_shutdown:'shutdown!',sys_owner:'reconnect',sys_nonowner:'idle!',sys_online:'ping',sys_offline:'idle!',sys_timetravel:'ping'}},qa={reconnectOverrideTimeMillis:Date.now(),userActive:Date.now(),created:Date.now(),ready:false,seqTurSentAt:-1,queueMade:'',irisSequenceId:l.sequenceId,lastPresenceState:null,lastRequestErrorReason:null,seq:0,pingFailuresOnSubdomain:0,estimatedReceived:0,fantail_logs:[],sessionID:(Math.random()*2147483648|0).toString(16),stableDeviceId:false,capabilities:da.getCapabilities(),streamingCapable:false,inStreaming:false,shouldSuppressPresence:x.shouldSuppress(),LONGPOLL_TIMEOUT:60000,STREAMING_TIMEOUT:60000,P_TIMEOUT:30000,IFRAME_LOAD_TIMEOUT:30000,MIN_RETRY_INTERVAL:5000,MAX_RETRY_INTERVAL:320000,MIN_12002_TIMEOUT:9000,MIN_504_TIMEOUT:20000,STALL_THRESHOLD:180000,JUMPSTART_THRESHOLD:90000,MIN_INIT_PROBE_DELAY:3000,INIT_PROBE_DELAY_RANDOMIZE_RANGE:12000,CHANNEL_PROXY_REPORTING_MIN_INTERVAL:10000,PROBE_DELAY:60000,PROBE_HEARTBEATS_INTERVAL_LOW:1000,PROBE_HEARTBEATS_INTERVAL_HIGH:5000,STREAMING_EXIT_STATE_ON_CONTINUE:false,FANTAIL_QUEUE_CAPACITY:50},ra={MAX_CONTINUOUS_PULL_FAILS:3,enabled:false,uptimeMillis:Date.now(),timeInGoodStatesStartMillis:Date.now(),timeInGoodStatesMillis:0,initialized:false,firstPullSentTimeMillis:Date.now(),accumulatedPullTimeMillis:0,pullStartTimeMillis:0,pingCount:0,pullCount:0,continuousPullFails:0,getTimeSinceFirstPullSentSeconds:function(){return (Date.now()-this.firstPullSentTimeMillis)/1000;},getUptimeSeconds:function(){return (Date.now()-this.uptimeMillis)/1000;},getAccumulatedPullTimeSeconds:function(){var eb=this.accumulatedPullTimeMillis,fb=Date.now();if(this.pullStartTimeMillis>0&&fb-this.pullStartTimeMillis<=qa.LONGPOLL_TIMEOUT)eb+=fb-this.pullStartTimeMillis;var gb=eb/1000;if(gb>=this.getTimeSinceFirstPullSentSeconds())this.initialize();return gb;},getPingToPullRatio:function(){return this.pullCount===0?0:this.pingCount/this.pullCount;},reportPullSent:function(){if(!this.enabled)return;if(!this.initialized)this.initialize();this.pullStartTimeMillis=Date.now();},initialize:function(){this.initialized=true;this.firstPullSentTimeMillis=Date.now();this.pullStartTimeMillis=0;this.accumulatedPullTimeMillis=0;this.pingCount=0;this.pullCount=0;this.timeInGoodStatesStartMillis=Date.now();this.timeInGoodStatesMillis=0;this.uptimeMillis=Date.now();},reportPullReturned:function(eb,fb){if(!this.enabled)return;if(this.pullStartTimeMillis>0){this.accumulatedPullTimeMillis+=Date.now()-this.pullStartTimeMillis;if(eb){this.pullCount++;this.continuousPullFails=0;}else this.continuousPullFails++;}this.pullStartTimeMillis=0;},reportPingSent:function(){if(!this.enabled)return;this.pingCount++;},isGoodState:function(eb){return eb.indexOf('pull')===0||eb.indexOf('init')===0||eb.indexOf('idle')===0;},getTotalTimeInGoodStatesSeconds:function(){var eb=this.timeInGoodStatesMillis;if(this.timeInGoodStatesStartMillis>0)eb+=Date.now()-this.timeInGoodStatesStartMillis;return eb/1000;},clientEnteredState:function(eb){if(!this.enabled)return;var fb=this.isGoodState(eb);if(fb&&this.timeInGoodStatesStartMillis===0){this.timeInGoodStatesStartMillis=Date.now();}else if(!fb&&this.timeInGoodStatesStartMillis>0){this.timeInGoodStatesMillis=Date.now()-this.timeInGoodStatesStartMillis;this.timeInGoodStatesStartMillis=0;}},transportEnteredState:function(eb){if(!this.enabled)return;if(eb.indexOf('pull')===0){this.reportPullSent();}else if(eb.indexOf('ping')===0&&qa.lastRequestErrorReason!==k.SYS_TIMETRAVEL&&qa.lastRequestErrorReason!==k.SYS_ONLINE&&qa.lastRequestErrorReason!==k.SYS_OWNER&&qa.lastRequestErrorReason!==k.SYS_NONOWNER)this.reportPingSent();},doSerialize:function(){if(!this.enabled)return '';return this.getTimeSinceFirstPullSentSeconds().toFixed(0)+','+this.getAccumulatedPullTimeSeconds().toFixed(0)+','+this.getPingToPullRatio().toFixed(3)+','+this.getUptimeSeconds().toFixed(0)+','+this.getTotalTimeInGoodStatesSeconds().toFixed(0);}},sa=1,ta={},ua=0;function va(){return j.lastSuccessTime?Math.round((Date.now()-j.lastSuccessTime)/1000):-1;}function wa(){var eb={};if(la.getConfig('host'))eb[la.getConfig('user_channel')]=la.getConfig('seq',0);return eb;}function xa(){var eb=Date.now(),fb=Date.now(),gb={total:0},hb='idle',ib=false;aa.subscribe([aa.USER,aa.ONLINE,aa.TIME_TRAVEL],function(lb,mb){za(true);fb=null;la.lastPullTime=Date.now();var nb;switch(lb){case aa.USER:nb=aa.isPageOwner()?k.SYS_OWNER:k.SYS_NONOWNER;break;case aa.ONLINE:nb=mb?k.SYS_ONLINE:k.SYS_OFFLINE;break;case aa.TIME_TRAVEL:nb=k.SYS_TIMETRAVEL;break;}la.exitState({status:nb,stateId:sa});});var jb=function(lb,mb){var nb=Date.now(),ob=null;if(mb){eb=nb;ob=mb.nextState||mb.state;}else ob=hb;aa.checkTimeTravel();if(fb){var pb=Math.round((nb-fb)/1000);if(pb>0){gb[hb]=(gb[hb]||0)+pb;gb.total+=pb;}}hb=ob;fb=nb;if(!lb){gb.lastSuccessTime=va();gb.online=aa.isOnline();ma.log('rollup',gb);}};i.subscribe(k.ON_ENTER_STATE,jb);ha(jb,60000);i.subscribe(t.DUMP_EVENT,function(lb,mb){mb.channelRollup=gb;});var kb=function(){if(la.isShutdown()||la.shouldIdle())return;aa.checkTimeTravel();var lb=Date.now()-(la.lastPullTime||q.start);if(!ib&&lb>qa.STALL_THRESHOLD){var mb=va();ma.error('stall',{lastSuccessTime:mb,rollupState:hb});ib=true;}var nb=Date.now()-eb;if(la.state=='pull'&&nb>qa.JUMPSTART_THRESHOLD){eb=null;ma.warn('jumpstart',{state:la.state,dormant:nb});la.enterState('init');}};ha(kb,10000);}function ya(){var eb=Date.now(),fb=1;function gb(){ia(gb,fb*1000);var lb=la.state;if(lb=='idle'&&la.shouldIdle())return;ma.bump('conn_t',fb);if(lb=='pull')ma.bump('conn_t_pull',fb);}gb();var hb=[15,30,60,120,240],ib=false,jb=false;function kb(lb){ia(function(){ma.rate('pullenter_'+lb,ib);ma.rate('pullexit_'+lb,jb);},lb*1000);}while(hb.length)kb(hb.shift());i.subscribe(k.ON_ENTER_STATE,function(lb,mb){if(mb.state=='pull')ib=true;eb=Date.now();});i.subscribe(k.ON_EXIT_STATE,function(lb,mb){if(mb.state!='pull'||!eb)return;var nb='other';if(mb.status==k.OK){jb=true;nb='ok';}else if(mb.xhr&&mb.xhr.errorType){nb=/ar:(\w+)/.test(mb.xhr.errorType)&&RegExp.$1;}else if(/^sys_/.test(mb.status))return;var ob=(Date.now()-eb)/1000;if(ob<0){return;}else if(ob>3600)ob=3600;ma.bump('conn_num');ma.bump('conn_exit',ob);ma.bump('conn_num_'+nb);ma.bump('conn_exit_'+nb,ob);});}function za(eb){if(eb){ua=0;ta={};}else ua++;}function ab(){if(!qa.stableDeviceId)return;var eb={},fb=function(gb){if(typeof qa[gb]=='string')eb[gb]=qa[gb];};fb('sticky_token');fb('sticky_pool');fb('host');fb('fullHost');ja.setItem(ka,JSON.stringify(eb));}function bb(){var eb=!h.supportsCORS()||qa.forceIframe;if(qa.subdomain===null||eb){qa.fullHost=qa.host;}else qa.fullHost=qa.subdomain+'-'+qa.host;ab();}function cb(eb){if(!eb)return false;eb=eb.trim();if(eb.length===0)return false;try{var gb=JSON.parse(eb),hb=function(ib){if(typeof gb[ib]=='string')qa[ib]=gb[ib];};hb('sticky_token');hb('sticky_pool');hb('host');hb('fullHost');return true;}catch(fb){ma.error('unable to parse state: '+eb);return false;}}la={state:'idle',nextState:null,proxyDown:false,lastPullTime:Date.now(),lastReportOnMisguidedMsgTime:Date.now(),heartbeats:[],setTestCallback:oa,backoff:false,sessionRegistered:false,init:function(eb){this.init=function(){};i.subscribe(k.GET_RTI_SESSION_REQUEST,(function(event,nb){this.informCurrentSession();}).bind(this));this._logFantail('client initialized',k.FANTAIL_INFO);var fb=!!qa.use_sticky_session,gb=false;qa.stableDeviceId=false;if(fb&&ja){qa.stableDeviceId=true;var hb=true;for(var ib=0;ib<ja.length;ib++){var jb=ja.key(ib);if(jb.indexOf(ka)===0){gb=cb(ja.getItem(jb));hb=!gb;break;}}if(hb)ab();}this._logFantail('using session id: '+qa.sessionID+(gb?' [restored]':' [new]')+' with sticky:'+qa.sticky_token+'/'+qa.sticky_pool,k.FANTAIL_INFO);ra.enabled=!!qa.watchdog_enabled;qa.watchdog=ra;if(typeof ca!='undefined'){ca.subscribe(function(){qa.userActive=Date.now();n.sendActivePing(qa);});}else ma.error('user_activity_undefined');w.register('ch',wa);var kb=this.getConfig('max_conn',2);qa.subdomain=m.allocate(kb);this._transportRate=new v(30000);var lb=h.supportsCORS()&&!qa.forceIframe?'CORSTransport':'IframeTransport';this.transport=new n[lb](this);if(eb)this.enterState.apply(this,arguments);i.subscribe(t.DUMP_EVENT,(function(event,nb){nb.transportRate=this._transportRate.tally();nb.transportType=lb;nb.transportVersion=2;}).bind(this));xa();ya();if(la.getConfig('tryStreaming')&&la.getConfig('host')&&h.supportsCORS()&&!qa.forceIframe){var mb=qa.MIN_INIT_PROBE_DELAY+Math.random()*qa.INIT_PROBE_DELAY_RANDOMIZE_RANGE;ia(this._probeTest,mb);}},configure:function(){var eb=fa(arguments);ma.log('configure',eb);eb.forEach(function(fb){return Object.assign(qa,fb);});bb();i.inform(k.ON_CONFIG,this);},getConfig:function(eb,fb){return eb in qa?qa[eb]:fb;},getCompleteConfig:function(){return qa;},informCurrentSession:function(){var eb=null;if(this.sessionRegistered&&qa&&qa.fullHost&&qa.sticky_token&&qa.uid)eb=new ea(qa.fullHost,qa.port,qa.sticky_pool,qa.sticky_token,qa.uid,qa.viewer_uid,qa.profile,qa.sessionID,qa.capabilities);i.inform(k.RTI_SESSION,eb);},getWatchdog:function(){return ra;},isShutdown:function(){return this.state=='shutdown';},shouldIdle:function(){return !(aa.isPageOwner()&&aa.isOnline());},_sendIframeError:function(eb){var fb=new j().setURI('/ajax/presence/reconnect.php').setData({reason:eb,fb_dtsg:p.getToken()}).setOption('suppressErrorHandlerWarning',true).setOption('retries',1).setMethod('GET').setReadOnly(true).setAllowCrossPageTransition(true);fb.specifiesWriteRequiredParams()&&fb.send();},_getDelay:function(){var eb=Math.min(qa.MIN_RETRY_INTERVAL*Math.pow(2,Math.max(0,ua-1)),qa.MAX_RETRY_INTERVAL);if(this.proxyDown&&'proxy_down_delay_millis' in qa)eb=qa.proxy_down_delay_millis;this.proxyDown=false;return Math.floor(eb*(1+Math.random()*.5));},enterState:function(){if(this._inEnterState)ma.warn('enterstate_recursion');this._inEnterState=true;try{this._enterState.apply(this,arguments);this._inEnterState=false;}catch(eb){this._inEnterState=false;throw eb;}},_enterState:function(eb){if((eb.indexOf('pull')===0||eb.indexOf('ping')===0||eb.indexOf('shutdown')===0)&&!!qa.active_config_refresh){var fb=Date.now(),gb=(fb-qa.reconnectOverrideTimeMillis)/1000;if('config_refresh_seconds' in qa&&qa.config_refresh_seconds>0&&gb>qa.config_refresh_seconds){eb='reconnect';this._logFantail('forcing reconnect to refresh config'+' - this is normal behavior',k.FANTAIL_DEBUG);}}if(eb.indexOf('reconnect')===0)qa.reconnectOverrideTimeMillis=Date.now();var hb=this.backoff?this._getDelay():0;this.backoff=false;var ib=fa(arguments);if(this.isShutdown()){this._logFantail('not executing state due to shutdown mode: '+eb,k.FANTAIL_WARN);return;}if(eb!='idle!'&&this.shouldIdle()){this._logFantail('forced idleness',k.FANTAIL_WARN);return;}sa++;qa.stateId=sa;clearTimeout(this._deferredTransition);this._deferredTransition=null;this.transport.enterState('idle');this.state='idle';this.nextState=null;if(/!$/.test(eb)){var jb=this._transportRate.tally().timeAverage,kb=la.getConfig('MAX_CHANNEL_STATES_PER_SEC',1);if(jb>=kb){if(!this._throttled){this._throttled=true;ma.warn('throttled');}ma.bump('throttle');hb=1000/kb;}}else if(!(/#$/.test(eb)))hb=this._getDelay();eb=eb.replace(/\W*$/,'');if(!pa[eb]){this._logFantail('invalid state: '+eb,k.FANTAIL_ERROR);throw new Error('invalid state:'+eb);}var lb;if(hb<=0){lb={state:eb};this._transportRate.add(1);this.state=eb;var mb=this['_enter_'+this.state];if(mb){ib.shift();mb.apply(this,ib);}if(/init|idle|pull|ping/.test(this.state)){if(qa.streamingCapable&&/pull/.test(this.state))this.heartbeats=[];ra.transportEnteredState(eb);ra.clientEnteredState(eb);qa.is_offline=!o.isOnline();qa.capabilities=da.getCapabilities();this._logFantail('entering transport state: '+this.state,k.FANTAIL_INFO);this.transport.enterState(this.state,qa);if(this.state=='ping'){lb.url=n.getURI(qa).toString();lb.port=qa.port||'undefined';}}}else{this.state='idle';this.nextState=eb;lb={state:this.state,delay:hb,nextState:eb};ib[0]=eb+'#';this._deferredTransition=ia((function(){this._deferredTransition=null;this.enterState.apply(this,ib);}).bind(this),hb);}if(/pull/.test(eb)){lb.client_id=qa.sessionID;lb.streaming=qa.inStreaming;}ma.log('enter_'+this.state,lb);i.inform(k.ON_ENTER_STATE,lb);},exitState:function(eb,fb){var gb=eb.stateId,hb=eb.status;if((hb==k.SYS_TIMETRAVEL||hb==k.SYS_ONLINE||hb==k.SYS_NONOWNER||hb==k.SYS_OWNER)&&ra)ra.initialize();if(this.isShutdown()||gb<sa)return;var ib=fa(arguments),jb=this.state;ib[0]=eb.status;var kb={state:jb,status:hb};if(/pull/.test(jb)){kb.client_id=qa.sessionID;kb.streaming=qa.inStreaming;}if(/ping/.test(jb)&&hb!=k.OK)kb.url=n.getURI(qa).toString();if(this.nextState)kb.nextState=this.nextState;if(fb&&fb.errorType){qa.lastRequestErrorReason=fb.errorType;kb.xhr=fb.toJSON?fb.toJSON():fb;if(fb.errorType==h.SERVICE_UNAVAILABLE){this._logFantail('got 5xx http status code, setting long delay',k.FANTAIL_ERROR);this.proxyDown=true;}delete kb.xhr.json;}else if(hb!=k.OK)qa.lastRequestErrorReason=hb;if(fb&&fb.json){if(fb.json.t)kb.t=fb.json.t;if(fb.json.reason)kb.reason=fb.json.reason;if(fb.json.seq)kb.seq=fb.json.seq;}ma.log('exit_'+jb,kb);i.inform(k.ON_EXIT_STATE,kb);var lb=this['_exit_'+jb];if(lb)hb=lb.apply(this,ib)||hb;if(hb!=k.OK){za();ta[jb]=(ta[jb]||0)+1;}var mb=pa[this.nextState||jb][hb]||pa._all[hb],nb=mb&&mb.replace(/!*$/,'');if(!nb){ma.error('terminal_transition',kb);this._shutdownHint=k.HINT_INVALID_STATE;mb='shutdown!';this._logFantail('entering shutdown state',k.FANTAIL_ERROR);}this._lastState=jb;this._lastStatus=hb;this.enterState(mb);},_processTransportData:function(eb,fb){var gb=fb.json,hb=gb.t;if('s' in gb){gb.seq=gb.s;delete gb.s;}if(gb.u&&qa.user&&gb.u!=qa.user){ma.warn('misguided_msg',{user:qa.user,target:gb.u});this._reportProxyMisguidedMsg(gb.u,qa.user);return;}var ib=qa.seq;if('seq' in gb){qa.seq=gb.seq;x.doSync();}switch(hb){case 'continue':if(qa.inStreaming&&this.heartbeats.length<1){qa.streamingCapable=false;ma.log('switch_to_longpoll');ia(this._probeTest,qa.PROBE_DELAY);}za(true);if(!qa.inStreaming||qa.STREAMING_EXIT_STATE_ON_CONTINUE)this.exitState({status:k.OK,stateId:eb});break;case 'refresh':case 'refreshDelay':this._logFantail('got refresh with reason: '+gb.reason,k.FANTAIL_INFO);this.exitState({status:'refresh_'+(gb.reason||0),stateId:eb},fb);break;case 'backoff':this._logFantail('server told client to back off',k.FANTAIL_WARN);za();this.backoff=true;break;case 'lb':var jb=gb.lb_info;if(jb){qa.sticky_token=jb.sticky;if('pool' in jb)qa.sticky_pool=jb.pool;if('vip' in jb)qa.host=jb.vip;bb();}else ma.error('bad lb info');break;case 'test_streaming':ia(this._probeTest,500);break;case 'fullReload':w.clear();ma.log('invalid_history');this.sessionRegistered=true;this.informCurrentSession();i.inform(k.ON_INVALID_HISTORY);za(true);this._logFantail('full reload incurred',k.FANTAIL_INFO);var kb=k.ERROR_MISSING;if(qa.fullReloadAsSuccess)kb=k.OK;this.exitState({status:kb,stateId:eb},fb);if('ms' in gb)this._processMessages(gb,ib);break;case 'msg':za(true);this._processMessages(gb,ib);break;case 'heartbeat':if(qa.inStreaming){var lb=Date.now();if(this.heartbeats.length>0){var mb=lb-this.heartbeats[this.heartbeats.length-1];ma.log('heartbeat_interval',{client_id:qa.sessionID,interval:mb});}this.heartbeats.push(lb);}break;default:this._logFantail('got an unknown protocol message: '+hb,k.FANTAIL_ERROR);ma.error('unknown_msg_type',{type:hb});break;}},_processMessages:function(eb,fb){var gb,hb,ib,jb;if('tr' in eb)qa.trace_id=eb.tr;hb=eb.ms;ib=qa.seq-hb.length;for(gb=0;gb<hb.length;gb++,ib++){qa.estimatedReceived++;if(ib>=fb){jb=hb[gb];if(jb.type){var kb=k.getArbiterType(jb.type);if(jb.type==='messaging'){var lb={type:'messaging',event:jb.event};if(jb.message){lb.inbox_unread=jb.unread_counts&&jb.unread_counts.inbox;lb.tid=jb.message.tid;lb.mid=jb.message.mid;this._logFantail('got message with id: '+jb.message.mid,k.FANTAIL_INFO);}ma.debug('message',lb);}else if(jb.type==='pages_messaging'){if(jb.unread_counts&&jb.unread_counts.inbox)i.inform(k.getArbiterType('pages_inbox_count_update'),{page_id:jb[u.VIEWER_FBID],inbox_unread:jb.unread_counts.inbox});}else if(jb.type==='skywalker'){kb=k.SKYWALKER;}else if(jb.type==='qprimer'){jb.first=!qa.ready;if(jb.first){qa.ready=true;qa.timeUntilReady=Date.now()-qa.created;qa.queueMade=jb.made;}kb=k.CHANNEL_ESTABLISHED;}else if(jb.type==='delta'){qa.irisSequenceId=jb.iseq;}else ma.debug('message',{type:jb.type});i.inform(kb,{obj:jb});}}else ma.warn('seq_regression',{seq:ib,last_seq:fb,messages:hb.length});}},_enter_init:function(){if(ta.init>=la.getConfig('MAX_INIT_FAILS',2))return setTimeout(this.exitState.bind(this,{status:k.ERROR_MAX,stateId:sa}),0);this._initTimer=ia(this.exitState.bind(this,{status:k.ERROR,stateId:sa},'timeout'),qa.IFRAME_LOAD_TIMEOUT);},_enter_reconnect:function(eb){this._logFantail('entered reconnect with reason: '+eb,k.FANTAIL_INFO);var fb=sa;if(!y.hasUserCookie()){this._logFantail('user has no cookie???',k.FANTAIL_WARN);ma.warn('no_user_cookie');setTimeout(function(){la._shutdownHint=k.HINT_AUTH;la.exitState({status:k.ERROR_SHUTDOWN,stateId:fb});},0);return;}var gb={reason:eb,fb_dtsg:p.getToken()};if(s.token)gb.fb_isb=s.token;if(na)na(gb);var hb=new r('GET','/ajax/presence/reconnect.php',gb);hb.onSuccess=(function(){la.configure(hb.json);w.store();this.exitState({status:k.OK,stateId:fb});}).bind(this);hb.onError=(function(){var ib=hb.json&&hb.json.error;this._logFantail('reconnect error: '+hb.errorType,k.FANTAIL_ERROR);if(hb.errorType==h.TRANSPORT_ERROR||hb.errorType==h.PROXY_ERROR||hb.errorType==h.SERVICE_UNAVAILABLE)this._shutdownHint=k.HINT_CONN;if(ib&&ib==1356007){this._shutdownHint=k.HINT_MAINT;}else if(ib==1357001||ib==1357004||ib==1348009){this._shutdownHint=k.HINT_AUTH;}else this._shutdownHint=null;this.exitState({status:this._shutdownHint?k.ERROR_SHUTDOWN:k.ERROR,stateId:fb},hb);}).bind(this);hb.send();},_enter_shutdown:function(){i.inform(k.ON_SHUTDOWN,{reason:this._shutdownHint});if(!!qa.shutdown_recovery_enabled&&'shutdown_recovery_interval_seconds' in qa&&qa.shutdown_recovery_interval_seconds>0){var eb=qa.shutdown_recovery_interval_seconds*1000;ia((function(){i.inform(k.ATTEMPT_RECONNECT);this.state='reconnect!';this.enterState('reconnect!');}).bind(this),eb);}},_exit_init:function(eb){if(this._initTimer)this._initTimer=clearTimeout(this._initTimer);if(eb==k.ERROR_MAX)this._sendIframeError(k.reason_IFrameLoadGiveUp);},_exit_pull:function(eb,fb){var gb=eb==k.OK;ra.reportPullReturned(gb,this);if(gb){this.lastPullTime=Date.now();}else{var hb='exit status: '+eb;if(fb&&fb.errorType)hb+=' ajax request error: '+fb.errorType;this._logFantail('pull failed with status: '+hb,k.FANTAIL_ERROR);}},_exit_ping:function(eb){if(eb==k.OK){var fb=Date.now()-(this.lastPullTime||q.start);if(fb>qa.STALL_THRESHOLD){this._logFantail('didnt complete a successful pull for too long',k.FANTAIL_ERROR);return k.ERROR_STALE;}}else this._logFantail('ping failed with status: '+eb,k.FANTAIL_ERROR);},_reportProxyMisguidedMsg:function(eb,fb){this._logFantail('misguided message to '+fb+' meant for '+eb,k.FANTAIL_ERROR);var gb=Date.now();if(gb-this.lastReportOnMisguidedMsgTime<=qa.CHANNEL_PROXY_REPORTING_MIN_INTERVAL)return;this.lastReportOnMisguidedMsgTime=gb;var hb={received_uid:eb,expected_uid:fb};if(qa.sticky_token)hb.sticky_token=qa.sticky_token;var ib=new ba('/err_misguided_msg').setDomain(qa.host+'.'+qa.domain).setPort(qa.port).setSecure(new ba(window.location.href).isSecure()).setQueryData(hb),jb=new h('GET',ib);if(h.supportsCORS())jb.xhr.withCredentials=true;jb.onSuccess=function(kb){};jb.onError=function(kb){};jb.onJSON=function(kb,lb){};jb.send();},_probeTest:function(){qa.streamingCapable=false;var eb=[],fb={mode:'stream',format:'json'};if(qa.sticky_token)fb.sticky_token=qa.sticky_token;var gb=new ba('/probe').setDomain(qa.host+'.'+qa.domain).setPort(qa.port).setSecure(new ba(window.location.href).isSecure()).setQueryData(fb),hb=new h('GET',gb);hb.onJSON=function(ib,jb){if(ib&&ib.json&&ib.json.t==='heartbeat'){eb.push(Date.now());if(eb.length>=2){var kb=eb[1]-eb[0];if(kb>=qa.PROBE_HEARTBEATS_INTERVAL_LOW&&kb<=qa.PROBE_HEARTBEATS_INTERVAL_HIGH){qa.streamingCapable=true;ma.log('switch_to_streaming');}ma.log('probe_ok',{time:kb});}}};hb.onSuccess=function(ib){if(eb.length!=2){qa.streamingCapable=false;ma.error('probe_error',{error:'beats.length = '+eb.length});}};hb.onError=function(ib){qa.streamingCapable=false;ma.error('probe_error',ib);};ma.log('probe_request');hb.send();},_logFantail:function(eb,fb){var gb=qa.fantail_queue_capacity||qa.FANTAIL_QUEUE_CAPACITY;if(!qa.fantail_enabled||qa.fantail_logs.length>gb)return;var hb='fantail queue size exceeded',ib=k.FANTAIL_WARN;if(qa.fantail_logs.length<gb){hb=eb;ib=fb;}var jb=qa.fantail_logs.length,kb={};kb['time'+jb]=Date.now();kb['log'+jb]=hb;kb['severity'+jb]=ib;qa.fantail_logs.push(kb);}};f.exports=la;function db(){if(l.channelConfig){la.configure(l.channelConfig);if(/shutdown/.test(l.state))la._shutdownHint=k[l.reason];la.init(l.state,l.reason);}}z.onAfterLoad(db);},null);
__d('ChannelConnection',['Arbiter','Run','SystemEvents','ChannelConstants','ChannelManager','JSLogger','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=m.create('channel_connection'),p=null,q=null,r=null,s=null,t=0,u=Object.assign(new h(),{CONNECTED:'chat-connection/connected',RECONNECTING:'chat-connection/reconnecting',SHUTDOWN:'chat-connection/shutdown',MUTE_WARNING:'chat-connection/mute',UNMUTE_WARNING:'chat-connection/unmute'});i.onBeforeUnload(function(){});function v(){if(q){clearTimeout(q);q=null;}}function w(){v();o.log('unmute_warning');u.inform(u.UNMUTE_WARNING);}function x(ca){v();q=n(w,ca);o.log('mute_warning',{time:ca});u.inform(u.MUTE_WARNING);}function y(){if(r){clearTimeout(r);r=null;}}function z(ca,da){y();if(ca===k.ON_ENTER_STATE&&(da.nextState||da.state)==='pull'){if(s!==u.CONNECTED){o.log('connected');var ea=!s;s=u.CONNECTED;t=0;u.inform(u.CONNECTED,{init:ea});}}else if(ca===k.ON_ENTER_STATE&&((da.nextState||da.state)==='ping'||!da.nextState&&da.state==='idle')){r=n(function(){var fa=null;if(!(da.state==='idle'&&!da.nextState))fa=da.delay||0;o.log('reconnecting',{delay:fa});if(u.disconnected())o.log('reconnecting_ui',{delay:fa});s=u.RECONNECTING;da.state==='idle'&&t++;if(t>1){u.inform(u.RECONNECTING,fa);}else if(!da.nextState&&da.state==='idle')z(ca,da);},500);}else if(ca===k.ON_SHUTDOWN){o.log('shutdown',{reason:da.reason});s=u.SHUTDOWN;t=0;u.inform(u.SHUTDOWN,da.reason);}}function aa(){if(l.isShutdown()){z(k.ON_SHUTDOWN,l._shutdownHint);}else z(k.ON_ENTER_STATE,{state:l.state,nextState:l.nextState,delay:0});}i.onAfterLoad(aa);Object.assign(u,{disconnected:function(){return s===u.SHUTDOWN||s===u.RECONNECTING&&!q&&t>1;},isShutdown:function(){return s===u.SHUTDOWN;},reconnect:function(ca){if(l.state==='ping'||l.isShutdown())return;o.log('reconnect',{now:ca});u.inform(u.RECONNECTING,0);if(!!ca){if(p!==null){clearTimeout(p);p=null;}l.enterState('ping!');}else if(!p)p=n(function(){l.enterState('ping!');p=null;},k.CHANNEL_MANUAL_RECONNECT_DEFER_MSEC);},unmuteWarning:w});function ba(){h.subscribe([k.ON_ENTER_STATE,k.ON_SHUTDOWN],z);h.subscribe(k.ATTEMPT_RECONNECT,function(){if(u.disconnected())u.reconnect();});j.subscribe(j.TIME_TRAVEL,function(){u.reconnect();x(k.MUTE_WARNING_TIME_MSEC);});i.onBeforeUnload(y,false);}i.onAfterLoad(ba);u.mockAfterLoad=function(){aa();ba();};f.exports=u;},null);
__d('AvailableListConstants',['fbt'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={ON_AVAILABILITY_CHANGED:'buddylist/availability-changed',ON_UPDATE_ERROR:'buddylist/update-error',ON_UPDATED:'buddylist/updated',ON_CHAT_NOTIFICATION_CHANGED:'chat-notification-changed',OFFLINE:0,IDLE:1,ACTIVE:2,MOBILE:3,WEB_STATUS:'webStatus',FB_APP_STATUS:'fbAppStatus',MESSENGER_STATUS:'messengerStatus',OTHER_STATUS:'otherStatus',STATUS_ACTIVE:'active',STATUS_IDLE:'idle',STATUS_OFFLINE:'offline',ACTIVE_ON_WEB:h._("Web"),ACTIVE_ON_MOBILE:h._("Di \u0111\u1ed9ng")};b.AvailableListConstants=f.exports=i;},null);
__d('ChatConfig',['ChatConfigInitialData'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={},j={get:function(k,l){return k in i?i[k]:l;},set:function(k){if(arguments.length>1){var l={};l[k]=arguments[1];k=l;}Object.assign(i,k);},getDebugInfo:function(){return i;}};j.set(h);f.exports=j;},null);
__d('Poller',['ArbiterMixin','AsyncRequest','CurrentUser','emptyFunction','mixin','setTimeoutAcrossTransitions','setTimeout'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,l(h));p=o&&o.prototype;function q(t){'use strict';p.constructor.call(this);this._config=babelHelpers._extends({clearOnQuicklingEvents:true,setupRequest:k,interval:null,maxRequests:Infinity,dontStart:false},t);this._handle=null;if(!this._config.dontStart)this.start();}q.prototype.start=function(){'use strict';if(this._polling)return this;this._requests=0;this.request();return this;};q.prototype.stop=function(){'use strict';this._cancelRequest();return this;};q.prototype.mute=function(){'use strict';this._muted=true;return this;};q.prototype.resume=function(){'use strict';if(this._muted){this._muted=false;if(this._handle===null&&this._polling)return this.request();}return this;};q.prototype.skip=function(){'use strict';this._skip=true;return this;};q.prototype.reset=function(){'use strict';return this.stop().start();};q.prototype.request=function(){'use strict';this._cancelRequest();this._polling=true;if(!s())return this._done();if(this._muted)return this;if(++this._requests>this._config.maxRequests)return this._done();var t=new i();t.setIsBackgroundRequest(true);var u=false;t.setInitialHandler(function(){return !u;});this._cancelRequest=(function(){u=true;this._cleanup();}).bind(this);t.setFinallyHandler(r.bind(this));t.setInitialHandler=k;t.setFinallyHandler=k;this._config.setupRequest(t,this);if(this._skip){this._skip=false;m(r.bind(this),0);}else t.send();return this;};q.prototype.isPolling=function(){'use strict';return this._polling;};q.prototype.isMuted=function(){'use strict';return this._muted;};q.prototype.setInterval=function(t){'use strict';if(t){this._config.interval=t;this.start();}};q.prototype.getInterval=function(){'use strict';return this._config.interval;};q.prototype._cleanup=function(){'use strict';if(this._handle!==null)clearTimeout(this._handle);this._handle=null;this._cancelRequest=k;this._polling=false;};q.prototype._done=function(){'use strict';this._cleanup();this.inform('done',{sender:this});return this;};q.MIN_INTERVAL=2000;Object.assign(q.prototype,{_config:null,_requests:0,_muted:false,_polling:false,_skip:false,_cancelRequest:k});function r(){if(!this._polling)return;if(this._requests<this._config.maxRequests){var t=this._config.interval;t=typeof t==='function'?t(this._requests):t;t=t>q.MIN_INTERVAL?t:q.MIN_INTERVAL;if(this._config.clearOnQuicklingEvents){this._handle=n(this.request.bind(this),t);}else this._handle=m(this.request.bind(this),t);}else this._done();}function s(){return j.isLoggedInNow();}f.exports=q;},null);
__d('LastMobileActiveTimes',['ServerTime','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={};function k(o){if(!o||o<0)return '';var p=h.get()/1000-o,q=Math.floor(p/60),r=Math.floor(q/60),s=Math.floor(r/24);if(q<=1){return i._("{count} ph\u00fat",[i.param('count',1)]);}else if(q<60){return i._("{count} ph\u00fat",[i.param('count',q)]);}else if(r<24){return i._("{count}gi\u1edd",[i.param('count',r)]);}else if(s<3){return i._("{count}ng\u00e0y",[i.param('count',s)]);}else return '';}function l(o,p){if(!(o in j)||j[o]<p)j[o]=p;}function m(o){if(o in j){return j[o];}else return 0;}var n={update:function(o){for(var p in o)l(p,o[p]);},getShortDisplay:function(o){return k(m(o));},get:function(o){return m(o);},getDebugData:function(){return j;}};f.exports=n;},null);
__d('PresenceStatus',['ArbiterMixin','AvailableListConstants','BanzaiODS','ChatVisibility','CurrentUser','LastMobileActiveTimes','LogHistory','Set','PresencePrivacy','ServerTime','createObjectFrom','debounceAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();j.setEntitySample('presence',.0001);var t=n.getInstance('presence_status'),u={},v={},w={},x={},y=new o(),z={},aa={},ba={},ca=Object.assign({},h),da=s(function(){return ca.inform('change');},0);Object.assign(ca,{resetPresenceData:function(){v={};w={};ba={};aa={};z={};},reset:function(){ca.resetPresenceData();x={};},get:function(ea){if(ea==l.getID())return k.isOnline()?i.ACTIVE:i.OFFLINE;var fa=i.OFFLINE;if(ea in v)fa=v[ea];if(fa===i.OFFLINE||fa===i.IDLE)if(x[ea])fa=i.MOBILE;if(!p.allows(ea))fa=i.OFFLINE;return fa;},getCapabilities:function(ea){var fa=ca.get(ea);if(fa==i.OFFLINE)return 0;var ga=w[ea];return ga?ga:0;},getDetailedActivePresence:function(ea){var fa=ba[ea];if(!fa)return i.ACTIVE_ON_WEB;var ga=this._getDetailedActivePresenceFromObject(fa);if(ga)return ga;if(!u[ea]){t.error('inconsistent_presence',{id:ea,presence:ca.getDebugInfo(ea)});j.bumpEntityKey('presence','inconsistent_presence');u[ea]=true;}return null;},_getDetailedActivePresenceFromObject:function(ea){var fa=ea[i.WEB_STATUS],ga=ea[i.FB_APP_STATUS],ha=ea[i.MESSENGER_STATUS],ia=ea[i.OTHER_STATUS];if(ga===i.STATUS_ACTIVE||ha===i.STATUS_ACTIVE){return i.ACTIVE_ON_MOBILE;}else if(fa===i.STATUS_ACTIVE||ia===i.STATUS_ACTIVE)return i.ACTIVE_ON_WEB;},isMessengerUser:function(ea){var fa=ba[ea];if(fa)if(fa[i.MESSENGER_STATUS]==i.STATUS_ACTIVE)return true;return x[ea];},hasDetailedPresenceData:function(ea){return ba[ea]!=null;},getGroup:function(ea){return ea.some(function(fa){if(fa==l.getID())return false;return ca.get(fa)===i.ACTIVE;})?i.ACTIVE:i.OFFLINE;},set:function(ea,fa,ga,ha,ia,ja){if(ea==l.getID())return false;if(y.has(parseInt(ea,10)))return false;var ka=ca.get(ea),la=false;if(fa!==undefined&&fa!==null){la=ka!=fa;switch(fa){case i.OFFLINE:case i.IDLE:case i.ACTIVE:case i.MOBILE:break;default:return false;}if(la&&ka==i.ACTIVE||fa==i.ACTIVE){var ma={};ma[ea]=q.get()/1000;m.update(ma);}v[ea]=fa;}var na=false;if(ia)na=ca.getCapabilities(ea)!=ia;if(ga){z[ea]=q.get();aa[ea]=ha;}if(ia)w[ea]=ia;if(ja)ba[ea]=ja;var oa=la||na;if(oa)da();return oa;},setMobileFriends:function(ea){x=r(ea);},setPerpetuallyMobileBuddies:function(ea){y=new o(ea);},getOnlineIDs:function(){var ea,fa=[];for(ea in v)if(ca.get(ea)===i.ACTIVE)fa.push(ea);return fa;},getAvailableIDs:function(){var ea=ca.getOnlineIDs(),fa;for(fa in x){if(v[fa])continue;ea.push(fa);}return ea;},getOnlineCount:function(){return ca.getOnlineIDs().length;},getPresenceStats:function(){var ea=0,fa=0,ga=0,ha=0,ia=0;for(var ja in v){ea+=1;switch(ca.get(ja)){case i.OFFLINE:fa+=1;break;case i.IDLE:ga+=1;break;case i.ACTIVE:ha+=1;break;case i.MOBILE:ia+=1;break;default:break;}}return {total:ea,offline:fa,idle:ga,active:ha,mobile:ia};},getDebugInfo:function(ea){return {id:ea,presence:v[ea],detailedPresence:ba[ea],overlaySource:aa[ea],overlayTime:z[ea],mobile:x[ea]};},getAllDebugInfo:function(){return {presence:v,detailedPresence:ba,overlaySource:aa,overlayTime:z,mobile:x};}});f.exports=ca;},null);
__d('ChatImpressionLogger',['AsyncSignal','ChatConfig','ChatVisibility','immutable','Poller','PresencePrivacy','PresenceStatus','requireWeak','debounceAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=null;o('AvailableList',function(w){return q=w;});var r=null;function s(){if(!r)return '';return k.List(r.getSortedList()).toArray().toString();}function t(){if(!r||!q)return '';var w=[],x=k.List(r.getSortedList()).toArray();for(var y=0;y<x.length;y++)w[y]=q.get(x[y]);return w.toString();}function u(w){w.setURI('/ajax/chat/imps_logging.php').setData({list_availability:t(),sorted_list:s(),source:'periodical_imps'});}var v={init:function(w){r=w;var x=i.get('chat_impression_logging_periodical',0);if(x){var y=i.get('periodical_impression_logging_config.interval'),z=new l({interval:y,setupRequest:u,clearOnQuicklingEvents:false,dontStart:true});m.subscribe('privacy-user-presence-changed',p(function(){if(j.isOnline()){z.start();}else z.stop();}));}this.init=function(){};},logImpression:function(w,x,y){var z=i.get('chat_impression_logging_with_click'),aa={list_availability:z?t():'',sorted_list:z?s():'',source:w,target:x,target_presence:n.get(x),viewport_width:document.body.clientWidth};new h('/ajax/chat/ct.php',Object.assign(aa,y)).send();}};f.exports=v;},null);
__d('ChatTypeaheadConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={USER_TYPE:'user',THREAD_TYPE:'thread',FRIEND_TYPE:'friend',NON_FRIEND_TYPE:'non_friend',FB4C_TYPE:'fb4c',PAGE_TYPE:'page',HEADER_TYPE:'header'};f.exports=h;},null);
__d('MercuryIDs',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={isValid:function(i){if(!i||typeof i!=='string')return false;return (/^\w{3,12}:/.test(i));},isValidThreadID:function(i){if(!h.isValid(i))return false;var j=h.tokenize(i);switch(j.type){case 'user':case 'group':case 'thread':case 'root':case 'pending':return true;default:return false;}},tokenize:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=i.indexOf(':');return {type:i.substr(0,j),value:i.substr(j+1)};},getUserIDFromParticipantID:function(i){if(!this.isValid(i))throw 'bad_id_format '+i;var j=h.tokenize(i),k=j.type,l=j.value;if(k!='fbid')return null;return l;},getParticipantIDFromUserID:function(i){if(isNaN(i))throw 'Not a user ID: '+i;return 'fbid:'+i;},getUserIDFromThreadID:function(i){if(!this.isCanonical(i))return null;return this.tokenize(i).value;},getThreadIDFromUserID:function(i){return 'user:'+i;},getThreadIDFromThreadFBID:function(i){return 'thread:'+i;},getThreadIDFromParticipantID:function(i){var j=this.getUserIDFromParticipantID(i);return j?this.getThreadIDFromUserID(j):null;},getParticipantIDFromFromThreadID:function(i){return this.getParticipantIDFromUserID(this.getUserIDFromThreadID(i)||'');},isCanonical:function(i){return this.isValid(i)&&this.tokenize(i).type==='user';},isGroupChat:function(i){return this.isValid(i)&&this.tokenize(i).type!=='user';},isLocalThread:function(i){return this.isValid(i)&&this.tokenize(i).type==='root';}};f.exports=h;},null);
__d('WebMessengerPermalinkConstants',['MercuryConfig','URI'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={ARCHIVED_PATH:'/messages/archived',BASE_PATH:'/messages',PENDING_PATH:'/messages/pending',OTHER_PATH:'/messages/other',SPAM_PATH:'/messages/spam',COMPOSE_POSTFIX_PATH:'/new',SEARCH_POSTFIX_PATH:'/search',TID_POSTFIX_PARTIAL_PATH:'/conversation-',overriddenVanities:h.CoreGraphEnabled?'(archived|other|pending|spam|new|search|conversation-.*)':'(archived|other|spam|new|search|conversation-.*)',getURIPathForThreadID:function(k,l){return (l||j.BASE_PATH)+j.TID_POSTFIX_PARTIAL_PATH+i.encodeComponent(i.encodeComponent(k));},getThreadIDFromURI:function(k){var l=k.getPath().match(j.BASE_PATH+'(/[^/]*)*'+j.TID_POSTFIX_PARTIAL_PATH+'([^/]+)');if(l){var m=i.decodeComponent(i.decodeComponent(l[2]));return m;}},getURIPathForIDOrVanity:function(k,l){if(k.match('^'+j.overriddenVanities+'$'))k='.'+k;return (l||j.BASE_PATH)+'/'+k;},getUserIDOrVanity:function(k){var l=k.match(j.BASE_PATH+'.*/([^/]+)/?$'),m=l&&l[1],n=j.overriddenVanities;if(!m||m.match('^'+n+'$')){return false;}else if(m.match('^\\.'+n+'$')){return m.substr(1);}else return m;}};f.exports=j;},null);
__d('ChatOpenTab',['BusinessURI.brands','ChatTypeaheadConstants','ContextualThing','Event','goURI','MercuryIDs','MercuryParticipantTypes','Parent','WebMessengerPermalinkConstants','curry','cx','emptyFunction','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=null;t('ChatApp',function(ea){return u=ea;});function v(ea,fa){var ga=ea?h(p.getURIPathForThreadID(ea)):h(p.BASE_PATH+p.COMPOSE_POSTFIX_PATH);if(fa)ga.addQueryData({ref:fa});l(ga);}function w(ea,fa){v(m.getThreadIDFromUserID(ea),fa);}function x(ea,fa,ga){w(fa,ga);}function y(ea,fa){v(m.getThreadIDFromThreadFBID(ea),fa);}function z(ea,fa){v(null,fa);}function aa(ea,fa,ga,ha){k.listen(ea,'click',function(ia){if(da.canOpenTab()){ha(fa,ga);return ia.kill();}});}function ba(ea,fa,ga,ha){da.impl()._logChatOpenTabEvent(ea,fa,ga,ha);}function ca(ea){var fa=j.getContext(ea);return fa&&o.byClass(fa,"_3qw")!==null;}var da={canOpenTab:function(){return u&&!u.isHidden();},openEmptyTab:function(ea,fa,ga){da.impl().openEmptyTab(ea,fa,ga);},listenOpenEmptyTab:function(ea,fa){aa(ea,null,fa,da.openEmptyTab);},openThread:function(ea,fa,ga,ha,ia){da.impl().openThreadTab(ea,fa,ga,ha,ia);},openClientTab:function(ea,fa,ga,ha,ia){var ja=da.impl();ja.openClientTab(ea,ha,ia);ja._logChatOpenTabEvent(fa,ea,null,ga);},listenOpenThread:function(ea,fa,ga){aa(ea,fa,ga,da.openThread);},openUserTab:function(ea,fa,ga){da.impl().openUserTab(ea,fa,ga);},openPageTab:function(ea,fa,ga){da.impl().openPageTab(ea,fa,ga);return true;},listenOpenUserTab:function(ea,fa,ga){if(!ca(ea))aa(ea,fa,ga,da.openUserTab);},listenOpenPageTab:function(ea,fa,ga,ha){if(!ca(ea))aa(ea,fa,ha,q(da.openPageTab,ga));},openTabByType:function(ea,fa,ga){if(fa===i.THREAD_TYPE){if(ea){this.openThread(ea,ga);}else this.openEmptyTab(null,ga);}else if(!fa||fa===n.FRIEND||fa===i.FRIEND_TYPE||fa===i.PAGE_TYPE||fa===i.USER_TYPE)this.openUserTab(ea,ga);},impl:function(){if(u&&u.isInitialized()&&!u.isHidden()&&u.chatOpenTabImpl){return u.chatOpenTabImpl;}else return {openClientTab:v,openUserTab:w,openEmptyTab:z,openThreadTab:y,openPageTab:x,_logChatOpenTabEvent:s};}};f.exports=da;},null);
__d('ChatWelcomeMessage',['ImmutableObject'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(){this.$ChatWelcomeMessage1={};}i.prototype.setWelcomeMessage=function(k,l,m){this.$ChatWelcomeMessage1[k]=new h({timestamp:Date.now(),thread_id:k,author:l,body:m});};i.prototype.getWelcomeMessage=function(k){return this.$ChatWelcomeMessage1[k];};var j=new i();f.exports=j;},null);
__d('CenteredContainer.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'CenteredContainer',propTypes:{fullHeight:k.bool,vertical:k.bool,horizontal:k.bool},getDefaultProps:function(){return {fullHeight:false,vertical:false,horizontal:true};},render:function(){var m=(this.props.vertical?"_3bwv":'')+(this.props.horizontal?' '+"_3bww":''),n=h.Children.map(this.props.children,function(p){return (h.createElement('div',{className:"_3bwx"},p));}),o=j(this.props.className,this.props.fullHeight?"_5bpf":'');return (h.createElement('div',babelHelpers._extends({},this.props,{className:o}),h.createElement('div',{className:m},h.createElement('div',{className:"_3bwy"},n))));}});f.exports=l;},null);
__d('getDOMImageSize',['URI'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();function i(n){n.onload=null;n.onerror=null;n.onreadystatechange=null;n._callback=null;n._thisObj=null;n._srcStr=null;n.parentNode&&n.parentNode.removeChild(n);}function j(){var n=this;if(n._callback)n._callback.call(n._thisObj,n.naturalWidth||n.width,n.naturalHeight||n.height,n._srcStr);i(n);}function k(){var n=this;if(n.readyState==='complete')j.call(n);}function l(){var n=this;if(n._callback)n._callback.call(n._thisObj,0,0,n._srcStr);i(n);}function m(n,o,p){p=p||null;if(!n){o.call(p,0,0,'');return;}var q=document.body;if(!q){setTimeout(m.bind(this,n,o,p),500);return;}var r;if(typeof n==='string'){r=n;}else if(typeof n==='object')if(typeof n.width==='number'&&typeof n.height==='number'){if(typeof n.src==='string'){r=n.src;if(n.naturalWidth&&n.naturalHeight){o.call(p,n.naturalWidth,n.naturalHeight,r);return;}}if(typeof n.uri==='string'){r=n.uri;if(n.width&&n.height){o.call(p,n.width,n.height,r);return;}}}else if(n instanceof h)r=n.toString();if(!r){o(0,0,n);return;}var s=document.createElement('img');s.onreadystatechange=k;s.onload=j;s.onerror=l;s._callback=o;s._thisObj=p;s._srcStr=r;s.src=r;s.style.cssText='\n    position:absolute;\n    left:-5000px;\n    top:-5000px;\n    width:auto;\n    height:auto;\n    clip:rect(0 0 0 0);\n  '.replace(/\s+/,' ');q.insertBefore(s,q.firstChild);}f.exports=m;},null);
__d('CachedDOMImageSizePool',['debounce','getDOMImageSize'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k,l){'use strict';this.$CachedDOMImageSizePool1={};this.$CachedDOMImageSizePool2=l;this.$CachedDOMImageSizePool3=0;this.$CachedDOMImageSizePool4=k;this.$CachedDOMImageSizePool5=h(this.$CachedDOMImageSizePool6,5000,this);this.$CachedDOMImageSizePool7={};this.$CachedDOMImageSizePool8={};}j.prototype.get=function(k,l,m){'use strict';if(!k){l.call(m,0,0,k);return;}var n=this.$CachedDOMImageSizePool1[k];if(n){n.lastAccessTime=Date.now();l.call(m,n.width,n.height,n.src);}else if(this.$CachedDOMImageSizePool7[k]){this.$CachedDOMImageSizePool7[k].push(l);this.$CachedDOMImageSizePool8[k].push(m);}else{this.$CachedDOMImageSizePool7[k]=[l];this.$CachedDOMImageSizePool8[k]=[m];i(k,this.$CachedDOMImageSizePool9,this);}};j.prototype.set=function(k,l,m){'use strict';if(this.$CachedDOMImageSizePool3>this.$CachedDOMImageSizePool4)this.$CachedDOMImageSizePool5();var n=this.$CachedDOMImageSizePool1;if(k&&!n[k]){var o={width:l,height:m,src:k,lastAccessTime:Date.now()};n[k]=o;this.$CachedDOMImageSizePool3++;}};j.prototype.$CachedDOMImageSizePool9=function(k,l,m){'use strict';this.set(m,k,l);var n=this.$CachedDOMImageSizePool7[m],o=this.$CachedDOMImageSizePool8[m];for(var p=0,q=n.length;p<q;p++)n[p].call(o[p],k,l,m);delete this.$CachedDOMImageSizePool7[m];delete this.$CachedDOMImageSizePool8[m];};j.prototype.$CachedDOMImageSizePool6=function(){'use strict';var k=Date.now(),l=this.$CachedDOMImageSizePool1,m=this.$CachedDOMImageSizePool3,n=this.$CachedDOMImageSizePool2;for(var o in l){var p=l[o];if(k-p.lastAccessTime>n){delete l[o];m--;}}this.$CachedDOMImageSizePool3=m;};f.exports=j;},null);
__d('BackgroundImage.react',['CachedDOMImageSizePool','React','XUISpinner.react','cx','invariant','joinClasses','clamp'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=i.PropTypes,p='(-?(\\d+\\.)?\\d+(px|\\%))',q=new RegExp('^'+p+'?(\\s'+p+')?$','g'),r=new h(50,10*60*1000),s=i.createClass({displayName:'BackgroundImage',propTypes:{src:o.string,width:o.number.isRequired,height:o.number.isRequired,backgroundSize:o.oneOf(['contain','cover','containinside','coverinside']),loadingIndicatorStyle:o.oneOf(['none','large','small']),backgroundPosition:function(t,u,v){var w=t[u];if(w){!(typeof w==='string')?l(0):undefined;!w.match(q)?l(0):undefined;}!(t.backgroundFocus==null||t.backgroundPosition==null)?l(0):undefined;},backgroundFocus:function(t,u,v){var w=t[u];if(w){!(typeof w==='string')?l(0):undefined;!w.match(q)?l(0):undefined;}!(t.backgroundFocus==null||t.backgroundPosition==null)?l(0):undefined;},onImageLoad:o.func,optimizeResizeSpeed:o.bool,onContextMenu:o.func},getInitialState:function(){return {imageWidth:null,imageHeight:null,imageSrc:this.props.src,loading:true};},getDefaultProps:function(){return {optimizeResizeSpeed:false,loadingIndicatorStyle:'none'};},componentDidMount:function(){this._resolveImageSize();},componentDidUpdate:function(t){if(this.props.src!==this.state.imageSrc)this.setState({imageWidth:0,imageHeight:0,imageSrc:this.props.src,loading:true},this._resolveImageSize);},_resolveImageSize:function(){var t=this.state.imageSrc;if(t)r.get(t,this._onImageSizeResolved,this);},render:function(){var t={width:this.props.width+'px',height:this.props.height+'px'},u=m(this.props.className,"_5f0d");return (i.createElement('div',babelHelpers._extends({},this.props,{className:m(this.props.className,u),style:babelHelpers._extends({},this.props.style||{},t),onContextMenu:this.props.onContextMenu}),this._renderImage(),this._renderContent(),this._renderLoadingIndicator()));},_renderLoadingIndicator:function(){if(!this.state.loading||this.props.loadingIndicatorStyle==='none')return null;return (i.createElement('div',{className:"_1qe- _5lar"},i.createElement('div',{className:"_1qe_"},i.createElement('div',{className:"_1qf0"},i.createElement(j,{size:this.props.loadingIndicatorStyle})))));},_renderContent:function(){if(this.props.children)return (i.createElement('div',{className:"_1qe-"},i.createElement('div',{className:"_1qe_"},i.createElement('div',{className:"_1qf0"},this.props.children))));},_renderImage:function(){if(!this.state.imageWidth||!this.state.imageHeight)return;var t=this.props.width,u=this.props.height,v,w;switch(this.props.backgroundSize){case 'cover':v='cover';w=false;break;case 'coverinside':v='cover';w=true;break;case 'contain':v='contain';w=false;break;case 'containinside':v='contain';w=true;}var x=this.state.imageWidth,y=this.state.imageHeight,z=t/u,aa=x/y;if(v==='contain')if((x>t||!w)&&aa>=z){x=t;y=x/aa;}else if(y>u||!w){y=u;x=y*aa;}if(v==='cover')if((x>t||!w)&&aa>=z){y=u;x=y*aa;}else if(y>u||!w){x=t;y=x/aa;}var ba=this._getImageStyle(x,y);return (i.createElement('img',{alt:'',className:"_5i4g"+(this.props.optimizeResizeSpeed?' '+"_5sjv":''),style:ba,src:this.state.imageSrc}));},_getImageStyle:function(t,u){var v=['50%','50%'],w=this._getBackgroundPositionPxValue;if(this.props.backgroundPosition){v=this.props.backgroundPosition.split(' ');}else if(this.props.backgroundFocus){v=this.props.backgroundFocus.split(' ');w=this._getBackgroundFocusPxValue;}return {width:Math.round(t)+'px',height:Math.round(u)+'px',left:w(v[0],t,this.props.width),top:w(v[1]||v[0],u,this.props.height)};},_getBackgroundPositionPxValue:function(t,u,v){var w=parseFloat(t),x=t.substr(w.toString().length);if(x==='px')return t;return Math.round((v-u)*(w/100))+'px';},_getBackgroundFocusPxValue:function(t,u,v){var w=parseFloat(t),x=t.substr(w.toString().length);if(u<v)return '0';var y=x==='px'?w:Math.round(u*(w/100)),z=y-v/2;z=n(z,0,u-v);return -z+'px';},_onImageSizeResolved:function(t,u,v){if(!this.isMounted()||this.state.imageSrc!==v)return;var w=this.props.onImageLoad?this.props.onImageLoad.bind(null,t,u):null;this.setState({imageWidth:t,imageHeight:u,loading:false},w);}});f.exports=s;},null);
__d('P2PTriggersUtils',['P2PGKValues'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=/\$((\d{1,3}(,\d{3})*)|\d+)(\.\d{1,2})?(?=\s|\.\s|\,\s|$|\.$|\,$|\?|\!|\")/,j={canSeeTriggers:function(k){if(!h.P2PEnabled)return false;return true;},getMatches:function(k){return k.match(i);}};f.exports=j;},null);
__d('MessengerDispatcher',['Dispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('ImageSourceType',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={PROFILE_PICTURE:'profile_picture',IMAGE:'image'};f.exports=h;},null);
__d('ImageSourceRequest',['CurrentUser','ImageSourceType','KeyedCallbackManager','PhotoResizeModeConst','MercuryServerDispatcher','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(){'use strict';this._request={fbid:null,type:null,width:null,height:null,resize_mode:null};this._callback=null;}n.prototype.setFBID=function(r){'use strict';this._request.fbid=r;return this;};n.prototype.setType=function(r){'use strict';if(!m([i.PROFILE_PICTURE,i.IMAGE],r))throw new TypeError('ImageSourceRequest.setType: invalid type '+r);this._request.type=r;return this;};n.prototype.setDimensions=function(r,s){'use strict';this._request.width=r;this._request.height=s;return this;};n.prototype.setResizeMode=function(r){'use strict';if(!m([k.COVER,k.CONTAIN],r))throw new TypeError('ImageSourceRequest.setResizeMode: invalid resize mode '+r);this._request.resize_mode=r;return this;};n.prototype.setCallback=function(r){'use strict';this._callback=r;return this;};n.prototype.send=function(){'use strict';if(!this._request.fbid||!this._request.width||!this._request.height||!this._request.type||!this._request.resize_mode||!this._callback)throw new Error('ImageSourceRequest: You must set all the fields');var r=p(),s=q(this._request);r.executeOrEnqueue(s,this._callback);if(r.getUnavailableResourcesFromRequest(s).length===1){l.trySend('/ajax/image_source.php',{requests:[this._request]});return true;}return false;};var o=null;function p(){if(o)return o;var r=new j();o=r;l.registerEndpoints({'/ajax/image_source.php':{request_user_id:h.getID(),mode:l.BATCH_DEFERRED_MULTI,batch_function:function(s,t){var u;(u=s.requests).push.apply(u,t.requests);return s;},handler:function(s,t){var u=t.getData().requests;for(var v=0;v<u.length;++v)r.setResource(q(u[v]),s[v]);}}});return r;}function q(r){return [r.fbid,r.type,r.width,r.height,r.resize_mode].join('|');}f.exports=n;},null);
__d('MercuryAssert',['MercuryIDs'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();f.exports={isParticipantID:function(i){if(!h.isValid(i))throw 'bad_participant_id '+i;},allParticipantIDs:function(i){i.forEach(this.isParticipantID);},isUserParticipantID:function(i){var j=h.tokenize(i);if(j.type!='fbid')throw 'bad_user_id '+i;},isEmailParticipantID:function(i){var j=h.tokenize(i);if(j.type!='email')throw 'bad_email_id '+i;},allThreadID:function(i){i.forEach(this.isThreadID);},isThreadID:function(i){if(!h.isValid(i))throw 'bad_thread_id '+i;}};},null);
__d('FBID',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={isUser:function(i){return i<2.2e+09||i>=1e+14&&i<=100099999989999||i>=8.9e+13&&i<=89999999999999||i>=6.000001e+13&&i<=60000019999999;}};f.exports=h;},null);
__d('MercuryServerRequestSingletonMixin',['CurrentUser','FBID'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={_getInstances:function(){if(!this._instances)this._instances={};return this._instances;},get:function(){return this.getForFBID(h.getID());},getForFBID:function(k){var l=this._getInstances();if(!l[k])if(i.isUser(k)){l[k]=new this(k);}else{var m;e(['MercuryPageServerRequests'],function(n){m=new n(k);});l[k]=m;}return l[k];}};f.exports=j;},null);
__d('PagesMessengerThreadUtils',['MessagingTag','PageMessageEnumTag'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={isFlagThread:function(k){if(k&&k.page_thread_info&&'flagged' in k.page_thread_info)return k.page_thread_info.flagged;return false;},isPageSpecficFilter:function(k){if(k===i.FLAG)return true;return false;},getBatchActionMenuParam:function(k){var l=false,m=false,n=false,o=false,p=false,q=false,r=false,s=false,t=false;if(k.folder===h.INBOX&&!k.is_archived){l=true;o=true;if(j.isFlagThread(k)){r=true;}else q=true;if(k&&k.unread_count===0){t=true;}else s=true;}else if(k.folder===h.SPAM){p=true;}else if(k.is_archived){m=true;n=true;}if(k&&k.unread_count===0){t=true;}else s=true;return {showArchive:l,showDelete:m,showUnarchive:n,showSpam:o,showUnspam:p,showFlag:q,showUnflag:r,showMarkRead:s,showMarkUnread:t,showHideContextCard:false,showShowContextCard:false};}};f.exports=j;},null);
__d('MercuryPageServerRequests',['MercuryAPIArgsSource','MercuryAssert','MercuryServerRequests','PageMessageEnumTag','PagesMessengerThreadUtils','MercuryServerDispatcher'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o,p=h.MERCURY;n=babelHelpers.inherits(q,j);o=n&&n.prototype;function q(r){'use strict';o.constructor.call(this,r);var s={'/pages/messaging/thread_tag/add/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/remove/':{request_user_id:r,mode:m.BATCH_SUCCESSIVE,batch_function:this.$MercuryPageServerRequests1,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/thread_tag/list/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)},'/pages/messaging/create_note/':{request_user_id:r,mode:m.IMMEDIATE,handler:(function(t,u){return this.__handleUpdate(t,u);}).bind(this)}};m.registerEndpoints(s);}q.prototype.$MercuryPageServerRequests1=function(r,s){'use strict';var t=r?r.tag_name:s.tag_name,u=r?r.thread_ids:[],v=s?s.thread_ids:[],w=u.concat(v),x={tag_name:t,thread_ids:w};return x;};q.prototype.addThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/add/',u);}).bind(this));};q.prototype.createNote=function(r,s,t){'use strict';i.isThreadID(t);this.__threadIDMap.getServerIDFromClientID(t,(function(u){var v={body:r,message_id:s,other_user_fbid:u};this.__sendRequest('/pages/messaging/create_note/',v);}).bind(this));};q.prototype.fetchThreadlistInfo=function(r,s,t,u,v){'use strict';if(l.isPageSpecficFilter(u)){v=v||p;var w={folder:t,tag_name:u,offset:r,limit:s};this.__sendRequest('/pages/messaging/thread_tag/list/',w);return;}o.fetchThreadlistInfo.call(this,r,s,t,u,v);};q.prototype.removeThreadFlag=function(r,s){'use strict';i.isThreadID(r);this.__threadIDMap.getServerIDFromClientID(r,(function(t){var u={thread_ids:[t],tag_name:k.FLAG};this.__sendRequest('/pages/messaging/thread_tag/remove/',u);}).bind(this));};q.prototype.toString=function(){'use strict';return 'MercuryPageServerRequests';};f.exports=q;},null);
__d('MercuryAttachment',['MercuryAttachmentContentType','MercuryAttachmentType','MercuryAudioType','MercuryConfig','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={getAttachIconClass:function(n){switch(n){case h.PHOTO:return "_y2-";case h.VIDEO:return "_y2_";case h.MUSIC:return "_y30";case h.VOICE:return "_y31";case h.TEXT:return "_y32";case h.MSWORD:return "_y33";case h.MSXLS:return "_y34";case h.MSPPT:return "_y35";}return "_y36";},getAttachIconClassByMime:function(n){if(n.startsWith('image')){return "_y2-";}else if(n.startsWith('video')){return "_y2_";}else if(n.startsWith('audio')){return "_y30";}else if(n.startsWith('text/plain')){return "_y32";}else return "_y36";},getAttachTypeByMime:function(n){if(n.startsWith('image')){return h.PHOTO;}else if(n.startsWith('video')){return h.VIDEO;}else if(n.startsWith('audio')){return h.MUSIC;}else if(n.startsWith('text/plain')){return h.TEXT;}else return h.UNKNOWN;},convertRaw:function(n){var o=[];for(var p=0;p<n.length;p++){var q=n[p];if(q.attach_type===i.PHOTO){o.push(q);}else if(q.filename){var r=m.getAttachTypeByMime(q.filetype),s={};s.attach_type=i.FILE;s.name=q.filename;s.icon_type=r;s.url='';o.push(s);}}return o;},get:function(n){var o=[];if(n.attachments){o=n.attachments;}else if(n.raw_attachments)o=this.convertRaw(n.raw_attachments);if(!(n.attachments&&n.attachments.length>0)){if(n.sticker_id)return o.concat([{attach_type:i.STICKER}]);if(n.preview_attachments&&n.preview_attachments.length>0)return o.concat(n.preview_attachments);}return o;},resizeContain:function(n,o){var p=n.width/n.height,q=o.width/o.height;if(q<p){return {width:Math.ceil(Math.min(n.height*q,o.width)),height:Math.ceil(Math.min(n.height,o.height))};}else return {width:Math.ceil(Math.min(n.width,o.width)),height:Math.ceil(Math.min(n.width/q,o.height))};},isBubblePreferred:function(n){if(k.ChatTabMessengerStyle)return !(this.isPhotoAttachment(n)||this.isStickerAttachment(n)||this.isVideoAttachment(n)||this.isVoiceAttachment(n));return !(this.isPhotoAttachment(n)||this.isStickerAttachment(n)||this.isVideoAttachment(n));},isPhotoAttachment:function(n){return !!(n.attach_type==i.PHOTO||n.attach_type==i.ANIMATED_IMAGE||n.attach_type==i.FILE&&n.preview_url);},isVideoAttachment:function(n){return n.attach_type==i.VIDEO;},isShareAttachment:function(n){return n.attach_type==i.SHARE;},isFileAttachment:function(n){return n.attach_type==i.FILE;},isErrorAttachment:function(n){return n.attach_type==i.ERROR;},isStickerAttachment:function(n){return n.attach_type==i.STICKER;},isVoiceAttachment:function(n){if(!n.metadata)return false;return (n.metadata.type===j.AudioClip||n.metadata.type===j.VoiceMessageWithTranscript);},hasAttribution:function(n){return !!n.app_attribution;}};f.exports=m;},null);
__d('MercurySingletonMixin',['CurrentUser'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={_getInstances:function(){if(!this._instances)this._instances={};return this._instances;},get:function(){return this.getForFBID(h.getID());},getForFBID:function(j){var k=this._getInstances();if(!k[j])k[j]=new this(j);return k[j];}};f.exports=i;},null);
__d('MercuryThreadInformer',['ArbiterMixin','LogHistory','MercuryAssert','MercuryLoggingHelper','MercurySingletonMixin','mapObject','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=i.getInstance('mercury_informer');o=babelHelpers.inherits(r,n(h));p=o&&o.prototype;function r(t){p.constructor.call(this);this.$MercuryThreadInformer1=t;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5=false;this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8={};this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};this.$MercuryThreadInformer11=0;}r.prototype.updatedThread=function(t){this.$MercuryThreadInformer3[t]=true;this.$MercuryThreadInformer12();};r.prototype.deletedThread=function(t){this.$MercuryThreadInformer2[t]=true;this.$MercuryThreadInformer12();};r.prototype.updatedThreadlist=function(){this.$MercuryThreadInformer5=true;this.$MercuryThreadInformer12();};r.prototype.updatedUnseenState=function(){this.$MercuryThreadInformer6=true;this.$MercuryThreadInformer12();};r.prototype.updatedUnreadState=function(){this.$MercuryThreadInformer7=true;this.$MercuryThreadInformer12();};r.prototype.changedThreadReadState=function(t,u,v){if(!this.$MercuryThreadInformer4[t]||this.$MercuryThreadInformer4[t].timestamp<v)this.$MercuryThreadInformer4[t]={mark_as_read:u,timestamp:v};this.$MercuryThreadInformer12();};r.prototype.receivedMessage=function(t){j.isThreadID(t.thread_id);var u=t.thread_id;if(!this.$MercuryThreadInformer8[u])this.$MercuryThreadInformer8[u]=[];this.$MercuryThreadInformer8[u].push(t);this.updatedThread(u);};r.prototype.reorderedMessages=function(t,u){this.$MercuryThreadInformer9[t]={source:u};this.$MercuryThreadInformer12();};r.prototype.updatedMessage=function(t,u,v){if(!this.$MercuryThreadInformer10[t])this.$MercuryThreadInformer10[t]={};this.$MercuryThreadInformer10[t][u]={source:v};this.updatedThread(t);};r.prototype.synchronizeInforms=function(t){this.$MercuryThreadInformer11++;try{t();}catch(u){throw u;}finally{this.$MercuryThreadInformer11--;this.$MercuryThreadInformer12();}};r.prototype.listen=function(t,u){return this.subscribe('threads-updated',function(v,w){if(w[t])u(t);});};r.prototype.$MercuryThreadInformer12=function(){if(!this.$MercuryThreadInformer11){var t=this.$MercuryThreadInformer2,u=this.$MercuryThreadInformer3,v=this.$MercuryThreadInformer4,w=this.$MercuryThreadInformer5,x=this.$MercuryThreadInformer6,y=this.$MercuryThreadInformer7,z=this.$MercuryThreadInformer8,aa=this.$MercuryThreadInformer9,ba=this.$MercuryThreadInformer10;this.$MercuryThreadInformer2={};this.$MercuryThreadInformer3={};this.$MercuryThreadInformer4={};this.$MercuryThreadInformer5=false;this.$MercuryThreadInformer6=false;this.$MercuryThreadInformer7=false;this.$MercuryThreadInformer8={};this.$MercuryThreadInformer9={};this.$MercuryThreadInformer10={};var ca=Object.keys(u);if(ca.length||w)this.inform('threadlist-updated',ca);if(ca.length)this.$MercuryThreadInformer13('threads-updated',u);for(var da in v){this.$MercuryThreadInformer13('thread-read-changed',v);break;}for(da in t){this.$MercuryThreadInformer13('threads-deleted',t);break;}if(x)this.$MercuryThreadInformer13('unseen-updated',null);if(y)this.$MercuryThreadInformer13('unread-updated',null);for(da in z){this.$MercuryThreadInformer13('messages-received',z);break;}for(da in aa){this.$MercuryThreadInformer13('messages-reordered',aa);break;}for(da in ba){this.$MercuryThreadInformer13('messages-updated',ba);break;}}};r.prototype.$MercuryThreadInformer13=function(t,u){s(t,u);this.inform(t,u);};function s(t,u){var v=u;if(t=='messages-received')v=m(v,function(w){return w.map(function(x){return k.obfuscateMessage(x);});});q.debug(t,v);}Object.assign(r,l);f.exports=r;},null);
__d('MercuryDispatcher',['ArbiterMixin','LogHistory','MercuryLoggingHelper','MercuryPayloadSource','MercurySingletonProvider','MercuryThreadInformer','invariant','isEmpty','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r;'use strict';var s=i.getInstance('mercury_dispatcher');q=babelHelpers.inherits(t,p(h));r=q&&q.prototype;t.getForFBID=function(v){return u.getForFBID(v);};t.get=function(){return u.get();};function t(v){r.constructor.call(this);this.$MercuryDispatcher1=v;}t.prototype.handleUpdate=function(v){this.$MercuryDispatcher2(v);!(!!v.from_client!==!!v.preprocessed)?n(0):undefined;delete v.preprocessed;if(!o(v))m.getForFBID(this.$MercuryDispatcher1).synchronizeInforms((function(){if(!v.from_client)this.inform('payload-preprocessed',v);this.inform('update-thread-ids',v.newlyAddedClientIDs||{});this.inform('update-participants',v);this.inform('update-threads',v);this.inform('update-unread',v);this.inform('update-threadlist',v);this.inform('update-pinned-threads',v);this.inform('update-messages',v);this.inform('update-unseen',v);this.inform('update-typing-state',v);this.inform('update-delivery',v);this.inform('update-roger',v.roger);this.inform('update-blocked-users',v);this.inform('model-update-completed',null);}).bind(this));};t.prototype.$MercuryDispatcher2=function(v){var w={actions:[],threads:[]};if(v){if(v.actions)w.actions=v.actions.map(function(z){return j.obfuscateMessage(z);});if(v.threads)w.threads=v.threads.map(function(z){return j.obfuscateThread(z);});}var x=Object.assign({},v,w),y=v.payload_source;if(y!==k.CLIENT_CHANGE_READ_STATUS&&y!==k.CLIENT_MARK_THREAD_SEEN)s.debug('update:'+y,{payload:x,from_client:v.from_client});};var u=new l(t);f.exports=t;},null);
__d('MercurySendErrorLogger',['Banzai','BanzaiLogger'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.create({retry:true}),k=h.isEnabled('mercury_send_error_logging'),l={log:function(m){if(!k)return;var n={message_id:m.message_id,timestamp_client:Date.now(),error_type:m.error_data.type,error_code:m.error_data.code,error_description:m.error_data.description,is_transient:m.error_data.is_transient};j.log('MercurySendErrorLoggerConfig',n);}};f.exports=l;},null);
__d('MercuryServerPayloadPreprocessor',['CurrentEnvironment','MercuryIDs','MercuryConfig','MercuryActionStatus','MercuryActionType','MercuryAttachment','MercuryDispatcher','MercurySendErrorLogger','MercurySingletonMixin','MercuryThreadIDMap','StoryAttachmentStyle','invariant','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();function u(v){this.$MercuryServerPayloadPreprocessor1=v;this.$MercuryServerPayloadPreprocessor2=q.getForFBID(this.$MercuryServerPayloadPreprocessor1);this.$MercuryServerPayloadPreprocessor3=n.getForFBID(this.$MercuryServerPayloadPreprocessor1);}u.prototype.handleUpdate=function(v){var w={};!!v.from_client?s(0):undefined;(v.threads||[]).forEach((function(oa){this.$MercuryServerPayloadPreprocessor4(oa,w);var pa=this.$MercuryServerPayloadPreprocessor2.getServerIDFromClientIDNow(oa.thread_id);e(['MercuryServerRequests'],(function(qa){var ra=qa.getForFBID(this.$MercuryServerPayloadPreprocessor1);ra.markThreadFetched(oa.thread_id);ra.markThreadFetched(pa);ra.updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));(v.ordered_threadlists||[]).forEach((function(oa){var pa=oa.thread_fbids||[];pa=pa.concat(oa.other_user_fbids||[]);oa.thread_ids=pa.map((function(qa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(qa.toString());}).bind(this));}).bind(this));if(v.pinned_threads&&v.pinned_threads.thread_fbids)v.pinned_threads.thread_fbids=v.pinned_threads.thread_fbids.map((function(oa){return this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(oa);}).bind(this));if(v.delivery_receipts){var x={};for(var y=v.delivery_receipts,z=Array.isArray(y),aa=0,y=z?y:y[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ba;if(z){if(aa>=y.length)break;ba=y[aa++];}else{aa=y.next();if(aa.done)break;ba=aa.value;}var ca=ba,da=ca.other_user_fbid?i.getThreadIDFromUserID(ca.other_user_fbid):this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ca.thread_fbid);x[da]=ca.time;}v.delivery_receipts=x;}v.actions=v.actions||[];v.actions.forEach((function(oa){if(oa.action_type===l.SEND_MESSAGE&&oa.status===k.ERROR)o.log(oa);var pa=null,qa=null;if(oa.other_user_fbid){qa=i.getThreadIDFromUserID(oa.other_user_fbid);pa=oa.other_user_fbid;}else if(oa.thread_fbid){qa=i.getThreadIDFromThreadFBID(oa.thread_fbid);pa=oa.thread_fbid;}else if(oa.thread_id){qa=i.getThreadIDFromThreadFBID(oa.thread_id);pa=oa.thread_id;}else if(oa.status&&oa.status!=k.SUCCESS&&oa.client_thread_id){qa=oa.client_thread_id;}else s(0);pa=pa&&pa.toString();oa.thread_id=this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(pa)?this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(pa):qa;if(oa.action_type==l.SEND_MESSAGE&&oa.client_thread_id&&pa){oa.thread_id=oa.client_thread_id;this.$MercuryServerPayloadPreprocessor2.forceSetServerIDToClientID(pa,oa.client_thread_id);w[pa]=oa.client_thread_id;}!oa.thread_id?s(0):undefined;if(!v.payload_source||!v.payload_source.startsWith('server'))e(['MercuryServerRequests'],(function(ra){ra.getForFBID(this.$MercuryServerPayloadPreprocessor1).updateLastActionTimestamp(oa.timestamp);}).bind(this));}).bind(this));this.$MercuryServerPayloadPreprocessor5(v);this.$MercuryServerPayloadPreprocessor6(v);if(v.end_of_history){var ea=[];for(var fa=0;fa<v.end_of_history.length;fa++){var ga=v.end_of_history[fa];if(ga.type=='user'){ea.push('user:'+ga.fbid);}else if(ga.type=='thread'&&this.$MercuryServerPayloadPreprocessor2.hasClientIDForServerID(ga.fbid))ea.push(this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ga.fbid));}v.end_of_history=ea;}if(v.roger){var ha={};for(var ia in v.roger){var ja=Object.keys(v.roger[ia]),ka;if(ia){ka=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(ia);}else if(ja.length===1)ka=i.getThreadIDFromUserID(ja[0]);if(ka){var la=v.roger[ia];ha[ka]={};for(var ma in la)if(la.hasOwnProperty(ma)){var na=i.getParticipantIDFromUserID(ma);ha[ka][na]=la[ma];}}}v.roger=ha;}v.newlyAddedClientIDs=w;v.preprocessed=true;this.$MercuryServerPayloadPreprocessor3.handleUpdate(v);};u.prototype.$MercuryServerPayloadPreprocessor4=function(v,w){var x=v.other_user_fbid?v.other_user_fbid:v.thread_fbid;!x?s(0):undefined;var y=this.$MercuryServerPayloadPreprocessor2.getClientIDFromServerIDNow(x);if(!y){y=v.other_user_fbid?i.getThreadIDFromUserID(v.other_user_fbid):i.getThreadIDFromThreadFBID(v.thread_fbid);this.$MercuryServerPayloadPreprocessor2.setServerIDToClientID(x,y);this.$MercuryServerPayloadPreprocessor2.setDeprecatedServerIDToClientID(v.thread_id,y);w[x]=y;}v.thread_id=y;};u.prototype.$MercuryServerPayloadPreprocessor5=function(v){v.actions.forEach(function(w){if(w.action_type===l.USER_GENERATED_MESSAGE){w.attachments=w.attachments||[];w.attachments.forEach(function(x){if(m.isShareAttachment(x)&&h.messengerdotcom){var y=new t(x.share.uri);if(!y.getDomain())x.share.uri=y.setDomain('facebook.com').setSubdomain(t.getRequestURI().getSubdomain()).setProtocol('https').toString();}});}});};u.prototype.$MercuryServerPayloadPreprocessor6=function(v){if(!j.MercuryGenieRendering)return;v.actions.forEach(function(w){if(w.action_type!==l.USER_GENERATED_MESSAGE)return;var x=w;if(!x.has_attachment||!x.attachments)return;for(var y=x.attachments.length-1;y>=0;y-=1){var z=x.attachments[y];if(!z.share||!z.share.style_list||z.share.style_list[0]!=r.GENIE_MESSAGE)continue;if(z.share.target.genie_id)x.author=i.getParticipantIDFromUserID(z.share.target.genie_id);if(z.share.target&&!z.share.target.attachment){x.attachments.splice(y,1);x.has_attachment=x.attachments.length>0;}}});};Object.assign(u,p);f.exports=u;},null);
__d('MercuryMessageClientState',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DO_NOT_SEND_TO_SERVER:'do_not_send_to_server',SEND_TO_SERVER:'send_to_server'};f.exports=h;},null);
__d('MercuryServerSendMessageQueueSimulatedError',['AsyncRequest','AsyncResponse'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=9999,k={create:function(l){var m=new h(this.endpoint_uri).setData({message_batch:[l],client:this.client}),n=new i(m,{});Object.assign(n,{error:j,silentError:false,transientError:true,request:m});return n;}};f.exports=k;},null);
__d('MercuryServerSendMessageQueue',['BanzaiODS','LogHistory','MercuryLoggingHelper','MercuryServerRequestsConfig','MercuryServerDispatcher','MercuryServerSendMessageQueueSimulatedError'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n='/ajax/mercury/send_messages.php',o=i.getInstance('mercury_server_send_message_queue');function p(q,r,s,t){'use strict';this.sender_id=q;this.queue_id=r;this.$MercuryServerSendMessageQueue1=s.success_handler;this.$MercuryServerSendMessageQueue2=s.error_handler;this.$MercuryServerSendMessageQueue3=s.transport_error_handler;this.$MercuryServerSendMessageQueue4=s.timeout_handler;this.client=t;var u=null;if(k.msgrRegion)u={name:'X-MSGR-Region',value:k.msgrRegion};var v={};v[n]={request_user_id:this.sender_id,endpoint_id:this.queue_id,mode:l.IMMEDIATE,customHeader:u,handler:this.handleSuccess.bind(this),error_handler:this.handleError.bind(this),transport_error_handler:this.handleTransportError.bind(this),timeout:s.timeout,timeout_handler:this.handleTimeout.bind(this),connection_retries:s.connection_retries};l.registerEndpoints(v);this.pending_message=null;this.queue=[];}p.prototype.enqueue=function(q){'use strict';this.queue.push(q);this.$MercuryServerSendMessageQueue5();};p.prototype.$MercuryServerSendMessageQueue5=function(){'use strict';if(this.pending_message||!this.queue.length){if(this.pending_message)this.$MercuryServerSendMessageQueue6();return;}this.pending_message=this.queue.shift();l.trySend(n,{message_batch:[this.pending_message],client:this.client},null,this.sender_id,this.queue_id);};p.prototype.$MercuryServerSendMessageQueue7=function(){'use strict';while(this.queue.length)this.$MercuryServerSendMessageQueue8(this.queue.shift());};p.prototype.$MercuryServerSendMessageQueue8=function(q){'use strict';this.$MercuryServerSendMessageQueue2(m.create(q));o.error('mark_as_failed',{fbid:this.sender_id,queue_id:this.queue_id,message:j.obfuscateMessage(q)});};p.prototype.handleSuccess=function(q,r){'use strict';this.$MercuryServerSendMessageQueue1(q,r);this.pending_message=null;this.$MercuryServerSendMessageQueue5();};p.prototype.handleError=function(q){'use strict';this.$MercuryServerSendMessageQueue2(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTransportError=function(q){'use strict';this.$MercuryServerSendMessageQueue3(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.handleTimeout=function(q){'use strict';this.$MercuryServerSendMessageQueue4(q);this.$MercuryServerSendMessageQueue7();this.pending_message=null;};p.prototype.$MercuryServerSendMessageQueue6=function(){'use strict';o.debug('maybe_send_next_pending_message',{fbid:this.sender_id,queue_id:this.queue_id,pending_message:j.obfuscateMessage(this.pending_message),queue:this.queue.map(function(r){return j.obfuscateMessage(r);})});var q='send_queue.delayed.queue_length.'+this.queue.length.toString();h.bumpEntityKey('chat.web',q);};f.exports=p;},null);
__d('MercuryServerSendMessageQueueRouter',['BanzaiODS','LogHistory','Map','MercuryServerSendMessageQueue','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=i.getInstance('mercury_server_send_message_queue_router'),n='chat.web.send_queue_router';h.setEntitySample(n,.1);function o(p){'use strict';this.fbid=p;this.queues=new j();}o.prototype.enqueue=function(p,q,r,s){'use strict';if(!this.queues.has(p)){this.queues.set(p,new k(this.fbid,p,q,r));m.debug('added queue',{fbid:this.fbid,queue_id:p});h.bumpEntityKey(n,'new_queue');}this.queues.get(p).enqueue(s);};Object.assign(o,l);f.exports=o;},null);
__d('MercuryMessageIDs',['KeyedCallbackManager'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=new h(),j={getServerIDs:function(k,l){var m=k.filter(function(o){return o.indexOf('id')===-1;}),n=function(o){var p=k.map(function(q){return o[q]?o[q]:q;});l(p);};return i.executeOrEnqueue(m,n);},addServerID:function(k,l){i.setResource(k,l);}};f.exports=j;},null);
__d("MercuryServerSendMessageQueueOptions",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j,k,l,m,n){"use strict";this.success_handler=i;this.error_handler=j;this.transport_error_handler=k;this.timeout_handler=l;this.timeout=m;this.connection_retries=n;}f.exports=h;},null);
__d('MercuryServerRequests',['Arbiter','AsyncResponse','BanzaiODS','ChannelConstants','CurrentUser','LogHistory','MercuryActionStatus','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryDispatcher','MercuryThreadIDMap','MercuryErrorType','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySendErrorLogger','MercuryServerPayloadPreprocessor','MercuryServerRequestsConfig','MercuryServerSendMessageQueueRouter','MercuryServerRequestSingletonMixin','MercurySourceType','MercuryThreadlistConstants','MercuryMessageIDs','MessagingConfig','MessagingTag','MercuryServerDispatcher','MercuryServerSendMessageQueueOptions','createObjectFrom','errorCode','invariant','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa){'use strict';if(c.__markCompiled)c.__markCompiled();var pa=m.getInstance('mercury_server'),qa=p.MERCURY;function ra(cb){return cb.getError()?'_'+cb.getError():'';}function sa(cb,db){var eb=babelHelpers._extends({},cb),fb;if(db.threads){if(!eb.threads)eb.threads={};for(fb in db.threads)eb.threads[fb]=Object.keys(la((eb.threads[fb]||[]).concat(db.threads[fb])));}if(db.messages){if(!eb.messages)eb.messages={};for(fb in db.messages){if(!eb.messages[fb])eb.messages[fb]={};for(var gb in db.messages[fb])if(eb.messages[fb][gb]){eb.messages[fb][gb]=xa(eb.messages[fb][gb],db.messages[fb][gb]);}else eb.messages[fb][gb]=db.messages[fb][gb];}}eb.client=cb.client||db.client;return eb;}function ta(cb,db){var eb=Object.assign(la(cb.folders,true),la(db.folders,true)),fb=cb.client||db.client;return {folders:Object.keys(eb),client:fb};}function ua(cb,db){for(var eb in db)if(cb[eb]&&typeof cb[eb]==='object'){cb[eb]=xa(cb[eb],db[eb]);}else if(db[eb]&&typeof db[eb]==='object'){var fb={};Object.assign(fb,db[eb]);cb[eb]=fb;}return cb;}function va(cb,db){var eb=babelHelpers._extends({},cb.ids,db.ids),fb=cb.client||db.client;return {ids:eb,client:fb};}function wa(cb,db){return db;}function xa(cb,db){var eb=cb.offset<db.offset?cb.offset:db.offset,fb=cb.offset+cb.limit,gb=db.offset+db.limit,hb=fb>gb?fb:gb,ib=hb-eb,jb=cb.timestamp>db.timestamp?cb.timestamp:db.timestamp;return {offset:eb,limit:ib,timestamp:jb};}function ya(cb,db){var eb=cb.client||db.client,fb={ids:{},client:eb};Object.assign(fb.ids,cb.ids,db.ids);return fb;}function za(cb,db){var eb={},fb,gb=cb.client||db.client;delete cb.client;delete db.client;for(fb in cb)Object.assign(eb,la(cb[fb],fb));for(fb in db)Object.assign(eb,la(db[fb],fb));var hb={client:gb};for(var ib in eb){fb=eb[ib];if(!hb[fb])hb[fb]=[];hb[fb].push(ib);}return hb;}function ab(cb,db){var eb=cb.client||db.client,fb=la(cb.ids,true),gb=la(db.ids,true),hb=Object.assign(fb,gb);return {ids:Object.keys(hb),client:eb};}function bb(cb){this._fbid=cb;this._lastActionTimestamp=0;this._fetchingThreads={};this._sentMessagesTimestamp={};this.__threadIDMap=s.getForFBID(this._fbid);this._dispatcher=r.getForFBID(this._fbid);this._payloadPreprocessor=aa.getForFBID(this._fbid);this._sendMessageQueueOptions=new ka((function(db,eb){return this.__handleUpdate(db,eb);}).bind(this),(function(db){return this._handleSendMessageError(db);}).bind(this),(function(db){return this._handleSendMessageTransportError(db);}).bind(this),(function(db){return this._handleSendMessageTimeout(db);}).bind(this),ba.sendMessageTimeout,ha.SEND_CONNECTION_RETRIES);this._registerEndpoints();}Object.assign(bb.prototype,{fetchThreadlistInfo:function(cb,db,eb,fb,gb){eb=eb||ia.INBOX;gb=gb||qa;var hb=fb?ja.IMMEDIATE:null,ib={client:gb};ib[eb]={offset:cb,limit:db,filter:fb};this.__sendRequest('/ajax/mercury/threadlist_info.php',ib,hb);},fetchPinnedThreads:function(){this.__sendRequest('/mercury/pinned_threads/',{});},fetchUnseenThreadIDs:function(cb,db){db=db||qa;this.fetchThreadlistInfo(fa.RECENT_THREAD_OFFSET,fa.JEWEL_THREAD_COUNT,cb,null,db);},fetchUnreadThreadIDs:function(cb,db){db=db||qa;this.__sendRequest('/ajax/mercury/unread_threads.php',{folders:[cb],client:db});},fetchMissedMessages:function(cb,db,eb){db=db||qa;var fb={last_action_timestamp:eb||this._lastActionTimestamp,folders:cb,client:db};this.__sendRequest('/ajax/mercury/thread_sync.php',fb);},fetchThreadData:function(cb,db){db=db||qa;q.allThreadID(cb);var eb={threads:{},client:db},fb=[],gb=[];cb.forEach((function(ib){if(this._fetchingThreads[ib])return;this._fetchingThreads[ib]=true;var jb=this.__threadIDMap.getServerIDFromClientIDNow(ib),kb=v.tokenize(ib);if(kb.type=='user'){fb.push(kb.value);eb.threads.user_ids=fb;}else if(kb.type=='thread'){if(jb){gb.push(jb);}else gb.push(kb.value);eb.threads.thread_fbids=gb;}else if(kb.type=='root'){if(jb){gb.push(jb);eb.threads.thread_fbids=gb;}}else if(kb.type!='pending')throw new Error('Unknown thread type',kb);}).bind(this));this._dispatcher.inform("fetch-thread-data",eb);for(var hb in eb.threads){this.__sendRequest('/ajax/mercury/thread_info.php',eb);break;}},ensureThreadIsFetched:function(cb,db){db=db||qa;if(!this.__threadIDMap.getClientIDFromServerIDNow(cb)&&!this._fetchingThreads[cb]){this._fetchingThreads[cb]=true;this.__sendRequest('/ajax/mercury/thread_info.php',{threads:{thread_fbids:[cb]},client:db});}},fetchThreadMessages:function(cb,db,eb,fb,gb,hb){q.isThreadID(cb);hb=hb||qa;var ib,jb,kb=v.tokenize(cb),lb=this.__threadIDMap.getServerIDFromClientIDNow(cb),mb=false;if(lb){ib=lb;jb=kb.type=='user'?'user_ids':'thread_fbids';}else{ib=kb.value;switch(kb.type){case 'user':jb='user_ids';mb=true;break;case 'thread':jb='thread_fbids';break;}}var nb={messages:{},threads:{},client:hb};if(jb){nb.messages[jb]={};nb.messages[jb][ib]={offset:db,timestamp:fb,limit:eb};if(mb)nb.threads[jb]=[ib];this.__sendRequest('/ajax/mercury/thread_info.php',nb,gb);}else this.__threadIDMap.getServerIDFromClientID(cb,(function(ob){nb.messages.thread_fbids={};nb.messages.thread_fbids[ob]={offset:db,timestamp:fb,limit:eb};this.__sendRequest('/ajax/mercury/thread_info.php',nb,gb);}).bind(this));},handleThreadInfoError:function(cb){var db=cb.getRequest().getData(),eb=[];if(db.messages){for(var fb in db.messages.thread_fbids)eb.push(this._createServerErrorLogMessage(this.__threadIDMap.getClientIDFromServerIDNow(fb)));for(var gb in db.messages.user_ids)eb.push(this._createServerErrorLogMessage('user:'+gb));for(var hb in db.messages.group_ids)eb.push(this._createServerErrorLogMessage('group:'+hb));}if(eb.length)this._dispatcher.handleUpdate({actions:eb,from_client:true,payload_source:y.CLIENT_CHANNEL_MESSAGE});if(db.threads&&(db.threads.user_ids||db.threads.group_ids||db.threads.thread_ids)){var ib=5,jb=true;if(!db.retry_count){db.retry_count=0;if(db.messages)delete db.messages;}else if(db.retry_count>=ib){jb=false;(db.threads.thread_ids||[]).forEach((function(lb){if(lb in this._fetchingThreads)delete this._fetchingThreads[lb];}).bind(this));}if(jb){var kb=Math.pow(2,db.retry_count)*1000;oa((function(){pa.log('retry_thread',db);this.__sendRequest('/ajax/mercury/thread_info.php',db);}).bind(this),kb);db.retry_count++;}}},markFolderAsRead:function(cb){this.__sendRequest('/ajax/mercury/mark_folder_as_read.php',{folder:cb});var db=[{action_type:u.MARK_ALL_READ,action_id:null,folder:cb}];this._dispatcher.handleUpdate({global_actions:db,from_client:true,payload_source:y.CLIENT_CHANGE_READ_STATUS});},changeThreadReadStatus:function(cb,db,eb,fb,gb,hb){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(ib){var jb,kb={ids:(jb={},jb[ib]=db,jb),source:eb,watermarkTimestamp:fb,titanOriginatedThreadId:gb,shouldSendReadReceipt:hb};this.__sendRequest('/ajax/mercury/change_read_status.php',kb);}).bind(this));},changeThreadArchivedStatus:function(cb,db,eb){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(fb){var gb={ids:{},source:eb};gb.ids[fb]=db;this.__sendRequest('/ajax/mercury/change_archived_status.php',gb);}).bind(this));},changeThreadFolder:function(cb,db){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(eb){var fb={};fb[db]=[eb];this.__sendRequest('/ajax/mercury/move_thread.php',fb);}).bind(this));},changeMutingOnThread:function(cb,db){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(eb){this.__sendRequest('/ajax/mercury/change_mute_thread.php',{thread_fbid:eb,mute_settings:db,payload_source:qa});}).bind(this));},markThreadSpam:function(cb,db){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(eb){this.__sendRequest('/ajax/mercury/mark_spam.php',{id:eb,source:db});}).bind(this));},unmarkThreadSpam:function(cb,db){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(eb){this.__sendRequest('/ajax/mercury/unmark_spam.php',{id:eb,source:db});}).bind(this));},deleteThread:function(cb,db){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(eb){var fb={ids:[eb],source:db};this.__sendRequest('/ajax/mercury/delete_thread.php',fb);}).bind(this));},unpinThread:function(cb){q.isThreadID(cb);this.__threadIDMap.getServerIDFromClientID(cb,(function(db){this.__sendRequest('/mercury/unpin_thread/',{id:db});}).bind(this));},deleteMessages:function(cb,db){ga.getServerIDs(db||[],(function(eb){this.__sendRequest('/ajax/mercury/delete_messages.php',{message_ids:eb});}).bind(this));},sendDeliveryReceipts:function(cb,db){ga.getServerIDs(cb||[],(function(eb){this.__sendRequest('/ajax/mercury/delivery_receipts.php',{message_ids:eb,thread_ids:db});}).bind(this));},sendNewMessage:function(cb,db){db=db||qa;if(!cb.offline_threading_id)j.bumpEntityKey('chat.web','missing_otid_on_send');if(cb.client_state&&cb.client_state!==x.SEND_TO_SERVER)return;var eb=v.tokenize(cb.thread_id),fb=eb.type,gb=babelHelpers._extends({},cb);gb.thread_id=null;if(fb=='user'){gb.other_user_fbid=eb.value;this._sendNewMessageToServer(gb,db);}else if(fb=='thread'){gb.thread_fbid=eb.value;this._sendNewMessageToServer(gb,db);}else if(fb=='root'&&eb.value==gb.offline_threading_id){gb.client_thread_id=cb.thread_id;this._sendNewMessageToServer(gb,db);}else{!v.isLocalThread(cb.thread_id)?na(0):undefined;this.__threadIDMap.getServerIDFromClientID(cb.thread_id,(function(hb){gb.thread_fbid=hb;this._sendNewMessageToServer(gb,db);}).bind(this));}},_sendNewMessageToServer:function(cb,db){h.inform(k.ATTEMPT_RECONNECT);this._sentMessagesTimestamp[cb.message_id]=Date.now();ca.getForFBID(this._fbid).enqueue(cb.other_user_fbid||cb.thread_fbid||cb.client_thread_id,this._sendMessageQueueOptions,db,cb);},markSeen:function(){var cb=this._lastActionTimestamp;this.__sendRequest('/ajax/mercury/mark_seen.php',{seen_timestamp:cb});},_handleSendMessageErrorCommon:function(cb,db,eb,fb){pa.debug('handle_send_message_error_common',{reliability_error_status:eb,request_error_status:db});var gb=cb.getData(),hb=gb.message_batch,ib=hb.map(function(kb){var lb={action_type:o.SEND_MESSAGE,other_user_fbid:kb.other_user_fbid,thread_fbid:kb.thread_fbid,client_message_id:kb.message_id,message_id:kb.message_id,client_thread_id:kb.client_thread_id,status:db,error_data:fb};return lb;});ib.forEach(function(kb){if(kb.action_type===o.SEND_MESSAGE&&kb.status===n.ERROR)z.log(kb);},this);var jb={actions:ib,payload_source:y.CLIENT_HANDLE_ERROR};this._payloadPreprocessor.handleUpdate(jb);},handleSendMessageError:function(cb){var db=cb.getPayload(),eb=null,fb=null;if(db&&db.error_payload){eb=n.UNCONFIRMED;fb='send_error';}else{eb=n.ERROR;fb='request_error'+ra(cb);}var gb=cb.error;if(gb===1404102)i.verboseErrorHandler(cb);var hb=/<.*>/.test(cb.getErrorDescription())?cb.getErrorSummary():cb.getErrorDescription();this._handleSendMessageErrorCommon(cb.getRequest(),eb,fb,{type:t.SERVER,code:cb.getError(),description:hb,is_transient:cb.isTransient()});},handleSendMessageTransportError:function(cb){this._handleSendMessageErrorCommon(cb.getRequest(),n.ERROR,'transport_error'+ra(cb),{type:t.TRANSPORT,code:cb.getError(),is_transient:true});},handleSendMessageTimeout:function(cb){this._handleSendMessageErrorCommon(cb,n.ERROR,'transport_timeout',{type:t.TIMEOUT,is_transient:true});},getLastActionTimestamp:function(){return this._lastActionTimestamp;},updateLastActionTimestamp:function(cb){if(cb)this._lastActionTimestamp=Math.max(this._lastActionTimestamp,cb);},markThreadFetched:function(cb){delete this._fetchingThreads[cb];},_createServerErrorLogMessage:function(cb){return {action_type:o.LOG_MESSAGE,thread_id:cb,message_id:cb,timestamp:Date.now(),timestamp_absolute:'',timestamp_relative:'',is_unread:false,source:ea.UNKNOWN,log_message_type:w.SERVER_ERROR,log_message_data:{}};},_getForAsyncRequest:function(cb){var db=cb.getData(),eb=db.request_user_id?db.request_user_id:l.getID();return bb.getForFBID(eb);},__handleUpdate:function(cb,db){this._getForAsyncRequest(db)._payloadPreprocessor.handleUpdate(cb);},_handleThreadInfoError:function(cb){var db=this._getForAsyncRequest(cb.getRequest());db.handleThreadInfoError(cb);},_handleSendMessageError:function(cb){var db=this._getForAsyncRequest(cb.getRequest());db.handleSendMessageError(cb);},_handleSendMessageTransportError:function(cb){var db=this._getForAsyncRequest(cb.getRequest());db.handleSendMessageTransportError(cb);},_handleSendMessageTimeout:function(cb){var db=this._getForAsyncRequest(cb);db.handleSendMessageTimeout(cb);},_registerEndpoints:function(){var cb=null;if(ba.msgrRegion)cb={name:'X-MSGR-Region',value:ba.msgrRegion};var db={'/ajax/mercury/thread_sync.php':{request_user_id:this._fbid,mode:ja.IDEMPOTENT,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/thread_info.php':{request_user_id:this._fbid,mode:ja.BATCH_DEFERRED_MULTI,customHeader:cb,batch_function:sa,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this),error_handler:(function(eb){return this._handleThreadInfoError(eb);}).bind(this)},'/ajax/mercury/mark_folder_as_read.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/change_read_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:cb,batch_function:va,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/mark_seen.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:cb,batch_function:wa,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/threadlist_info.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:cb,batch_function:ua,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/mark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/unmark_spam.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/unread_threads.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:cb,batch_function:ta,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/chat/settings.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb},'/ajax/mercury/change_archived_status.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:cb,batch_function:ya,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/delete_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:cb,batch_function:ab,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/delete_messages.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/delivery_receipts.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/move_thread.php':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE,customHeader:cb,batch_function:za,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/ajax/mercury/change_mute_thread.php':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/mercury/pinned_threads/':{request_user_id:this._fbid,mode:ja.BATCH_SUCCESSIVE_UNIQUE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)},'/mercury/unpin_thread/':{request_user_id:this._fbid,mode:ja.IMMEDIATE,customHeader:cb,handler:(function(eb,fb){return this.__handleUpdate(eb,fb);}).bind(this)}};ja.registerEndpoints(db);},__sendRequest:function(cb,db,eb){ja.trySend(cb,db,eb,this._fbid);}});Object.assign(bb,da);f.exports=bb;},null);
__d('MercuryThreadIDMap',['KeyedCallbackManager','MercuryAssert','MercuryIDs','MercurySingletonProvider'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();function l(n){this.$MercuryThreadIDMap1=n;this.$MercuryThreadIDMap2=new h();this.$MercuryThreadIDMap3=new h();}l.getForFBID=function(n){return m.getForFBID(n);};l.get=function(){return m.get();};l.prototype.setServerIDToClientID=function(n,o){var p=this.getClientIDFromServerIDNow(n);if(p){p!==o;return;}this.forceSetServerIDToClientID(n,o);};l.prototype.forceSetServerIDToClientID=function(n,o){this.$MercuryThreadIDMap2.setResource(n,o);this.$MercuryThreadIDMap3.setResource(o,n);};l.prototype.setDeprecatedServerIDToClientID=function(n,o){if(n)this.$MercuryThreadIDMap2.setResource(n,o);};l.prototype.getClientIDFromServerIDNow=function(n){return this.$MercuryThreadIDMap2.getResource(n);};l.prototype.getClientIDFromServerID=function(n,o){this.$MercuryThreadIDMap2.executeOrEnqueue(n,o);e(['MercuryServerRequests'],(function(p){p.getForFBID(this.$MercuryThreadIDMap1).ensureThreadIsFetched(n);}).bind(this));};l.prototype.getServerIDFromClientIDNow=function(n){return this.$MercuryThreadIDMap3.getResource(n);};l.prototype.getServerIDFromClientID=function(n,o){i.isThreadID(n);var p=this.$MercuryThreadIDMap3.executeOrEnqueue(n,o);e(['MercuryServerRequests'],(function(q){var r=this.$MercuryThreadIDMap3.getUnavailableResources(p),s=j.tokenize(n);if(r.length&&s.type!='root')q.getForFBID(this.$MercuryThreadIDMap1).fetchThreadData(r);}).bind(this));};l.prototype.hasClientIDForServerID=function(n){return !!this.getClientIDFromServerIDNow(n);};l.prototype.convertThreadIDIfAvailable=function(n){var o=this.getClientIDFromServerIDNow(n);return o||n;};l.prototype.canLinkExternally=function(n){i.isThreadID(n);var o=j.tokenize(n);return o.type=='user'||!!this.getServerIDFromClientIDNow(n);};var m=new k(l);f.exports=l;},null);
__d('MercuryParticipantFetcher',['LogHistory','MercuryIDs','MercuryPayloadSource','MercuryServerPayloadPreprocessor','Set','ShortProfiles','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=h.getInstance('short_profiles');function p(r){this.$MercuryParticipantFetcher1=k.getForFBID(r);this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3=new l();this.$MercuryParticipantFetcher4=new l();}p.prototype.fetch=function(r){this.$MercuryParticipantFetcher5(r);this.$MercuryParticipantFetcher6();};p.prototype.fetchMulti=function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher5(s);}).bind(this));this.$MercuryParticipantFetcher6();};p.prototype.$MercuryParticipantFetcher5=function(r){if(!this.$MercuryParticipantFetcher4.has(r))this.$MercuryParticipantFetcher3.add(r);};p.prototype.$MercuryParticipantFetcher6=function(){if(this.$MercuryParticipantFetcher2||this.$MercuryParticipantFetcher3.size===0)return;this.$MercuryParticipantFetcher2=true;n((function(){this.$MercuryParticipantFetcher2=false;this.$MercuryParticipantFetcher3.forEach((function(r){return this.$MercuryParticipantFetcher4.add(r);}).bind(this));this.$MercuryParticipantFetcher7(this.$MercuryParticipantFetcher3,(function(r){r.forEach((function(s){return this.$MercuryParticipantFetcher4['delete'](s.id);}).bind(this));this.$MercuryParticipantFetcher8(r);}).bind(this));this.$MercuryParticipantFetcher3.clear();}).bind(this));};p.prototype.$MercuryParticipantFetcher7=function(r,s){var t=[];r.forEach(function(u){var v=i.tokenize(u),w=v.type,x=v.value;w==='fbid'&&t.push(x);});if(t.length>0){m.getMulti(t,function(u){var v=[];for(var w in u)v.push(q(u[w],w));s(v);if(v.length!==t.length)o.error('server_fetch_participant_count_error',{expectedIDs:t,receivedIDs:Object.keys(u)});});o.debug('client_fetch_participants',{userIDs:t});}};p.prototype.$MercuryParticipantFetcher8=function(r){this.$MercuryParticipantFetcher1.handleUpdate({participants:r,from_client:false,payload_source:j.SERVER_FETCH_PARTICIPANTS});};function q(r,s){var t=babelHelpers._extends({gender:r.gender,fbid:r.id||s,href:r.uri,id:i.getParticipantIDFromUserID(r.id||s),image_src:r.thumbSrc,name:r.name,short_name:r.firstName,employee:r.employee,is_employee_away:r.is_employee_away,type:r.type,vanity:r.vanity,is_friend:r.is_friend,is_messenger_user:r.is_messenger_user,social_snippets:r.social_snippets},{});if(r.officeStatus){t.officeStatus=r.officeStatus;t.officeStatusStartDate=r.officeStatusStartDate;t.officeStatusEndDate=r.officeStatusEndDate;t.officeStatusComment=r.officeStatusComment;t.officeStatusLocation=r.officeStatusLocation;}return t;}f.exports=p;},null);
__d('MercuryVanityIDMap',['Map','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=new h(),k=new h(),l={getID:function(m){return j.get(m);},getVanity:function(m){return k.get(m);},hasID:function(m){return k.has(m);},hasVanity:function(m){return j.has(m);},set:function(m,n){i.isParticipantID(n);j.set(m,n);k.set(n,m);}};f.exports=l;},null);
__d('MercuryParticipants',['CurrentUser','EventEmitter','ImageSourceRequest','ImageSourceType','ImmutableObject','KeyedCallbackManager','MercuryAssert','MercuryIDs','MercuryParticipantFetcher','MercuryParticipantTypes','MercuryParticipantsConstants','MercuryDispatcher','MercuryVanityIDMap','PhotoResizeModeConst','Set','createObjectFrom','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y='change';function z(ba){this.$MercuryParticipants1=ba;this.$MercuryParticipants2=new i();this.$MercuryParticipants3=new m();this.$MercuryParticipants4=new p(this.$MercuryParticipants1);this.$MercuryParticipants5=s.getForFBID(this.$MercuryParticipants1);this.$MercuryParticipants5.subscribe('update-participants',(function(ca,da){if(da.participants&&da.participants.length>0)this.$MercuryParticipants6(da.participants);}).bind(this));}z.prototype.addListener=function(ba,ca){return this.$MercuryParticipants2.addListener(ba,ca);};z.prototype.getIDFromVanityOrFBID=function(ba){if(!ba)return null;if(t.hasVanity(ba))return t.getID(ba);if(/^\d+$/.test(ba))return o.getParticipantIDFromUserID(ba);};z.prototype.getNow=function(ba){return this.$MercuryParticipants7(ba);};z.prototype.getOrFetch=function(ba){var ca=this.$MercuryParticipants7(ba);if(!ca)this.$MercuryParticipants4.fetch(ba);return ca;};z.prototype.get=function(ba,ca){n.isParticipantID(ba);return this.$MercuryParticipants8([ba],function(da){ca(da[ba]);});};z.prototype.getMulti=function(ba,ca){return this.$MercuryParticipants8(ba,ca);};z.prototype.getBigImageMulti=function(ba,ca){n.allParticipantIDs(ba);var da=r.BIG_IMAGE_SIZE;return this.$MercuryParticipants8(ba,(function(ea){var fa={},ga=0,ha=new v(),ia=(function(ma,na){ga++;fa[ma]=na;if(ga===ba.length){ca(fa);if(ha.size>0)this.$MercuryParticipants9(ha);}}).bind(this),ja=(function(ma,na){this.$MercuryParticipants3.setResource(ma,l.set(this.$MercuryParticipants3.getResource(ma),{big_image_src:na.uri}));ha.add(ma);ia(ma,na.uri);}).bind(this);for(var ka in ea){var la=ea[ka];if(!la.big_image_src){new j().setFBID(o.getUserIDFromParticipantID(ka)).setType(k.PROFILE_PICTURE).setDimensions(da,da).setResizeMode(u.COVER).setCallback(ja.bind(null,ka)).send();}else ia(la.id,la.big_image_src);}}).bind(this));};z.prototype.getOrderedBigImageMulti=function(ba,ca){return this.getBigImageMulti(ba,function(da){ca(ba.map(function(ea){return da[ea];}));});};z.prototype.$MercuryParticipants8=function(ba,ca){n.allParticipantIDs(ba);var da=this.$MercuryParticipants3.executeOrEnqueue(ba,ca),ea=this.$MercuryParticipants3.getUnavailableResources(da).filter((function(fa){var ga=o.tokenize(fa),ha=ga.type,ia=ga.value;if(ha==='email'){this.$MercuryParticipants10(fa,ia);return false;}if(ha==='name'){this.$MercuryParticipants11(fa,ia);return false;}return true;}).bind(this));this.$MercuryParticipants4.fetchMulti(ea);return this.$MercuryParticipants12(da);};z.prototype.$MercuryParticipants7=function(ba){var ca=this.$MercuryParticipants3.getResource(ba);if(!ca){var da=o.tokenize(ba),ea=da.type,fa=da.value;if(ea==='email')ca=this.$MercuryParticipants10(ba,fa);if(ea==='name')ca=this.$MercuryParticipants11(ba,fa);}return ca;};z.prototype.$MercuryParticipants10=function(ba,ca){var da=new l(aa(ba,ca));this.$MercuryParticipants3.setResource(ba,da);return da;};z.prototype.$MercuryParticipants11=function(ba,ca){var da=new l({gender:r.UNKNOWN_GENDER,href:null,id:ba,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:ca,short_name:ca,employee:false});this.$MercuryParticipants3.setResource(ba,da);return da;};z.prototype.$MercuryParticipants9=function(ba){this.$MercuryParticipants2.emit(y,ba);};z.prototype.$MercuryParticipants6=function(ba){var ca=ba.map(function(da){return da.id;});ba=ba.map((function(da){if(da.vanity)t.set(da.vanity,da.id);var ea=this.$MercuryParticipants3.getResource(da.id);return ea?l.set(ea,da):new l(this.$MercuryParticipants13(da));}).bind(this));this.$MercuryParticipants3.addResourcesAndExecute(w(ca,ba));this.$MercuryParticipants9(new v(ca));};z.prototype.$MercuryParticipants13=function(ba){var ca=ba.type===q.USER||ba.type===q.FRIEND;if(!ca)return ba;if(!ba.name&&!ba.href&&!ba.vanity){var da=x._("Ng\u01b0\u1eddi d\u00f9ng Facebook");ba.name=da;ba.short_name=da;}return ba;};z.prototype.$MercuryParticipants12=function(ba){return {remove:(function(){this.$MercuryParticipants3.unsubscribe(ba);}).bind(this)};};function aa(ba,ca){return {gender:r.UNKNOWN_GENDER,href:null,id:ba,image_src:r.EMAIL_IMAGE,big_image_src:r.EMAIL_IMAGE,name:ca,short_name:ca,employee:false};}f.exports=new z(h.getID());},null);
__d('MercuryFolders',['MercuryConfig','MessagingTag','arrayContains'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=[i.INBOX,i.OTHER,i.ACTION_ARCHIVED,i.SPAM],l=[i.INBOX,i.PENDING,i.OTHER,i.ACTION_ARCHIVED],m={getSupportedFolders:function(){return h.CoreGraphEnabled?l.concat():k.concat();},isSupportedFolder:function(n){return j(k,n);},getFromMeta:function(n){var o=n.folder;if(n.is_archived)o=i.ACTION_ARCHIVED;return o;}};f.exports=m;},null);
__d('MercuryThreadInfo',['CurrentUser','MercuryIDs'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={canReply:function(l){return !!(l.is_subscribed&&(l.can_reply===undefined||l.can_reply)&&!l.has_email_participant&&!l.read_only&&(l.recipients_loadable||l.recipients_loadable===undefined));},getMuteSetting:function(l){return (l.mute_settings&&l.mute_settings[k(h.getID())]);},isEmptyLocalThread:function(l){return (i.tokenize(l.thread_id).type==='root'&&!l.timestamp);},isMuted:function(l){return j.getMuteSetting(l)!==undefined;},isNewEmptyLocalThread:function(l){return !!(j.isEmptyLocalThread(l)&&l.participants&&l.participants.length===0);},showComposer:function(l){return !!(l.is_subscribed&&(l.composer_enabled===undefined||l.composer_enabled)&&!l.has_email_participant&&!l.read_only&&(l.recipients_loadable||l.recipients_loadable===undefined));}};function k(l){return l+'@facebook.com';}f.exports=j;},null);
__d('MercuryThreads',['EventEmitter','ImmutableObject','KeyedCallbackManager','LogHistory','Map','MercuryActionType','MercuryAPIArgsSource','MercuryAssert','MercuryAttachment','MercuryConfig','MercuryDispatcher','MercuryFolders','MercuryGlobalActionType','MercuryIDs','MercuryLogMessageType','MercuryLoggingHelper','MercuryPayloadSource','MercuryServerRequests','MercurySingletonProvider','MercuryThreadInfo','MercuryThreadInformer','MessagingTag','MercuryDisplayTimeFilterMessageRenderer','Set','emptyFunction','ifRequired','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha){'use strict';if(c.__markCompiled)c.__markCompiled();var ia=new h(),ja=k.getInstance('mercury_threads');function ka(ma){this.$MercuryThreads1=ma;this.$MercuryThreads2=y.getForFBID(this.$MercuryThreads1);this.$MercuryThreads3=ba.getForFBID(this.$MercuryThreads1);this.$MercuryThreads4=u.getParticipantIDFromUserID(this.$MercuryThreads1);this.$MercuryThreads5=r.getForFBID(this.$MercuryThreads1);this.$MercuryThreads6=false;this.$MercuryThreads7=new j();this.$MercuryThreads8=new ea();this.$MercuryThreads9=false;this.$MercuryThreads10=new ea();this.$MercuryThreads11=new ea();this.$MercuryThreads12();}ka.getForFBID=function(ma){return la.getForFBID(ma);};ka.get=function(){return la.get();};ka.prototype.getThreadMetaNow=function(ma){o.isThreadID(ma);return this.$MercuryThreads7.getResource(ma);};ka.prototype.getOrFetch=function(ma){var na=this.getThreadMetaNow(ma);if(!na&&!this.$MercuryThreads11.has(ma))this.$MercuryThreads10.add(ma);if(this.$MercuryThreads10.size>0&&!this.$MercuryThreads9)this.$MercuryThreads13();return na;};ka.prototype.$MercuryThreads13=function(){if(this.$MercuryThreads9)return;this.$MercuryThreads9=true;ha((function(){this.$MercuryThreads9=false;this.$MercuryThreads10.forEach((function(ma){return this.$MercuryThreads11.add(ma);}).bind(this));this.getMultiThreadMeta(Array.from(this.$MercuryThreads10),(function(ma){for(var na in ma)ma.hasOwnProperty(na)&&this.$MercuryThreads11['delete'](na);}).bind(this));this.$MercuryThreads10.clear();}).bind(this));};ka.prototype.getThreadMeta=function(ma,na,oa){return this.getMultiThreadMeta([ma],function(pa){return na(pa[ma]);},oa);};ka.prototype.getMultiThreadMeta=function(ma,na,oa){o.allThreadID(ma);var pa=this.$MercuryThreads7.executeOrEnqueue(ma,na),qa=this.$MercuryThreads7.getUnavailableResources(pa);if(qa.length){var ra=[];for(var sa=0;sa<qa.length;sa++){var ta=qa[sa],ua=u.tokenize(ta),va=ua.type,wa=ua.value;if(va=='user'){var xa=u.getParticipantIDFromUserID(wa);this.createNewLocalThread(ta,xa===this.$MercuryThreads4?[this.$MercuryThreads4]:[this.$MercuryThreads4,xa]);}else ra.push(ta);}if(ra.length)this.$MercuryThreads2.fetchThreadData(ra,oa);}return pa;};ka.addListener=function(ma,na){return ia.addListener(ma,na);};ka.prototype.unsubscribe=function(ma){this.$MercuryThreads7.unsubscribe(ma);};ka.prototype.getCanonicalThreadToParticipant=function(ma,na,oa,pa){var qa=u.getThreadIDFromParticipantID(ma),ra=this.$MercuryThreads7.getResource(qa);if(typeof ra=='undefined'){ra=this.createNewLocalThread(qa,this.$MercuryThreads4===ma?[this.$MercuryThreads4]:[this.$MercuryThreads4,ma],na);!pa&&this.$MercuryThreads2.fetchThreadData([qa],oa);}return ra;};ka.prototype.createNewLocalThread=function(ma,na,oa){var pa=this.$MercuryThreads7.getResource(ma);if(!pa){var qa=u.tokenize(ma),ra=qa.type,sa=qa.value;pa=new i({thread_id:ma,participants:Array.from(na),name:null,snippet:'',snippet_has_attachment:false,snippet_sender:null,unread_count:oa?oa:0,message_count:0,image_src:null,timestamp_absolute:null,timestamp_relative:null,timestamp:null,other_user_fbid:ra==='user'?sa:null,is_canonical_user:ra=='user',is_canonical:this.$MercuryThreads14(na),is_subscribed:true,folder:ca.INBOX,is_archived:false});this.$MercuryThreads7.setResource(ma,pa);}return pa;};ka.prototype.isEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isEmptyLocalThread(na);};ka.prototype.isNewEmptyLocalThread=function(ma){var na=this.$MercuryThreads7.getResource(ma);if(!na)return false;return aa.isNewEmptyLocalThread(na);};ka.prototype.$MercuryThreads15=function(ma,na){if(!ma||!ma.length)return;var oa=new l(),pa=new l(),qa=new l(),ra=[];for(var sa=0;sa<ma.length;sa++){var ta=ma[sa];if(ta.is_forward)continue;var ua=ta.action_type;if(ua==m.LOG_MESSAGE&&ta.log_message_type==v.SERVER_ERROR)continue;var va=!!(ta.sync_id||ta.action_id||ta.is_from_iris),wa=ta.thread_id;o.isThreadID(wa);var xa=this.$MercuryThreads7.getResource(wa);if(!xa&&!va&&ua==m.USER_GENERATED_MESSAGE){xa=this.$MercuryThreads16(ta);this.$MercuryThreads7.setResource(wa,xa);}if(!xa)continue;if(ua==m.LOG_MESSAGE||ua==m.USER_GENERATED_MESSAGE)va=!na;if(xa.server_timestamp&&ta.timestamp<=xa.server_timestamp&&va)continue;if(!qa.has(wa))qa.set(wa,babelHelpers._extends({},xa));this.$MercuryThreads17(qa.get(wa),ta,na);if(ua==m.USER_GENERATED_MESSAGE)oa.set(wa,ta);if(ua==m.USER_GENERATED_MESSAGE||ua==m.LOG_MESSAGE||ua==m.SEND_MESSAGE)if(ta&&ta.timestamp&&(!pa.has(wa)||ta.timestamp>pa.get(wa).timestamp))pa.set(wa,ta);}qa.forEach((function(ya,za){var ab=pa.get(za),bb=oa.get(za);if(bb){this.$MercuryThreads18(ya,bb);}else if(ab&&(ab.log_message_type==v.PHONE_CALL||ab.log_message_type==v.VIDEO_CALL)){var cb=babelHelpers._extends({},ab,{body:ab.log_message_body});this.$MercuryThreads18(ya,cb);}var db=ya.timestamp;if(ab){if(ab.timestamp>db)Object.assign(ya,{timestamp_absolute:ab.timestamp_absolute,timestamp_relative:ab.timestamp_relative,timestamp:ab.timestamp});var eb=ya.server_timestamp;if(!na&&ab.timestamp>eb)ya.server_timestamp=ab.timestamp;}var fb=new i(ya);this.$MercuryThreads7.setResource(za,fb);ra.push(w.obfuscateThread(fb));}).bind(this),this);ra.length&&this.$MercuryThreads6&&ja.debug('threads_updated',{threads:ra});};ka.prototype.$MercuryThreads17=function(ma,na,oa){var pa=na.action_type;if(pa==m.USER_GENERATED_MESSAGE||pa==m.LOG_MESSAGE){na.is_unread&&ma.unread_count++;ma.message_count++;ma.is_archived=false;}switch(pa){case m.DELETE_THREAD:ma.message_count=0;this.$MercuryThreads19(na.thread_id);break;case m.USER_GENERATED_MESSAGE:if(ma.last_read_timestamp>=na.timestamp)this.$MercuryThreads20(ma,na,true);if(ma.unread_count===0&&na.author===this.$MercuryThreads4&&na.timestamp>=ma.last_read_timestamp)ma.last_read_timestamp=na.timestamp;if(na.offline_threading_id!==na.message_id){ma.last_message_id=na.message_id;ma.last_message_timestamp=na.timestamp;}this.$MercuryThreads21(ma,na.author);break;case m.SEND_MESSAGE:var qa=na.log_message_type;if(qa==v.THREAD_IMAGE){ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;this.$MercuryThreads22(na.thread_id);}if(qa!==v.SUBSCRIBE&&qa!==v.UNSUBSCRIBE)ma.snippet_attachments=na.attachments;break;case m.LOG_MESSAGE:var qa=na.log_message_type;if(qa==v.SUBSCRIBE){this.$MercuryThreads23(ma,na.log_message_data.added_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.UNSUBSCRIBE){this.$MercuryThreads24(ma,na.log_message_data.removed_participants);this.$MercuryThreads22(na.thread_id);}else if(qa==v.THREAD_IMAGE){if(!oa)ma.image_src=na.log_message_data.image?na.log_message_data.image.preview_url:null;}else if(qa==v.THREAD_NAME){if(ma.name!==na.log_message_data.name)this.$MercuryThreads22(na.thread_id);ma.name=na.log_message_data.name;}else if(qa===v.GENERIC_ADMIN_TEXT)if(this.$MercuryThreads25(ma,na))this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_READ_STATUS:var ra=this.$MercuryThreads20(ma,na,na.mark_as_read);if(ra)ma.last_read_timestamp=ma.last_message_timestamp;var sa=!ma.read_only&&ma.folder===ca.INBOX;if(ra&&oa)this.$MercuryThreads2.changeThreadReadStatus(ma.thread_id,na.mark_as_read,na.source,ma.last_read_timestamp,ma.titan_originated_thread_id,sa);break;case m.CHANGE_ARCHIVED_STATUS:if(ma.is_archived!=na.archived){ma.is_archived=na.archived;this.$MercuryThreads22(na.thread_id);}break;case m.CHANGE_FOLDER:if(ma.folder!=na.new_folder){ma.folder=na.new_folder;this.$MercuryThreads22(na.thread_id);}break;case m.DELETE_MESSAGES:if(oa){ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;this.$MercuryThreads22(na.thread_id);}else if(na.message_ids){ma.message_count-=na.message_ids.length;if(!q.MessengerGlobalDeleteGK)break;ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);for(var wa=na.message_ids,xa=Array.isArray(wa),ya=0,wa=xa?wa:wa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var za;if(xa){if(ya>=wa.length)break;za=wa[ya++];}else{ya=wa.next();if(ya.done)break;za=ya.value;}var ab=za,bb=va.getMessagesFromIDs([ab]),cb=bb[0];if(cb&&cb.timestamp>ma.last_read_timestamp)ma.unread_count=Math.max(0,ma.unread_count-1);}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);}break;case m.UPDATE_SNIPPET:ga('MercuryMessages',(function(va){va=va.getForFBID(this.$MercuryThreads1);if(!q.MessengerGlobalDeleteGK)return;var wa=false;for(var xa=na.deleted_ids,ya=Array.isArray(xa),za=0,xa=ya?xa:xa[typeof Symbol==='function'?Symbol.iterator:'@@iterator']();;){var ab;if(ya){if(za>=xa.length)break;ab=xa[za++];}else{za=xa.next();if(za.done)break;ab=za.value;}var bb=ab;if(bb==ma.last_message_id){wa=true;break;}}if(!wa)return;var cb=0,db=1,eb=va.getThreadMessagesRangeNow(na.thread_id,cb,db),fb=eb[0];if(fb){ma.snippet=fb.body;ma.snippet_has_attachment=fb.has_attachment;ma.snippet_attachments=fb.attachments;ma.snippet_sender=fb.author;ma.last_message_id=va.getServerMessageID(fb.message_id);}else{ma.snippet='...';ma.snippet_has_attachment=false;ma.snippet_attachments=null;ma.snippet_sender=null;va.getThreadMessagesRange(na.thread_id,cb,db,(function(gb){if(gb.length)this.$MercuryThreads5.handleUpdate({from_client:true,actions:[{thread_id:na.thread_id,action_type:m.UPDATE_SNIPPET,deleted_ids:na.deleted_ids}]});}).bind(this));}this.$MercuryThreads22(na.thread_id);}).bind(this),fa);break;case m.UPDATE_BLOCKER_STATUS:ma.can_reply=!!(!na.message_blocked&&(na.is_blocked_by_recipient===undefined||!na.is_blocked_by_recipient)&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.UPDATE_BLOCKEE_STATUS:ma.can_reply=!!(!na.got_blocked&&ma.is_subscribed&&!ma.has_email_participant&&!ma.read_only&&(ma.recipients_loadable||ma.recipients_loadable===undefined));this.$MercuryThreads22(na.thread_id);break;case m.CHANGE_MUTE_SETTINGS:if(na.mute_settings!==undefined){var ta=this.$MercuryThreads1+'@facebook.com';if(ma.mute_settings){if(na.mute_settings){var ua={};ua[ta]=na.mute_settings;ma.mute_settings=babelHelpers._extends({},ma.mute_settings,ua);}else{ma.mute_settings=babelHelpers._extends({},ma.mute_settings);delete ma.mute_settings[ta];}this.$MercuryThreads22(ma.thread_id);}}break;case m.ADD_PARTICIPANTS:this.$MercuryThreads23(ma,na.participants);this.$MercuryThreads22(ma.thread_id);break;case m.CHANGE_FLAG:this.$MercuryThreads26(ma,na.mark_as_flag);this.$MercuryThreads22(ma.thread_id);break;case m.MOVE_PENDING_TO_INBOX:this.$MercuryThreads27(ma);this.$MercuryThreads22(ma.thread_id);break;}};ka.prototype.$MercuryThreads16=function(ma){var na=u.tokenize(ma.thread_id),oa=na.type,pa=na.value,qa=this.$MercuryThreads14(ma.specific_to_list);return new i({thread_id:ma.thread_id,participants:ma.specific_to_list,name:null,snippet:ma.body,snippet_has_attachment:false,snippet_attachments:[],snippet_sender:ma.author,unread_count:0,message_count:0,image_src:null,timestamp_absolute:ma.timestamp_absolute,timestamp_relative:ma.timestamp_relative,timestamp:ma.timestamp,other_user_fbid:oa==='user'?pa:null,is_canonical_user:oa==='user',is_canonical:qa,is_subscribed:true,folder:ca.INBOX,is_archived:false});};ka.prototype.$MercuryThreads20=function(ma,na,oa){if(na.timestamp)this.$MercuryThreads28(ma.thread_id,oa,na.timestamp);if(!ma||!ma.thread_id)return false;if(!ma.timestamp){this.$MercuryThreads8.add(ma.thread_id);return false;}var pa=!ma.unread_count;if(oa==pa)return false;ma.unread_count=oa?0:1;this.$MercuryThreads22(ma.thread_id);return true;};ka.prototype.$MercuryThreads29=function(ma){var na=this.$MercuryThreads7.getAllResources();for(var oa in na)if(na.hasOwnProperty(oa)){var pa=na[oa];if(pa.folder==ma){this.$MercuryThreads7.setResource(oa,i.setProperty(pa,'unread_count',0));this.$MercuryThreads22(oa);}}};ka.prototype.$MercuryThreads23=function(ma,na){var oa=new ea(ma.participants);ma.participants=Array.from(ma.participants);na.forEach((function(pa){if(!oa.has(pa)){ma.participants.push(pa);if(pa===this.$MercuryThreads4){ma.is_subscribed=true;ma.can_reply=true;ma.composer_enabled=true;this.$MercuryThreads2.fetchMissedMessages(s.getSupportedFolders(),n.MERCURYSYNC,ma.last_message_timestamp);}}}).bind(this));};ka.prototype.$MercuryThreads25=function(ma,na){if(na.log_message_data&&na.log_message_data.untypedData){var oa=parseInt(na.log_message_data.untypedData.ttl,10);if(oa!==null&&ma.ephemeral_ttl_mode!==oa){ma.ephemeral_ttl_mode=oa;return true;}}return false;};ka.prototype.$MercuryThreads24=function(ma,na){var oa=new ea(na);ma.participants=ma.participants.filter(function(pa){return !oa.has(pa);});if(oa.has(this.$MercuryThreads4))ma.is_subscribed=false;this.$MercuryThreads2.fetchThreadData([ma.thread_id]);};ka.prototype.$MercuryThreads21=function(ma,na){var oa=ma.participants.indexOf(na);if(oa>0)ma.participants=[na].concat(ma.participants.slice(0,oa),ma.participants.slice(oa+1));};ka.prototype.$MercuryThreads18=function(ma,na){var oa=na.body,pa=na.subject,qa='';if(pa){pa=pa.toLowerCase();if(oa.slice(0,pa.length).toLowerCase()==pa){qa=oa;}else if(oa){qa=pa+' \u00B7 '+oa;}else qa=pa;}else qa=oa;if(na.is_filtered_content)qa=da.renderFilteredContent(na);ma.snippet=qa;ma.snippet_has_attachment=na.has_attachment;if(na.raw_attachments&&na.raw_attachments.length>0){var ra=p.convertRaw(na.raw_attachments);ma.snippet_attachments=ra;}else ma.snippet_attachments=na.attachments;ma.snippet_sender=na.author;};ka.prototype.$MercuryThreads26=function(ma,na){ma.page_thread_info=babelHelpers._extends({},ma.page_thread_info,{flagged:na});};ka.prototype.$MercuryThreads27=function(ma){if(ma.folder!==ca.PENDING)return;ma.folder=ca.INBOX;};ka.prototype.$MercuryThreads14=function(ma){return ma.filter((function(na){return na!=this.$MercuryThreads4;}).bind(this)).length<=1;};ka.prototype.$MercuryThreads12=function(){this.$MercuryThreads5.subscribe('update-threads',(function(ma,na){var oa=(na.actions||[]).filter(function(pa){return pa.thread_id;});if(na.threads&&na.payload_source==x.SERVER_FETCH_THREAD_INFO)na.threads.forEach((function(pa){var qa=pa.thread_id;if(this.$MercuryThreads8.has(qa)){this.$MercuryThreads8['delete'](qa);if(pa.unread_count)this.$MercuryThreads2.changeThreadReadStatus(pa.thread_id,true);}}).bind(this));this.$MercuryThreads30(na.threads);this.$MercuryThreads15(oa,na.from_client);na.threads&&na.threads.forEach((function(pa){this.$MercuryThreads22(pa.thread_id);}).bind(this));if(na.global_actions)na.global_actions.forEach((function(pa){if(pa.action_type==t.MARK_ALL_READ)this.$MercuryThreads29(pa.folder);}).bind(this));if(this.$MercuryThreads6){this.$MercuryThreads6=false;ia.emit('change');}}).bind(this));};ka.prototype.$MercuryThreads30=function(ma){if(!ma||!ma.length)return;var na={},oa=[];ma.forEach(function(pa){var qa=new i(pa);na[pa.thread_id]=qa;oa.push(w.obfuscateThread(qa));});oa.length&&ja.debug('threads_added',{threads:oa});this.$MercuryThreads7.addResourcesAndExecute(na);};ka.prototype.$MercuryThreads22=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.updatedThread(ma);};ka.prototype.$MercuryThreads19=function(ma){this.$MercuryThreads6=true;this.$MercuryThreads3.deletedThread(ma);};ka.prototype.$MercuryThreads28=function(ma,na,oa){this.$MercuryThreads6=true;this.$MercuryThreads3.changedThreadReadState(ma,na,oa);};var la=new z(ka);f.exports=ka;},null);
__d('MessengerURIConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={COMPOSE_SUBPATH:'/new',GROUPS_PATH:'/groups',PEOPLE_PATH:'/people',THREAD_PREFIX:'/t/',GROUP_PREFIX:'group-',RESERVED_WORDS:['groups','people','new','messenger','t']};f.exports=h;},null);
__d('MessengerStateProcessor',['MercuryAPIArgsSource','MercuryIDs','MercuryParticipantTypes','MercuryParticipants','MercuryThreadIDMap','MercuryThreads','MercuryVanityIDMap','MessengerURIConstants'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p={preprocess:function(r){var s=r.activeThreadID;if(s){var t=i.getUserIDFromThreadID(s),u=t&&k.getNow(i.getParticipantIDFromUserID(t));if(u&&u.type!==j.EVENT){r.threadKey=u.vanity||t;}else if(t&&!u){var v=i.getParticipantIDFromUserID(t);r.threadKey=n.hasID(v)?n.getVanity(v):t;}else{var w=l.get(),x=w.getServerIDFromClientIDNow(s);r.threadKey=x||s;}}delete r.activeThreadID;return r;},postprocess:function(r){var s=l.get(),t=m.get(),u=q(r.threadKey),v;v=i.isValid(u)?u:s.getClientIDFromServerIDNow(u);if(!v){var w=k.getIDFromVanityOrFBID(u),x=w&&t.getCanonicalThreadToParticipant(w,null,h.MESSENGER);if(x)v=x.thread_id;}if(v){r.activeThreadID=v;r.serverThreadID=s.getServerIDFromClientIDNow(v);}delete r.threadKey;return r;}};function q(r){if(!r)return null;return r.startsWith(o.GROUP_PREFIX)?r.substr(o.GROUP_PREFIX.length):r;}f.exports=p;},null);
__d('MessengerURISerializer',['MessengerStateProcessor','MessengerURIConstants','MessengerView','URI','WWWBase'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m='/?$',n={serialize:function(w){var x=new k(l.uri);w=h.preprocess(w);switch(w.masterView){case j.MASTER.GROUPS:x.setPath(i.GROUPS_PATH);break;case j.MASTER.PEOPLE:x.setPath(i.PEOPLE_PATH);break;}if(w.detailView===j.DETAIL.COMPOSE){x.setPath(x.getPath()+i.COMPOSE_SUBPATH);}else if(w.threadKey)x.setPath(x.getPath()+i.THREAD_PREFIX+u(w.threadKey));return x;},deserialize:function(w){var x={},y=w.getPath();if(y.match('^'+i.GROUPS_PATH)){x.masterView=j.MASTER.GROUPS;}else if(y.match('^'+i.PEOPLE_PATH)){x.masterView=j.MASTER.PEOPLE;}else x.masterView=j.MASTER.RECENT;if(y.match(i.COMPOSE_SUBPATH+m)){x.detailView=j.DETAIL.COMPOSE;}else{var z=o(y);if(z&&!s(z)){x.threadKey=v(z);x.detailView=j.DETAIL.THREAD;}}return h.postprocess(x);}};function o(w){var x=w.match(i.THREAD_PREFIX+'([^/]+)'+m);return x&&x[1];}var p=i.RESERVED_WORDS.join('|'),q=new RegExp('^('+p+')$'),r=new RegExp('^\\.('+p+')$');function s(w){return !!w.match(q);}function t(w){return !!w.match(r);}function u(w){w=s(w)?'.'+w:w;return k.encodeComponent(w);}function v(w){w=k.decodeComponent(w);return t(w)?w.substr(1):w;}f.exports=n;},null);
__d('MessengerActions',['MessengerDispatcher','MessengerURISerializer','MessengerView','URI','goURI','keyMirror'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=m({CHANGE_FOLDER:null,HIDE_DIALOG:null,REPLACE_STATE:null,SHOW_DIALOG:null}),o={Types:n,changeDetailView:function(q){p(function(r){if(r.detailView!==q)return {detailView:q};});},changeMasterView:function(q){p(function(r){if(r.masterView!==q)return {masterView:q};});},selectThread:function(q){p(function(r){if(r.activeThreadID!==q)return {activeThreadID:q,detailView:j.DETAIL.THREAD};});},changeState:function(q){h.dispatch({type:n.REPLACE_STATE,nextState:q});},showDialog:function(q,r){h.dispatch({type:o.Types.SHOW_DIALOG,dialogClass:q,dialogProps:r});},hideDialog:function(q){h.dispatch({type:o.Types.HIDE_DIALOG,dialogClass:q});},changeFolder:function(q){h.dispatch({type:o.Types.CHANGE_FOLDER,folder:q});}};function p(q){var r=i.deserialize(new k(window.location.href)),s=q(r);if(s)l(i.serialize(Object.assign(r,s)));}f.exports=o;},null);
__d('P2PActionConstants',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={CREDIT_CARDS_UPDATED:'credit_cards_updated',CHANNEL_EVENTS_ALLOWED:'channel_events_allowed',CHANNEL_EVENTS_IGNORED:'channel_events_ignored',CREDIT_CARD_SAVING:'credit_card_saving',CREDIT_CARD_ADDED:'credit_card_added',CREDIT_CARD_ADDED_ERROR:'credit_card_added_error',CREDIT_CARD_ADDED_ERROR_CLEARED:'credit_card_added_error_cleared',CREDIT_CARD_DELETED:'credit_card_deleted',CREDIT_CARD_DELETED_ERROR:'credit_card_deleted_error',CREDIT_CARD_UPDATED:'credit_card_updated',CREDIT_CARD_UPDATED_ERROR:'credit_card_updated_error',PRESET_CREDIT_CARD_UPDATED:'preset_credit_card_updated',PRESET_CREDIT_CARD_UPDATED_ERROR:'preset_credit_card_updated_error',CREDIT_CARD_VERIFIED:'credit_card_verified',CREDIT_CARD_VERIFIED_ERROR:'credit_card_verified_error',TRANSFERS_UPDATED:'transfers_updated',TRANSFERS_UPDATED_ERROR:'transfers_updated_error',NUX_TRANSFERS_UPDATED:'nux_transfers_updated',TRANSFER_ADDED:'transfer_added',TRANSFER_ADDED_ERROR:'transfer_added_error',TRANSFER_UPDATED:'transfer_updated',TRANSFER_UPDATED_ERROR:'transfer_updated_error',TRANSFER_ACCEPTED:'transfer_accepted',TRANSFER_DECLINED:'transfer_declined',CHAT_SEND_VIEW_OPENED:'chat_send_view_opened',CHAT_SEND_VIEW_CLOSED:'chat_send_view_closed',BIN_NUMBER_VALIDATED:'bin_number_validated',BIN_NUMBER_VALIDATED_ERROR:'bin_number_validated_error',USER_ELIGIBILITY_UDPATED:'user_eligibility_updated',FRIENDS_LIST_UPDATED:'friends_list_updated',DIALOG_SHOWN:'dialog_shown',DIALOG_CLOSED:'dialog_closed',BANNER_STATES_UPDATED:'banner_states_updated',BANNER_DISMISSED:'banner_dismissed',BANNER_VIEWED:'banner_viewed',BANNER_COMPLETED:'banner_completed',MONEYPENNY_TRANSFER_CREATED:'moneypenny_transfer_created',MONEYPENNY_TRANSFER_CREATED_ERROR:'moneypenny_transfer_created_error',PLATFORM_CONTEXT_ADDED:'platform_context_added',PLATFORM_CONTEXT_ADDED_ERROR:'platform_context_added_error',PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED:'platform_context_save_errors_cleared',PLATFORM_CONTEXT_BANNER_DISMISSED:'platform_context_banner_dismissed',PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD:'platform_context_product_item_sold',PLATFORM_CONTEXT_CHANGED:'platform_context_changed',EXTENSIVE_TRANSFER_DETAILS_UPDATED:'extensive_transfer_details_updated',ADDRESS_SAVING:'address_saving',ADDRESSES_UPDATED:'addresses_updated',ADDRESS_ADDED:'address_added',ADDRESS_ADDED_ERROR:'address_added_error',ADDRESS_ADDED_ERROR_CLEARED:'address_added_error_cleared',CHECKOUT_CART_INITATED:'checkout_cart_initiated',CHECKOUT_CART_CREATED:'checkout_cart_created',CHECKOUT_SHIPPING_OPTION_SELECTED:'checkout_shipping_option_selected',CHECKOUT_ADDRESS_SELECTED:'checkout_address_selected',CHECKOUT_CREDIT_CARD_SELECTED:'checkout_credit_card_selected',CHECKOUT_ADDRESS_FORM_TOGGLED:'checkout_address_form_toggled',CHECKOUT_CREDIT_CARD_FORM_TOGGLED:'checkout_credit_card_form_toggled',CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED:'checkout_address_options_toggled',CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED:'checkout_credit_card_edit_options_toggled',CHECKOUT_ADDRESS_FORM_VALIDATED:'checkout_address_form_validated',CHECKOUT_CREDIT_CARD_FORM_VALIDATED:'checkout_credit_card_form_validated',CHECKOUT_EDIT_COMPLETED:'checkout_completed',CHECKOUT_PROCESSING:'checkout_processing',CHECKOUT_BUYER_PROFILE_UPDATED:'checkout_buyer_profile_updated'};f.exports=h;},null);
__d('P2PDispatcher',['Dispatcher'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=new h();},null);
__d('P2PActions',['ChatOpenTab','MessengerActions','P2PActionConstants','P2PDispatcher'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l={updateCreditCards:function(m){k.dispatch({type:j.CREDIT_CARDS_UPDATED,data:m});},ignoreCreditCardChannelEvents:function(){k.dispatch({type:j.CHANNEL_EVENTS_IGNORED});},allowCreditCardChannelEvents:function(){k.dispatch({type:j.CHANNEL_EVENTS_ALLOWED});},creditCardSaving:function(){k.dispatch({type:j.CREDIT_CARD_SAVING});},addCreditCard:function(m){k.dispatch({type:j.CREDIT_CARD_ADDED,data:m});},addCreditCardError:function(m){k.dispatch({type:j.CREDIT_CARD_ADDED_ERROR,data:m});},addCreditCardErrorCleared:function(){k.dispatch({type:j.CREDIT_CARD_ADDED_ERROR_CLEARED});},updatePresetCreditCard:function(m){k.dispatch({type:j.PRESET_CREDIT_CARD_UPDATED,data:m});},updatePresetCreditCardError:function(m){k.dispatch({type:j.PRESET_CREDIT_CARD_UPDATED_ERROR,data:m});},updateCreditCard:function(m){k.dispatch({type:j.CREDIT_CARD_UPDATED,data:m});},updateCreditCardError:function(m){k.dispatch({type:j.CREDIT_CARD_UPDATED_ERROR,data:m});},deleteCreditCard:function(m){k.dispatch({type:j.CREDIT_CARD_DELETED,data:m});},deleteCreditCardError:function(m){k.dispatch({type:j.CREDIT_CARD_DELETED_ERROR,data:m});},verifyCreditCard:function(m){k.dispatch({type:j.CREDIT_CARD_VERIFIED,data:m});},verifyCreditCardError:function(m){k.dispatch({type:j.CREDIT_CARD_VERIFIED_ERROR,data:m});},updateTransfers:function(m){k.dispatch({type:j.TRANSFERS_UPDATED,data:m});},updateTransfersError:function(m){k.dispatch({type:j.TRANSFERS_UPDATED_ERROR,data:m});},updateNUXTransfers:function(m){k.dispatch({type:j.NUX_TRANSFERS_UPDATED,data:m});},transferAdded:function(m){k.dispatch({type:j.TRANSFER_ADDED,data:m});},transferAddedError:function(m){k.dispatch({type:j.TRANSFER_ADDED_ERROR,data:m});},transferUpdated:function(m){k.dispatch({type:j.TRANSFER_UPDATED,data:m});},transferUpdatedError:function(m){k.dispatch({type:j.TRANSFER_UPDATED_ERROR,data:m});},transferAccepted:function(){k.dispatch({type:j.TRANSFER_ACCEPTED});},transferDeclined:function(m){k.dispatch({type:j.TRANSFER_DECLINED,data:m});},chatSendViewOpened:function(m){function n(){k.dispatch({type:j.CHAT_SEND_VIEW_OPENED,data:m});}if(h.canOpenTab()){h.openThread(m.threadID,null,null,n);}else{i.selectThread(m.threadID);n();}},chatSendViewClosed:function(m){k.dispatch({type:j.CHAT_SEND_VIEW_CLOSED,data:m});},binNumberValidated:function(m){k.dispatch({type:j.BIN_NUMBER_VALIDATED,data:m});},binNumberValidatedError:function(m){k.dispatch({type:j.BIN_NUMBER_VALIDATED_ERROR,data:m});},friendsListUpdated:function(m){k.dispatch({type:j.FRIENDS_LIST_UPDATED,data:m});},userEligibilityUpdated:function(m){k.dispatch({type:j.USER_ELIGIBILITY_UDPATED,data:m});},showDialog:function(m,n){k.dispatch({type:j.DIALOG_SHOWN,data:{dialogClass:m,dialogProps:n}});},hideDialog:function(){k.dispatch({type:j.DIALOG_CLOSED});},bannerStatesUpdated:function(m){k.dispatch({type:j.BANNER_STATES_UPDATED,data:m});},bannerDismissed:function(m){k.dispatch({type:j.BANNER_DISMISSED,data:m});},bannerCompleted:function(m){k.dispatch({type:j.BANNER_COMPLETED,data:m});},moneypennyTransferCreated:function(m){k.dispatch({type:j.MONEYPENNY_TRANSFER_CREATED,data:m});},moneypennyTransferCreatedError:function(m){k.dispatch({type:j.MONEYPENNY_TRANSFER_CREATED_ERROR,data:m});},addPlatformContext:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_ADDED,data:m});},addPlatformContextError:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_ADDED_ERROR,data:m});},clearPlatformContextSaveErrors:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_SAVE_ERRORS_CLEARED,data:m});},platformContextBannerDismissed:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_BANNER_DISMISSED,data:m});},platformContextProductItemSold:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_PRODUCT_ITEM_SOLD,data:m});},platformContextChanged:function(m){k.dispatch({type:j.PLATFORM_CONTEXT_CHANGED,data:m});},extensiveTransferDetailsLoaded:function(m){k.dispatch({type:j.EXTENSIVE_TRANSFER_DETAILS_UPDATED,data:m});},updateAddresses:function(m){k.dispatch({type:j.ADDRESSES_UPDATED,data:m});},addressSaving:function(){k.dispatch({type:j.ADDRESS_SAVING});},addAddress:function(m){k.dispatch({type:j.ADDRESS_ADDED,data:m});},addAddressError:function(m){k.dispatch({type:j.ADDRESS_ADDED_ERROR,data:m});},addAddressErrorCleared:function(){k.dispatch({type:j.ADDRESS_ADDED_ERROR_CLEARED});},checkoutCartInitiated:function(){k.dispatch({type:j.CHECKOUT_CART_INITIATED});},checkoutCartCreated:function(m){k.dispatch({type:j.CHECKOUT_CART_CREATED,data:m});},checkoutShippingOptionSelected:function(m){k.dispatch({type:j.CHECKOUT_SHIPPING_OPTION_SELECTED,data:m});},checkoutAddressSelected:function(m){k.dispatch({type:j.CHECKOUT_ADDRESS_SELECTED,data:m});},checkoutCreditCardSelected:function(m){k.dispatch({type:j.CHECKOUT_CREDIT_CARD_SELECTED,data:m});},checkoutAddressFormToggled:function(m){k.dispatch({type:j.CHECKOUT_ADDRESS_FORM_TOGGLED,data:m});},checkoutCreditCardFormToggled:function(m){k.dispatch({type:j.CHECKOUT_CREDIT_CARD_FORM_TOGGLED,data:m});},checkoutAddressEditOptionsToggled:function(m){k.dispatch({type:j.CHECKOUT_ADDRESS_EDIT_OPTIONS_TOGGLED,data:m});},checkoutCreditCardEditOptionsToggled:function(m){k.dispatch({type:j.CHECKOUT_CREDIT_CARD_EDIT_OPTIONS_TOGGLED,data:m});},checkoutCreditCardFormValidated:function(m,n){k.dispatch({type:j.CHECKOUT_CREDIT_CARD_FORM_VALIDATED,data:{isValid:m,formData:n}});},checkoutAddressFormValidated:function(m,n){k.dispatch({type:j.CHECKOUT_ADDRESS_FORM_VALIDATED,data:{isValid:m,formData:n}});},checkoutEditCompleted:function(){k.dispatch({type:j.CHECKOUT_EDIT_COMPLETED});},checkoutProcessing:function(m){k.dispatch({type:j.CHECKOUT_PROCESSING,data:m});},checkoutBuyerProfileUpdated:function(m){k.dispatch({type:j.CHECKOUT_BUYER_PROFILE_UPDATED,data:m});}};f.exports=l;},null);
__d('P2PLogger',['BanzaiLogger'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i='P2PPaymentLoggerConfig',j={log:function(k,l){l=babelHelpers._extends({event:k},l);h.log(i,l);}};f.exports=j;},null);
__d('StoreBasedStateMixinHelper',['SubscriptionsHandler','invariant'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){this.$StoreBasedStateMixinHelper1=k;this.$StoreBasedStateMixinHelper2=new h();}j.prototype.subscribeCallback=function(k){var l=this.$StoreBasedStateMixinHelper1.map(function(m){if(m.hasChanged&&m.getDispatchToken&&m.addListener){return m.addListener(k);}else if(m.subscribe){return m.subscribe('change',k);}else if(m.addListener){return m.addListener('change',k);}else i(0);});if(this.$StoreBasedStateMixinHelper1.length>0)this.$StoreBasedStateMixinHelper2.addSubscriptions.apply(this.$StoreBasedStateMixinHelper2,l);};j.prototype.release=function(){this.$StoreBasedStateMixinHelper2.release();};f.exports=j;},null);
__d('StoreAndPropBasedStateMixin',['StoreBasedStateMixinHelper','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=(function(){for(var l=arguments.length,m=Array(l),n=0;n<l;n++)m[n]=arguments[n];return {getInitialState:function(){return this.constructor.calculateState(this.props);},componentWillMount:function(){!this.constructor.calculateState?i(0):undefined;this._recalculateStateID=null;var o=(function(){if(this.isMounted())this.setState(this.constructor.calculateState(this.props));this._recalculateStateID=null;}).bind(this);this._mixin=new h(m);this._mixin.subscribeCallback((function(){if(this._recalculateStateID===null)this._recalculateStateID=j(o);}).bind(this));},componentWillReceiveProps:function(o){this.setState(this.constructor.calculateState(o));},componentWillUnmount:function(){this._mixin.release();this._mixin=null;}};}).bind(this);f.exports=k;},null);
__d('P2PAmountUtils',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=10000,i={isAmountOverLegalLimit:function(j){return parseFloat(this.sanitizeAmount(j))>=h;},isAmountZero:function(j){return parseFloat(this.sanitizeAmount(j))===0;},isValidSendAmount:function(j){return !this.isAmountOverLegalLimit(j)&&!this.isAmountZero(j);},sanitizeAmount:function(j){return j.replace(/[^0-9\.]+/g,'');}};f.exports=i;},null);
__d('DOMP2PTrigger',['CurrentEnvironment','JSXDOM','P2PAmountUtils','P2PTriggersUtils','TransformTextToDOMMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n={MAX_ITEMS:40,match:function(o){var p=k.getMatches(o);if(!p||!p.length)return false;var q=p[0];if(!j.isValidSendAmount(q))return false;var r=p.index;return {startIndex:r,endIndex:r+q.length,element:this._element(q)};},_element:function(o){return (i.a({href:"#",className:"_35i0"+(h.facebookdotcom?' '+"_4g4e":''),"data-p2p-trigger":o},o));}};f.exports=Object.assign(n,l);},null);
__d('p2pTriggerJSXDOMToString',['DOMEmoji','DOMEmote','DOMP2PTrigger','JSXDOM','transformTextToDOM'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=function(n,o,p,q){var r=[];if(q)r.push(j);if(o)r.push(h);if(p)r.push(i);return (k.span(null,l(n,r)).innerHTML);};f.exports=m;},null);
__d('P2PTriggers.react',['DOM','Event','MercuryIDs','P2PActions','P2PLogger','P2PPaymentLoggerEvent','P2PPaymentLoggerEventFlow','P2PUserEligibilityStore','StoreAndPropBasedStateMixin','React','ReactDOM','nullthrows','p2pTriggerJSXDOMToString'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=q.PropTypes,v=q.createClass({displayName:'P2PTriggers',mixins:[p(o)],propTypes:{renderEmoji:u.bool,renderEmoticons:u.bool,text:u.string.isRequired,threadID:u.string.isRequired},getInitialState:function(){return {amount:''};},statics:{calculateState:function(w){var x=j.isGroupChat(w.threadID)||o.getEligibilityByThreadID(w.threadID);return {isThreadEligible:x,otherUserID:j.getUserIDFromThreadID(w.threadID)};}},_clickListeners:null,componentDidMount:function(){this._clickListeners=[];this.bindClickListeners();},componentWillUnmount:function(){this.unbindClickListeners();},log:function(w,x){l.log(w,babelHelpers._extends({www_event_flow:n.UI_FLOW_P2P_SEND,object_id:this.state.otherUserID},x));},bindClickListeners:function(){var w=s(this._clickListeners);if(!w.length){var x=h.scry(r.findDOMNode(this),'[data-p2p-trigger]');for(var y=0,z=x.length;y<z;y++)w.push(i.listen(x[y],'click',this.handleTriggerClick));}},unbindClickListeners:function(){var w;if(this._clickListeners){for(var x=0,y=this._clickListeners.length;x<y;x++){w=this._clickListeners[x];if(w)w.remove();}this._clickListeners=[];}},componentDidUpdate:function(w,x){if(!x.isThreadEligible&&this.state.isThreadEligible)this.bindClickListeners();},getAmountFromTriggerClickEvent:function(w){var x=w.target.getAttribute('data-p2p-trigger')||'';return x.replace(/[^0-9\.]+/g,'');},handleTriggerClick:function(w){w.preventDefault();var x=this.getAmountFromTriggerClickEvent(w);this.setState({amount:x});this.openSendView();this.log(m.UI_ACTN_INITIATE_SEND_TRIGGER,{raw_amount:this.state.amount,currency:'USD'});},openSendView:function(){k.chatSendViewOpened({threadID:this.props.threadID,amount:this.state.amount});},render:function(){var w=t(this.props.text,this.props.renderEmoji,this.props.renderEmoticons,this.state.isThreadEligible);return (q.createElement('span',{dangerouslySetInnerHTML:{__html:w}}));}});f.exports=v;},null);
__d('TextWithEntitiesAndP2P.react',['BaseTextWithEntities.react','Link.react','P2PTriggers.react','React'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=k.createClass({displayName:'TextWithEntitiesAndP2P',_renderText:function(m){return (k.createElement(j,{text:m,renderEmoticons:this.props.renderEmoticons,renderEmoji:this.props.renderEmoji,threadID:this.props.threadID}));},_renderRange:function(m,n){if(this.props.interpolator){return this.props.interpolator(m,n);}else return (k.createElement(i,{href:n.entity},m));},render:function(){return (k.createElement(h,babelHelpers._extends({},this.props,{textRenderer:this._renderText,rangeRenderer:this._renderRange,ranges:this.props.ranges,imageRanges:this.props.imageRanges,aggregatedRanges:this.props.aggregatedRanges,text:this.props.text})));}});f.exports=l;},null);
__d('URLMatcher',['URLMatcherConfig'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='!"#%&\'()*,-./:;<>?@[\\]^_`{|}',j='\u2000-\u206F\u00ab\u00bb\uff08\uff09',k='(?:25[0-5]|2[0-4][0-9]|1[0-9]{2}|[1-9]?[0-9])',l='(?:(?:ht|f)tps?)://',m='(?:(?:'+k+'[.]){3}'+k+')',n='\\[(?:(?:[A-Fa-f0-9]{1,4}::?){1,7}[A-Fa-f0-9]{1,4})\\]',o='(?:\\b)www\\d{0,3}[.]',p='[^\\s'+i+j+']',q='(?:(?:(?:[.:\\-_%@]|'+p+')*'+p+')|'+n+')',r='(?::\\d+){0,1}',s='(?=[/?#])',t=h.tlds,u='(?:'+'(?:'+l+q+r+')|'+'(?:'+m+r+')|'+'(?:'+n+r+')|'+'(?:'+o+q+t+r+')|'+'(?:'+q+t+r+s+')'+')',v='[/#?]',w='\\([^\\s()<>]+\\)',x='[^\\s()<>?#]+',y=new RegExp(u,'im'),z='^\\[[0-9]{1,4}:[0-9]{1,4}:[A-Fa-f0-9]{1,4}\\]',aa=new RegExp(z,'im'),ba='(?:'+'(?:'+v+')'+'(?:'+'(?:'+w+'|'+x+')*'+')*'+')*',ca=new RegExp('('+'(?:'+u+')'+'(?:'+ba+')'+')','im'),da=new RegExp('('+'(?:'+l+q+r+')|'+'(?:'+o+q+t+r+')'+')'),ea=/[\s'";]/,fa=new RegExp(v,'im'),ga=new RegExp('[\\s!"#%&\'()*,./:;<>?@[\\]^`{|}\u00ab\u00bb\u2000-\u206F\uff08\uff09]','im'),ha=new RegExp('[\\s()<>?#]','im'),ia=new RegExp('\\s()<>'),ja=function(qa){if(qa&&qa.indexOf('@')!=-1){return da.exec(qa)?qa:null;}else return qa;},ka=function(qa){return la(qa,ca);},la=function(qa,ra){var sa=(ra.exec(qa)||[])[1]||null;return ja(sa);},ma=function(qa){return y.exec(qa);},na=function(qa){return !ea.test(qa.charAt(qa.length-1));},oa=function(qa){do{var ra=y.exec(qa);if(!ra)return null;var sa=false;if(ra[0][0]==='['&&ra.index>0&&qa[ra.index-1]==='@'){var ta=aa.exec(ra[0]);if(ta){sa=true;qa=qa.substr(ra.index+ta[0].length);}}}while(sa);var ua=qa.substr(ra.index+ra[0].length);if(ua.length===0||!fa.test(ua[0]))return ja(ra[0]);var va=0,wa=0,xa=1,ya=0,za=wa;for(var ab=1;ab<ua.length;ab++){var bb=ua[ab];if(za===wa){if(bb==='('){ya=ya+1;za=xa;}else if(fa.test(bb)||!ga.test(bb)){va=ab;}else if(ha.test(bb))break;}else if(bb==='('){ya=ya+1;}else if(bb===')'){ya=ya-1;if(ya===0){za=wa;va=ab;}}else if(ia.test(bb))break;}return ja(ra[0]+ua.substring(0,va+1));},pa={};pa.permissiveMatch=ka;pa.matchToPattern=la;pa.matchHost=ma;pa.trigger=na;pa.match=oa;f.exports=pa;},null);
__d('URLScraper',['ArbiterMixin','DataStore','Event','URLMatcher','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n,o='scraperLastPermissiveMatch';m=babelHelpers.inherits(p,l(h));n=m&&m.prototype;function p(q,r){'use strict';n.constructor.call(this);this.input=q;this.enable();this.getValueFn=r;}p.prototype.reset=function(){'use strict';i.set(this.input,o,null);};p.prototype.enable=function(){'use strict';if(this.events)return;var q=function(r){setTimeout(this.check.bind(this,r),30);};this.events=j.listen(this.input,{paste:q.bind(this,false),keydown:q.bind(this,true)});};p.prototype.disable=function(){'use strict';if(!this.events)return;for(var event in this.events)this.events[event].remove();this.events=null;};p.prototype.check=function(q){'use strict';var r=this.getValueFn?this.getValueFn():this.input.value;if(q&&p.trigger(r))return;var s=p.match(r),t=k.permissiveMatch(r);if(t&&t!=i.get(this.input,o)){i.set(this.input,o,t);this.inform('match',{url:s||t,alt_url:t});}};Object.assign(p,k);f.exports=p;},null);
__d('getURLRanges',['URI','URLScraper'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){l=l||0;var m=i.match(k);if(!m)return [];var n=m;if(!/^[a-z][a-z0-9\-+.]+:\/\//i.test(m))n='http://'+m;if(!h.isValidURI(n))return [];l+=k.indexOf(m);var o=m.length,p=[{offset:l,length:m.length,entity:{url:n}}];return p.concat(j(k.substr(l+o),l+o));}f.exports=j;},null);
__d('MercuryMessageBody.react',['EmoticonsList','React','Link.react','P2PTriggersUtils','ReactComponentWithPureRenderMixin','SupportedEmoji','TextWithEntities.react','TextWithEntitiesAndP2P.react','URI','URLMatcher','cancelAnimationFrame','cx','fbt','getURLRanges','isFacebookURI','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=i.PropTypes,y=i.createClass({displayName:'MercuryMessageBody',mixins:[l],propTypes:{body:x.string,ranges:x.array,threadID:x.string},getInitialState:function(){return {richText:false};},_shouldRenderP2PTriggers:false,componentDidMount:function(){this._raf=w(this.setIsRichText);},targetBlankLinkInterpolator:function(z,aa){if(aa.entity&&aa.entity.url){var ba=new p(aa.entity.url);if(v(ba)&&!ba.getFragment())aa.entity.url=ba.addQueryData({__mref:'message_bubble'}).toString();}return (i.createElement(j,{href:aa.entity.url,shimhash:aa.entity.shimhash,target:'_blank'},z));},setIsRichText:function(){delete this._raf;var z=this.props,aa=z.body,ba=z.ranges;aa=aa||'';this._shouldRenderP2PTriggers=!!(this.props.threadID&&k.canSeeTriggers(this.props.threadID)&&k.getMatches(aa));if(ba&&ba.length||h.noncapturingRegexp.test(aa)||m.findEmoji(aa)||q.match(aa)||this._shouldRenderP2PTriggers)this.setState({richText:true});},componentWillUnmount:function(){this._raf&&r(this._raf);},render:function(){var z=this.props.body||'',aa;if(z.startsWith('?OTR'))return (i.createElement('span',{className:"_89h"},t._("[tin nh\u1eafn \u0111\u00e3 m\u00e3 h\u00f3a]")));z=z.replace(/\s+$/,'');if(z.length===0)return null;if(!this.state.richText)return i.createElement('span',{className:this.props.className},z);var ba=this.props.ranges;if(ba==undefined)ba=u(z);aa={className:this.props.className,interpolator:this.targetBlankLinkInterpolator,text:z,ranges:ba,renderEmoticons:true,renderEmoji:true};if(this._shouldRenderP2PTriggers){return (i.createElement(o,babelHelpers._extends({},aa,{threadID:this.props.threadID})));}else return (i.createElement(n,aa));}});f.exports=y;},null);
__d('MercuryViewer',['CurrentUser','MercuryAssert'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j='fbid:'+h.getID(),k={getID:function(){return j;},isViewer:function(l){i.isParticipantID(l);return l===j;}};f.exports=k;},null);
__d('MercuryMessageInfo',['MercuryActionStatus','MercuryMessageDeliveryState','MercuryViewer'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={isOutbound:function(l){return l.author===j.getID();},isInbound:function(l){return !k.isOutbound(l);},isSending:function(l){return (l.status===h.UNSENT||l.status===h.UNCONFIRMED||l.status===h.UNABLE_TO_CONFIRM||l.status===h.RESENDING);},isSent:function(l){return (l.status===undefined||l.status===h.SUCCESS);},hasError:function(l){return (l.status===h.FAILED_UNKNOWN_REASON||l.status===h.UNABLE_TO_CONFIRM||l.status===h.ERROR);},getDeliveryState:function(l,m){if(this.hasError(l))return i.ERROR;if(this.isSending(l))return i.SENDING;if(this.isSent(l)){if(l.timestamp<=m)return i.DELIVERED;return i.SENT;}return i.UNKNOWN;}};f.exports=k;},null);
__d('MercuryErrorInfo',['MercuryErrorType','MercuryMessageInfo','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={getMessage:function(l){var m='';if(k.isConnectionError(l)){m=j._("Kh\u00f4ng th\u1ec3 g\u1eedi tin nh\u1eafn n\u00e0y.");if(k.isTransient(l))m=j._("{message} H\u00e3y ki\u1ec3m tra k\u1ebft n\u1ed1i internet c\u1ee7a b\u1ea1n v\u00e0 nh\u1ea5p \u0111\u1ec3 th\u1eed l\u1ea1i.",[j.param('message',m)]);}else{if(l&&l.description){m=l.description;}else m=j._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 kh\u00f4ng \u0111\u01b0\u1ee3c g\u1eedi.");if(k.isTransient(l))m=j._("{message} Nh\u1ea5p \u0111\u1ec3 g\u1eedi l\u1ea1i.",[j.param('message',m)]);}return m;},isConnectionError:function(l){if(l&&l.type==h.TRANSPORT)return l.code===1001||l.code===1004||l.code===1006;return false;},isTransient:function(l){return l&&l.is_transient;},isPermanent:function(l){return l?!this.isTransient(l):false;},hasErrorStatus:function(l){return i.hasError(l);}};f.exports=k;},null);
__d('MercuryLocalIDs',['PresenceUtil','randomInt'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={generateMessageID:function(l){var m=l||Date.now(),n=i(0,4294967295),o=h.getSessionID();return '<'+m+':'+n+'-'+o+'@mail.projektitan.com>';},generateThreadID:function(l){return 'root:'+j.generateOfflineThreadingID(l);},generateOfflineThreadingID:function(l){var m=l||Date.now(),n=i(0,4294967295),o=('0000000000000000000000'+n.toString(2)).slice(-22),p=m.toString(2)+o;return k(p);}};function k(l){var m='';while(l!='0'){var n=0,o='';for(var p=0;p<l.length;p++){n=2*n+parseInt(l[p],10);if(n>=10){o+='1';n-=10;}else o+='0';}m=n.toString()+m;l=o.slice(o.indexOf('1'));}return m;}f.exports=j;},null);
__d('MercuryMessageObject',['BanzaiODS','MercuryActionStatus','MercuryActionType','MercuryIDs','MercuryLocalIDs','MercuryMessageClientState','MercuryMessageSourceTags','MercurySingletonProvider','MercurySourceType','MercuryThreads','MercuryTimePassed','MercurySendMessageFields','fbt','formatDate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();v.getForFBID=function(z){'use strict';return y.getForFBID(z);};v.get=function(){'use strict';return y.get();};function v(z){'use strict';this.$MercuryMessageObject1=z;this.$MercuryMessageObject2=q.getForFBID(z);}v.prototype.constructUserGeneratedMessageObject=function(z,aa,ba,ca,da){'use strict';var ea=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);if(typeof z=='string')z=z.replace(/^\s+/,'').replace(/\s+$/,'');ea.body=z;ea.has_attachment=false;ea.html_body=false;ea.attachments=[];ea.specific_to_list=ca||[];ea.creator_info=da;return ea;};v.prototype.constructStickerMessageObject=function(z,aa,ba){'use strict';var ca=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,aa,ba);ca.has_attachment=true;ca.html_body=false;ca.attachments=[];ca.sticker_id=z;ca.specific_to_list=[];return ca;};v.prototype.constructAttachmentMessageObject=function(z,aa){'use strict';var ba=w(this.$MercuryMessageObject1,j.USER_GENERATED_MESSAGE,z,aa);ba.attachments=[];ba.specific_to_list=[];return ba;};v.prototype.constructLogMessageObject=function(z,aa,ba,ca){'use strict';var da=w(this.$MercuryMessageObject1,j.LOG_MESSAGE,z,aa);da.log_message_type=ba;da.log_message_data=ca;if(ca&&ca.untypedData&&ca.untypedData.ttl)da.ephemeral_ttl_mode=ca.untypedData.ttl;return da;};v.prototype.normalizeNewMessage=function(z){'use strict';if(z.status===undefined)z.status=i.UNSENT;z.timestamp_absolute=t._("H\u00f4m nay").toString();z.offline_threading_id=z.offline_threading_id||l.generateOfflineThreadingID(z.timestamp);if(!z.offline_threading_id)h.bumpEntityKey('chat.web','invalid_otid_generated');z.message_id=z.message_id||z.offline_threading_id;var aa=k.getParticipantIDFromUserID(this.$MercuryMessageObject1);z.specific_to_list=z.specific_to_list||[];if(z.specific_to_list.length&&z.specific_to_list.indexOf(aa)===-1)z.specific_to_list.push(aa);if(!z.thread_id){z.thread_id='root:'+z.offline_threading_id;}else{var ba=this.$MercuryMessageObject2.getThreadMetaNow(z.thread_id);if(ba&&ba.ephemeral_ttl_mode!==null&&z.ephemeral_ttl_mode===undefined)z.ephemeral_ttl_mode=ba.ephemeral_ttl_mode;}if(z.specific_to_list.length==1){z.thread_id='user:'+this.$MercuryMessageObject1;}else if(z.specific_to_list.length==2){var ca=z.specific_to_list[0]==aa?z.specific_to_list[1]:z.specific_to_list[0];z.thread_id=k.getThreadIDFromParticipantID(ca);}if(!z.specific_to_list.length){var da=k.tokenize(z.thread_id),ea=da.type,fa=da.value;if(ea=='user')z.specific_to_list=['fbid:'+fa,aa];}if(!z[s.MANUAL_RETRY_CNT])z[s.MANUAL_RETRY_CNT]=0;};v.prototype.normalizeResendMessage=function(z){'use strict';z.status=i.RESENDING;z.timestamp=Date.now();z[s.MANUAL_RETRY_CNT]+=1;};v.prototype.normalizeAddAttachmentPlaceholder=function(z,aa,ba){'use strict';if(ba.preview_attachments.length>0){z.has_attachment=true;z.preview_attachments=ba.preview_attachments;}z.client_state=m.DO_NOT_SEND_TO_SERVER;z.status=i.RESENDING;z.upload_id=aa;};function w(z,aa,ba,ca){var da=x(ba)?[n.CHAT]:[],ea=Date.now(),fa=u(new Date(ea),'g:ia'),ga={action_type:aa,thread_id:ca,author:k.getParticipantIDFromUserID(z),author_email:null,timestamp:ea,timestamp_absolute:new Date(ea).toLocaleDateString(),timestamp_relative:fa,timestamp_time_passed:r.TODAY,is_unread:false,is_forward:false,is_filtered_content:false,is_filtered_content_bh:false,is_filtered_content_account:false,is_filtered_content_quasar:false,is_filtered_content_invalid_app:false,is_spoof_warning:false,source:ba,source_tags:da};return ga;}function x(z){switch(z){case p.CHAT_WEB:case p.CHAT_JABBER:case p.CHAT_IPHONE:case p.CHAT_MEEBO:case p.CHAT_ORCA:case p.CHAT_TEST:case p.CHAT:case p.DESKTOP:return true;default:return false;}}var y=new o(v);f.exports=v;},null);
__d('MercuryMessageActions',['MercuryActionType','MercuryDispatcher','MercuryMessageObject','MercuryPayloadSource','MercuryServerRequests','MercurySingletonMixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(o){this.$MercuryMessageActions1=o;this.$MercuryMessageActions2=j.getForFBID(this.$MercuryMessageActions1);this.__serverRequests=l.getForFBID(this.$MercuryMessageActions1);this.__dispatcher=i.getForFBID(this.$MercuryMessageActions1);}n.prototype.send=function(o,p,q){p=p||Function.prototype;this.$MercuryMessageActions2.normalizeNewMessage(o);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers._extends({},o),k.CLIENT_SEND_MESSAGE));this.__serverRequests.sendNewMessage(o,q);p(o.thread_id);};n.prototype.resend=function(o,p){var q=babelHelpers._extends({},o);this.$MercuryMessageActions2.normalizeResendMessage(q);this.send(q,undefined,p);};n.prototype.addAttachmentPlaceholder=function(o,p,q){this.$MercuryMessageActions2.normalizeAddAttachmentPlaceholder(o,p,q);this.$MercuryMessageActions2.normalizeNewMessage(o);this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload(babelHelpers._extends({},o),k.CLIENT_SEND_MESSAGE));};n.prototype.cancelAttachmentPlaceholder=function(o,p){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:o,upload_data:p,action_type:h.CANCEL_ATTACHMENT_PLACEHOLDER},k.CLIENT_SEND_MESSAGE));};n.prototype.confirmAttachmentPlaceholder=function(o,p){this.__dispatcher.handleUpdate(this.__constructClientSingleMessagePayload({upload_id:o,upload_data:p,action_type:h.CONFIRM_ATTACHMENT_PLACEHOLDER},k.CLIENT_SEND_MESSAGE));};n.prototype['delete']=function(o,p,q){this.__dispatcher.handleUpdate(this.$MercuryMessageActions3(o,p,h.DELETE_MESSAGES,q||k.CLIENT_DELETE_MESSAGES));};n.prototype.__constructClientSingleMessagePayload=function(o,p){return {actions:[o],from_client:true,payload_source:p};};n.prototype.$MercuryMessageActions4=function(o,p){return {actions:[o],from_client:false,payload_source:p};};n.prototype.$MercuryMessageActions3=function(o,p,q,r){return {actions:[{action_type:q,action_id:null,thread_id:o,message_ids:p}],from_client:true,payload_source:r};};Object.assign(n,m);f.exports=n;},null);
__d('MercuryMessageError.react',['CurrentUser','ImmutableObject','MercuryErrorInfo','MercuryMessageActions','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=l.PropTypes,p=l.createClass({displayName:'MercuryMessageError',propTypes:{authorFBID:o.string,message:o.instanceOf(i).isRequired},getDefaultProps:function(){return {authorFBID:h.getID()};},render:function(){var q=this.props.message,r=q.error_data;return (l.createElement('div',babelHelpers._extends({},this.props,{className:n(this.props.className,this._getClassNameFromStatus(q)),tabIndex:j.isTransient(r)?0:null,onClick:j.isTransient(r)?this.messageResend:null}),l.createElement('div',{className:"_2fs1"}),l.createElement('span',{dangerouslySetInnerHTML:{__html:this._getTextFromStatus(q)}})));},messageResend:function(){k.getForFBID(this.props.authorFBID).resend(this.props.message);},_getClassNameFromStatus:function(q){if(j.hasErrorStatus(q)){return "_2fs2"+(' '+"_2fs3")+(j.isTransient(q.error_data)?' '+"_2fs4":'')+(j.isPermanent(q.error_data)?' '+"_2fs5":'');}else return "_2fs6 _2fs2";},_getTextFromStatus:function(q){var r='',s=q.error_data;if(j.hasErrorStatus(q))r=j.getMessage(s);if(typeof r==='object'&&r.__html)r=r.__html;return r;}});f.exports=p;},null);
__d('MercuryAudioPlayer',['Event','Arbiter','DOM','Flash','UserAgent_DEPRECATED'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=200;function n(){if(l.webkit()&&!l.chrome())return false;var w=j.create('audio'),x=false;try{if(!!w.canPlayType)if(w.canPlayType('video/mp4;').replace(/^no$/,''))x=true;}finally{return x;}}function o(){return k.isAvailable();}var p=function(){this.interval=null;this.arbiterInstance=null;this.audio=j.create('audio');h.listen(this.audio,'playing',(function(){this.informAttachment('playing',this.audio.currentTime);this.interval=setInterval((function(){this.informAttachment('playing',this.audio.currentTime);}).bind(this),m);}).bind(this));h.listen(this.audio,'ended',(function(){clearInterval(this.interval);this.informAttachment('finished');}).bind(this));};Object.assign(p.prototype,{setAudio:function(w,x){this.audio.setAttribute('src',w);this.arbiterInstance=x;},informAttachment:function(w,x){if(this.arbiterInstance)this.arbiterInstance.inform(w,x);},play:function(){this.audio.play();this.informAttachment('played');},resume:function(){this.audio.play();this.informAttachment('played');},pause:function(){this.audio.pause();clearInterval(this.interval);this.informAttachment('paused');},getType:function(){return 'html5';}});var q=function(){this.src=null;this.arbiterInstance=null;var w=j.create('div');document.body.appendChild(w);this.swf=k.embed('/swf/SoundStreamPlayer.swf',w,null,{});this.interval=null;i.subscribe('soundstream/finished',(function(){clearInterval(this.interval);this.informAttachment('finished');}).bind(this));};Object.assign(q.prototype,{setAudio:function(w,x){this.src=w;this.arbiterInstance=x;},informAttachment:function(w,x){if(this.arbiterInstance)this.arbiterInstance.inform(w,x);},play:function(){this.swf.playSound(this.src);this.interval=setInterval((function(){var w=this.swf.getCurrentTime();this.informAttachment('playing',w);}).bind(this),m);this.informAttachment('played');},resume:function(){this.swf.resume();this.informAttachment('played');},pause:function(){clearInterval(this.interval);this.swf.pause();this.informAttachment('paused');},getType:function(){return 'flash';}});function r(){if(n()){return new p();}else if(o())return new q();return false;}var s=null,t=null,u=0;function v(w,x){this.src=w;this.arbiterInstance=x;this.audio_id=++u;s!==null||(s=r());if(!s)return false;}Object.assign(v.prototype,{getType:function(){if(!s){return false;}else return s.getType();},play:function(w){if(w&&t==this.audio_id){s.resume();}else{this.pause();t=this.audio_id;s.setAudio(this.src,this.arbiterInstance);s.play();}},pause:function(){s.pause();}});f.exports=v;},null);
__d('MercuryShareAttachmentRenderLocations',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={CHAT:'chat',CHAT_PREVIEW:'chat_preview',MESSENGER:'messenger',WEB_INBOX:'web_inbox',getValues:function(){return [h.CHAT,h.CHAT_PREVIEW,h.MESSENGER,h.WEB_INBOX];},isPreview:function(i){return i===h.CHAT_PREVIEW;}};f.exports=h;},null);
__d('MercuryAttachmentAudioClip.react',['Arbiter','ArbiterMixin','MercuryAudioPlayer','CurrentUser','JSLogger','LeftRight.react','MercuryConfig','MercuryShareAttachmentRenderLocations','React','SubscriptionsHandler','cx','fbt','joinClasses','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){if(c.__markCompiled)c.__markCompiled();var v=p.PropTypes,w='MercuryAttachmentAudioClip/play',x=l.create('mercury_audio_clip'),y=p.createClass({displayName:'AudioClip',mixins:[i],propTypes:{duration:v.number,location:v.oneOf(o.getValues()),rootClassName:v.string,showHelp:v.bool,src:v.string.isRequired,width:v.number},getInitialState:function(){this.logged=false;return {time:0,playing:false,started:false,duration:this.props.duration,audioPlayer:new j(this.props.src,this)};},componentDidMount:function(){this._subscriptionsHandler=new q();this._subscriptionsHandler.addSubscriptions(this.subscribe('playing',this.updateTime),this.subscribe('played',u(this.setState,this,{playing:true,started:true})),this.subscribe('paused',u(this.setState,this,{playing:false})),this.subscribe('finished',u(this.setState,this,{playing:false,started:false,time:this.props.duration})),h.subscribe(w,(function(z,aa){if(this.props.src!=aa)this.setState({time:0});}).bind(this)));},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},updateTime:function(z,aa){this.setState({time:aa});},play:function(){if(this.state.playing){this.state.audioPlayer.pause();}else{this.state.audioPlayer.play(this.state.started);h.inform(w,this.props.src);if(!this.logged){this.logged=true;x.log('play',{uid:k.getID(),duration:this.props.duration});}}},_formatSeconds:function(z){if(z){z=Math.ceil(z);var aa=z%60;if(aa<10)aa='0'+aa;var ba=Math.floor(z/60);return ba+':'+aa;}else return null;},_renderPlayer:function(z,aa){return (p.createElement('a',{className:"_1miz"+(' '+"_2e-1")+(n.ChatTabMessengerStyle?' '+"_3_om":''),href:'#',style:{width:z},onClick:this.play},p.createElement('span',{className:"_1mi- _2e-2"},p.createElement('i',{className:"_1mi_ _2e-3"})),p.createElement('span',{className:"_1mj0 _2e-4 _3oh-"},aa),p.createElement('div',{className:"_1mj1 _2e-5"})));},render:function(){var z=this.state.time,aa=this.state.playing,ba=this._formatSeconds(this.state.duration),ca=this.props.location===o.MESSENGER,da=this.props.width||170;if(ca){var ea=this.props.duration;if(ea>10){da=240;}else if(ea>5){da=200;}else if(ea>2){da=160;}else da=120;}var fa=null,ga=Math.ceil(z*(da+2)/this.state.duration);if(ca)ga=Math.ceil(z*(da+24)/this.state.duration);if(this.state.audioPlayer&&this.state.audioPlayer.getType()){var ha=this._renderPlayer(da,ba),ia=this._renderPlayer(da,ba),ja="_1mj2"+(' '+"_2e-6")+(aa&&z!==0?' '+"_1mj3":'')+(aa&&z===0?' '+"_4g4x":'');fa=p.createElement('div',{className:ja},ha,p.createElement('div',{className:"_1mj4 _2e-7",style:{width:ga}},ia));}else fa=p.createElement('div',{className:"_1mj2"},p.createElement('div',{className:"_1miz"},p.createElement(m,null,p.createElement('a',{className:"_1mj5",href:this.props.src},p.createElement('span',{className:"_3qi6"},p.createElement('i',{className:"_1mj6"})),p.createElement('span',{className:"_1mj7"},s._("Tin nh\u1eafn tho\u1ea1i")),p.createElement('span',{className:"_1mj8"},ba)),p.createElement('a',{href:this.props.src,className:"_1mj9"},p.createElement('i',{className:"_1mja"})))));return (p.createElement('div',{className:t("_1mjb"+(ca?' '+"_454y":''),this.props.rootClassName)},fa));}});f.exports=y;},null);
__d("MercuryAttachmentConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={SIDE_LENGTH:9};f.exports=h;},null);
__d('MercuryAttachmentFile.react',['Image.react','LeftRight.react','Link.react','MercuryAttachment','ReactComponentWithPureRenderMixin','React','ix','cx','joinClasses','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'MercuryAttachmentFile',propTypes:{name:r.string.isRequired,open_url:r.string,rel:r.string,type:r.string.isRequired,url:r.string},mixins:[l],_renderFileLinks:function(){if(this.props.open_url)return (m.createElement('div',{className:"_59gs"},m.createElement(j,{target:'_blank',href:this.props.open_url},q._("m\u1edf")),' ','·',' ',m.createElement(j,{href:this.props.url},q._("t\u1ea3i xu\u1ed1ng"))));return m.createElement('div',null);},render:function(){var t=p(k.getAttachIconClass(this.props.type),"_59go _59gq");if(this.props.url)return (m.createElement(i,{className:t},m.createElement(j,{href:this.props.url},m.createElement(i,null,m.createElement(h,{src:n('/images/messaging/docs/generic.png')}),m.createElement('span',{className:"_59gp"},this.props.name))),this._renderFileLinks()));return (m.createElement(i,{className:t},m.createElement(h,{src:n('/images/messaging/docs/generic.png')}),m.createElement('span',{className:"_59gp"},this.props.name)));}});f.exports=s;},null);
__d('MercuryAttachmentMalicious.react',['XUINotice.react','XUIText.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MercuryAttachmentMalicious',render:function(){return (j.createElement(h,{use:'warn'},j.createElement(i,{size:'small'},k._("T\u1ec7p \u0111\u00ednh k\u00e8m n\u00e0y \u0111\u00e3 b\u1ecb \u0111\u00e1nh d\u1ea5u l\u00e0 \u0111\u1ed9c h\u1ea1i."))));}});f.exports=l;},null);
__d('ChatImageArrowDirection',['keyMirror'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({BOTH:null,LEFT:null,RIGHT:null});f.exports=i;},null);
__d('ChatImageWithArrow.react',['BackgroundImage.react','ChatImageArrowDirection','Link.react','MercuryAttachmentConstants','MercuryConfig','React','XUISpinner.react','cx','getVendorPrefixedName','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=30,t=15,u=m.createClass({displayName:'ChatImageWithArrow',propTypes:{arrowDirection:r.oneOf(Object.keys(i)),onClick:r.func,height:r.number.isRequired,isLoading:r.bool,rootClassName:r.string,sideLength:r.number,source:r.string,width:r.number.isRequired},getDefaultProps:function(){return {sideLength:k.SIDE_LENGTH,isLoading:false};},render:function(){this._arrowWidth=Math.floor(this.props.sideLength/Math.sqrt(2));this._extendedPhotoWidth=Math.ceil(this._getWidth()+this._arrowWidth);if(this.props.isLoading)return this._renderUploadingBubble();var v=q("_4yp6"+(this.props.arrowDirection!==i.BOTH&&!l.ChatTabMessengerStyle?' '+"_2nlo":''),this.props.rootClassName),w,x;switch(this.props.arrowDirection){case i.BOTH:w=[this._renderArrowWithBorder(i.LEFT),this._renderArrowWithBorder(i.RIGHT)];x=[this._renderArrowWithNoBorder(i.LEFT),this._renderArrowWithNoBorder(i.RIGHT)];break;case i.LEFT:case i.RIGHT:w=this._renderArrowWithBorder(this.props.arrowDirection);x=this._renderArrowWithNoBorder(this.props.arrowDirection);break;}return this._renderLink(m.createElement('div',{className:v},l.ChatTabMessengerStyle?null:w,m.createElement('div',{className:"_52kr"+(l.ChatTabMessengerStyle?' '+"_3_om":''),style:{width:this._getWidth(),height:this._getHeight()}},m.createElement('div',{className:"_4yp9",style:{backgroundImage:'url('+this.props.source+')',width:this._extendedPhotoWidth,height:this._getHeight()}})),l.ChatTabMessengerStyle?null:x));},_getWidth:function(){return Math.max(this.props.width,t);},_getHeight:function(){return Math.max(this.props.height,s);},_renderLink:function(v){if(this.props.onClick)return (m.createElement(j,{onClick:this.props.onClick},v));return v;},_calculateArrowTransform:function(v,w,x,y){if(w===i.LEFT){return 'translate('+x+'px, '+y+'px)'+'rotate(45deg)';}else return 'translate('+(v-x)+'px, '+y+'px)'+'rotate(45deg)';},_calculateArrowImageTransform:function(v,w,x,y){if(w===i.LEFT){return 'rotate(-45deg)'+'translate(-'+(this._arrowWidth+x)+'px,'+'-'+y+'px)';}else return 'rotate(-45deg)'+'translate(-'+(v-x)+'px, -'+y+'px)';},_renderUploadingBubble:function(){var v={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)v.backgroundImage='url('+this.props.source+')';var w={width:this.props.sideLength,height:this.props.sideLength};if(this.props.source)w.opacity=0;var x=p('transform');if(x){v[x]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,this.props.sideLength);w[x]=this._calculateArrowTransform(this._getWidth(),this.props.arrowDirection,0,Math.floor(this.props.sideLength-this._getHeight()));}var y={width:this._getWidth(),height:this._getHeight()};if(this.props.source){y.backgroundImage='url('+this.props.source+')';y.backgroundSize='cover';}return (m.createElement('div',{className:"_4yp6"},m.createElement('div',{className:"_4ypa",style:v}),m.createElement('div',{className:"_4ypb",style:y},m.createElement(n,{size:'small'})),m.createElement('div',{className:"_4ype",style:w})));},_renderArrowWithBorder:function(v){var w={width:this.props.sideLength,height:this.props.sideLength},x={},y=p('transform');if(y){w[y]=this._calculateArrowTransform(this._getWidth(),v,0,this.props.sideLength);x[y]=this._calculateArrowImageTransform(this._getWidth(),v,0,this.props.sideLength);return (m.createElement('div',{className:"_4ypf"+(v===i.LEFT?' '+"_2nlp":'')+(v===i.RIGHT?' '+"_2nlq":''),key:'border:'+v,style:w},m.createElement(h,{backgroundSize:'cover',className:"_4ypg",height:this._getHeight(),src:this.props.source,style:x,width:this._extendedPhotoWidth})));}},_renderArrowWithNoBorder:function(v){var w={width:this.props.sideLength,height:this.props.sideLength},x={},y=1,z=p('transform');if(z){w[z]=this._calculateArrowTransform(this._getWidth(),v,y,this.props.sideLength-this._getHeight());x[z]=this._calculateArrowImageTransform(this._getWidth(),v,y,this.props.sideLength);}return (m.createElement('div',{className:"_4yph"+(v===i.LEFT?' '+"_2nlp":'')+(v===i.RIGHT?' '+"_2nlq":''),key:'noBorder:'+v,style:w},m.createElement(h,{backgroundSize:'cover',className:"_4ypg",height:this._getHeight(),src:this.props.source,style:x,width:this._extendedPhotoWidth})));}});f.exports=u;},null);
__d('PhotoStoreCore',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={actions:{UPDATE:'update'},_photoCache:{},_postCreateCallbacks:{},getPhotoCache:function(i){if(!this._photoCache[i])throw new Error('Photo cache requested for unknown set ID');return this._photoCache[i];},hasBeenCreated:function(i){return !!this._photoCache[i];},clearSetCache:function(i){delete this._photoCache[i];delete this._postCreateCallbacks[i];},getByIndex:function(i,j,k){this.getPhotoCache(i).getItemAtIndex(j,k);},getByIndexImmediate:function(i,j){if(this._photoCache[i])return this._photoCache[i].getItemAtIndexImmediate(j);return undefined;},getItemsInAvailableRange:function(i){var j=this.getAvailableRange(i),k=[];for(var l=j.offset;l<j.length;l++)k.push(this.getByIndexImmediate(i,l));return k;},getItemsAfterIndex:function(i,j,k,l){var m=this.getCursorByIndexImmediate(i,j);this.fetchForward(i,m,k,l);},getAllByIDImmediate:function(i){var j=Object.keys(this._photoCache);return j.map((function(k){return this.getByIndexImmediate(k,this.getIndexForID(k,i));}).bind(this)).filter(function(k){return !!k;});},getIndexForID:function(i,j){if(this._photoCache[i])return this._photoCache[i].getIndexForID(j);return undefined;},getEndIndex:function(i){var j=this.getAvailableRange(i);return j.offset+j.length-1;},getCursorByIndexImmediate:function(i,j){var k=this.getByIndexImmediate(i,j);if(k)return this._photoCache[i].getCursorForID(k.id);return undefined;},hasNextPage:function(i){var j=this.getCursorByIndexImmediate(i,this.getEndIndex(i));return this.getPhotoCache(i).hasNextPage(j);},getAvailableRange:function(i){return this.getPhotoCache(i).getAvailableRange();},hasLooped:function(i){return this.getPhotoCache(i).hasLooped();},fetchForward:function(i,j,k,l){this.getPhotoCache(i).getItemsAfterCursor(j,k,l);},fetchBackward:function(i,j,k,l){this.getPhotoCache(i).getItemsBeforeCursor(j,k,l);},executePostCreate:function(i,j){if(this._photoCache[i]){j&&j();}else this._postCreateCallbacks[i]=j;},runPostCreateCallback:function(i){var j=this._postCreateCallbacks[i];if(j){j();delete this._postCreateCallbacks[i];}},setPreFetchCallback:function(i,j){this.getPhotoCache(i).setPreFetchCallback(j);},updateData:function(i){var j=i.set_id;if(!this._photoCache[j]){this._photoCache[j]=new i.cache_class(i);this.runPostCreateCallback(j);}else if(i.query_metadata.action==h.actions.UPDATE){this._photoCache[j].updateData(i);}else this._photoCache[j].addData(i);},updateFeedbackData:function(i){var j=Object.keys(i);j.forEach(function(k){return h.getAllByIDImmediate(k).forEach(function(l){l.feedback=i[k].feedback;});});},reset:function(){Object.keys(this._photoCache).forEach((function(i){return this.clearSetCache(i);}).bind(this));}};f.exports=h;},null);
__d('PhotoStore',['Arbiter','PhotoStoreCore'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();h.subscribe('update-photos',function(j,k){i.updateData(k);});f.exports=i;},null);
__d('MessagesViewer',['AsyncRequest','Bootloader','DOM','MessagesViewerSetID','PhotoStore','React','ReactDOM','Run','emptyFunction','ge'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r={bootstrapWithElem:function(u){r.bootstrapWithConfig({fbid:u.getAttribute('data-fbid'),dimensions:u.getAttribute('data-dimensions'),src:u.getAttribute('href'),endpoint:u.getAttribute('data-endpoint'),disablePaging:u.getAttribute('data-disablepaging')},u);},bootstrapWithConfig:function(u,v){var w=u.setID;if(!w)w=k.MESSAGES;t(function(x,y){s(m.createElement(x,{actorid:u.actorid,dimensions:[u.dimensions],disablepaging:u.disablePaging,disableForward:u.disableForward,open:true,photoid:u.fbid,reverse:false,rootClassName:u.rootClassName,setid:w,snapToPhoto:u.snapToPhoto,thumbsrc:u.src}));if(!l.hasBeenCreated(w)&&u.endpoint){var z=new h(u.endpoint);if(v)z.setRelativeTo(v);z.send();}});},renderVideo:function(u){t(function(v,w){s(m.createElement(w,u));});},preload:function(){o.onAfterLoad(function(){return t(p);});}};function s(u){var v=q('messages_viewer');if(!v){v=j.create('div',{id:'messages_viewer'});document.body.appendChild(v);}u=n.render(u,v);u.subscribeOnce('close',function(){n.unmountComponentAtNode(v);});}function t(u){i.loadModules(["SpotlightMessagesViewer","MessagingVideoViewer.react"],u);}f.exports=r;},null);
__d('MercuryAttachmentPhoto.react',['ChatImageArrowDirection','ChatImageWithArrow.react','MercuryMessageInfo','MessagesViewer','React'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=l.PropTypes,n=l.createClass({displayName:'MercuryAttachmentPhoto',propTypes:{height:m.number,image:m.object.isRequired,message:m.object.isRequired,onAttachmentLoad:m.func,width:m.number},componentDidMount:function(){k.preload();this.props.onAttachmentLoad&&this.props.onAttachmentLoad(this.props.height);},_handleClickPicture:function(o){var p=this.props.image;k.bootstrapWithConfig({src:p.preview_url,endpoint:p.url,fbid:p.metadata.fbid,dimensions:p.metadata.dimensions,disablePaging:true},null);},render:function(){var o=j.isInbound(this.props.message);return (l.createElement(i,{arrowDirection:o?h.LEFT:h.RIGHT,source:this.props.image.preview_url,height:this.props.height,width:this.props.width,onClick:this._handleClickPicture,isLoading:!!this.props.image.preview_uploading}));}});f.exports=n;},null);
__d('ChatGridImage.react',['Link.react','React','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=i.PropTypes,l=i.createClass({displayName:'ChatGridImage',propTypes:{isLoading:k.bool,onClick:k.func,size:k.number.isRequired,source:k.string},render:function(){if(this.props.isLoading)return (i.createElement('div',{className:"_4ypb",style:{width:this.props.size,height:this.props.size}}));return (i.createElement(h,{onClick:this.props.onClick},i.createElement('div',{className:"_332l",style:{backgroundImage:'url('+this.props.source+')',width:this.props.size,height:this.props.size}})));}});f.exports=l;},null);
__d('MercuryAttachmentPhotoGrid.react',['ChatGridImage.react','ChatImageArrowDirection','ChatImageWithArrow.react','Grid.react','MercuryAttachmentType','MercuryMessageInfo','MessagesViewer','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=k.GridItem,r=o.PropTypes,s=o.createClass({displayName:'MercuryAttachmentPhotoGrid',propTypes:{images:r.arrayOf(r.object).isRequired,size:r.number.isRequired,message:r.object.isRequired},componentDidMount:function(){n.preload();},_generateClickHandler:function(t){var u=this.props.images.some(function(v){return v.attach_type===l.ANIMATED_IMAGE;});return (function(v){n.bootstrapWithConfig({src:t.preview_url,endpoint:t.url,fbid:t.metadata.fbid,dimensions:t.metadata.dimensions,disablePaging:u},null);});},render:function(){var t=this.props.images,u=t.length,v=u==2||u==4?2:3,w=Math.floor(this.props.size/v),x=m.isInbound(this.props.message),y=x?0:v-1,z=[];for(var aa=0;aa<t.length;aa++)if(aa===y){z.push(o.createElement(q,{key:aa},o.createElement(j,{arrowDirection:x?i.LEFT:i.RIGHT,source:t[aa].preview_url,height:w,width:w,isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa])})));}else z.push(o.createElement(q,{key:aa},o.createElement(h,{isLoading:!!t[aa].preview_uploading,onClick:this._generateClickHandler(t[aa]),size:w,source:t[aa].preview_url})));return (o.createElement(k,{cols:v,className:"_5b2w",spacing:"_5b2x",alignh:'right'},z));}});f.exports=s;},null);
__d('MercuryAttachmentAttribution.react',['Image.react','ImmutableObject','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MercuryAttachmentAttribution',mixins:[j],propTypes:{attachment:n.instanceOf(i)},render:function(){var p=this._getAttribution();if(!p)return null;return (k.createElement('div',{className:m(this.props.className,"_29ew")},k.createElement(h,{src:p.icon_url,className:"_29ex"}),k.createElement('span',{className:"_29ey"},p.name)));},_getAttribution:function(){return this.props.attachment&&this.props.attachment.app_attribution;}});f.exports=o;},null);
__d('ChatAttachmentAttribution.react',['ImmutableObject','MercuryAttachmentAttribution.react','MercuryConfig','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=k.createClass({displayName:'ChatAttachmentAttribution',propTypes:{attachment:m.instanceOf(h)},render:function(){return (k.createElement(i,{attachment:this.props.attachment,className:"_1ekr"+(j.ChatTabMessengerStyle?' '+"_4i_6":'')}));}});f.exports=n;},null);
__d('FBOverlayBase.react',['React'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h.createClass({displayName:'FBOverlayBase',render:function(){return h.Children.only(this.props.children);}});f.exports=i;},null);
__d('FBOverlayElement.react',['React','cloneWithProps','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m={horizontal:{left:"_32rg",right:"_32rh",fit:k("_32rg","_32rh")},vertical:{top:"_32ri",bottom:"_32rj",fit:k("_32ri","_32rj")}},n=h.createClass({displayName:'FBOverlayElement',propTypes:{horizontal:l.oneOf(['left','right','fit']),vertical:l.oneOf(['top','bottom','fit'])},getDefaultProps:function(){return {horizontal:'fit',vertical:'fit'};},render:function(){var o=k("_32rk",m.horizontal[this.props.horizontal],m.vertical[this.props.vertical]);return i(h.Children.only(this.props.children),{className:o});}});f.exports=n;},null);
__d('FBOverlayContainer.react',['FBOverlayBase.react','FBOverlayElement.react','React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'FBOverlayContainer',propTypes:{children:function(o,p){var q=o[p],r=0;j.Children.forEach(q,function(s){if(s===null||s===undefined)return;switch(s.type){case h:r++;break;case i:break;default:l(0);}});!(r===1)?l(0):undefined;}},render:function(){return (j.createElement('div',babelHelpers._extends({},this.props,{className:m(this.props.className,"_23n-")}),this.props.children));}});f.exports=n;},null);
__d('MercuryAttachmentVideo.react',['ChatAttachmentAttribution.react','ChatImageArrowDirection','ChatImageWithArrow.react','ChatSpeakingSticker.react','CenteredContainer.react','FBOverlayBase.react','FBOverlayContainer.react','FBOverlayElement.react','Image.react','ImmutableObject','MercuryAttachment','MessagesViewer','React','Vector','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=t.PropTypes,y=t.createClass({displayName:'MercuryAttachmentVideo',propTypes:{attachment:x.instanceOf(q),duration:x.number.isRequired,isChat:x.bool,isInbound:x.bool,name:x.string.isRequired,onAttachmentLoad:x.func,pageID:x.number,thumbSize:x.shape({height:x.number,width:x.number}).isRequired,thumbnail:x.string.isRequired,videoSize:x.shape({height:x.number,width:x.number}).isRequired,videoID:x.string.isRequired,videoURI:x.string.isRequired},componentDidMount:function(){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(this.props.thumbSize.height);s.preload();},_formatDuration:function(){var z=this.props.duration,aa=Math.floor(z/60),ba=z%60;if(ba<10)return aa+':0'+ba;return aa+':'+ba;},openViewer:function(){var z=this.props,aa=z.pageID,ba=z.videoID,ca=z.videoSize,da=z.videoURI;ca=new u(ca.width,ca.height);s.renderVideo({pageID:aa,videoID:ba,videoSize:ca,videoURI:da});},_renderImage:function(){if(this.props.isChat){return (t.createElement('div',null,t.createElement(j,{arrowDirection:this.props.isInbound?i.LEFT:i.RIGHT,height:this.props.thumbSize.height,key:'previewImage',source:this.props.thumbnail,width:this.props.thumbSize.width}),t.createElement(h,{attachment:this.props.attachment,key:'chatAttribution'})));}else return (t.createElement(p,{height:this.props.thumbSize.height,width:this.props.thumbSize.width,src:this.props.thumbnail}));},_getStyle:function(){if(this.props.isChat)return {};return this.props.thumbSize;},render:function(){if(this.props.attachment.metadata&&this.props.attachment.metadata.render_as_sticker&&this.props.isChat)return (t.createElement(k,{videoURI:this.props.videoURI,videoSize:this.props.videoSize}));var z=r.hasAttribution(this.props.attachment),aa="clearfix"+(' '+"_zow")+(' '+"_59go")+(z?' '+"_4yjw":'')+(this.props.isChat?' '+"_3ds5":''),ba=t.createElement(n,{className:aa,key:'overlayContainer',onClick:this.openViewer,style:this._getStyle()},t.createElement(m,null,this._renderImage()),t.createElement(o,null,t.createElement('div',{className:(!this.props.isChat?"_zox":'')+(z?' '+"_jt3":'')},t.createElement('span',{className:"_zoz"},this._formatDuration()))),t.createElement(o,null,t.createElement(l,{className:z?"_jt3":'',vertical:true},t.createElement(p,{src:w('/images/chat/chat_play_icon.png')}))));if(this.props.isChat)return ba;return (t.createElement('div',null,ba,t.createElement(h,{attachment:this.props.attachment,key:'inboxAttribution'})));}});f.exports=y;},null);
__d('PagesManagerMessagesInterface',['ge','Animation','Arbiter','AsyncRequest','CSS','DOM','Event','fbt','PagesMessagingConst'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q={init:function(r,s,t,u,v,w){n.listen(r,'click',(function(){new k().setURI(p.ASYNC_ENDPOINT).setData({action:'markAllRead',pageid:v,folder:w,is_page:true}).setHandler((function(){this.notifyUpdateCompleted();}).bind(this)).send();}).bind(this));n.listen(s,'click',function(){l.toggleClass(r,'hidden_elem');l.toggleClass(t,'hidden_elem');});n.listen(t,'submit',function(){u.blur();});},applyIfVisibleOnPage:function(r,s){var t=h(r);if(t)s(t);},changeThreadSpamStatus:function(r,s,t){new k().setURI(p.ASYNC_ENDPOINT).setData({action:t?'reportSpam':'unmarkSpam',pageid:r,tids:s,is_page:true}).send();this.applyIfVisibleOnPage(s,this.hideElement);},changeThreadArchivedStatus:function(r,s,t,u){new k().setURI(p.ASYNC_ENDPOINT).setData({action:'tag',tag:'action:archived',state:t?1:0,broadcast:true,pageid:r,tids:[s],is_page:true,placement:u}).send();this.applyIfVisibleOnPage(s,(function(v){l.addClass(v,'archived');this.hideElement(v);}).bind(this));},changeThreadReadStatus:function(r,s,t,u){new k().setURI(p.ASYNC_ENDPOINT).setData({action:t?'markRead':'markUnread',pageid:r,tids:[s],is_page:true,placement:u}).send();var v=t?l.removeClass:l.addClass;this.applyIfVisibleOnPage(s,function(w){v(w,'unread');});},hideElement:function(r){new i(r).to('opacity',0).duration(150).hide().go();},deleteMessages:function(r,s,t,u,v){var w=new k(),x={action:r?'delete':'deleteMessages',pageid:u,is_page:true};x['delete']=r?'Delete Conversation':'Delete Messages';if(r){x.tids=v;}else{x.folder='inbox';x.mids=Object.keys(s);}w.setURI(p.ASYNC_ENDPOINT);w.setHandler(function(y){t();});w.setData(x);w.send();},notifyUpdateCompleted:function(){j.inform('PagesManagerLayout/refreshSection',{section:'messages'});},showMessageThread:function(r,s,t,u,v){var w=m.create('div');m.appendContent(document.body,w);new k().setURI(p.LOAD_MESSAGE_THREAD_URI).setData({folder:u,pageid:r,source:v,threadElementID:t,threadid:s}).setRelativeTo(w).send();},updateUnreadCount:function(r){j.inform('pagesManagerMessaging/messageUnreadCountUpdated',{metricCount:r});j.inform('PagesManagerLayout/updateCount',{count:r,section:'messages'});j.inform('PagesManagerLayout/updateCount',{count:r,section:'messages',subsection:'inbox'});var s=h('pageUnreadMessageCount');if(s){var t='';if(r>0)t=r===1?o._({"*":"{number unread messages} tin nh\u1eafn ch\u01b0a \u0111\u1ecdc"},[o.param('number unread messages',r,[0])]):o._({"*":"{number unread messages} tin nh\u1eafn ch\u01b0a \u0111\u1ecdc"},[o.param('number unread messages',r,[0])]);m.setContent(s,t);}},updatePreferences:function(r){new k().setURI(p.ASYNC_ENDPOINT).setData({action:'setPreferences',send_on_enter:r.sendOnEnter}).send();}};f.exports=q;},null);
__d("XNFXStartForMessageThreadController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/nfx\/start_message_thread\/",{thread_fbid:{type:"String",required:true},responsible_fbid:{type:"Int"},av:{type:"Int"},location:{type:"Enum",enumType:1},__asyncDialog:{type:"Int"}});},null,{});
__d('PagesMessengerButtonSet.react',['Arbiter','AsyncRequest','MercuryThreads','MessagingTag','PagesManagerMessagesInterface','PagesMessagingActionPlacement','PopoverMenu.react','XUIPopoverButton.react','React','ReactXUIMenu','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogCancelButton.react','XUIDialogFooter.react','XUIDialogTitle.react','XNFXStartForMessageThreadController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa=p.PropTypes,ba=q.Item,ca=p.createClass({displayName:'PagesMessengerButtonSet',propTypes:{isDeleteButtonDisabled:aa.bool.isRequired,user:aa.string.isRequired,threadID:aa.string.isRequired,threadElementID:aa.string.isRequired,folder:aa.string.isRequired,onDeleteMessageAction:aa.func.isRequired,allowReport:aa.bool.isRequired},getInitialState:function(){this._threads=j.getForFBID(this.props.user);return {currentFolder:this.props.folder,showDeleteAllMessagesDialog:false};},_onItemClick:function(da,ea){if(!ea.item.isDisabled()){var fa=ea.item.getValue(),ga=true;if('mark_as_unread'===fa){this._markAsUnread();}else if('archive_thread_toggle'===fa){this._archiveToggleThread();}else if('report_message'===fa){this._reportMessage();}else if('spam_thread_toggle'===fa){this._spamToggleThread();}else if('delete'===fa){this.props.onDeleteMessageAction(false);ga=false;}else if('delete_thread'===fa){this.setState({showDeleteAllMessagesDialog:true});ga=false;}if(ga)h.inform('PagesMessengerThread/hideMessageThread');}},_markAsUnread:function(){l.changeThreadReadStatus(this.props.user,this.props.threadElementID,false,m.MESSAGE_DIALOG_ACTION_LIST);},_archiveToggleThread:function(){l.changeThreadArchivedStatus(this.props.user,this.props.threadElementID,!this.isArchived(),m.MESSAGE_DIALOG_ACTION_LIST);},_reportMessage:function(){var da=x.getURIBuilder().setString('thread_fbid',this.props.threadElementID).setInt('av',this.props.user).getURI();new i().setURI(da).send();},_spamToggleThread:function(){l.changeThreadSpamStatus(this.props.user,this.props.threadElementID,!this.isSpam());},renderAuxButtonSet:function(){var da=this.isArchived()?z._("B\u1ecf l\u01b0u tr\u1eef"):z._("L\u01b0u tr\u1eef"),ea=p.createElement(ba,{key:'archive_thread_toggle',value:'archive_thread_toggle'},da),fa=this.isSpam()?z._("Kh\u00f4ng ph\u1ea3i Spam"):z._("\u0110\u00e1nh d\u1ea5u l\u00e0 spam"),ga=p.createElement(ba,{key:'spam_thread_toggle',value:'spam_thread_toggle'},fa),ha=[];if(!this.isSpam())ha.push(ea);if(this.props.allowReport)ha.push(p.createElement(ba,{key:'report_message',value:'report_message'},z._("B\u00e1o c\u00e1o")));if(!this.isArchived())ha.push(ga);var ia=p.createElement(q,{onItemClick:this._onItemClick},p.createElement(ba,{value:'mark_as_unread'},z._("\u0110\u00e1nh d\u1ea5u l\u00e0 ch\u01b0a \u0111\u1ecdc")),ha,p.createElement(ba,{value:'delete',disabled:this.props.isDeleteButtonDisabled},z._("X\u00f3a tin nh\u1eafn \u0111\u00e3 ch\u1ecdn")),p.createElement(ba,{value:'delete_thread'},z._("X\u00f3a t\u1ea5t c\u1ea3")));return ia;},isSpam:function(){return this.state.currentFolder===k.SPAM;},isArchived:function(){return this.state.currentFolder===k.ARCHIVED;},render:function(){return (p.createElement('div',null,p.createElement(n,{alignh:'right',menu:this.renderAuxButtonSet()},p.createElement(o,{label:z._("Ho\u1ea1t \u0111\u1ed9ng")})),this.renderDeleteAllMessagesConfirmationDialog()));},renderDeleteAllMessagesConfirmationDialog:function(){return (p.createElement(r,{width:360,shown:this.state.showDeleteAllMessagesDialog,onToggle:this._onDeleteAllMessagesDialogToggle},p.createElement(w,null,z._("X\u00f3a t\u1ea5t c\u1ea3 tin nh\u1eafn?")),p.createElement('div',{className:"_4asv"},p.createElement(s,null,z._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a t\u1ea5t c\u1ea3 tin nh\u1eafn?")),p.createElement(v,null,p.createElement(u,{onClick:this._onDeleteAllMessagesCancel}),p.createElement(t,{use:'confirm',label:z._("X\u00f3a tin nh\u1eafn"),onClick:this._onDeleteAllMessagesConfirm})))));},_onDeleteAllMessagesConfirm:function(){this.setState({showDeleteAllMessagesDialog:false});this.props.onDeleteMessageAction(true);h.inform('PagesMessengerThread/hideMessageThread');},_onDeleteAllMessagesCancel:function(){this.setState({showDeleteAllMessagesDialog:false});},_onDeleteAllMessagesDialogToggle:function(da){if(!da)this._onDeleteAllMessagesCancel();}});f.exports=ca;},null);
__d('ChatPhotoUploader.react',['Bootloader','Image.react','InlineBlock.react','Link.react','MercuryConfig','Promise','React','ReactDOM','SubscriptionsHandler','cx','emptyFunction','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=n.PropTypes,w=n.createClass({displayName:'ChatPhotoUploader',propTypes:{actionURI:v.string,allowCrossPage:v.bool,disabled:v.bool,imageClassName:v.string,imagesOnly:v.bool,linkClassName:v.string,onSubmit:v.func,onAllUploadsComplete:v.func,onLastUploadFail:v.func,onLastUploadCancel:v.func,onUploadError:v.func},getDefaultProps:function(){return {actionURI:l.upload_url,allowCrossPage:true,disabled:false,imageClassName:"_509w",imagesOnly:true,linkClassName:'',onSubmit:r,onAllUploadsComplete:r,onLastUploadFail:r,onLastUploadCancel:r};},shouldComponentUpdate:function(x,y){return x.actionURI!=this.props.actionURI||x.disabled!==this.props.disabled;},componentDidUpdate:function(x,y){if(this._uploader)this._uploader.setAllowCrossPage(this.props.allowCrossPage);},componentWillUnmount:function(){if(!this.isUploading()||!this.props.allowCrossPage)this._cleanup();},render:function(){var x=this.props.imagesOnly?s._("Th\u00eam \u1ea3nh"):s._("Th\u00eam t\u1ec7p");return (n.createElement('form',{action:this.props.actionURI,className:"_vzk",title:x,method:'post',onClick:(function(y){y.stopPropagation();if(this.props.disabled)y.preventDefault();}).bind(this),ref:'form'},n.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),n.createElement('input',{type:'hidden',name:'images_only',value:this.props.imagesOnly}),n.createElement(j,{onClick:this._bootloadChatAutoSendPhotoUploader,className:"_m _4q60 _3rzn"},n.createElement(k,{className:u("_4q61 _5f0v _509v",this.props.linkClassName),tabIndex:-1},n.createElement('i',{className:this.props.imageClassName,alt:s._("M\u00e1y \u1ea3nh")})),n.createElement('input',{disabled:this.props.disabled,type:'file',className:"_n",name:'attachment[]',multiple:'true',accept:this.props.imagesOnly?'image/*':'*',ref:'input',title:x}))));},_handleSubmit:function(x,y){this.props.onSubmit(x,y);},_handleAllUploadsCompleted:function(x,y){this.props.onAllUploadsComplete(x,y);if(!this.isMounted())this._cleanup();},_handleLastUploadFailed:function(x,y){this.props.onLastUploadFail(x,y);if(!this.isMounted())this._cleanup();},_handleLastUploadCanceled:function(x,y){this.props.onLastUploadCancel(x,y);if(!this.isMounted())this._cleanup();},_handleUploadError:function(x,y){this.props.onUploadError(y);if(!this.isMounted())this._cleanup();},isUploading:function(){return (this._uploader&&this._uploader.isUploading()||this._uploaderPromiseIsResolving);},_bootloadChatAutoSendPhotoUploader:function(){if(!this._uploaderPromise){this._uploaderPromiseIsResolving=true;this._uploaderPromise=new m((function(x){h.loadModules(["ChatAutoSendPhotoUploader"],(function(y){this._uploaderPromiseIsResolving=false;this._uploader=new y(o.findDOMNode(this.refs.form),o.findDOMNode(this.refs.input),o.findDOMNode(this.refs.attachID));this._uploader.setAllowCrossPage(this.props.allowCrossPage);this._subscriptions=new p();this._subscriptions.addSubscriptions(this._uploader.subscribe('submit',this._handleSubmit),this._uploader.subscribe('all-uploads-completed',this._handleAllUploadsCompleted),this._uploader.subscribe('last-upload-failed',this._handleLastUploadFailed),this._uploader.subscribe('last-upload-canceled',this._handleLastUploadCanceled),this._uploader.subscribe('file-upload-error',this._handleUploadError));x(this._uploader);}).bind(this));}).bind(this));}return this._uploaderPromise;},uploadFile:function(x){this._bootloadChatAutoSendPhotoUploader().then(function(y){y.uploadFile(x);});},uploadURL:function(x){this._bootloadChatAutoSendPhotoUploader().then(function(y){y.uploadURL(x);});},_cleanup:function(){this._subscriptions&&this._subscriptions.release();this._uploader&&this._uploader.destroy();}});f.exports=w;},null);
__d("DragDropFileUpload",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();g.isSupported=function(){return typeof FileList!=="undefined";};},null);
__d('DocumentDragDrop',['Event','Arbiter','CSS','DOM','DOMQuery','DragDropFileUpload','emptyFunction','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p={},q=0;function r(){q=0;o(p).forEach(function(w){j.removeClass(w.element,w.className);i.inform('dragleave',{element:w.element});});}var s=null;function t(){s&&clearTimeout(s);s=setTimeout(function(){r();},500);}function u(){if(!m.isSupported())return;h.listen(document,'dragenter',function(w){if(q===0)o(p).forEach(function(x){j.addClass(x.element,x.className);i.inform('dragenter',{element:x.element,event:w});});q++;t();});h.listen(document,'dragleave',function(w){q--;if(q===0)r();t();});h.listen(document,'drop',function(w){r();var x=w.getTarget();if(l.isNodeOfType(w.getTarget(),'input'))if(x.type==='file')return;w.prevent();});h.listen(document,'dragover',h.prevent);document.addEventListener('dragover',t,true);u=n;}var v={init:function(){u();},registerStatusElement:function(w,x){u();p[k.getID(w)]={element:w,className:x};if(q>0)j.addClass(w,x);},removeStatusElement:function(w){var x=k.getID(w),y=p[x];if(y){j.removeClass(y.element,y.className);delete p[x];}}};f.exports=v;},null);
__d('DragDropTarget',['Arbiter','Event','SubscriptionsHandler','CSS','DataTransfer','DocumentDragDrop','DragDropFileUpload','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q){this._element=q;this._listeners=new j();this._statusElem=q;this._dragEnterCount=0;this._enabled=false;}Object.assign(p.prototype,{_onFilesDropCallback:o,_onURLDropCallback:o,_onPlainTextDropCallback:o,_onDropCallback:o,_fileFilterFn:o.thatReturnsArgument,setOnDocumentDragEnterCallback:function(q){this._onDocumentDragEnterCallback=q;return this;},setOnDocumentDragLeaveCallback:function(q){this._onDocumentDragLeaveCallback=q;return this;},setOnDragEnterCallback:function(q){this._onDragEnterCallback=q;return this;},setOnDragLeaveCallback:function(q){this._onDragLeaveCallback=q;return this;},setOnFilesDropCallback:function(q){this._onFilesDropCallback=q;return this;},setOnURLDropCallback:function(q){this._onURLDropCallback=q;return this;},setOnPlainTextDropCallback:function(q){this._onPlainTextDropCallback=q;return this;},setOnDropCallback:function(q){this._onDropCallback=q;return this;},enable:function(){if(!n.isSupported())return this;this._listeners.engage();m.registerStatusElement(this._statusElem,'fbWantsDragDrop');this._listeners.addSubscriptions(i.listen(this._element,'dragenter',this._onDragEnter.bind(this)),i.listen(this._element,'dragleave',this._onDragLeave.bind(this)),i.listen(this._element,'dragover',this._onDragOver.bind(this)),i.listen(this._element,'drop',(function(q){this._dragEnterCount=0;k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');var r={},s=false,t=this._fileFilterFn(q.dataTransfer.files);if(t.length){this._onFilesDropCallback(t,q);r.files=t;s=true;}var u=q.dataTransfer.getData('url')||q.dataTransfer.getData('text/uri-list');if(u){this._onURLDropCallback(u,q);r.url=u;s=true;}var v=q.dataTransfer.getData('text/plain');if(v){this._onPlainTextDropCallback(v,q);r.plainText=v;s=true;}if(s)this._onDropCallback(r,q);q.kill();}).bind(this)));this._listeners.addSubscriptions(h.subscribe('dragenter',this._onDocumentDragEnter.bind(this)),h.subscribe('dragleave',this._onDocumentDragLeave.bind(this)));this._enabled=true;return this;},disable:function(){if(!this._enabled)return this;m.removeStatusElement(this._statusElem,'fbWantsDragDrop');k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');this._listeners.release();this._enabled=false;return this;},setFileFilter:function(q){this._fileFilterFn=q;return this;},setStatusElement:function(q){this._statusElem=q;return this;},_onDragEnter:function(q){if(this._dragEnterCount===0){var r=new l(q.dataTransfer);k.addClass(this._statusElem,'fbDropReady');if(r.isLink()||!r.isImage()){k.addClass(this._statusElem,'fbDropReadyLink');}else if(r.getCount()>1){k.addClass(this._statusElem,'fbDropReadyPhotos');}else k.addClass(this._statusElem,'fbDropReadyPhoto');this._onDragEnterCallback&&this._onDragEnterCallback();}this._dragEnterCount++;q.preventDefault();},_onDragLeave:function(q){this._dragEnterCount=Math.max(this._dragEnterCount-1,0);if(this._dragEnterCount===0){k.removeClass(this._statusElem,'fbDropReady');k.removeClass(this._statusElem,'fbDropReadyPhoto');k.removeClass(this._statusElem,'fbDropReadyPhotos');k.removeClass(this._statusElem,'fbDropReadyLink');this._onDragLeaveCallback&&this._onDragLeaveCallback();}},_onDragOver:function(q){if(!q.dataTransfer){i.kill(q);return;}var r=q.dataTransfer.effectAllowed;q.dataTransfer.dropEffect=r=='move'||r=='linkMove'?'move':'copy';i.kill(q);},_onDocumentDragEnter:function(event,q){if(this._onDocumentDragEnterCallback&&q.element==this._element)this._onDocumentDragEnterCallback();},_onDocumentDragLeave:function(event,q){this._dragEnterCount=0;this._onDragLeave(event);if(this._onDocumentDragLeaveCallback&&q.element==this._element)this._onDocumentDragLeaveCallback();}});f.exports=p;},null);
__d('EmoticonUtils',['EmoticonsList','Parent'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j='emoticon_',k=h.symbols,l={getEmoteFromTarget:function(m){var n=i.byClass(m,'emoticon');if(!n)return null;var o=null;n.className.split(' ').forEach(function(p){if(p.startsWith(j))o=p.substring(j.length);});return k[o]||null;},insertEmoticon:function(m,n,o){var p=n.substring(0,o.start),q=n.substring(o.end);if(o.start>0&&!p.endsWith(' '))m=' '+m;if(!q.startsWith(' '))m+=' ';var r=p+m+q;o.start+=m.length;o.end=o.start;return {result:r,start:o.start,end:o.end};}};f.exports=l;},null);
__d('MercuryDragDropPrompt.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'MercuryDragDropPrompt',render:function(){return (h.createElement('div',{className:"_4g6x"},h.createElement('div',{className:"_4g6y"},h.createElement('div',{className:"_4g6z _4g71"},j._("K\u00e9o li\u00ean k\u1ebft\/t\u1ec7p t\u1ea1i \u0111\u00e2y")),h.createElement('div',{className:"_4g6z _4g6- _4g6_"},j._("Th\u1ea3 t\u1ec7p t\u1ea1i \u0111\u00e2y")),h.createElement('div',{className:"_4g6z _4g6- _4g70"},j._("Th\u1ea3 li\u00ean k\u1ebft t\u1ea1i \u0111\u00e2y")))));}});f.exports=k;},null);
__d('PagesMessengerInfoButton.react',['Link.react','PopoverMenu.react','React','ReactMenu','XUIMenuSeparator.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=k.Item,p='/help/contact/1024405850920269',q='/help/988319821208361',r=j.createClass({displayName:'PagesMessengerInfoButton',render:function(){var s=j.createElement(k,null,j.createElement(o,{href:q,target:'_blank'},n._("Truy c\u1eadp Trung t\u00e2m tr\u1ee3 gi\u00fap")),j.createElement(l,null),j.createElement(o,{href:p,target:'_blank'},n._("G\u1eedi ph\u1ea3n h\u1ed3i")));return (j.createElement(i,{className:"_jrs",menu:s},j.createElement(h,{className:"_jrt"})));}});f.exports=r;},null);
__d("XPagesMessagingSuggestedResponseFeedbackController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/messaging\/suggestedresponse\/feedback\/",{});},null,{});
__d('PagesMessageSuggestedResponseHandler',['ActorURI','AsyncRequest','XPagesMessagingSuggestedResponseController','XPagesMessagingSuggestedResponseFeedbackController','invariant','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();function n(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler1=o;this.$PagesMessageSuggestedResponseHandler2=p;this.$PagesMessageSuggestedResponseHandler3=false;this.$PagesMessageSuggestedResponseHandler4=false;}n.prototype.requestSuggestedResponseAsync=function(o,p){'use strict';this.$PagesMessageSuggestedResponseHandler3=true;var q=j.getURIBuilder().getURI();new i().setURI(h.create(q,this.$PagesMessageSuggestedResponseHandler2)).setData({message:this.$PagesMessageSuggestedResponseHandler1.body}).setMethod('POST').setHandler((function(r){return this.$PagesMessageSuggestedResponseHandler5(r.payload,o);}).bind(this)).setErrorHandler(p).send();};n.prototype.sendFeedback=function(o){'use strict';!this.hasReceviedSuggestedResponse()?l(0):undefined;var p=k.getURIBuilder().getURI();new i().setURI(h.create(p,this.$PagesMessageSuggestedResponseHandler2)).setMethod('POST').setData({message_id:this.$PagesMessageSuggestedResponseHandler6,accepted:o}).send();};n.prototype.$PagesMessageSuggestedResponseHandler5=function(o,p){'use strict';if(o.messageFound)this.$PagesMessageSuggestedResponseHandler6=o.messageID;p(this.$PagesMessageSuggestedResponseHandler1.message_id,o);};n.prototype.shouldBeTreatedAsRejected=function(){'use strict';return !this.getHasBeenAccepted()&&this.hasReceviedSuggestedResponse();};n.prototype.hasReceviedSuggestedResponse=function(){'use strict';return !m(this.$PagesMessageSuggestedResponseHandler6);};n.prototype.alreadyRequested=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler3;};n.prototype.getMessageID=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler1.message_id;};n.prototype.getHasBeenAccepted=function(){'use strict';return this.$PagesMessageSuggestedResponseHandler4;};f.exports=n;},null);
__d('PagesMessengerSuggestedResponseView.react',['LoadingIndicator.react','PagesMessageSuggestedResponseHandler','React','XUIGrayText.react','XUIButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'PagesMessengerSuggestedResponseView',propTypes:{onAccepted:o.func.isRequired,onDeclined:o.func,suggestedResponseHandler:o.instanceOf(i)},getInitialState:function(){return {shouldShowResult:false,shouldShowProgress:false,responseMessage:"",witMessageId:""};},_reset:function(){this.setState(this.getInitialState());},componentWillReceiveProps:function(q){if(q.suggestedResponseHandler!==this.props.suggestedResponseHandler){this._reset();var r=q.suggestedResponseHandler;if(!r||r.alreadyRequested())return;this.setState({shouldShowProgress:true});r.requestSuggestedResponseAsync(this._onSuggestedResponseReceived,this._onSuggestedResponseError);}},_onSuggestedResponseReceived:function(q,r){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false});if(!!r.responseMessage&&r.responseMessage.length>0)this.setState({shouldShowResult:true,responseMessage:r.responseMessage,witMessageId:r.message_id});},_onSuggestedResponseError:function(q){if(!this._isMessageIDCurrent(q))return;this.setState({shouldShowProgress:false,shouldShowResult:false});},_isMessageIDCurrent:function(q){return !!this.props.suggestedResponseHandler&&q===this.props.suggestedResponseHandler.getMessageID();},render:function(){return (j.createElement('div',{className:"_710"+(' '+"_2ph-")+(!this.state.shouldShowResult&&!this.state.shouldShowProgress?' '+"hidden_elem":'')},this._renderProgressPart(),this._renderSuggestionPart()));},_renderSuggestionPart:function(){return (j.createElement('div',{className:!this.state.shouldShowResult?"hidden_elem":''},j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'light'},n._("We found a suggested reply:"))),j.createElement('div',{className:"_3-94"},j.createElement(k,{shade:'dark',className:"_711"},this.state.responseMessage)),j.createElement('div',{className:"_712"},j.createElement(k,{shade:'light',className:"_3-90"},n._("Do you want to use this reply?")),j.createElement(l,{label:n._("No"),use:'default',className:"_3-8_",onClick:this._onDeclined}),j.createElement(l,{label:n._("Yes"),use:'confirm',onClick:this._onAccepted}))));},_renderProgressPart:function(){return (j.createElement('div',{className:(!this.state.shouldShowProgress?"hidden_elem":'')+(' '+"_71d")},j.createElement(k,{shade:'light'},n._("Looking for suggested responses")),j.createElement(h,{size:'small',color:'white',className:"_3-9a"})));},_hide:function(){this.setState({shouldShowResult:false,shouldShowProgress:false});},_onAccepted:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(true);this.props.onAccepted&&this.props.onAccepted(this.state.responseMessage);},_onDeclined:function(){this._hide();this.props.suggestedResponseHandler&&this.props.suggestedResponseHandler.sendFeedback(false);this.props.onDeclined&&this.props.onDeclined();}});f.exports=p;},null);
__d('ChatFileUploaderMixin',['SubscriptionsHandler','React'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=i.PropTypes,k={propTypes:{attachmentsShelf:j.object,onFileUploaderMounted:j.func,onUploadFinished:j.func,onUpdateAttachmentsShelf:j.func,onSubmit:j.func},setUpSubscriptionsHandler:function(l){this._uploader=l;this._subscriptions=new h();this._subscriptions.addSubscriptions(this._uploader.subscribe(['all-uploads-completed','upload-canceled'],this._handleUploadFinished),this._uploader.subscribe('dom-updated',this._handleUpdateAttachmentsShelf),this._uploader.subscribe('submit',this._handleSubmit));this.props.onFileUploaderMounted(this._uploader);},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();if(!this.props.uploaderIsFromHigherLevel)this._uploader&&this._uploader.destroy();},isUploading:function(){return this._uploader.isUploading();},getAttachments:function(){return this._uploader.getAttachments();},getImageFiles:function(){return this._uploader.getImageFiles();},getVideoFiles:function(){return this._uploader.getVideoFiles();},getAudioFiles:function(){return this._uploader.getAudioFiles();},getFiles:function(){return this._uploader.getFiles();},removeAttachments:function(){return this._uploader.removeAttachments();},_handleUploadFinished:function(){if(this.props.onUploadFinished){var l;(l=this.props).onUploadFinished.apply(l,arguments);}},_handleUpdateAttachmentsShelf:function(){if(this.props.onUpdateAttachmentsShelf){var l;(l=this.props).onUpdateAttachmentsShelf.apply(l,arguments);}},_handleSubmit:function(){if(this.props.onSubmit){var l;(l=this.props).onSubmit.apply(l,arguments);}}};f.exports=k;},null);
__d('AsyncUploadBase',['ArbiterMixin','AsyncRequest','AsyncResponse','BrowserSupport','Form','forEachObject','mixin','removeFromArray'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;p=babelHelpers.inherits(r,n(h));q=p&&p.prototype;r.parseFiles=function(t){'use strict';var u={};m(t,function(v,w){if(Array.isArray(v)){u[w]=v;}else{u[w]=[];if(v instanceof window.FileList){for(var x=0;x<v.length;x++)u[w].push(v.item(x));}else if(v instanceof window.File||v instanceof window.Blob)u[w].push(v);}});return u;};function r(t){'use strict';q.constructor.call(this);this.setURI(t);this.setNetworkErrorRetryLimit(0);}r.prototype.setAllowCrossOrigin=function(t){'use strict';this._allowCrossOrigin=!!t;return this;};r.prototype.setAllowCrossPageTransition=function(t){'use strict';this._allowCrossPageTransition=!!t;return this;};r.prototype.setData=function(t){'use strict';this._data=t;return this;};r.prototype.setNetworkErrorRetryLimit=function(t){'use strict';this._retryLimit=t;return this;};r.prototype.setLimit=function(t){'use strict';this._limit=t;return this;};r.prototype.setPreprocessHandler=function(t){'use strict';this._preprocessHandler=t;return this;};r.prototype.setRelativeTo=function(t){'use strict';this._relativeTo=t;return this;};r.prototype.setStatusElement=function(t){'use strict';this._statusElement=t;return this;};r.prototype.setURI=function(t){'use strict';this._uri=t;return this;};r.prototype.suspend=function(){'use strict';this._suspended=true;return this;};r.prototype.resume=function(){'use strict';this._suspended=false;this._processQueue();return this;};r.prototype.isUploading=function(){'use strict';return this._inFlight;};r.prototype._createFileUpload=function(t,u,v){'use strict';return new s(t,u,v);};r.prototype._processQueue=function(){'use strict';if(this._suspended)return;while(this._pending.length<this._limit){if(!this._waiting.length)break;var t=this._waiting.shift();if(this._preprocessHandler){this._preprocessHandler(t,this._processUpload.bind(this));}else this._processUpload(t);this._pending.push(t);}};r.prototype._processUpload=function(t){'use strict';var u=l.createFormData(t.getData()||this._data);if(t.getFile()){u.append(t.getName(),t.getFile());var v=t.getFile().uploadID;if(v)u.append('upload_id',v);}var w=new i().setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setURI(this._uri).setRawData(u).setStatusElement(this._statusElement).setHandler(this._success.bind(this,t)).setErrorHandler(this._failure.bind(this,t)).setUploadProgressHandler(this._progress.bind(this,t)).setInitialHandler(this._initial.bind(this,t));if(this._relativeTo)w.setRelativeTo(this._relativeTo);w.send();t.setAsyncRequest(w);this._inFlight=true;if(!t.getRetryCount())this.inform('start',t);};r.prototype._abort=function(t){'use strict';if(this._pending.indexOf(t)!==-1){o(this._pending,t);this._processQueue();}o(this._waiting,t);t.abort();};r.prototype._initial=function(t){'use strict';if(t.isAborted())return;this.inform('initial',t);};r.prototype._success=function(t,u){'use strict';if(t.isAborted()){this.inform('success_after_abort',u);return;}this._complete(t);this.inform('success',t.handleSuccess(u));this._processQueue();};r.prototype._retryUpload=function(t){'use strict';t.increaseRetryCount();this._processUpload(t);};r.prototype._failure=function(t,u){'use strict';if(t.isAborted())return;if(u.error===1004&&t.getRetryCount()<this._retryLimit)return this._retryUpload(t);this._complete(t);if(this.inform('failure',t.handleFailure(u))!==false)j.defaultErrorHandler(u);this._processQueue();};r.prototype._progress=function(t,event){'use strict';if(t.isAborted())return;this.inform('progress',t.handleProgress(event));};r.prototype._complete=function(t){'use strict';o(this._pending,t);if(!this._pending.length)this._inFlight=false;};r.isSupported=function(){'use strict';return k.hasFileAPI();};Object.assign(r.prototype,{_limit:10});function s(t,u,v){'use strict';this._name=t;this._file=u;this._data=v;this._success=null;this._response=null;this._progressEvent=null;this._request=null;this._numRetries=0;this._aborted=false;}s.prototype.getName=function(){'use strict';return this._name;};s.prototype.getFile=function(){'use strict';return this._file;};s.prototype.setFile=function(t){'use strict';this._file=t;};s.prototype.getData=function(){'use strict';return this._data;};s.prototype.isComplete=function(){'use strict';return this._success!==null;};s.prototype.isSuccess=function(){'use strict';return this._success===true;};s.prototype.getResponse=function(){'use strict';return this._response;};s.prototype.getProgressEvent=function(){'use strict';return this._progressEvent;};s.prototype.setAsyncRequest=function(t){'use strict';this._request=t;return this;};s.prototype.increaseRetryCount=function(){'use strict';this._numRetries++;return this;};s.prototype.getRetryCount=function(){'use strict';return this._numRetries;};s.prototype.isWaiting=function(){'use strict';return !this._request;};s.prototype.isAborted=function(){'use strict';return this._aborted;};s.prototype.abort=function(){'use strict';this._request=null;this._aborted=true;};s.prototype.handleSuccess=function(t){'use strict';this._success=true;this._response=t;this._progressEvent=null;return this;};s.prototype.handleFailure=function(t){'use strict';this._success=false;this._response=t;this._progressEvent=null;return this;};s.prototype.handleProgress=function(event){'use strict';this._progressEvent=event;return this;};f.exports=r;},null);
__d('AsyncUploadRequest',['AsyncUploadBase'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.setFiles=function(l){'use strict';this._files=h.parseFiles(l);return this;};k.prototype.abort=function(){'use strict';this._uploads.forEach((function(l){return this._abort(l);}).bind(this),this);};k.prototype.send=function(){'use strict';if(this._inFlight)return;this._inFlight=true;this._uploads=[];for(var l in this._files)this._files[l].forEach((function(m){this._uploads.push(this._createFileUpload(l,m));}).bind(this));this._waiting=this._uploads.slice(0);this._pending=[];if(this._uploads.length){this._processQueue();}else this._processUpload(this._createFileUpload(null,null));};k.prototype._processQueue=function(){'use strict';j._processQueue.call(this);if(!this._pending.length&&!this._waiting.length)this.inform('complete',this._uploads);};k.isSupported=function(){'use strict';return h.isSupported();};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('FileForm',['ArbiterMixin','AsyncRequest','AsyncResponse','AsyncUploadRequest','BehaviorsMixin','CurrentUser','DataStore','DOMQuery','Event','Form','JSONPTransport','Parent','URI','isElementNode','mixin','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x,y;function z(ca){var da={},ea=o.scry(ca,'input[type="file"]');ea.forEach(function(fa){da[fa.name]=fa.files;});return da;}function aa(ca){var da=o.scry(ca,'input[type="file"]');da.forEach(function(ea){ea.files=null;});}x=babelHelpers.inherits(ba,v(h,l));y=x&&x.prototype;function ba(ca,da,ea){'use strict';y.constructor.call(this);if(ca.getAttribute('rel')==='async')throw new Error('FileForm cannot be used with Primer forms.');if(ca.getAttribute('method').toUpperCase()!=='POST')throw new Error('FileForm must be used with POST forms.');this._form=ca;this._previousEncoding=this._form.enctype;this._form.enctype=this._form.encoding='multipart/form-data';this._files=null;da&&this.enableBehaviors(da);this._options=ea||{};this.setAllowCrossOrigin(this._options.allowCrossOrigin);this.setAllowCrossPageTransition(this._options.allowCrossPageTransition);this.setUploadInParallel(this._options.uploadInParallel);this.setConcurrentLimit(this._options.concurrentLimit);this.setPreprocessHandler(this._options.preprocessHandler);this.setNetworkErrorRetryLimit(this._options.networkErrorRetryLimit);this._listeners=[p.listen(document.documentElement,'submit',this._submit.bind(this)),p.listen(this._form,'click',this._click.bind(this))];n.set(this._form,'FileForm',this);}ba.prototype.getRoot=function(){'use strict';return this._form;};ba.prototype.setAllowCrossOrigin=function(ca){'use strict';this._allowCrossOrigin=!!ca;return this;};ba.prototype.setAllowCrossPageTransition=function(ca){'use strict';this._allowCrossPageTransition=!!ca;return this;};ba.prototype.setUploadInParallel=function(ca){'use strict';this._uploadInParallel=!!ca;return this;};ba.prototype.setConcurrentLimit=function(ca){'use strict';this._concurrentLimit=ca;return this;};ba.prototype.setPreprocessHandler=function(ca){'use strict';this._preprocessHandler=ca;return this;};ba.prototype.setNetworkErrorRetryLimit=function(ca){'use strict';this._retryLimit=ca;return this;};ba.prototype.setFiles=function(ca){'use strict';this._files=ca;return this;};ba.prototype.canUseXHR=function(){'use strict';var ca=('FormData' in window);if(ca)if(!new t(this._form.action).isSameOrigin()&&!this._allowCrossOrigin)ca=false;return ca;};ba.prototype._submit=function(event){'use strict';if(event.isDefaultPrevented()||event.getTarget()!==this._form)return;if(this.inform('submit')===false){event.prevent();return;}return this.canUseXHR()?this._sendViaXHR(event):this._sendViaFrame(event);};ba.prototype._click=function(event){'use strict';var ca=event.getTarget();while(u(ca)){if(ca.type==='submit'){this._clickTarget=ca;setTimeout(this._unclick.bind(this),0);break;}ca=ca.parentNode;}};ba.prototype._unclick=function(){'use strict';this._clickTarget=null;};ba.prototype._sendViaFrame=function(event){'use strict';var ca=this._request=new i();ca.setStatusElement(this._getStatusElement());ca.addStatusIndicator();ca.setOption('useIframeTransport',true);var da=ca.handleResponse.bind(ca),ea=new r('iframe',this._form.action,da),fa=ea.getTransportFrame(),ga=ea.getRequestURI().addQueryData({__iframe:true,__user:m.getID()});this._form.setAttribute('action',ga.toString());this._form.setAttribute('target',fa.name);ca.setJSONPTransport(ea);ca.setURI(ga);ca.setHandler(this.success.bind(this,null));ca.setErrorHandler(this.failure.bind(this,null));ca.setInitialHandler(w(this.initial,this,null));};ba.prototype._sendViaXHR=function(event){'use strict';var ca;if(this._uploadInParallel&&k.isSupported()){ca=new k().setPreprocessHandler(this._preprocessHandler).setData(q.serialize(this._form,this._clickTarget)).setNetworkErrorRetryLimit(this._retryLimit);if(this._concurrentLimit)ca.setLimit(this._concurrentLimit);if(this._files){ca.setFiles(this._files);}else ca.setFiles(z(this._form));var da=[ca.subscribe('progress',(function(ia,ja){this.progress(ja,ja.getProgressEvent());}).bind(this)),ca.subscribe('initial',(function(ia,ja){this.initial(ja,ja.getResponse());}).bind(this)),ca.subscribe('success',(function(ia,ja){this.success(ja,ja.getResponse());}).bind(this)),ca.subscribe('start',(function(ia,ja){this.inform('start',{upload:ja});}).bind(this)),ca.subscribe('failure',(function(ia,ja){this.failure(ja,ja.getResponse());return false;}).bind(this)),ca.subscribe('complete',function(){while(da.length)da.pop().unsubscribe();})];}else{var ea;if(this._files){ea=q.createFormData(q.serialize(this._form,this._clickTarget));var fa=k.parseFiles(this._files);for(var ga in fa){var ha=fa[ga];if(ha.length===1){ea.append(ga,ha[0]);}else{ga=ga+'[]';ha.forEach(function(ia){ea.append(ga,ia);});}}}else ea=q.createFormData(this._form,this._clickTarget);ca=new i().setRawData(ea).setHandler(this.success.bind(this,null)).setErrorHandler(this.failure.bind(this,null)).setUploadProgressHandler(this.progress.bind(this,null)).setInitialHandler(w(this.initial,this,null));}ca.setAllowCrossOrigin(this._allowCrossOrigin).setAllowCrossPageTransition(this._allowCrossPageTransition).setRelativeTo(this._form).setStatusElement(this._getStatusElement()).setURI(this._form.action).send();this._request=ca;event&&event.prevent();};ba.prototype.forceSendViaXHR=function(){'use strict';return this._sendViaXHR(null);};ba.prototype.initial=function(ca){'use strict';return this.inform('initial',{upload:ca});};ba.prototype.success=function(ca,da){'use strict';var ea={response:da,upload:ca};if(this.inform('success',ea)!==false)p.fire(this._form,'success',ea);this._cleanup();};ba.prototype.failure=function(ca,da){'use strict';var ea={response:da,upload:ca};if(this.inform('failure',ea)!==false)if(p.fire(this._form,'error',ea)!==false)j.defaultErrorHandler(da);this._cleanup();};ba.prototype.progress=function(ca,event){'use strict';this.inform('progress',{event:event,upload:ca});};ba.prototype.abort=function(){'use strict';if(this._request){this._request.abort();this._cleanup();}};ba.prototype.clear=function(){'use strict';aa(this._form);};ba.prototype.destroy=function(){'use strict';this._cleanup();while(this._listeners.length)this._listeners.pop().remove();this._listeners=null;this._form.enctype=this._form.encoding=this._previousEncoding;n.remove(this._form,'FileForm');};ba.prototype._cleanup=function(){'use strict';this._request=null;};ba.prototype._getStatusElement=function(){'use strict';return s.byClass(this._form,'stat_elem')||this._form;};ba.getInstance=function(ca){'use strict';return n.get(ca,'FileForm');};Object.assign(ba,{EVENTS:['start','submit','initial','progress','success','failure']});f.exports=ba;},null);
__d('FileFormResetOnSubmit',['DOMQuery','Event','emptyFunction'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(m,n){var o=i.listen(m,'change',j.thatReturnsFalse,i.Priority.URGENT);try{n();}catch(p){throw p;}finally{o.remove();}}function l(m){'use strict';this._form=m;}l.prototype.enable=function(){'use strict';var m=this._reset.bind(this);this._subscription=this._form.subscribe('submit',function(){setTimeout(m,0);});};l.prototype.disable=function(){'use strict';this._subscription.unsubscribe();this._subscription=null;};l.prototype._reset=function(){'use strict';var m=this._form.getRoot();k(m,function(){var n=h.scry(m,'input[type="file"]');n.forEach(function(o){o.value='';});});};f.exports=l;},null);
__d('DOMClone',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={shallowClone:function(j){return i(j,false);},deepClone:function(j){return i(j,true);}};function i(j,k){var l=j.cloneNode(k);if(typeof l.__FB_TOKEN!=='undefined')delete l.__FB_TOKEN;return l;}f.exports=h;},null);
__d('FileInput',['ArbiterMixin','DOM','DOMClone','Event','Focus','Keys','UserAgent_DEPRECATED','cx','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=n.ie();q=babelHelpers.inherits(t,p(h));r=q&&q.prototype;function t(u,v,w){'use strict';r.constructor.call(this);this.container=u;this.control=v;var x=i.scry(this.container,'a')[0];x&&x.removeAttribute('href');var y=i.create('div',{className:"_3jk"},w);i.appendContent(this.control,y);this._boundHandleChange=this._handleChange.bind(this);if(s)this._boundHandleIEKeyDown=this._handleIEKeyDown.bind(this);this._setInputElement(w);}t.prototype.getValue=function(){'use strict';return this.input.value;};t.prototype.getInput=function(){'use strict';return this.input;};t.prototype.getContainer=function(){'use strict';return this.container;};t.prototype.getControl=function(){'use strict';return this.control;};t.prototype.clear=function(){'use strict';if(s){var u=j.deepClone(this.input);i.replace(this.input,u);this._setInputElement(u);}else this.input.value='';};t.prototype.destroy=function(){'use strict';this._focus.remove();this._focus=null;this._listener.remove();this._listener=null;if(s){this._IEKeyDownListener.remove();this._IEKeyDownListener=null;}this.container=null;this.control=null;this.input=null;};t.prototype._setInputElement=function(u){'use strict';this.input=u;this._focus&&this._focus.remove();this._focus=l.relocate(u,this.control);this._listener&&this._listener.remove();this._listener=k.listen(u,'change',this._boundHandleChange);if(s){this._IEKeyDownListener&&this._IEKeyDownListener.remove();this._IEKeyDownListener=k.listen(u,'keydown',this._boundHandleIEKeyDown);}};t.prototype._handleChange=function(event){'use strict';this.inform('change',event);var u=this.input.form;if(u&&s<9)k.fire(u,'change',event);};t.prototype._handleIEKeyDown=function(event){'use strict';if(event.keyCode===m.RETURN){event.preventDefault();var u=document.createEvent('MouseEvents');u.initEvent('click',true,true);this.input.dispatchEvent(u);}};f.exports=t;},null);
__d('submitForm',['DOM'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=function(j){var k=h.scry(j,'input[type="submit"]')[0];if(k){k.click();}else{k=h.create('input',{type:'submit',className:'hidden_elem'});h.appendContent(j,k);k.click();h.remove(k);}};f.exports=i;},null);
__d('FormSubmitOnChange',['Event','submitForm'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();function j(k){'use strict';this._form=k;}j.prototype.enable=function(){'use strict';this._listener=h.listen(this._form.getRoot(),'change',this._submit.bind(this));};j.prototype.disable=function(){'use strict';this._listener.remove();this._listener=null;};j.prototype._submit=function(){'use strict';i(this._form.getRoot());};Object.assign(j.prototype,{_listener:null});f.exports=j;},null);
__d("PhotosUploadID",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h=1024,i={getNewID:function(){return (h++).toString();}};f.exports=i;},null);
__d('MercuryFileUploader',['ArbiterMixin','CSS','Dialog','DOM','Event','FileForm','FileFormResetOnSubmit','FileInput','FormSubmitOnChange','MercuryAttachment','MercuryAttachmentTemplates','MercuryConstants','PhotosUploadID','SubscriptionsHandler','csx','fbt','getObjectValues','mixin','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){if(c.__markCompiled)c.__markCompiled();var aa,ba;aa=babelHelpers.inherits(ca,y(h));ba=aa&&aa.prototype;function ca(ea,fa,ga,ha){'use strict';ba.constructor.call(this);this.$MercuryFileUploader1=ea;this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader8={};this.$MercuryFileUploader9={};this.$MercuryFileUploader10={};this.updateElements(fa,ga,ha);}ca.prototype.updateElements=function(ea,fa,ga){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader11=new u();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.$MercuryFileUploader12=new m(ea,[p,n]);this.$MercuryFileUploader12.setAllowCrossOrigin(true);this.$MercuryFileUploader12.setUploadInParallel(true);var ha=k.find(ea,"._4q60"),ia=k.find(ha,"._4q61");new o(ha,ia,fa);this.$MercuryFileUploader11.addSubscriptions(this.$MercuryFileUploader12.subscribe('submit',(function(){var ja={count:0,file_sizes:[],files:[]};if(fa.files){for(var ka=0;ka<fa.files.length;ka++)if(fa.files[ka].size>s.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var la={};for(var ma=0;ma<fa.files.length;ma++){var na=this.$MercuryFileUploader13();this.$MercuryFileUploader14(na,fa.files[ma].name);ja.count++;ja.file_sizes.push(fa.files[ma].size);la[na]=fa.files[ma];ja.files.push({upload_id:na,metadata:fa.files[ma]});}this.$MercuryFileUploader12.setFiles(la);}else{ga.value=this.$MercuryFileUploader13();this.$MercuryFileUploader14(ga.value,fa.value);ja.count=1;}this.inform('submit',ja);}).bind(this)),this.$MercuryFileUploader12.subscribe('success',this.$MercuryFileUploader15.bind(this)),this.$MercuryFileUploader12.subscribe('failure',this.$MercuryFileUploader16.bind(this)),l.listen(ia,'click',z(this.inform,this,'open')));};ca.prototype.showAttachmentSizeErrorDialog=function(){'use strict';this.$MercuryFileUploader12.abort();this.$MercuryFileUploader12.clear();new j().setTitle(w._("T\u1ec7p m\u00e0 b\u1ea1n \u0111\u00e3 ch\u1ecdn qu\u00e1 l\u1edbn")).setBody(w._("T\u1ec7p b\u1ea1n \u0111\u00e3 ch\u1ecdn qu\u00e1 l\u1edbn. K\u00edch th\u01b0\u1edbc t\u1ed1i \u0111a l\u00e0 25MB.")).setButtons(j.OK).setSemiModal(true).show();};ca.prototype.addDroppedFiles=function(ea){'use strict';if(!this.$MercuryFileUploader12||!this.$MercuryFileUploader12.canUseXHR())return;var fa={},ga={count:0,file_sizes:[],files:[]};for(var ha=0;ha<ea.length;ha++){var ia=ea[ha];if(ia.size>s.AttachmentMaxSize){this.showAttachmentSizeErrorDialog();return false;}var ja=this.$MercuryFileUploader13();this.$MercuryFileUploader14(ja,ia.name);fa[ja]=ia;ga.file_sizes.push(ia.size);ga.count++;ga.files.push({upload_id:ja,metadata:ia});}this.$MercuryFileUploader12.setFiles(fa);this.$MercuryFileUploader12.forceSendViaXHR();this.inform('submit',ga);};ca.prototype.isUploading=function(){'use strict';return !!Object.keys(this.$MercuryFileUploader8).length;};ca.prototype.addCachedAttachments=function(ea){'use strict';ea.forEach((function(fa){var ga=this.$MercuryFileUploader13();this.$MercuryFileUploader14(ga,fa.filename);this.inform('cached-file-added',{upload_id:ga,metadata:fa});this.$MercuryFileUploader17(ga,fa);}).bind(this));};ca.prototype.addCachedImageFiles=function(ea){'use strict';var fa=w._("\u1ea2nh");ea.forEach((function(ga){var ha=this.$MercuryFileUploader13();this.$MercuryFileUploader14(ha,fa);this.$MercuryFileUploader17(ha,{filename:ga,image_id:ga,filetype:'image/jpeg'});}).bind(this));};ca.prototype.getAttachments=function(){'use strict';return x(this.$MercuryFileUploader2);};ca.prototype.getImageFiles=function(){'use strict';var ea=Object.keys(this.$MercuryFileUploader3).sort(),fa=[];ea.forEach((function(ga){return fa.push(this.$MercuryFileUploader3[ga]);}).bind(this));return fa;};ca.prototype.getAnimatedImageFiles=function(){'use strict';return x(this.$MercuryFileUploader4);};ca.prototype.getVideoFiles=function(){'use strict';return x(this.$MercuryFileUploader5);};ca.prototype.getAudioFiles=function(){'use strict';return x(this.$MercuryFileUploader6);};ca.prototype.getFiles=function(){'use strict';return x(this.$MercuryFileUploader7);};ca.prototype.removeOneAttachment=function(ea){'use strict';this.$MercuryFileUploader18(ea);};ca.prototype.removeAttachments=function(){'use strict';if(this.$MercuryFileUploader1)k.empty(this.$MercuryFileUploader1);this.$MercuryFileUploader2={};this.$MercuryFileUploader3={};this.$MercuryFileUploader4={};this.$MercuryFileUploader5={};this.$MercuryFileUploader6={};this.$MercuryFileUploader7={};this.$MercuryFileUploader9={};this.$MercuryFileUploader8={};this.$MercuryFileUploader10={};if(this.$MercuryFileUploader1)i.hide(this.$MercuryFileUploader1);this.inform('dom-updated');};ca.prototype.destroy=function(){'use strict';this.$MercuryFileUploader11&&this.$MercuryFileUploader11.release();this.$MercuryFileUploader12&&this.$MercuryFileUploader12.destroy();this.removeAttachments();};ca.prototype.$MercuryFileUploader14=function(ea,fa){'use strict';var ga=r[':fb:mercury:upload-file-row'].build(),ha={};this.$MercuryFileUploader9[ea]=ga;this.$MercuryFileUploader8[ea]=true;this.$MercuryFileUploader10[ea]=Date.now();var ia=da(fa);k.appendContent(ga.getNode('iconText'),ia);ha.fileName=ia;l.listen(ga.getNode('closeFileUpload'),'click',this.$MercuryFileUploader18.bind(this,ea));if(this.$MercuryFileUploader1){k.appendContent(this.$MercuryFileUploader1,ga.getRoot());i.show(this.$MercuryFileUploader1);}this.inform('dom-updated',ha);};ca.prototype.$MercuryFileUploader18=function(ea,event){'use strict';if(this.$MercuryFileUploader8[ea]){this.inform('upload-canceled-during-upload');}else if(this.$MercuryFileUploader2[ea]||this.$MercuryFileUploader3[ea]||this.$MercuryFileUploader4[ea]||this.$MercuryFileUploader5[ea]||this.$MercuryFileUploader6[ea]||this.$MercuryFileUploader7[ea])this.inform('upload-canceled-after-uploaded');delete this.$MercuryFileUploader2[ea];delete this.$MercuryFileUploader3[ea];delete this.$MercuryFileUploader4[ea];delete this.$MercuryFileUploader5[ea];delete this.$MercuryFileUploader6[ea];delete this.$MercuryFileUploader7[ea];delete this.$MercuryFileUploader8[ea];delete this.$MercuryFileUploader10[ea];var fa=this.$MercuryFileUploader9[ea];delete this.$MercuryFileUploader9[ea];if(fa){k.remove(fa.getRoot());this.inform('dom-updated');}this.inform('upload-canceled');return false;};ca.prototype.$MercuryFileUploader19=function(ea,fa){'use strict';var ga=this.$MercuryFileUploader9[ea],ha=q.getAttachIconClassByMime(fa);i.addClass(ga.getNode('iconText'),ha);i.addClass(ga.getRoot(),'done');};ca.prototype.$MercuryFileUploader17=function(ea,fa){'use strict';if(this.$MercuryFileUploader8[ea]){delete this.$MercuryFileUploader8[ea];if(fa.image_id){this.$MercuryFileUploader3[ea]=fa.image_id;}else if(fa.gif_id){this.$MercuryFileUploader4[ea]=fa.gif_id;}else if(fa.video_id){this.$MercuryFileUploader5[ea]=fa.video_id;}else if(fa.audio_id){this.$MercuryFileUploader6[ea]=fa.audio_id;}else if(fa.file_id){this.$MercuryFileUploader7[ea]=fa.file_id;}else this.$MercuryFileUploader2[ea]=fa;this.$MercuryFileUploader19(ea,fa.filetype);this.inform('one-upload-completed',{upload_time_ms:Date.now()-this.$MercuryFileUploader10[ea],upload_id:ea,metadata:fa});}if(!this.isUploading())this.inform('all-uploads-completed',{count:this.getAttachments().length});};ca.prototype.$MercuryFileUploader15=function(event,ea){'use strict';var fa=ea.response.getPayload();this.$MercuryFileUploader17(this.$MercuryFileUploader20(ea),fa.metadata[0]);};ca.prototype.$MercuryFileUploader16=function(event,ea){'use strict';this.inform('one-upload-failed');this.$MercuryFileUploader18(this.$MercuryFileUploader20(ea),event);};ca.prototype.$MercuryFileUploader13=function(){'use strict';return 'upload_'+t.getNewID();};ca.prototype.$MercuryFileUploader20=function(ea){'use strict';var fa=ea.response.getPayload();if(ea.upload){return ea.upload.getName();}else return fa.uploadID;};function da(ea){if(ea&&ea.startsWith('C:\\fakepath\\'))return ea.substring(12);return ea;}f.exports=ca;},null);
__d('PagesMessengerFileUploader.react',['ChatFileUploaderMixin','Image.react','InlineBlock.react','Link.react','MercuryConfig','MercuryFileUploader','React','ReactDOM','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'PagesMessengerFileUploader',mixins:[h],propTypes:{actionURI:s.string,iconSize:s.oneOf(['small','large'])},shouldComponentUpdate:function(u,v){return u.actionURI!=this.props.actionURI;},componentDidMount:function(){this._fileUploader=new m(this.props.attachmentsShelf,o.findDOMNode(this.refs.form),o.findDOMNode(this.refs.input),o.findDOMNode(this.refs.attachID));this.setUpSubscriptionsHandler(this._fileUploader);},addFiles:function(u){this._fileUploader.addDroppedFiles(u);},getDefaultProps:function(){return {actionURI:l.upload_url,iconSize:'small'};},render:function(){return (n.createElement('form',{action:this.props.actionURI,method:'post',ref:'form'},n.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),n.createElement(j,{className:"_m _4q60 _3rzn"},n.createElement(k,{className:"_4q61"+(this.props.iconSize==='small'?' '+"_509v":'')+(this.props.iconSize==='large'?' '+"_5njm":'')+(' '+"bizOK")},this._renderIcon()),n.createElement('input',{type:'file',className:"_n",name:'attachment[]',multiple:'true',ref:'input'}))));},_renderIcon:function(){if(this.props.iconSize==='small'){return (n.createElement(i,{alt:q._("T\u1ec7p"),src:r('/images/composer/attachments/paperclip_icon.png')}));}else if(this.props.iconSize==='large')return (n.createElement(i,{alt:q._("T\u1ec7p"),src:r('/images/pages/pages_manager/messages/composer-attach.png')}));}});f.exports=t;},null);
__d('WebMessengerEvents',['Arbiter'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=Object.assign(new h(),{MASTER_DOM_CHANGED:'master-dom-changed',DETAIL_DOM_CHANGED:'detail-dom-changed',FOCUS_COMPOSER:'focus-composer',FOCUS_SEARCH:'focus-search',FOCUS_AND_SELECT_SEARCH:'focus-and-select-search',STICKER_CLICKED:'sticker-clicked',SUBMIT_REPLY:'submit-reply',UPDATE_SELECTION:'update-selection',masterDOMChanged:function(){this.inform(i.MASTER_DOM_CHANGED);},detailDOMChanged:function(){this.inform(i.DETAIL_DOM_CHANGED);},focusComposer:function(){this.inform(i.FOCUS_COMPOSER);},focusSearch:function(){this.inform(i.FOCUS_SEARCH);},focusAndSelectSearch:function(){this.inform(i.FOCUS_AND_SELECT_SEARCH);},updateSelection:function(j){this.inform(i.UPDATE_SELECTION,j);},stickerClicked:function(j,k){this.inform(i.STICKER_CLICKED,{packID:j,stickerID:k});},submitReply:function(){this.inform(i.SUBMIT_REPLY);}});f.exports=i;},null);
__d('MercuryShareLinkUploader',['ArbiterMixin','AsyncRequest','CSS','DOM','Event','Form','URLScraper','WebMessengerEvents','mixin','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;r=babelHelpers.inherits(t,p(h));s=r&&r.prototype;function t(){'use strict';s.constructor.call(this);this.__initialize.apply(this,arguments);}t.prototype.__initialize=function(u,v,w,x,y){'use strict';this.$MercuryShareLinkUploader1=u;this.$MercuryShareLinkUploader2=v;this.$MercuryShareLinkUploader3=w;this.$MercuryShareLinkUploader4=y;this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;l.listen(x,'click',this.close.bind(this));l.listen(y,'keyup',(function(){!y.value.length&&this.$MercuryShareLinkUploader8.enable();}).bind(this));this.$MercuryShareLinkUploader8=new n(y);this.$MercuryShareLinkUploader8.subscribe('match',(function(z,aa){this.loadShare(aa&&aa.url);}).bind(this));};t.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$MercuryShareLinkUploader5,this.$MercuryShareLinkUploader1,this.$MercuryShareLinkUploader4);};t.prototype.getShareDataFromStage=function(u,v){'use strict';var w=m.serialize(v),x=w.attachment&&w.attachment.params;if(!x)return null;if(x instanceof Object){var y=[];y.push(x[0]);y.push(x[1]);x=y;}return {params:x,type:w.attachment.type};};t.prototype.loadAttachData=function(u,v,w,x){'use strict';if(u){var y=m.serialize(v),z=y.attachment&&y.attachment.params,aa=y.link_metrics?y.link_metrics.no_image:true;if(!z||q(z))return null;var ba=x?x():w.value;if(ba.indexOf(z.url)===-1)return y;if(!z.summary&&!z.favicon&&aa&&z.title&&z.url&&z.url.substr(0,z.title.length)===z.title)return null;return y;}return null;};t.prototype.check=function(){'use strict';this.$MercuryShareLinkUploader8.check();};t.prototype.close=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.disable();this.inform('closed');};t.prototype.clear=function(){'use strict';this.$MercuryShareLinkUploader9();this.$MercuryShareLinkUploader8.enable();};t.prototype.enable=function(){'use strict';this.$MercuryShareLinkUploader8.enable();};t.prototype.disable=function(){'use strict';this.$MercuryShareLinkUploader8.disable();};t.prototype.loadShare=function(u){'use strict';this.$MercuryShareLinkUploader6=u;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=new i().setMethod('POST').setURI('/ajax/share_scrape.php').setData({u:u}).setHandler(this.$MercuryShareLinkUploader10.bind(this).bind(null,u)).setStatusElement(this.$MercuryShareLinkUploader3);this.$MercuryShareLinkUploader7.send();this.inform('link-detected');};t.prototype.$MercuryShareLinkUploader10=function(u,v){'use strict';if(this.$MercuryShareLinkUploader6!==u)return;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7=null;j.show(this.$MercuryShareLinkUploader1);k.empty(this.$MercuryShareLinkUploader2);k.setContent(this.$MercuryShareLinkUploader2,v.payload);this.$MercuryShareLinkUploader5=true;if(!this.getAttachData()){this.close();return;}o.detailDOMChanged();};t.prototype.$MercuryShareLinkUploader9=function(){'use strict';j.hide(this.$MercuryShareLinkUploader1);this.$MercuryShareLinkUploader5=false;this.$MercuryShareLinkUploader6=null;this.$MercuryShareLinkUploader7&&this.$MercuryShareLinkUploader7.abort();this.$MercuryShareLinkUploader7=null;this.$MercuryShareLinkUploader8.reset();o.detailDOMChanged();};f.exports=t;},null);
__d('ChatShareLinkUploader',['AsyncRequest','CSS','DOM','URLScraper','MercuryShareLinkUploader','MercuryAttachmentTemplates','Event'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;o=babelHelpers.inherits(q,l);p=o&&o.prototype;q.prototype.__initialize=function(r,s,t,u,v){'use strict';this.$ChatShareLinkUploader1=r;this.$ChatShareLinkUploader2=s;this.$ChatShareLinkUploader3=t;this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader6=u;this.$ChatShareLinkUploader7=v;this.$ChatShareLinkUploader8=false;n.listen(s,'keyup',(function(){!this.getInputValue().length&&this.$ChatShareLinkUploader9.enable();}).bind(this));this.$ChatShareLinkUploader9=new k(s,u);this.$ChatShareLinkUploader9.subscribe('match',(function(w,x){this.loadShare(x&&x.url);}).bind(this));this.$ChatShareLinkUploader10=1337;this.$ChatShareLinkUploader11=null;};q.prototype.getInputValue=function(){'use strict';return this.$ChatShareLinkUploader6?this.$ChatShareLinkUploader6():this.$ChatShareLinkUploader2.value;};q.prototype.getAttachData=function(){'use strict';return this.loadAttachData(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader2,this.$ChatShareLinkUploader6);};q.prototype.getShareData=function(){'use strict';if(!this.$ChatShareLinkUploader4)return null;return this.getShareDataFromStage(this.$ChatShareLinkUploader4,this.$ChatShareLinkUploader1);};q.prototype.close=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.disable();this.inform('closed');};q.prototype.clear=function(){'use strict';this.$ChatShareLinkUploader12();this.$ChatShareLinkUploader9.enable();};q.prototype.$ChatShareLinkUploader12=function(){'use strict';var r=this.$ChatShareLinkUploader11;delete this.$ChatShareLinkUploader11;if(r){j.remove(r);this.inform('dom-updated');}this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader4=false;this.$ChatShareLinkUploader8=false;this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();this.$ChatShareLinkUploader5=null;this.$ChatShareLinkUploader9&&this.$ChatShareLinkUploader9.reset();};q.prototype.loadShareFromParams=function(r,s){'use strict';this.$ChatShareLinkUploader8=true;this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_params.php').setData({chat:true,share_type:r,share_params:s}));};q.prototype.loadShare=function(r,s){'use strict';this.$ChatShareLinkUploader14(new h().setMethod('POST').setURI('/ajax/share_scrape.php').setData({chat:true,extra_params:JSON.stringify(s),u:r}),r);};q.prototype.loadedFromFeed=function(){'use strict';return this.$ChatShareLinkUploader8;};q.prototype.$ChatShareLinkUploader13=function(){'use strict';return ++this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader15=function(){'use strict';return this.$ChatShareLinkUploader10;};q.prototype.$ChatShareLinkUploader14=function(r,s){'use strict';this.$ChatShareLinkUploader5&&this.$ChatShareLinkUploader5.abort();var t=m[':fb:mercury:share-link-row'].build();if(this.$ChatShareLinkUploader11)j.remove(this.$ChatShareLinkUploader11);this.$ChatShareLinkUploader11=t.getRoot();n.listen(t.getNode('closeFileUpload'),'click',(function(event){this.close();event.kill();}).bind(this));j.appendContent(this.$ChatShareLinkUploader1,this.$ChatShareLinkUploader11);i.show(this.$ChatShareLinkUploader1);this.inform('dom-updated');var u=this.$ChatShareLinkUploader13();this.$ChatShareLinkUploader5=r.setHandler((function(v){return this.$ChatShareLinkUploader16(u,v,s);}).bind(this));this.$ChatShareLinkUploader5.send();this.inform('link-detected');};q.prototype.$ChatShareLinkUploader16=function(r,s,t){'use strict';if(this.$ChatShareLinkUploader15()!==r)return;this.$ChatShareLinkUploader5=null;j.appendContent(this.$ChatShareLinkUploader11,s.payload);this.$ChatShareLinkUploader3();this.$ChatShareLinkUploader4=true;this.inform('share-loaded');if(!this.getAttachData()){this.close();if(t&&this.getInputValue().indexOf(t)===-1)this.$ChatShareLinkUploader7(t);return;}i.addClass(this.$ChatShareLinkUploader11,'done');};function q(){'use strict';o.apply(this,arguments);}f.exports=q;},null);
__d('PagesMessengerShareLinkUploader',['ChatShareLinkUploader','emptyFunction','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(n,o,p,q){'use strict';l.constructor.call(this,n,o,i);this.$PagesMessengerShareLinkUploader1=new j();this.$PagesMessengerShareLinkUploader1.addSubscriptions(this.subscribe(['all-uploads-completed','upload-canceled'],p),this.subscribe('submit',q));}m.prototype.destroy=function(){'use strict';this.$PagesMessengerShareLinkUploader1&&this.$PagesMessengerShareLinkUploader1.release();};f.exports=m;},null);
__d('PagesMessengerTextInput.react',['AbstractTextFieldMixin.react','React','TextAreaControl','InputCaretUtility','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'PagesMessengerTextInput',mixins:[h],propTypes:{onClick:n.func,onKeyUp:n.func,onPaste:n.func,tabIndex:n.string},componentDidMount:function(){var p=this.getTextFieldDOM();new j(p);},moveCaretToBeginning:function(){var p=this.getTextFieldDOM();k.delayedMoveCaretToBeginning(p);},resetHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.resetHeight();},updateHeight:function(){var p=j.getInstance(this.getTextFieldDOM());p.updateHeight();},renderTextField:function(){var p=m(this.props.className,"_58al"+(' '+"uiTextareaAutogrow"));return this.setTextFieldPropsOn(i.createElement('textarea',{type:'text',className:p,tabIndex:this.props.tabIndex,onClick:this.props.onClick,onKeyUp:this.props.onKeyUp,onPaste:this.props.onPaste,onFocus:this.props.onFocus}));}});f.exports=o;},null);
__d("arrayStableSort",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){return i.map(function(k,l){return {data:k,index:l};}).sort(function(k,l){return j(k.data,l.data)||k.index-l.index;}).map(function(k){return k.data;});}f.exports=h;},null);
__d('RangedCallbackManager',['CallbackManagerController','arrayStableSort','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l,m,n){'use strict';this.$RangedCallbackManager1=[];this.$RangedCallbackManager2=false;this.$RangedCallbackManager3=false;this.$RangedCallbackManager4={};this.$RangedCallbackManager5=new h(this.$RangedCallbackManager6.bind(this));this.$RangedCallbackManager7=l;this.$RangedCallbackManager8=m;this.$RangedCallbackManager9=n;}k.prototype.executeOrEnqueue=function(l,m,n,o,p){'use strict';return this.$RangedCallbackManager5.executeOrEnqueue({start:l,limit:m},n,{strict:!!o,skipOnStrictHandler:p});};k.prototype.unsubscribe=function(l){'use strict';this.$RangedCallbackManager5.unsubscribe(l);};k.prototype.getUnavailableResources=function(l){'use strict';var m=this.$RangedCallbackManager5.getRequest(l),n=[];if(m&&!this.$RangedCallbackManager2){var o=m.request,p=this.$RangedCallbackManager10(m.options),q=o.start+o.limit;for(var r=p.length;r<q;r++)n.push(r);}return n;};k.prototype.addResources=function(l){'use strict';l.forEach((function(m){if(!this.$RangedCallbackManager4[m]){this.$RangedCallbackManager4[m]=true;this.$RangedCallbackManager1.push(m);this.$RangedCallbackManager3=null;}}).bind(this));this.resortResources();this.$RangedCallbackManager5.runPossibleCallbacks();};k.prototype.addResourcesWithoutSorting=function(l,m){'use strict';var n=this.$RangedCallbackManager1.slice(0,m);n=n.concat(l);n=n.concat(this.$RangedCallbackManager1.slice(m));this.$RangedCallbackManager1=n;Object.assign(this.$RangedCallbackManager4,j(l,true));this.$RangedCallbackManager3=null;this.$RangedCallbackManager5.runPossibleCallbacks();};k.prototype.removeResources=function(l){'use strict';l.forEach((function(m){if(this.$RangedCallbackManager4[m]){this.$RangedCallbackManager4[m]=false;var n=this.$RangedCallbackManager1.indexOf(m);if(n!=-1)this.$RangedCallbackManager1.splice(n,1);}}).bind(this));};k.prototype.removeAllResources=function(){'use strict';this.$RangedCallbackManager1=[];this.$RangedCallbackManager4={};};k.prototype.resortResources=function(){'use strict';this.$RangedCallbackManager1=i(this.$RangedCallbackManager1,(function(l,m){return (this.$RangedCallbackManager8(this.$RangedCallbackManager7(l),this.$RangedCallbackManager7(m)));}).bind(this));};k.prototype.setReachedEndOfArray=function(){'use strict';if(!this.$RangedCallbackManager2){this.$RangedCallbackManager2=true;this.$RangedCallbackManager3=null;this.$RangedCallbackManager5.runPossibleCallbacks();}};k.prototype.hasReachedEndOfArray=function(){'use strict';return this.$RangedCallbackManager2;};k.prototype.setError=function(l){'use strict';if(this.$RangedCallbackManager3!==l){this.$RangedCallbackManager3=l;this.$RangedCallbackManager5.runPossibleCallbacks();}};k.prototype.getError=function(l,m,n){'use strict';var o=this.$RangedCallbackManager10({strict:n});return l+m>o.length?this.$RangedCallbackManager3:null;};k.prototype.hasResource=function(l){'use strict';return this.$RangedCallbackManager4[l];};k.prototype.getResourceAtIndex=function(l){'use strict';return this.$RangedCallbackManager1[l];};k.prototype.getAllResources=function(){'use strict';return this.$RangedCallbackManager1.concat();};k.prototype.getCurrentArraySize=function(l){'use strict';return this.$RangedCallbackManager10(l).length;};k.prototype.$RangedCallbackManager10=function(l){'use strict';var m=this.$RangedCallbackManager1;if(l&&l.strict){var n=l.skipOnStrictHandler||this.$RangedCallbackManager9;if(n)m=m.filter(n);}return m;};k.prototype.$RangedCallbackManager6=function(l,m){'use strict';var n=this.$RangedCallbackManager10(m);if(!this.$RangedCallbackManager2&&!this.$RangedCallbackManager3&&l.start+l.limit>n.length){return false;}else{var o=n.slice(l.start,l.start+l.limit),p=l.start+l.limit>n.length?this.$RangedCallbackManager3:null;return [o,p];}};k.prototype.getElementsUntil=function(l){'use strict';var m=[];for(var n=0;n<this.$RangedCallbackManager1.length;n++){var o=this.$RangedCallbackManager7(this.$RangedCallbackManager1[n]);if(this.$RangedCallbackManager8(o,l)>0)break;m.push(this.$RangedCallbackManager1[n]);}return m;};f.exports=k;},null);
__d('MercuryThreadActions',['AsyncDialog','AsyncRequest','IrisProtocolMessageLifetime','MercuryActionType','MercuryAPIArgsSource','MercuryDispatcher','MercuryIDs','MercuryLogMessageType','MercuryMessengerBlockingUtils','MercuryPayloadSource','MercuryServerRequests','MercurySingletonMixin','MercurySourceType','MercuryViewer','MessagingTag','XNFXMessengerBlockActionController','URI','MercuryAssert','XMessengerNotificationsSettingsDialogController','MercuryMessageActions','MercuryMessageObject','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z){'use strict';if(c.__markCompiled)c.__markCompiled();var aa=c('MercuryMessageActions').get(),ba=c('MercuryMessageObject').get(),ca=c('MercuryThreads').get();function da(ea){this.$MercuryThreadActions1=ea;this.__serverRequests=r.getForFBID(this.$MercuryThreadActions1);this.__dispatcher=m.getForFBID(this.$MercuryThreadActions1);}da.prototype.markRead=function(ea,fa){this.batchMarkRead([ea],fa);};da.prototype.batchMarkRead=function(ea,fa){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ea,true,fa));};da.prototype.markUnread=function(ea,fa){this.batchMarkUnread([ea],fa);};da.prototype.batchMarkUnread=function(ea,fa){this.__dispatcher.handleUpdate(this.$MercuryThreadActions2(ea,false,fa));};da.prototype.markSeen=function(ea,fa){this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.MARK_THREAD_SEEN,q.CLIENT_MARK_THREAD_SEEN,{persistent:fa}));};da.prototype.archive=function(ea,fa){this.batchArchive([ea],fa);};da.prototype.batchArchive=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.changeThreadArchivedStatus(ga,true,fa);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ea,true));};da.prototype.unarchive=function(ea,fa){this.batchUnarchive([ea],fa);};da.prototype.batchUnarchive=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.changeThreadArchivedStatus(ga,false,fa);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions3(ea,false));};da.prototype.markSpam=function(ea,fa){this.batchMarkSpam([ea],fa);};da.prototype.batchMarkSpam=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.markThreadSpam(ga,fa);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ea,v.SPAM));};da.prototype.unmarkSpam=function(ea,fa){this.batchUnmarkSpam([ea],fa);};da.prototype.batchUnmarkSpam=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.unmarkThreadSpam(ga,fa);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ea,v.INBOX));};da.prototype.changeFolder=function(ea,fa){this.batchChangeFolder([ea],fa);};da.prototype.batchChangeFolder=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.changeThreadFolder(ga,fa);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryThreadActions4(ea,fa));};da.prototype['delete']=function(ea,fa){this.batchDelete([ea],fa);};da.prototype.batchDelete=function(ea,fa){ea.forEach((function(ga){this.__serverRequests.deleteThread(ga,fa);}).bind(this));this.__dispatcher.handleUpdate(this.__constructClientPayload(ea,k.DELETE_THREAD,q.CLIENT_DELETE_THREAD));};da.prototype.openNotificationSettings=function(ea){y.isThreadID(ea);this.__serverRequests.__threadIDMap.getServerIDFromClientID(ea,function(fa){var ga=z.getURIBuilder().setString('thread_key_id',fa).setBool('modify',false).getURI();new i().setURI(ga).send();});};da.prototype.unmute=function(ea){this.updateMuteSetting(ea,0);};da.prototype.updateMuteSetting=function(ea,fa){this.__serverRequests.changeMutingOnThread(ea,fa);this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.CHANGE_MUTE_SETTINGS,q.CLIENT_CHANGE_MUTE_SETTINGS,{mute_settings:fa}));};da.prototype.blockMessages=function(ea){var fa=w.getURIBuilder().setInt('thread_fbid',n.getUserIDFromThreadID(ea)).setEnum('location','www_chat_head').getURI();h.send(new i(fa));};da.prototype.unblockMessages=function(ea){var fa=JSON.stringify({reportable_ent_token:n.getUserIDFromThreadID(ea),initial_action_name:p.block_messages});new i(new x('/ajax/nfx/messenger_undo_block').addQueryData({story_location:'messenger',context:fa})).send();};da.prototype.turnOffSecretMode=function(ea){if(ca.isEmptyLocalThread(ea))return;aa.send(ba.constructLogMessageObject(t.TITAN_WEB,ea,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_OFF}}),null,l.WEBMESSENGER);};da.prototype.turnOnSecretMode=function(ea){if(ca.isEmptyLocalThread(ea))return;aa.send(ba.constructLogMessageObject(t.TITAN_WEB,ea,o.GENERIC_ADMIN_TEXT,{untypedData:{ttl:j.TTL_30SECONDS}}),null,l.WEBMESSENGER);};da.prototype.leaveGroup=function(ea){if(!ca.isEmptyLocalThread(ea))aa.send(ba.constructLogMessageObject(t.TITAN_WEB,ea,o.UNSUBSCRIBE,{removed_participants:[u.getID()]}),null,l.WEBMESSENGER);};da.prototype.addParticipants=function(ea,fa){this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.ADD_PARTICIPANTS,q.CLIENT_ADD_PARTICIPANTS,{participants:fa}));};da.prototype.unpinThread=function(ea){this.__serverRequests.unpinThread(ea);this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.UNPIN_THREAD,q.CLIENT_UNPIN_THREAD));};da.prototype.movePendingToInbox=function(ea){this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.MOVE_PENDING_TO_INBOX,q.CLIENT_MOVE_PENDING_TO_INBOX));};da.prototype.updateSnippet=function(ea,fa){this.__dispatcher.handleUpdate(this.__constructClientPayload([ea],k.UPDATE_SNIPPET,q.CLIENT_UPDATE_SNIPPET,{deleted_ids:fa}));};da.prototype.$MercuryThreadActions2=function(ea,fa,ga){return this.__constructClientPayload(ea,k.CHANGE_READ_STATUS,q.CLIENT_CHANGE_READ_STATUS,{mark_as_read:fa,source:ga});};da.prototype.$MercuryThreadActions3=function(ea,fa){return this.__constructClientPayload(ea,k.CHANGE_ARCHIVED_STATUS,q.CLIENT_CHANGE_ARCHIVED_STATUS,{archived:fa});};da.prototype.$MercuryThreadActions4=function(ea,fa){return this.__constructClientPayload(ea,k.CHANGE_FOLDER,q.CLIENT_CHANGE_FOLDER,{new_folder:fa});};da.prototype.__constructClientPayload=function(ea,fa,ga,ha){return {actions:ea.map(function(ia){return babelHelpers._extends({action_type:fa,action_id:null,thread_id:ia},ha);}),from_client:true,payload_source:ga};};Object.assign(da,s);f.exports=da;},null);
__d('mergeDeepInto',['invariant','mergeHelpers'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i.ArrayStrategies,k=i.checkArrayStrategy,l=i.checkMergeArrayArgs,m=i.checkMergeLevel,n=i.checkMergeObjectArgs,o=i.isTerminal,p=i.normalizeMergeArg,q=function(u,v,w,x){n(u,v);m(x);var y=v?Object.keys(v):[];for(var z=0;z<y.length;z++){var aa=y[z];s(u,v,aa,w,x);}},r=function(u,v,w,x){l(u,v);m(x);var y=Math.max(u.length,v.length);for(var z=0;z<y;z++)s(u,v,z,w,x);},s=function(u,v,w,x,y){var z=v[w],aa=v.hasOwnProperty(w),ba=aa&&o(z),ca=aa&&Array.isArray(z),da=aa&&!ca&&!ca,ea=u[w],fa=u.hasOwnProperty(w),ga=fa&&o(ea),ha=fa&&Array.isArray(ea),ia=fa&&!ha&&!ha;if(ga){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else if(!aa)u[w]=ea;}else if(ha){if(ba){u[w]=z;}else if(ca){!j[x]?h(0):undefined;if(x===j.Clobber)ea.length=0;r(ea,z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;}else if(ia){if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){q(ea,z,x,y+1);}else !aa;}else if(!fa)if(ba){u[w]=z;}else if(ca){u[w]=[];r(u[w],z,x,y+1);}else if(da){u[w]={};q(u[w],z,x,y+1);}else !aa;},t=function(u,v,w){var x=p(v);k(w);q(u,x,w,0);};f.exports=t;},null);
__d('mergeDeep',['mergeHelpers','mergeDeepInto'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.checkArrayStrategy,k=h.checkMergeObjectArgs,l=h.normalizeMergeArg,m=function(n,o,p){var q=l(n),r=l(o);k(q,r);j(p);var s={};i(s,q,p);i(s,r,p);return s;};f.exports=m;},null);
__d('MercuryMessages',['BanzaiODS','EventEmitter','ImmutableObject','LogHistory','Map','MercuryActionStatus','MercuryActionType','MercuryAssert','MercuryDispatcher','MercuryLogMessageType','MercuryMessageClientState','MercuryPayloadSource','MercurySingletonMixin','MercuryMessageActions','MercuryMessageIDs','RangedCallbackManager','MercurySendMessageFields','MercuryServerRequests','MercuryThreadActions','MercuryThreadInformer','MercuryThreads','URI','invariant','isMessengerDotComURI','mergeDeep','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new i(),ia=k.getInstance('mercury_messages');function ja(sa,ta){var ua=ta;if(sa._localIdsMap[ta])ua=sa._localIdsMap[ta];return sa._messages.get(ua);}function ka(sa){switch(sa){case s.UNKNOWN:case s.SERVER_INITIAL_DATA:case s.SERVER_FETCH_THREAD_INFO:case s.SERVER_THREAD_SYNC:return true;}return false;}function la(sa,ta){if(!sa._threadsToMessages[ta])sa._threadsToMessages[ta]=new w(function(ua){return ja(sa,ua).timestamp;},function(ua,va){return va-ua;});return sa._threadsToMessages[ta];}function ma(sa,ta,ua){ta.forEach(function(va){var wa=la(sa,va);wa.setReachedEndOfArray();sa._emitReorderedChange(va,ua);});}function na(sa){this._fbid=sa;this._messageActions=u.getForFBID(this._fbid);this._serverRequests=y.getForFBID(this._fbid);this._threadInformer=aa.getForFBID(this._fbid);this._threads=ba.getForFBID(this._fbid);this._threadActions=z.getForFBID(this._fbid);this._dispatcher=p.getForFBID(this._fbid);this._didChange=false;this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};this._dispatcher.subscribe('update-messages',(function(ta,ua){var va=(ua.actions||[]).filter(function(xa){var ya=xa.action_type,za=(xa.is_forward||xa.thread_id)&&(ya==n.LOG_MESSAGE||ya==n.USER_GENERATED_MESSAGE||ya==n.SEND_MESSAGE||ya==n.DELETE_THREAD||ya==n.DELETE_MESSAGES||ya==n.MARK_MESSAGES_SPAM),ab=xa.upload_id&&xa.upload_data&&(ya==n.CANCEL_ATTACHMENT_PLACEHOLDER||ya==n.CONFIRM_ATTACHMENT_PLACEHOLDER),bb=xa.note&&ya==n.CREATE_PAGE_ADMIN_NOTE;return za||ab||bb;}),wa=ka(ua.payload_source);this.handleUpdates(va,wa,ua.payload_source,ua.from_client);if(ua.end_of_history)ma(this,ua.end_of_history,ua.payload_source);if(this._didChange){this._didChange=false;ha.emit('change');}}).bind(this));ia.debug('constructed',{fbid:this._fbid});}Object.assign(na.prototype,{getMessagesFromIDs:function(sa){return (sa||[]).map(ja.bind(null,this)).filter(function(ta){return ta;});},getServerMessageID:function(sa){var ta=sa;if(this._localIdsMap[sa])ta=this._localIdsMap[sa];return ta;},hasLoadedNMessages:function(sa,ta){var ua=la(this,sa);return ua.hasReachedEndOfArray()||ua.getCurrentArraySize()>=ta;},hasLoadedExactlyNMessages:function(sa,ta){var ua=la(this,sa);return ua.getCurrentArraySize()==ta;},clearMercuryInternalState_DO_NOT_USE:function(){this._failedHistoryFetchThreads={};this._threadsToMessages={};this._localTitanMessagesCount={};this._messages=new l();this._localIdsMap={};},getThreadMessagesRange:function(sa,ta,ua,va,wa,xa){var ya=la(this,sa),za=(function(jb){va(oa(this,jb));}).bind(this),ab=ya.executeOrEnqueue(ta,ua,za),bb=ya.getUnavailableResources(ab),cb=this._failedHistoryFetchThreads[sa];if(bb.length&&!cb){var db=ya.getCurrentArraySize(),eb=this._localTitanMessagesCount[sa]||0,fb=db-eb,gb=bb.length+eb,hb=this.getCurrentlyLoadedMessages(sa),ib=hb.length?hb[0].timestamp:null;ia.debug('fetch_missing_messages',{threadID:sa,offset:ta,limit:ua,timestamp:ib,missingIndices:bb,messageCount:db,localMessageCount:eb});this._serverRequests.fetchThreadMessages(sa,fb,gb,ib,wa,xa);}else this._failedHistoryFetchThreads[sa]=false;return ab;},getThreadMessagesRangeNow:function(sa,ta,ua){var va=la(this,sa),wa=[];for(var xa=ta;xa<ta+ua;xa++){var ya=va.getResourceAtIndex(xa),za=ja(this,ya);za&&wa.push(za);}return wa;},getThreadMessagesSinceTimestamp:function(sa,ta){var ua=la(this,sa),va=ua.getElementsUntil(ta);return oa(this,va);},hasLoadedAllMessages:function(sa){return la(this,sa).hasReachedEndOfArray();},getCurrentlyLoadedMessages:function(sa){var ta=la(this,sa).getAllResources();return oa(this,ta);},unsubscribe:function(sa,ta){o.isThreadID(ta);var ua=la(this,ta);ua.unsubscribe(sa);},_addNewMessage:function(sa,ta){ra(ta);this._messages.set(sa,new j(ta));},_addNewPageAdminNote:function(sa,ta){var ua=this._messages.get(sa);if(ua){var va=ua.page_admin_notes?ua.page_admin_notes.slice():[],wa=false,xa=true;for(var ya=0;ya<va.length;++ya)if(va[ya].id===ta.id){wa=true;xa=false;break;}else if((va[ya].id===null||va[ya].id===undefined)&&va[ya].body===ta.body){wa=true;va[ya]=ta;}if(!wa)va.push(ta);if(xa){var za={};za.page_admin_notes=va;this._updateMessage(sa,ua,za);}}},_updateMessage:function(sa,ta,ua){var va=j.set(ta,ua);this._messages.set(sa,va);return va;},_shouldSortOutOfOrderMessages:function(sa,ta,ua){if(sa==s.CLIENT_CHANNEL_MESSAGE){var va=this.getThreadMessagesSinceTimestamp(ta,ua);if(va.length>0){h.bumpEntityKey('chat.web','channel.messages_reordered');return true;}}return false;},_preprocessIncomingAction:function(sa,ta){var ua=sa.action_type;if(ta==s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE&&sa.offline_threading_id&&this._localIdsMap[sa.offline_threading_id]===sa.offline_threading_id){sa.client_message_id=sa.offline_threading_id;sa.status=m.SUCCESS;sa.action_type=n.SEND_MESSAGE;ua=sa.action_type;}if(ta===s.CLIENT_CHANNEL_MESSAGE&&ua==n.USER_GENERATED_MESSAGE){var va=this._threads.getThreadMetaNow(sa.thread_id);if(va&&va.folder)sa.folder=va.folder;}return sa;},handleUpdates:function(sa,ta,ua,va){var wa,xa={};for(var ya=0;ya<sa.length;ya++){var za=this._preprocessIncomingAction(sa[ya],ua),ab=za.action_type,bb=ja(this,za.message_id);if(ab==n.LOG_MESSAGE)if(this.isLocalMessage(za))continue;if(za.is_forward||ua==s.SERVER_SEARCH){if(!this._messages.has(za.message_id))this._addNewMessage(za.message_id,za);continue;}else if(za.client_state===r.SEND_TO_SERVER){this._addNewMessage(za.message_id,za);continue;}else if(ab==n.SEND_MESSAGE){var cb=za.client_message_id;if(cb&&this._localIdsMap[cb]&&za.status){var db=ja(this,cb),eb=db.status;if(db.status==m.SUCCESS)continue;if(!xa[za.thread_id])xa[za.thread_id]=[];this._updateLocalMessage(za);if(typeof eb!==undefined||za.status==m.FAILED_UNKNOWN_REASON||za.status==m.UNABLE_TO_CONFIRM||za.status==m.SUCCESS||za.status==m.ERROR)this._emitUpdatedChange(za.thread_id,ja(this,cb).message_id,ua);}continue;}else if(ab==n.DELETE_THREAD){la(this,za.thread_id).removeAllResources();continue;}else if(ab==n.DELETE_MESSAGES){this._deleteMessages(za.thread_id,za.message_ids,ua);ga((function(){this._threadActions.updateSnippet(za.thread_id,za.message_ids);}).bind(this));continue;}else if(ab==n.CREATE_PAGE_ADMIN_NOTE){this._addNewPageAdminNote(za.message_id,za.note);this._emitUpdatedChange(za.thread_id,za.message_id,'link_shim');continue;}else if(za.offline_threading_id&&this._localIdsMap[za.offline_threading_id]||bb&&!bb.is_forward){if(bb&&za.ranges&&za.ranges.length>0){var fb=bb.message_id;this._updateMessage(this._localIdsMap[fb]||fb,bb,{ranges:sa.ranges});this._emitUpdatedChange(bb.thread_id,bb.message_id,'link_shim');}continue;}else if(ab===n.CONFIRM_ATTACHMENT_PLACEHOLDER){this._confirmAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else if(ab===n.CANCEL_ATTACHMENT_PLACEHOLDER){this._cancelAttachmentPlaceholder(za.upload_id,za.upload_data);continue;}else{if(ua===s.CLIENT_SEND_MESSAGE){this._localIdsMap[za.message_id]=za.message_id;if(za.thread_id=='root:'+za.offline_threading_id)la(this,za.thread_id).setReachedEndOfArray();}if(ab==n.LOG_MESSAGE&&za.log_message_type==q.SERVER_ERROR)this._failedHistoryFetchThreads[za.thread_id]=true;if(za.client_state===r.DO_NOT_SEND_TO_SERVER&&za.upload_id)this._uploadMessages[za.upload_id]=za;if(!xa[za.thread_id])xa[za.thread_id]=[];xa[za.thread_id].push(za.message_id);this._addNewMessage(za.message_id,za);if(za.offline_threading_id&&za.offline_threading_id!=za.message_id){this._localIdsMap[za.offline_threading_id]=za.message_id;v.addServerID(za.offline_threading_id,za.message_id);if(za.threading_id)v.addServerID(za.threading_id,za.message_id);}if(za[x.MANUAL_RETRY_CNT]>0){wa=la(this,za.thread_id);wa.resortResources([za.message_id]);this._emitReorderedChange(za.thread_id,s.CLIENT_SEND_MESSAGE);}ta=ta||this._shouldSortOutOfOrderMessages(ua,za.thread_id,za.timestamp);if(!ta)this._emitReceivedChange(ja(this,za.message_id));continue;}}for(var gb in xa){wa=la(this,gb);var hb=wa.getAllResources(),ib=hb.filter((function(jb){var kb=this._messages.get(jb);return kb.action_type==n.LOG_MESSAGE&&kb.log_message_type==q.SERVER_ERROR;}).bind(this));wa.removeResources(ib);if(va)pa(this,gb,xa[gb]);if(ta){wa.addResources(xa[gb]);this._emitReorderedChange(gb,ua);}else wa.addResourcesWithoutSorting(xa[gb].reverse(),0);this._threadInformer.updatedThread(gb);}this._didChange&&ia.debug('handle_updates',{localMessageCounts:fa(this._localTitanMessagesCount)});},isFirstMessage:function(sa){var ta=la(this,sa.thread_id);if(ta.getCurrentArraySize()===0)return false;var ua=ta.getResourceAtIndex(ta.getCurrentArraySize()-1),va=ja(this,ua).message_id,wa=ja(this,sa.message_id).message_id;return ta.hasReachedEndOfArray()&&va==wa;},isLocalMessage:function(sa){if(sa.offline_threading_id!==null&&sa.offline_threading_id===sa.message_id)return true;if(sa.threading_id!==null&&sa.threading_id===sa.message_id)return true;return false;},_deleteMessages:function(sa,ta,ua){if(!ta.length)return;this._deleteIndividualMessages(sa,ta,ua);if(ua!==s.CLIENT_CHANNEL_MESSAGE)this._serverRequests.deleteMessages(sa,ta);},_deleteIndividualMessages:function(sa,ta,ua){var va=ta.map(function(xa){return ja(this,xa).message_id;},this),wa=la(this,sa);wa.removeResources(va);this._emitReorderedChange(sa,ua);},_updateLocalMessage:function(sa){var ta=ja(this,sa.client_message_id),ua={};ua.status=sa.status;if(sa.status===m.SUCCESS||sa.error_data)ua.error_data=sa.error_data;var va=sa.message_id,wa=sa.client_message_id;if(this._messages.has(va)){this._updateMessage(va,ta,ua);return false;}if(sa.threading_id)ua.threading_id=sa.threading_id;if(sa.timestamp)ua.timestamp=sa.timestamp;if(sa.log_message_data)ua.log_message_data=sa.log_message_data;if(sa.ranges&&sa.ranges.length){ra(sa);ua.ranges=sa.ranges;}if(sa.attachments&&sa.attachments.length){ua.raw_attachments=null;ua.attachments=sa.attachments;}this._localIdsMap[wa]=va;v.addServerID(wa,va);var xa=this._updateMessage(va,ta,ua);this._messages.set(wa,new j());if(qa(xa))this._localTitanMessagesCount[xa.thread_id]--;return true;},getNumberLocalMessages:function(sa){return this._localTitanMessagesCount[sa]||0;},_uploadMessages:{},_confirmAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);delete ua.preview_attachments;this._serverRequests.sendNewMessage(ua);},_cancelAttachmentPlaceholder:function(sa,ta){var ua=this._popPendingAttachmentMessage(sa,ta);this._deleteIndividualMessages(ua.thread_id,[ua.message_id]);if(this._localTitanMessagesCount[ua.thread_id])this._localTitanMessagesCount[ua.thread_id]--;},_popPendingAttachmentMessage:function(sa,ta){var ua=this._uploadMessages[sa];!ua?da(0):undefined;ua.image_ids=ta.image_ids;ua.file_ids=ta.file_ids;ua.audio_ids=ta.audio_ids;ua.gif_ids=ta.gif_ids;ua.video_ids=ta.video_ids;ua.client_state=r.SEND_TO_SERVER;delete this._uploadMessages[sa];return ua;},_emitUpdatedChange:function(sa,ta,ua){this._didChange=true;this._threadInformer.updatedMessage(sa,ta,ua);},_emitReceivedChange:function(sa){this._didChange=true;this._threadInformer.receivedMessage(sa);},_emitReorderedChange:function(sa,ta){this._didChange=true;this._threadInformer.reorderedMessages(sa,ta);}});Object.assign(na,t,{addListener:function(sa,ta){return ha.addListener(sa,ta);}});function oa(sa,ta){var ua=ta.map(ja.bind(null,sa));return ua.reverse();}function pa(sa,ta,ua){var va=ua.filter(function(wa){return qa(ja(sa,wa));});if(!sa._localTitanMessagesCount[ta])sa._localTitanMessagesCount[ta]=0;sa._localTitanMessagesCount[ta]+=va.length;}function qa(sa){var ta=sa.action_type;if(ta==n.USER_GENERATED_MESSAGE)return true;switch(sa.log_message_type){case q.SUBSCRIBE:case q.UNSUBSCRIBE:case q.SERVER_ERROR:case q.LIVE_LISTEN:return false;default:return true;}}function ra(sa){if(!sa.ranges)return;sa.ranges.forEach(function(ta){if(!ta.entity||ta.entity.external||!ta.entity.url)return;var ua=new ca(ta.entity.url);if(ea(ca.getRequestURI())&&!ua.getDomain()){ua.setProtocol('https').setDomain('www.facebook.com');ta.entity.url=ua.toString();}});}f.exports=na;},null);
__d('AbstractCheckboxInput.react',['React','cx','invariant','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'AbstractCheckboxInput',propTypes:{tooltip:l.string},render:function(){!(!this.props.children||this.props.children.length===0)?j(0):undefined;var n=k(this.props.className,"_kv1"),o=h.createElement('input',babelHelpers._extends({},this.props,{className:null,type:'checkbox'}),undefined);return (h.createElement('label',{className:n},o,h.createElement('span',{'data-hover':this.props.tooltip?'tooltip':null,'aria-label':this.props.tooltip})));}});f.exports=m;},null);
__d('XUICheckboxInput.react',['AbstractCheckboxInput.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=i.createClass({displayName:'XUICheckboxInput',render:function(){return (i.createElement(h,babelHelpers._extends({},this.props,{className:k(this.props.className,"_55sg")}),undefined));}});f.exports=l;},null);
__d('PagesEventObserver',['Banzai'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i='pages_client_logging',j={VITAL_WAIT:h.VITAL_WAIT,logData_DEPRECATED:function(k,l){var m={delay:l||h.VITAL_WAIT};h.post(i,k,m);},notify:function(event,k,l,m,n){var o=babelHelpers._extends({},l,{event_name:event,page_id:k,dedupe:m!==false}),p={delay:n||h.VITAL_WAIT};h.post(i,o,p);}};f.exports=j;},null);
__d('SelectionPosition',['Event','InputSelection','SubscriptionsHandler'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();function k(l){'use strict';this.$SelectionPosition1=l;this.$SelectionPosition2={start:0,end:0};this.$SelectionPosition3=new j();this.$SelectionPosition4=false;this.updatePos();this.enable();}k.prototype.getPos=function(){'use strict';return babelHelpers._extends({},this.$SelectionPosition2);};k.prototype.setPos=function(l,m){'use strict';this.$SelectionPosition2={start:l,end:m};this.restore();};k.prototype.updatePos=function(){'use strict';this.$SelectionPosition2=i.get(this.$SelectionPosition1);};k.prototype.restore=function(){'use strict';i.set(this.$SelectionPosition1,this.$SelectionPosition2.start,this.$SelectionPosition2.end);};k.prototype.enable=function(){'use strict';if(!this.$SelectionPosition4){this.$SelectionPosition3.addSubscriptions(h.listen(this.$SelectionPosition1,'keyup',this.updatePos.bind(this)),h.listen(this.$SelectionPosition1,'click',this.updatePos.bind(this)));this.$SelectionPosition4=true;}};k.prototype.disable=function(){'use strict';if(this.$SelectionPosition4){this.$SelectionPosition3.release();this.$SelectionPosition4=false;}};f.exports=k;},null);
__d("XPagesSavedResponsesAsyncController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/",{page_id:{type:"Int",required:true},other_user_id:{type:"Int",required:true}});},null,{});
__d('SavedResponsesUtils',['ActorURI','AsyncRequest','XPagesSavedResponsesAsyncController'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={generateImageMetadata:function(l){return {filename:'Photo.jpg',image_id:l,filetype:'image/jpeg'};},fetchSavedResponses:function(l,m,n){var o=j.getURIBuilder().setInt('other_user_id',m).setInt('page_id',l).getURI();o=h.create(o,l);new i().setURI(o).setHandler(function(p){return n(p.payload.responses,p.payload.tokens);}).send();}};f.exports=k;},null);
__d('PagesMessengerComposer.react',['ChatPhotoUploader.react','DragDropTarget','EmoticonsList','EmoticonUtils','ImageBlock.react','MercuryPageMessageActions','MercuryConfig','MercuryDragDropPrompt.react','MercuryParticipants','React','ReactDOM','Run','PageAdminSignatureMonitor','PageAdminSignatureSettings','PagesManagerMessagesInterface','PagesMessengerInfoButton.react','PagesMessageSuggestedResponseHandler','PagesMessengerSuggestedResponseView.react','PagesMessengerFileUploader.react','PagesMessengerShareLinkUploader','PagesMessengerTextInput.react','Image.react','MercuryIDs','MercuryMessageIDs','MercuryMessageObject','MercuryMessages','MercurySourceType','URI','XUICheckboxInput.react','XUIButton.react','PagesMessagingConfig','PagesEventObserver','PagesEventType','PagesMessengerPageAdminNoteButton.react','SelectionPosition','SavedResponsesUtils','UFIStickerButton.react','cx','fbt','joinClasses','isEmpty'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va){if(c.__markCompiled)c.__markCompiled();var wa=q.PropTypes,xa=q.createClass({displayName:'PagesMessengerComposer',propTypes:{user:wa.string.isRequired,threadID:wa.string.isRequired,threadElementID:wa.string.isRequired,onBeforeSend:wa.func.isRequired,onKeyUp:wa.func,otherUserID:wa.string,creatorInfo:wa.object,attachmentsShelf:wa.object,displayErrorMessage:wa.func.isRequired,adminSignatureSettings:wa.object,suggestedResponseHandler:wa.instanceOf(x),isSuggestedResponseEnabled:wa.bool.isRequired,isSavedResponseEnabled:wa.bool.isRequired,isPageAdminNoteEnabled:wa.bool.isRequired,isSavedResponsesBrowsePanelOn:wa.bool,onSavedResponsesButtonClicked:wa.func.isRequired,focusOnUpdate:wa.bool},getDefaultProps:function(){return {adminSignatureSettings:null,initialValue:"",isSavedResponsesBrowsePanelOn:false,focusOnUpdate:true};},getInitialState:function(){this._messageObject=fa.getForFBID(this.props.user);this._messageActions=m.getForFBID(this.props.user);this._messages=ga.getForFBID(this.props.user);return {adminSignatureContext:new u(this.props.adminSignatureSettings,this.props.user),currentParticipant:null,isQuickReplyMode:la.sendOnEnter,isPageAdminNoteMode:false,shareLinkUploader:null,temporaryPlaceholder:null};},hasInput:function(){return !!this.state.value;},clearInput:function(){this.setState({value:''});},focusInput:function(){if(this.refs.textInput)r.findDOMNode(this.refs.textInput).focus();},_maybeFocusInput:function(){if(this.props.focusOnUpdate)this.focusInput();},setUpShareLinkUploader:function(){if(this.refs.linkPreview&&this.refs.textInput)this.setState({shareLinkUploader:new aa(r.findDOMNode(this.refs.linkPreview),this.refs.textInput.getTextFieldDOM(),(function(){return this._unblockSend;}).bind(this),(function(){return this._onFileSubmitted;}).bind(this))});},componentWillMount:function(){var ya=da.getParticipantIDFromUserID(this.props.user);p.get(ya,(function(za){this.setState({currentParticipant:za});}).bind(this));},componentDidMount:function(){this.setUpShareLinkUploader();if(la.dragdropEnabled)new i(r.findDOMNode(this)).setOnFilesDropCallback((function(ya){var za=this.refs.fileUploader;if(za)za.addFiles(ya);}).bind(this)).setOnURLDropCallback((function(ya){var za=this.state.shareLinkUploader;if(za)za.loadShare(ya);}).bind(this)).enable();this._maybeFocusInput();this._onBeforeUnloadHandler=s.onBeforeUnload((function(){return this.hasInput()?ta._("B\u1ea1n ch\u01b0a g\u1eedi tin nh\u1eafn. B\u1ea1n c\u00f3 mu\u1ed1n r\u1eddi kh\u1ecfi m\u00e0 kh\u00f4ng g\u1eedi tin nh\u1eafn kh\u00f4ng?"):null;}).bind(this));},componentDidUpdate:function(){if(!this.state.shareLinkUploader)this.setUpShareLinkUploader();this._maybeFocusInput();},componentWillUnmount:function(){this._onBeforeUnloadHandler&&this._onBeforeUnloadHandler.remove();this.state.shareLinkUploader&&this.state.shareLinkUploader.destroy();},processConfirm:function(ya){if(this.state.isPageAdminNoteMode){this.processCreateNote(ya);}else this.processSend(ya);},processCreateNote:function(ya){if(this.hasEnteredText()){var za={creatorID:this.props.creatorInfo.creatorID,creatorType:this.props.creatorInfo.creatorType,creatorName:this.props.creatorInfo.creatorName,labelType:'page_admin_note',pageID:this.props.creatorInfo.pageID,profileURI:this.props.creatorInfo.profileURI},ab={id:null,body:this.state.value,creator_info:za,timestamp:Math.floor(Date.now()/1000)};this._messages.getThreadMessagesRange(this.props.threadID,0,1,(function(bb){if(!bb.length)return;var cb=bb[0];if(this._messages.isLocalMessage(cb)){ea.getServerIDs([cb.message_id],(function(db){if(db.length){var eb=db[0];this._messageActions.createNote(ab,this.props.threadID,eb);}}).bind(this));}else this._messageActions.createNote(ab,this.props.threadID,cb.message_id);}).bind(this));ya.preventDefault();this.clearInput();this.setState({isPageAdminNoteMode:!this.state.isPageAdminNoteMode});}},processSend:function(ya){var za=this.refs.textInput.getValue(),ab=[],bb=[],cb=[],db=[],eb=[],fb=[];ab=this._fileUploader.getAttachments();bb=this._fileUploader.getImageFiles();cb=this._fileUploader.getAnimatedImageFiles();db=this._fileUploader.getVideoFiles();eb=this._fileUploader.getAudioFiles();fb=this._fileUploader.getFiles();var gb=this.state.shareLinkUploader.getAttachData();if(this._shouldBlockSend()){this._blockSend();ya.preventDefault();return;}if(!za&&!ab.length&&!bb.length&&!db.length&&!fb.length&&!gb)return;var hb=this._messageObject.constructUserGeneratedMessageObject(za,ha.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);if(gb){hb.has_attachment=true;hb.content_attachment=gb;}if(ab.length>0){hb.has_attachment=true;hb.raw_attachments=ab;}if(bb.length>0){hb.image_ids=bb;hb.has_attachment=true;}if(cb.length>0){hb.gif_ids=cb;hb.has_attachment=true;}if(db.length>0){hb.video_ids=db;hb.has_attachment=true;}if(eb.length>0){hb.audio_ids=eb;hb.has_attachment=true;}if(fb.length>0){hb.file_ids=fb;hb.has_attachment;}ma.logData_DEPRECATED({page_id:this.props.user,event_name:na.MESSAGES_DIALOG_SEND,thread_id:this.props.threadElementID},null);var ib=this.props.suggestedResponseHandler;if(ib&&ib.shouldBeTreatedAsRejected())ib.sendFeedback(false);this.props.onBeforeSend();this._messageActions.send(hb);this._fileUploader.removeAttachments();this.state.shareLinkUploader.clear();ya.preventDefault();this.setState({value:''});},onChange:function(ya){this.setState({value:ya.target.value});},onFocus:function(ya){t.handleReactInputFieldFocusForSignature(this,this.state.adminSignatureContext,this.state.adminSignatureContext.getShouldAttachToMessage());},_shouldBlockSend:function(){return this._fileUploader.isUploading();},_blockSend:function(){this.props.displayErrorMessage(true);},_unblockSend:function(){if(this._blocked)if(this._shouldBlockSend())return;this._blocked=false;this.props.displayErrorMessage(false);},setSignature:function(ya){this.setState({value:ya});this.refs.textInput.moveCaretToBeginning();},setSavedResponse:function(ya,za){if(this._fileUploader)this._fileUploader.removeAttachments();if(za)this._fileUploader.addCachedAttachments([qa.generateImageMetadata(za)]);this.setState({value:ya},this.refs.textInput.resetHeight);},setPlaceholderText:function(ya){this.setState({temporaryPlaceholder:ya},this.refs.textInput.resetHeight);},hasEnteredText:function(){return !va(this.state.value);},render:function(){if(!this.state.currentParticipant)return q.createElement('div',null);var ya=this.state.temporaryPlaceholder?this.state.temporaryPlaceholder:this.getDefaultPlaceholder(),za=this.props.isSavedResponsesBrowsePanelOn?ta._("\u1ea8n c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u"):ta._("Hi\u1ec3n th\u1ecb c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u");return (q.createElement('div',babelHelpers._extends({},this.props,{className:ua(this.props.className,"_5id0 _1ia")}),q.createElement(o,null),q.createElement(l,null,q.createElement('a',{className:"_5icz"},q.createElement(ca,{src:this.state.currentParticipant.image_src,className:"_5ic-"})),q.createElement('div',{className:"_5tbe"},q.createElement(ba,{className:"_5id1",onNoShiftEnter:this.state.isQuickReplyMode?this.processConfirm:null,placeholder:ya,onChange:this.onChange,onKeyUp:this.props.onKeyUp,onFocus:this.onFocus,value:this.state.value,ref:'textInput'}),q.createElement(y,{suggestedResponseHandler:this.props.suggestedResponseHandler,onAccepted:(function(ab){this.setState({value:ab});}).bind(this)}),q.createElement('div',{className:"_oan",ref:'linkPreview'}))),q.createElement('div',{className:"_2w65"},q.createElement('div',{className:"_2w66"},this.props.isSavedResponseEnabled?q.createElement(ka,{onClick:this.props.onSavedResponsesButtonClicked,label:za}):null,q.createElement(ka,{use:'confirm',onClick:this.processConfirm,label:this.getConfirmButtonLabel()})),q.createElement('div',{className:"_5tbf"},q.createElement(h,{actionURI:this._getPhotoUploaderURI(),onSubmit:this._onPhotosSubmitted,onAllUploadsComplete:this._onAllPhotoUploadsCompleted,onLastUploadFail:this._onLastPhotoUploadFailed}),la.feedbackFormEnabled?q.createElement(w,null):null,la.stickersEnabled?q.createElement(ra,{onStickerSelected:this._onStickerSelected,onEmoticonSelected:this._onEmoticonSelected}):null,this.props.attachmentsShelf?q.createElement(z,{actionURI:this._getPhotoUploaderURI(),attachmentsShelf:r.findDOMNode(this.props.attachmentsShelf),onUploadFinished:this._unblockSend,onFileUploaderMounted:this.setFileUploader,onSubmit:(function(){return this._onFileSubmitted;}).bind(this),ref:'fileUploader'}):null,this.props.isPageAdminNoteEnabled?q.createElement(oa,{onClick:this._onPageAdminNoteButtonClicked}):null,q.createElement('div',{className:"_29hw"},q.createElement(ja,{className:"_2w68",checked:this.state.isQuickReplyMode,onChange:this._onCheckboxChanged}),q.createElement('div',{className:"_2w67"},this.getSendOnEnterText()))))));},_onFileSubmitted:function(){r.findDOMNode(this.refs.textInput).focus();},setFileUploader:function(ya){this._fileUploader=ya;},_onCheckboxChanged:function(event){var ya=event.target.checked;this.setState({isQuickReplyMode:ya});la.sendOnEnter=ya;v.updatePreferences({sendOnEnter:ya});},_onPhotosSubmitted:function(ya,za){var ab=this._messageObject.constructUserGeneratedMessageObject('',ha.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);this.props.onBeforeSend();this._messageActions.addAttachmentPlaceholder(ab,za.upload_id,za);},_onStickerSelected:function(ya,event){var za=this._messageObject.constructUserGeneratedMessageObject('',ha.TITAN_WEB,this.props.threadID,null,this.props.creatorInfo);za.has_attachment=true;za.sticker_id=ya;this.props.onBeforeSend();this._messageActions.send(za);},_onEmoticonSelected:function(ya){var za=j.symbols[ya];if(!za)return;var ab=this.refs.textInput.getTextFieldDOM();this._selectionPosition=this._selectionPosition||new pa(ab);var bb=this.state.value||'',cb=k.insertEmoticon(za,bb,this._selectionPosition.getPos());this._selectionPosition.setPos(cb.start,cb.end);this.setState({value:cb.result});},_onAllPhotoUploadsCompleted:function(ya,za){this.props.onBeforeSend();this._messageActions.confirmAttachmentPlaceholder(za.upload_id,za);},_onLastPhotoUploadFailed:function(ya,za){this._messageActions.cancelAttachmentPlaceholder(za.upload_id,za);},_getPhotoUploaderURI:function(){return new ia(n.upload_url).addQueryData('request_user_id',this.props.user).toString();},_onPageAdminNoteButtonClicked:function(){this.clearInput();this.setState({isPageAdminNoteMode:!this.state.isPageAdminNoteMode});},getConfirmButtonLabel:function(){if(this.state.isPageAdminNoteMode){return ta._("L\u01b0u \u00fd");}else return ta._("Tr\u1ea3 l\u1eddi");},getDefaultPlaceholder:function(){if(this.state.isPageAdminNoteMode){return ta._("Th\u00eam ghi ch\u00fa c\u1ee7a qu\u1ea3n tr\u1ecb vi\u00ean...");}else return ta._("Vi\u1ebft tr\u1ea3 l\u1eddi...");},getSendOnEnterText:function(){if(this.state.isPageAdminNoteMode){return ta._("Nh\u1ea5n Enter \u0111\u1ec3 t\u1ea1o ghi ch\u00fa");}else return ta._("Nh\u1ea5n Enter \u0111\u1ec3 g\u1eedi");}});f.exports=xa;},null);
__d('TooltipLink.react',['React','TooltipMixin'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'TooltipLink',mixins:[i],render:function(){return h.createElement('a',this.props,this.props.children);}});f.exports=j;},null);
__d('MercuryLogMessageRenderer',['Bootloader','CSS','HovercardLink','MercuryViewer','MessagesViewer','MercuryLogMessageType','MessagingGenericAdminTextType','MercuryParticipants','React','ReactDOM','Image.react','TextWithEntities.react','TooltipLink.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x={renderText:function(ma,na){switch(ma.log_message_type){case m.SUBSCRIBE:aa(ma,na);break;case m.UNSUBSCRIBE:fa(ma,na);break;case m.THREAD_NAME:ga(ma,na);break;case m.THREAD_IMAGE:ha(ma,na);break;case m.WALLPAPER:ia(ma,na);break;case m.GENERIC_ADMIN_TEXT:ja(ma,na);break;default:h.loadModules(["MercurySpecialLogMessageRenderer"],function(oa){oa.renderText(ma,na);});break;}},renderIcon:function(ma){return (p.createElement(r,{className:y(ma),src:w('images/spacer.gif')}));},renderLegacy:function(ma,na,oa,pa){y(pa).split(' ').forEach(function(qa){return qa&&i.addClass(ma,qa);});this.renderText(pa,function(qa){q.render(p.createElement('span',null,qa),na);});this.renderAttachmentLegacy(oa,pa);},renderAttachmentLegacy:function(ma,na){if(na.log_message_type==m.THREAD_IMAGE){var oa=na.log_message_data.image;if(oa&&oa.preview_url){q.render(p.createElement(r,{className:"_z6a",onClick:function(){return z(oa);},src:oa.preview_url}),ma);i.show(ma);}}}};f.exports=x;function y(ma){var na=ma.log_message_type,oa=ma.log_message_data;return "_5wzu"+(na==m.SUBSCRIBE?' '+"_5wzj":'')+(na==m.UNSUBSCRIBE?' '+"_5wzk":'')+(na==m.THREAD_NAME?' '+"_5wzl":'')+(na==m.THREAD_IMAGE?' '+"_5wzm":'')+(na==m.VIDEO_CALL&&oa.answered?' '+"_5wzn":'')+(na==m.VIDEO_CALL&&!oa.answered?' '+"_5wzo":'')+(na==m.PHONE_CALL&&oa.answered?' '+"_5wzp":'')+(na==m.PHONE_CALL&&!oa.answered?' '+"_5wzq":'')+(na==m.SERVER_ERROR?' '+"_5wzr":'');}function z(ma){l.bootstrapWithConfig({src:ma.preview_url,endpoint:ma.url,fbid:ma.metadata.fbid,dimensions:ma.metadata.dimensions,disablePaging:true},null);}function aa(ma,na){var oa=la(ma.log_message_data.added_participants);switch(oa.length){case 1:ba(ma,na,oa);break;case 2:ca(ma,na,oa);break;case 3:da(ma,na,oa);break;default:ea(ma,na,oa);break;}}function ba(ma,na,oa){var pa=[ma.author,oa[0]];o.getMulti(pa,function(qa){if(ma.author==k.getID()){na(v._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}.",[v.param('subscriber1',ka(qa[oa[0]]))]));}else if(oa[0]==k.getID()){na(v._("{actor} \u0111\u00e3 th\u00eam b\u1ea1n.",[v.param('actor',ka(qa[ma.author]))]));}else na(v._("{actor} \u0111\u00e3 th\u00eam {subscriber1}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber1',ka(qa[oa[0]]))]));});}function ca(ma,na,oa){var pa=[ma.author].concat(oa);o.getMulti(pa,function(qa){if(ma.author==k.getID()){na(v._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1} v\u00e0 {subscriber2}.",[v.param('subscriber1',ka(qa[oa[0]])),v.param('subscriber2',ka(qa[oa[1]]))]));}else if(oa[0]==k.getID()){na(v._("{actor} \u0111\u00e3 th\u00eam b\u1ea1n v\u00e0 {subscriber2}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber2',ka(qa[oa[1]]))]));}else na(v._("{actor} \u0111\u00e3 th\u00eam {subscriber1} v\u00e0 {subscriber2}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber1',ka(qa[oa[0]])),v.param('subscriber2',ka(qa[oa[1]]))]));});}function da(ma,na,oa){var pa=[ma.author].concat(oa);o.getMulti(pa,function(qa){if(ma.author==k.getID()){na(v._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {subscriber3}.",[v.param('subscriber1',ka(qa[oa[0]])),v.param('subscriber2',ka(qa[oa[1]])),v.param('subscriber3',ka(qa[oa[2]]))]));}else if(oa[0]==k.getID()){na(v._("{actor} \u0111\u00e3 th\u00eam b\u1ea1n, {subscriber2} v\u00e0 {subscriber3}",[v.param('actor',ka(qa[ma.author])),v.param('subscriber2',ka(qa[oa[1]])),v.param('subscriber3',ka(qa[oa[2]]))]));}else na(v._("{actor} \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {subscriber3}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber1',ka(qa[oa[0]])),v.param('subscriber2',ka(qa[oa[1]])),v.param('subscriber3',ka(qa[oa[2]]))]));});}function ea(ma,na,oa){var pa=[ma.author].concat(oa);o.getMulti(pa,function(qa){function ra(ta){var ua=p.createElement('div',null,ta.map(function(va){return p.createElement('div',null,va.name);}));return (p.createElement(t,{alignH:'center',position:'above',tooltip:ua},v._({"*":"{num} ng\u01b0\u1eddi kh\u00e1c"},[v.param('num',ta.length,[0])])));}var sa=oa.map(function(ta){return qa[ta];});if(ma.author==k.getID()){na(v._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {more_people}.",[v.param('subscriber1',ka(sa[0])),v.param('subscriber2',ka(sa[1])),v.param('more_people',ra(sa.slice(2)))]));}else if(oa[0]==k.getID()){na(v._("{actor} \u0111\u00e3 th\u00eam b\u1ea1n, {subscriber2} v\u00e0 {more_people}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber2',ka(sa[1])),v.param('more_people',ra(sa.slice(2)))]));}else na(v._("{actor} \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {more_people}.",[v.param('actor',ka(qa[ma.author])),v.param('subscriber1',ka(sa[0])),v.param('subscriber2',ka(sa[1])),v.param('more_people',ra(sa.slice(2)))]));});}function fa(ma,na){var oa=[ma.author],pa=ma.log_message_data.removed_participants,qa;if(pa.length===1){qa=pa[0];oa.push(qa);}o.getMulti(oa,function(ra){var sa=ra[ma.author],ta=ra[qa];if(ma.author==k.getID()){if(!qa||qa==ma.author){na(v._("B\u1ea1n \u0111\u00e3 r\u1eddi kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n."));}else na(v._("B\u1ea1n \u0111\u00e3 x\u00f3a {name} kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('name',ka(ta))]));}else if(!qa||qa==ma.author){na(v._("{actor} \u0111\u00e3 r\u1eddi kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',ka(sa))]));}else if(qa==k.getID()){na(v._("{actor} \u0111\u00e3 x\u00f3a b\u1ea1n kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',ka(sa))]));}else na(v._("{actor} \u0111\u00e3 x\u00f3a {name} kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',ka(sa)),v.param('name',ka(ta))]));});}function ga(ma,na){var oa=ma.log_message_data.name;if(ma.author==k.getID()){if(oa){na(v._("B\u1ea1n \u0111\u00e3 \u0111\u1eb7t t\u00ean cu\u1ed9c tr\u00f2 chuy\u1ec7n: {name}.",[v.param('name',p.createElement('span',{className:"_5wzs"},p.createElement(s,{renderEmoticons:true,renderEmoji:true,text:oa})))]));}else na(v._("B\u1ea1n \u0111\u00e3 x\u00f3a t\u00ean cu\u1ed9c tr\u00f2 chuy\u1ec7n."));}else o.get(ma.author,function(pa){var qa=ka(pa);if(oa){na(v._("{actor} \u0111\u00e3 \u0111\u1eb7t t\u00ean cu\u1ed9c tr\u00f2 chuy\u1ec7n: {name}.",[v.param('actor',qa),v.param('name',p.createElement('span',{className:"_5wzs"},oa))]));}else na(v._("{actor} \u0111\u00e3 x\u00f3a t\u00ean cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',qa)]));});}function ha(ma,na){if(ma.author==k.getID()){if(ma.log_message_data.image){na(v._("B\u1ea1n \u0111\u00e3 thay \u0111\u1ed5i \u1ea3nh cu\u1ed9c tr\u00f2 chuy\u1ec7n."));}else na(v._("B\u1ea1n \u0111\u00e3 x\u00f3a \u1ea3nh cu\u1ed9c tr\u00f2 chuy\u1ec7n."));}else o.get(ma.author,function(oa){var pa=ka(oa);if(ma.log_message_data.image){na(v._("{actor} \u0111\u00e3 thay \u0111\u1ed5i \u1ea3nh cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',pa)]));}else na(v._("{actor} \u0111\u00e3 x\u00f3a \u1ea3nh cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[v.param('actor',pa)]));});}function ia(ma,na){if(ma.author==k.getID()){na(v._("B\u1ea1n \u0111\u00e3 thay \u0111\u1ed5i h\u00ecnh n\u1ec1n."));}else o.get(ma.author,function(oa){var pa=ka(oa);na(v._("{actor} \u0111\u00e3 thay \u0111\u1ed5i h\u00ecnh n\u1ec1n.",[v.param('actor',pa)]));});}function ja(ma,na){var oa=ma.log_message_body;if(ma.log_message_data.message_type===n.TURN_ON_PUSH&&oa&&oa.length>0)oa=v._("{admin-text-message} d\u00e0nh cho Messenger tr\u00ean thi\u1ebft b\u1ecb di \u0111\u1ed9ng.",[v.param('admin-text-message',oa.substring(0,oa.length-1))]);na(oa);}function ka(ma,na){var oa=ma.fbid,pa=j.constructEndpoint({id:oa});if(ma.href)return (p.createElement('a',{className:"_5wzt",href:ma.href,'data-hovercard':pa},na?ma.short_name:ma.name));return ma.name;}function la(ma){var na=ma.indexOf(k.getID());if(na>0){var oa=ma.filter(function(pa){return pa!==k.getID();});return [k.getID()].concat(oa);}return ma;}},null);
__d('MercuryLogMessage.react',['DOM','Event','ImmutableObject','MercuryLogMessageRenderer','MercuryConfig','MercuryLogMessageType','React','ReactDOM','cx','fbt','emptyFunction','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=n.PropTypes,v=n.createClass({displayName:'MercuryLogMessage',propTypes:{loadMoreMessages:u.func,maxWidth:u.number,message:u.instanceOf(j).isRequired,onImageLoad:u.func},getDefaultProps:function(){return {onImageLoad:r};},getInitialState:function(){return {messageText:null};},componentDidMount:function(){this.componentWillReceiveProps(this.props);},_renderErrorMessage:function(){return (n.createElement('a',{onClick:this._loadMoreMessages},q._("Hi\u1ec3n th\u1ecb t\u00edn nh\u1eafn tr\u01b0\u1edbc \u0111\u00f3.")));},_loadMoreMessages:function(){var w=this.props.loadMoreMessages&&this.props.loadMoreMessages();if(w){this.setState({messageText:this._renderErrorMessage()});}else{var x=q._("Kh\u00f4ng th\u1ec3 t\u00ecm \u0111\u01b0\u1ee3c tin nh\u1eafn tr\u01b0\u1edbc \u0111\u00f3.");this.setState({messageText:x});}},componentWillReceiveProps:function(w){if(w.message.log_message_type===m.SERVER_ERROR){this._loadMoreMessages();return;}k.renderText(w.message,(function(x){this.setState({messageText:x});}).bind(this));},shouldComponentUpdate:function(w,x){return (this.state.messageText!=x.messageText||w.maxWidth!==this.props.maxWidth);},componentDidUpdate:function(){var w=o.findDOMNode(this.refs.attachment);k.renderAttachmentLegacy(w,this.props.message);h.scry(w,'img').forEach((function(x){var y=i.listen(x,'load',(function(){this.props.onImageLoad(x);y.remove();}).bind(this));}).bind(this));},render:function(){return (n.createElement('div',babelHelpers._extends({},this.props,{className:t(this.props.className,"_5ye6"),style:babelHelpers._extends({},this.props.style,this._getStyle()),title:s(new Date(this.props.message.timestamp),'g:ia')}),l.ChatTabMessengerStyle?null:k.renderIcon(this.props.message),n.createElement('div',{className:"_5ye7"},l.ChatTabMessengerStyle?k.renderIcon(this.props.message):null,this.state.messageText),n.createElement('div',{className:"_5ye8",ref:'attachment'})));},_getStyle:function(){return this.props.maxWidth?{maxWidth:this.props.maxWidth}:null;}});f.exports=v;},null);
__d('MercuryShareAttachmentReactShape',['React'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h.PropTypes,j=i.shape({share_id:i.string,description:i.string,media:i.shape({image:i.string,image_size:i.shape({height:i.number,width:i.number}),duration:i.number,playable:i.bool,source:i.string}),source:i.string,style_list:i.arrayOf(i.string),subattachments:i.array,target:i.object,title:i.string,properties:i.object,uri:i.string,action_links:i.array}).isRequired;f.exports=j;},null);
__d('MNCommerceAttachmentUtils',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={shouldRenderMap:function(i,j){return (!!i&&i.latitude&&i.longitude&&!!j);},getDestinationAddressString:function(i){if(!i)return null;var j=i.street_1;if(!!i.city)j=j+' '+i.city+',';if(!!i.state)j=j+' '+i.state;return j;}};f.exports=h;},null);
__d('MercuryFallbackShareAttachmentSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryFallbackShareAttachmentSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=k._("B\u1ea1n \u0111\u00e3 chia s\u1ebb m\u1ed9t li\u00ean k\u1ebft.");}else o=k._("{sender name} \u0111\u00e3 chia s\u1ebb m\u1ed9t li\u00ean k\u1ebft.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/messaging/docs/generic.png')}),o));}});f.exports=n;},null);
__d('MercuryAttachmentSnippetType',['keyMirror'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i=h({PHOTO:null,GIF:null,VIDEO:null,AUDIO_CLIP:null,STICKER:null,ORION:null,SHARE:null,ERROR:null,MIXED:null});f.exports=i;},null);
__d('MercuryAttachmentSnippetRenderer',['MercuryAttachmentSnippetType','MercuryAttachmentType','MercuryAudioType','MercuryConstants','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={getAttachmentSnippetType:function(n){if(this._hasOnlyPhotos(n))return h.PHOTO;if(this._hasOnlyAnimatedImages(n))return h.GIF;if(this._hasOnlyVideo(n))return h.VIDEO;if(this._hasAudioClip(n))return h.AUDIO_CLIP;if(this._hasSticker(n))return h.STICKER;if(this._hasOrion(n))return h.ORION;if(this._hasShare(n))return h.SHARE;if(this._hasError(n))return h.ERROR;return h.MIXED;},renderAttachmentSnippetText:function(n,o,p,q){switch(n){case h.PHOTO:return this._renderPhotoAttachmentSnippetText(o,p,this._getPhotoAttachments(q));case h.GIF:return this._renderAnimatedImagesAttachmentSnippetText(o,p,this._getAnimatedImageAttachments(q));case h.VIDEO:return o?l._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t video."):l._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t video.",[l.param('sender name',p)]);case h.AUDIO_CLIP:return o?l._("B\u1ea1n \u0111\u00e3 g\u1eedi tin nh\u1eafn tho\u1ea1i."):l._("{name} \u0111\u00e3 g\u1eedi m\u1ed9t tin nh\u1eafn b\u1eb1ng gi\u1ecdng n\u00f3i.",[l.param('name',p)]);case h.STICKER:return o?l._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n."):l._("{name} \u0111\u00e3 g\u1eedi m\u1ed9t nh\u00e3n d\u00e1n.",[l.param('name',p)]);case h.ORION:if(q&&q[0]&&q[0].metadata)return this.renderOrionSnippetText(o,p,q[0].metadata,'');break;case h.SHARE:return o?l._("B\u1ea1n \u0111\u00e3 chia s\u1ebb m\u1ed9t li\u00ean k\u1ebft."):l._("{sender name} \u0111\u00e3 chia s\u1ebb m\u1ed9t li\u00ean k\u1ebft.",[l.param('sender name',p)]);case h.ERROR:return o?l._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p \u0111\u00ednh k\u00e8m."):l._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p \u0111\u00ednh k\u00e8m.",[l.param('sender name',p)]);default:return '';}},_hasOnlyPhotos:function(n){return this._getPhotoAttachments(n).length===n.length;},_hasOnlyAnimatedImages:function(n){return this._getAnimatedImageAttachments(n).length===n.length;},_hasOnlyVideo:function(n){return (n.length===1&&n[0].attach_type===i.VIDEO);},_hasAudioClip:function(n){var o=n[0].metadata&&n[0].metadata.type;return (n.length===1&&(o===j.AudioClip||o===j.VoiceMessageWithTranscript));},_hasSticker:function(n){return (n.length===1&&n[0].attach_type===i.STICKER);},_hasOrion:function(n){return this._hasSingleAttachmentOfShareDataType(n,k.MercurySupportedShareType.FB_ORION);},_hasSingleAttachmentOfShareDataType:function(n,o){return (n.length===1&&n[0].share_data_type===o);},_hasShare:function(n){return (n.length===1&&n[0].attach_type===i.SHARE);},_hasError:function(n){return (n.length===1&&n[0].attach_type===i.ERROR);},_getPhotoAttachments:function(n){if(!n)return [];return n.filter(function(o){return o.attach_type===i.PHOTO;});},_getAnimatedImageAttachments:function(n){if(!n)return [];return n.filter(function(o){return o.attach_type===i.ANIMATED_IMAGE;});},_renderPhotoAttachmentSnippetText:function(n,o,p){if(p.length===1){if(n){return l._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh.");}else return l._("{name} \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh.",[l.param('name',o)]);}else if(n){return l._({"*":"B\u1ea1n \u0111\u00e3 g\u1eedi {num_photos} \u1ea3nh."},[l.param('num_photos',p.length,[0])]);}else return l._({"*":"{name} \u0111\u00e3 g\u1eedi {num_photos} \u1ea3nh."},[l.param('name',o),l.param('num_photos',p.length,[0])]);},_renderAnimatedImagesAttachmentSnippetText:function(n,o,p){if(p.length===1){if(n){return l._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p GIF.");}else return l._("{name} \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p GIF.",[l.param('name',o)]);}else if(n){return l._("B\u1ea1n \u0111\u00e3 g\u1eedi {num_animated_images} GIF.",[l.param('num_animated_images',p.length)]);}else return l._("{name} \u0111\u00e3 g\u1eedi {num_animated_images} GIF.",[l.param('name',o),l.param('num_animated_images',p.length)]);},renderOrionSnippetText:function(n,o,p,q,r,s,t){if(n&&!t){return l._("B\u1ea1n \u0111\u00e3 g\u1eedi {amount} {currency}.",[l.param('currency',p),l.param('amount',q)]);}else if(n&&t){return l._("You sent {receiver name} {currency}{amount}.",[l.param('receiver name',s),l.param('currency',p),l.param('amount',q)]);}else if(!r&&!n&&s){return l._("{sender name} sent {receiver name} {currency}{amount}.",[l.param('sender name',o),l.param('receiver name',s),l.param('currency',p),l.param('amount',q)]);}else return l._("{name} \u0111\u00e3 g\u1eedi cho b\u1ea1n {amount} {currency}.",[l.param('name',o),l.param('currency',p),l.param('amount',q)]);}};f.exports=m;},null);
__d('P2PMercuryAttachmentSnippet.react',['CurrentUser','Image.react','MercuryAttachmentSnippetRenderer','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'P2PMercuryAttachment',propTypes:{amount:n.string,currency:n.string,groupThreadFBID:n.string,receiver:n.object,sender:n.object},getDefaultProps:function(){return {sender:{},receiver:{}};},render:function(){var p=j.renderOrionSnippetText(h.getID()===this.props.sender.id,this.props.sender.name,this.props.currency,this.props.amount,h.getID()===this.props.receiver.id,this.props.receiver.name,!!this.props.groupThreadFBID);return (k.createElement('span',{className:"uiIconText _3l6h _3_io"},k.createElement(i,{height:12,src:m('/images/p2p/attachment-snippet-icon.png'),width:12}),p));}});f.exports=o;},null);
__d('P2PMercuryShareAttachmentSnippet.react',['MercuryShareAttachmentReactShape','P2PMercuryAttachmentSnippet.react','React'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=j.createClass({displayName:'P2PMercuryShareAttachmentSnippet',propTypes:{attachment:h},render:function(){var l=this.props.attachment?this.props.attachment.target:{};return (j.createElement(i,l));}});f.exports=k;},null);
__d('MessengerMomentsAppSnippet.react',['Image.react','MercuryShareAttachmentReactShape','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'MessengerMomentsAppSnippet',propTypes:{attachment:i,isSenderViewer:n.bool,senderName:n.string},render:function(){var p=this.props.attachment;if(!p||!p.target)return null;var q,r=p.target.photo_count;if(this.props.isViewerSender){if(r==1){q=l._("You sent 1 photo.");}else q=l._("You sent {photo_count} photos.",[l.param('photo_count',r)]);}else if(r==1){q=l._("{sender name} sent 1 photo.",[l.param('sender name',this.props.senderName)]);}else q=l._("{sender name} sent {photo_count} photos.",[l.param('sender name',this.props.senderName),l.param('photo_count',r)]);return (j.createElement('span',{className:"uiIconText _3l6h"},j.createElement(h,{src:m('/images/messaging/docs/generic.png')}),q));}});f.exports=o;},null);
__d('MercuryPhotoShareSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryPhotoShareSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?k._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh."):k._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t \u1ea3nh.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/icons/photo.gif')}),o));}});f.exports=n;},null);
__d('MercuryVideoShareSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryVideoShareSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?k._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t video."):k._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t video.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/icons/video.gif')}),o));}});f.exports=n;},null);
__d('MercuryMessageLocationShareAttachmentSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryMessageLocationShareAttachmentSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o;if(this.props.isViewerSender){o=k._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t v\u1ecb tr\u00ed.");}else o=k._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t v\u1ecb tr\u00ed.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/messaging/location/location.png')}),o));}});f.exports=n;},null);
__d('MercuryAnimatedShareSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryAnimatedShareSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?k._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p GIF."):k._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t t\u1ec7p GIF.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/icons/photo.gif')}),o));}});f.exports=n;},null);
__d('MercuryShareStyleMap',['JSResource','Map','MercuryConfig','MercuryShareAttachmentRenderLocations','MNCommerceAttachmentUtils','StoryAttachmentStyle','cx','emptyFunction','MercuryFallbackShareAttachmentSnippet.react','P2PMercuryShareAttachmentSnippet.react','MessengerMomentsAppSnippet.react','MercuryPhotoShareSnippet.react','MercuryVideoShareSnippet.react','MercuryMessageLocationShareAttachmentSnippet.react','MercuryAnimatedShareSnippet.react','MercuryProductItemShareSnippet.react'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=new i();p.set(m.FALLBACK,{componentName:'MercuryFallbackShareAttachment.react',componentLoader:h('MercuryFallbackShareAttachment.react'),getSnippetComponent:function(){return c('MercuryFallbackShareAttachmentSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(r,s){return (r.share.media.image&&s);}});p.set(m.EVENT,{componentName:'MercuryEventShareAttachment.react',componentLoader:h('MercuryEventShareAttachment.react'),getSnippetComponent:function(){return c('MercuryFallbackShareAttachmentSnippet.react');}});p.set(m.ORION,{componentName:'P2PMercuryShareAttachment.react',componentLoader:h('P2PMercuryShareAttachment.react'),getSnippetComponent:function(){return c('P2PMercuryShareAttachmentSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d _3djc"]])});if(j.WWWMessengerCommerceGK){p.set(m.RETAIL_RECEIPT,{componentName:'MNCommerceReceiptMercuryShareAttachment.react',componentLoader:h('MNCommerceReceiptMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]])});p.set(m.RETAIL_CANCELLATION,{componentName:'MNCommerceCancelationMercuryShareAttachment.react',componentLoader:h('MNCommerceCancelationMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]])});p.set(m.RETAIL_SHIPMENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:h('MNCommerceShippingMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(r){var s=r.share&&r.share.target&&r.share.target;return s&&l.shouldRenderMap(s.destination,s.estimated_delivery_display_time);}});p.set(m.RETAIL_SHIPMENT_TRACKING_EVENT,{componentName:'MNCommerceShippingMercuryShareAttachment.react',componentLoader:h('MNCommerceShippingMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]])});p.set(m.RETAIL_NOW_IN_STOCK,{componentName:'MNCommerceProductSubscriptionMercuryShareAttachment.react',componentLoader:h('MNCommerceProductSubscriptionMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:o.thatReturnsTrue});p.set(m.RETAIL_PROMOTION,{componentName:'MNCommercePromotionMercuryShareAttachment.react',componentLoader:h('MNCommercePromotionMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(r){var s=r.share.target.items;return s&&s.length&&s[0].thumb_url;}});if(j.WWWMessengerHScrollGK)p.set(m.H_SCROLL,{componentName:'MNCommerceHScrollMercuryShareAttachment.react',componentLoader:h('MNCommerceHScrollMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:o.thatReturnsTrue});}if(j.WWWMessengerAirlinesGK)p.set(m.AIRLINE_FLIGHT_RESCHEDULE_UPDATE,{componentName:'MNAirlineUpdateMercuryShareAttachment.react',componentLoader:h('MNAirlineUpdateMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:o.thatReturnsFalse});if(j.WWWMessengerMoneyPennyGK)p.set(m.RETAIL_AGENT_ITEM_SUGGESTION,{componentName:'MNCommerceAgentItemSuggestionMercuryShareAttachment.react',componentLoader:h('MNCommerceAgentItemSuggestionMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:function(r){return r.share.target.thumb_url;}});if(j.MomentsMessengerWWWGK)p.set(m.MOMENTS_APP_INVITATION,{componentName:'MessengerMomentsAppShareAttachment.react',componentLoader:h('MessengerMomentsAppShareAttachment.react'),getSnippetComponent:function(){return c('MessengerMomentsAppSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:o.thatReturnsTrue});if(j.MercuryGenieRendering)p.set(m.GENIE_MESSAGE,{componentName:'GenieMessageShareAttachment.react',componentLoader:h('GenieMessageShareAttachment.react'),cx:new i([[k.MESSENGER,"_2wrf"]]),getSnippetComponent:function(){return c('MercuryFallbackShareAttachmentSnippet.react');},requiresNoBubbleTail:o.thatReturnsFalse});p.set(m.MOVIE_BOT_MOVIE_LIST,{componentName:'MovieBotMovieListShareAttachment.react',componentLoader:h('MovieBotMovieListShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:o.thatReturnsFalse});p.set(m.MOVIE_BOT_MOVIE_SHOWTIME_LIST,{componentName:'MovieBotMovieShowtimeListShareAttachment.react',componentLoader:h('MovieBotMovieShowtimeListShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:o.thatReturnsFalse});p.set(m.SHARE_LARGE_IMAGE,{componentName:'MercuryShareLargeImageAttachment.react',componentLoader:h('MercuryShareLargeImageAttachment.react'),getSnippetComponent:function(){return c('MercuryPhotoShareSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:o.thatReturnsTrue,unwrapInStory:o.thatReturnsTrue});p.set(m.IMAGE_SHARE,{componentName:'MercuryImageShareAttachment.react',componentLoader:h('MercuryImageShareAttachment.react'),getSnippetComponent:function(){return c('MercuryPhotoShareSnippet.react');},cx:null,requiresNoBubbleTail:o.thatReturnsTrue,unwrapInStory:o.thatReturnsTrue});p.set(m.VIDEO,{componentName:'MercuryVideoShareAttachment.react',componentLoader:h('MercuryVideoShareAttachment.react'),getSnippetComponent:function(){return c('MercuryVideoShareSnippet.react');},cx:null,requiresNoBubbleTail:o.thatReturnsTrue,unwrapInStory:o.thatReturnsTrue});p.set(m.MESSAGE_LOCATION,{componentName:'MercuryMessageLocationShareAttachment.react',componentLoader:h('MercuryMessageLocationShareAttachment.react'),getSnippetComponent:function(){return c('MercuryMessageLocationShareAttachmentSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:function(r,s){return (r.share.media.image&&s);}});p.set(m.ANIMATED_IMAGE_SHARE,{componentName:'MercuryAnimatedShareAttachment.react',componentLoader:h('MercuryAnimatedShareAttachment.react'),getSnippetComponent:function(){return c('MercuryAnimatedShareSnippet.react');},cx:null,requiresNoBubbleTail:o.thatReturnsTrue,unwrapInStory:o.thatReturnsFalse});p.set(m.GROUP_SELL_PRODUCT_ITEM,{componentName:'MercuryProductItemShareAttachment.react',componentLoader:h('MercuryProductItemShareAttachment.react'),getSnippetComponent:function(){return c('MercuryProductItemShareSnippet.react');},cx:new i([[k.MESSENGER,"_5i_d"]]),requiresNoBubbleTail:null,unwrapInStory:o.thatReturnsTrue});p.set(m.FINANCIAL_BILL_PAYMENT_REQUEST,{componentName:'MNBillPaymentRequestMercuryShareAttachment.react',componentLoader:h('MNBillPaymentRequestMercuryShareAttachment.react'),cx:new i([[k.MESSENGER,"_5i_d _205d"]]),requiresNoBubbleTail:o.thatReturnsFalse});var q={getStyleFactory:function(r){if(!r||!r.style_list)return null;if(r.style_list[0]===m.ATTACHED_STORY){var s=r.subattachments,t=s&&s.length?s[0].style_list:[],u=this._getStyleMapEntry(t);if(u&&u.unwrapInStory&&u.unwrapInStory())return {attachment:s[0],factory:u};}var v=this._getStyleMapEntry(r.style_list);if(!v)return null;return {attachment:r,factory:v};},_getStyleMapEntry:function(r){for(var s=0;s<r.length;s++){var t=p.get(r[s]);if(t)return t;}return null;}};f.exports=q;},null);
__d('MercuryShareAttachment.react',['BootloadedComponent.react','MercuryShareAttachmentReactShape','MercuryShareAttachmentRenderLocations','MercuryShareStyleMap','React','ReactDOM','StoryAttachmentStyle','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=l.PropTypes,s=l.createClass({displayName:'MercuryShareAttachment',propTypes:{attachment:i,location:r.oneOf(j.getValues()),onComponentLoaded:r.func.isRequired,thread_id:r.string.isRequired},getDefaultProps:function(){return {onComponentLoaded:p};},componentDidMount:function(){this._handleComponentLoad();},_renderComponent:function(t,u){if(this.props.location===j.MESSENGER)u=q("_52mr _2poz _ui9",u);return u?l.createElement('div',{className:u},t):t;},render:function(){var t=k.getStyleFactory(this.props.attachment);if(!t)return null;var u=t.attachment,v=t.factory;return (this._renderComponent(l.createElement(h,babelHelpers._extends({},this.props,{attachment:u,bootloadLoader:v.componentLoader,bootloadPlaceholder:l.createElement('div',null),module:v.componentName,onComponentLoad:this._handleComponentLoad})),v.cx&&v.cx.get(this.props.location)));},_handleComponentLoad:function(){var t=m.findDOMNode(this).children,u=0;for(var v=0;v<t.length;v++)u+=t[v].offsetHeight;this.props.onComponentLoaded(u);}});f.exports=s;},null);
__d("XStickerAssetController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/asset\/",{sticker_id:{type:"Int",required:true},image_type:{type:"Enum",defaultValue:"BestEffortImage",enumType:1}});},null,{});
__d('MessengerHotLikeUtils',['StickerAssetType','StickerConstants','XStickerAssetController'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k={SizeTimes:{small:1000,medium:2000,large:3000},getStickerIDForTime:function(l){var m=null;switch(true){case l<this.SizeTimes.small:m=i.HOT_LIKE_SMALL_STICKER_ID;break;case l<this.SizeTimes.medium:m=i.HOT_LIKE_MEDIUM_STICKER_ID;break;case l<this.SizeTimes.large:m=i.HOT_LIKE_LARGE_STICKER_ID;break;}return m;},getGrowCoefficientForSince:function(l){return Math.min(1,(Date.now()-l)/this.SizeTimes.large);},getMetadataForHotLike:function(l){var m;switch(l){case i.HOT_LIKE_LARGE_STICKER_ID:m=120;break;case i.HOT_LIKE_MEDIUM_STICKER_ID:m=84;break;case i.HOT_LIKE_SMALL_STICKER_ID:m=35;break;}return m?{height:m,width:m}:undefined;},getPreviewURI:function(){return j.getURIBuilder().setInt('sticker_id',i.HOT_LIKE_LARGE_STICKER_ID).setEnum('image_type',h.IMAGE).getURI().toString();},getURIWithID:function(l){return j.getURIBuilder().setInt('sticker_id',l).setEnum('image_type',h.IMAGE).getURI().toString();}};f.exports=k;},null);
__d("XStickerPackImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/{pack_id}\/images\/",{pack_id:{type:"Int",required:true},sticker_size:{type:"Int",defaultValue:50}});},null,{});
__d("XStickersAddPackController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/addpack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"},is_promoted:{type:"Bool",defaultValue:false}});},null,{});
__d("XStickersRemovePackController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/removepack\/",{pack_id:{type:"Int"},size:{type:"String"},redirect_uri:{type:"String"}});},null,{});
__d("XStickerStatePackDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/state\/pack\/",{pack_id:{type:"Int",required:true}});},null,{});
__d("XStickerQueryImagesController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/query\/images\/",{query:{type:"String",required:true},sticker_interface:{type:"String"}});},null,{});
__d('StickerServerRequests',['AsyncRequest','Promise','XStickerPackImagesController','XStickersAddPackController','XStickersRemovePackController','XStickerStateInitialDataController','XStickerStatePackDataController','XStickerStateStoreDataController','XStickerQueryImagesController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q={addPack:function(s,t,u){var v=k.getURIBuilder().setInt('pack_id',s).setBool('is_promoted',t).getURI();new h(v).setHandler(function(w){return u(w.payload);}).send();},removePack:function(s,t){var u=l.getURIBuilder().setInt('pack_id',s).getURI();new h(u).setHandler(function(v){return t(v.payload);}).send();},getStickersForPack:function(s,t){var u=j.getURIBuilder().setInt('pack_id',s).setInt('sticker_size',t).getURI();return new i(function(v,w){return (new h().setURI(u).setMethod('GET').setReadOnly(true).setHandler(function(x){return v(x.payload);}).send());});},getStickersForQuery:function(s,t,u){new h().setURI(p.getURIBuilder().setString('query',s).setString('sticker_interface',t).getURI()).setMethod('GET').setReadOnly(true).setHandler(function(v){return u(v);}).send();},fetchTrayData:function(s){return r(m.getURIBuilder().getURI(),s,true);},fetchStoreData:function(s){return r(o.getURIBuilder().getURI(),s);},fetchPackData:function(s,t){return r(n.getURIBuilder().setInt('pack_id',s).getURI(),t);}};function r(s,t,u){return new i(function(v,w){return (new h(s).setHandler(function(x){return v(x.getPayload());}).setAllowCrossPageTransition(u).send());}).then(t);}f.exports=q;},null);
__d('StickerImages',['StickerServerRequests'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={},j={},k={},l={getStickerTagsData:function(){return k;},requestStickersForPack:function(m,n,o){if(!m)return;if(!j[m]){j[m]=h.getStickersForPack(m,n);j[m].then((function(p){p.forEach((function(q){return this.cacheSticker(q);}).bind(this));}).bind(this));}j[m].then(function(p){return o(p);});},cacheSticker:function(m){i[m.id]=m;},getSticker:function(m){return i[m];}};f.exports=l;},null);
__d("StickerUtils",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={getScaledDimensions:function(i,j,k){var l,m,n;if(j>i){n=k/j;l=i*n;m=j*n;}else{n=k/i;l=i*n;m=j*n;}return {height:Math.round(l),width:Math.round(m)};},capitalizeWords:function(i){var j=i.split(" ");for(var k=0;k<j.length;k++){var l=j[k].charAt(0).toUpperCase();j[k]=l+j[k].substr(1);}return j.join(" ");}};f.exports=h;},null);
__d('MercuryAttachmentRenderer',['MercuryAttachmentAudioClip.react','ChatAttachmentAttribution.react','ImmutableObject','MercuryAttachment','MercuryAttachmentFile.react','MercuryAttachmentPhoto.react','MercuryAttachmentPhotoGrid.react','MercuryAttachmentVideo.react','MercuryMessageInfo','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessengerHotLikeUtils','React','Sticker.react','StickerAssetType','StickerConstants','StickerImages','StickerUtils','cx','XStickerAssetController'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa){'use strict';if(c.__markCompiled)c.__markCompiled();var ba={renderFile:function(ca,da){return (t.createElement(l,{name:ca.name,open_url:da?null:ca.open_url,rel:ca.rel,type:ca.icon_type,url:ca.url}));},renderAudioClip:function(ca,da){var ea=ca.metadata.duration/1000,fa=100,ga=da?160:400,ha=100;if(ea>=5)ha=(1-Math.pow(10,(ea-5)/-30))*(ga-fa)+fa;return [t.createElement(h,{duration:ca.metadata.duration/1000,key:'audioClip',rootClassName:k.hasAttribution(ca)?"_4yjw":'',showHelp:false,src:ca.url,width:ha}),t.createElement(i,{attachment:new j(ca),key:'audioAttribution'})];},renderVideo:function(ca,da,ea,fa){var ga=da?ca.metadata.chat_size:ca.metadata.inbox_size,ha=da?ca.metadata.chat_preview:ca.metadata.inbox_preview;return (t.createElement(o,{attachment:new j(ca),duration:ca.metadata.duration,isInbound:p.isInbound(ea),isChat:da,name:ca.name,onAttachmentLoad:fa,pageID:ca.metadata.pageid,thumbSize:ga,thumbnail:ha,videoSize:ca.metadata.dimensions,videoID:ca.metadata.fbid,videoURI:ca.url}));},constructStickerComponent:function(ca,da,ea,fa,ga,ha){var ia=fa?'chatScrolled/':'messengerScrolled/';ia+=ca.thread_id;if(!da){da=s.getMetadataForHotLike(ca.sticker_id);if(!da){var ja=x.getSticker(ca.sticker_id),ka=Object.assign({},ja),la=ja?y.getScaledDimensions(ja.height,ja.width,w.THREAD_SIZE):{height:w.THREAD_SIZE,width:w.THREAD_SIZE},ma=la.height,na=la.width;ka.height=ma;ka.width=na;ka.stickerID=ca.sticker_id;ka.spriteURI='';ka.spriteURI2x='';ka.paddedSpriteURI='';ka.paddedSpriteURI2x='';da=ka;}}var oa=null;if(da.stickerID){oa=da.stickerID.toString();}else if(ca.sticker_id)oa=ca.sticker_id.toString();var pa=null;if(da.packID)pa=da.packID.toString();var qa=aa.getURIBuilder().setInt('sticker_id',oa),ra=null,sa=null;if(window.devicePixelRatio&&window.devicePixelRatio>1){sa=da.paddedSpriteURI2x;ra=da.spriteURI2x;}else{sa=da.paddedSpriteURI;ra=da.spriteURI;}return (t.createElement(u,{animationTrigger:'hover',className:'mvs',customLike:ga,frameCount:da.frameCount||1,frameRate:da.frameRate||83,framesPerCol:da.framesPerCol||1,framesPerRow:da.framesPerRow||1,onAttachmentLoad:ha,onStickerClick:ea,packID:pa,paddedSpriteURI:sa,sourceHeight:da.height,sourceURI:qa.setEnum('image_type',v.IMAGE).getURI().toString(),sourceWidth:da.width,spriteURI:ra,stickerID:oa,subscribedThreadID:ia}));},renderPhotoAttachments:function(ca,da,ea,fa){var ga=ca.length;if(!ga)return null;if(ga===1){var ha=ca[0],ia=k.resizeContain({width:ea,height:ea},{width:ha.preview_width,height:ha.preview_height});return (t.createElement('div',{className:"_55pk"+(' '+"_59go")+(k.hasAttribution(ha)?' '+"_4yjw":'')},t.createElement(m,{image:ha,width:ia.width,height:ia.height,message:da,onAttachmentLoad:fa}),t.createElement(i,{attachment:new j(ca[0])})));}return (t.createElement('div',{className:"_55pk"},t.createElement(n,{images:ca,size:ea,message:da})));},sortAttachmentsStablyByType:function(ca){var da=[k.isPhotoAttachment,k.isShareAttachment,k.isFileAttachment,k.isErrorAttachment];da.push(function(fa){return true;});var ea=da.map(function(fa){return [];});ca.forEach(function(fa){for(var ga=0;ga<da.length;ga++)if(da[ga](fa)){ea[ga].push(fa);break;}});return Array.prototype.concat.apply([],ea);},constructStoryBasedShareAttachment:function(ca,da,ea,fa,ga){var ha=ea?r.CHAT:r.WEB_INBOX;return (t.createElement('div',{className:!!ca.body&&ea?"_r38":''},t.createElement(q,{attachment:da.share,location:ha,maxWidth:fa,onComponentLoaded:ga,thread_id:ca.thread_id})));}};f.exports=ba;},null);
__d('SoundPlayer',['Arbiter','Flash','URI','createArrayFromMixed'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={},m=null,n=false,o='so_sound_player',p='/swf/SoundPlayer.swf?v=1',q=null,r={};function s(ca){var da=new j(ca);if(!da.getDomain())return new j(window.location.href).setPath(da.getPath()).toString();return ca;}function t(ca){var da=new j(ca).getPath();if(/\.mp3$/.test(da))return 'audio/mpeg';if(/\.og[ga]$/.test(da))return 'audio/ogg';return '';}function u(){if(!q){var ca=document.createElement('audio');if(!ca||!ca.canPlayType)return null;ca.setAttribute('preload','auto');document.body.appendChild(ca);q=ca;}return q;}function v(ca){return r[ca];}function w(ca,da){r[ca]=da;}function x(){var ca=document[o]||window[o];if(ca)if(!ca.playSound&&ca.length)ca=ca[0];return ca&&ca.playSound&&ca.loopSound?ca:null;}function y(){return n;}function z(ca,da,ea){m={path:ca,sync:da,loop:ea};}function aa(){n=true;if(m){var ca=x();if(m.loop){ca.loopSound(m.path,m.sync);}else ca.playSound(m.path,m.sync);}}var ba={init:function(ca){ca=k(ca);var da;for(var ea=0;ea<ca.length;++ea){da=ca[ea];if(l[da])return;}var fa=u();for(ea=0;fa&&ea<ca.length;++ea){da=ca[ea];if(fa.canPlayType(da)){l[da]=true;return;}}l['audio/mpeg']=true;if(x())return;try{h.registerCallback(aa,['sound/player_ready','sound/ready']);var ha=document.createElement('div');ha.id='sound_player_holder';document.body.appendChild(ha);var ia=window[o]=i.embed(p,ha,{allowscriptaccess:'always',wmode:'transparent'},{swf_id:o});ia.setAttribute('id',o);ia.setAttribute('width','1px');ia.setAttribute('height','1px');h.inform('sound/player_ready');}catch(ga){}},createAndPlayNewNative:function(ca,da){var ea=document.createElement('audio');ea.setAttribute('preload','auto');document.body.appendChild(ea);ea.src=s(ca);if(da){ea.setAttribute('loop','');}else ea.removeAttribute('loop');ea.play();w(ca,ea);return;},play:function(ca,da){ca=k(ca);var ea=u(),fa,ga;for(var ha=0;ea&&ha<ca.length;++ha){fa=ca[ha];var ia=v(fa);if(ia){if(da){ia.setAttribute('loop','');}else ia.removeAttribute('loop');ia.play();return;}ga=t(fa);if(!ea.canPlayType(ga))continue;ba.init([ga]);ba.createAndPlayNewNative(fa,da);return;}for(ha=0;ha<ca.length;++ha){fa=s(ca[ha]);ga=t(fa);if(ga!='audio/mpeg')continue;ba.init([ga]);var ja=x();if(!y()){z(fa,true,da);return;}else if(ja){if(da){ja.loopSound(fa,true);}else ja.playSound(fa,true);return;}}},stop:function(ca){ca=k(ca);for(var da=0;da<ca.length;++da){var ea=s(ca[da]),fa=v(ca[da]),ga=x();if(fa&&fa.src==ea){fa.pause();fa.removeAttribute('src');fa.src=ea;}else ga&&ga.stopSound(ea);}}};f.exports=ba;},null);
__d('HotLikeSound',['MercuryConfig','SoundPlayer','StickerConstants'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();i.init(['audio/ogg','audio/mpeg']);var k=[h['sound.hot_like_grow_mp3_url'],h['sound.hot_like_grow_ogg_url']],l=[h['sound.hot_like_pop_mp3_url'],h['sound.hot_like_pop_ogg_url']],m=[h['sound.hot_like_outgoing_small_mp3_url'],h['sound.hot_like_outgoing_small_ogg_url']],n=[h['sound.hot_like_outgoing_medium_mp3_url'],h['sound.hot_like_outgoing_medium_ogg_url']],o=[h['sound.hot_like_outgoing_large_mp3_url'],h['sound.hot_like_outgoing_large_ogg_url']],p=function(){return false;},q={setCheckSoundEnabledFunc:function(r){p=r;},start:function(){this._play(k);},stop:function(){i.stop(k);},pop:function(){this.stop();this._play(l);},snap:function(r){this.stop();if(r===j.HOT_LIKE_SMALL_STICKER_ID)this._play(m);if(r===j.HOT_LIKE_MEDIUM_STICKER_ID)this._play(n);if(r===j.HOT_LIKE_LARGE_STICKER_ID)this._play(o);},_play:function(r){if(p())i.play(r);}};f.exports=q;},null);
__d('MessengerHotLikePreviewEvents',['mixInEventEmitter'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={START:'start',STOP:'stop',POP:'pop',REMOVE:'remove',FINISH_ANIMATION:'finish_animation'};h(i,{start:true,stop:true,pop:true,remove:'remove',finish_animation:'finish_animation'});f.exports=i;},null);
__d('MessengerHotLikePreview.react',['Animation','HotLikeSound','Image.react','MessengerHotLikePreviewEvents','MessengerHotLikeUtils','React','ReactDOM','StickerConstants','SubscriptionsHandler','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'MessengerHotLikePreview',propTypes:{customLike:r.string,since:r.number},componentDidMount:function(){this._subscriptions=new p();this._subscriptions.addSubscriptions(k.addListener(k.STOP,this._snapToStickerSize),k.addListener(k.POP,this._pop));i.start();this._growthAnimation=new h(n.findDOMNode(this)).to('width',80).to('height',80).duration(3000).go();this._setUpRotationAnimation();},componentWillUnmount:function(){this._subscriptions&&this._subscriptions.release();},render:function(){if(this.props.customLike)return (m.createElement('div',{className:"_4a9g _383m"},m.createElement(j,{src:this.props.customLike})));return (m.createElement('div',{className:"_4a9g _576q"}));},_setUpRotationAnimation:function(){this._rotateAnimation=new h(n.findDOMNode(this));this._rotateHotLike(-2,2,150,1000);this._rotateHotLike(-4,4,100,1000);this._rotateHotLike(-10,10,75,1000);this._rotateAnimation.go();},_rotateHotLike:function(t,u,v,w){var x=Math.floor(w/v),y=null;for(var z=0;z<x;z++){y=z%2?t:u;this._rotateAnimation.to('rotateZ',y).duration(v).checkpoint();}},_snapToStickerSize:function(t){if(this._snapped)return;this._snapped=true;var u=Date.now()-this.props.since,v=l.getStickerIDForTime(u);if(v){i.snap(v);var w=l.getMetadataForHotLike(v);this._rotateAnimation.stop();var x=30,y=-10;if(v===o.HOT_LIKE_SMALL_STICKER_ID){x=0;y=0;}this._growthAnimation.stop().to('width',w.width*1.2).to('height',w.height*1.2).to('rotateZ',x).duration(100).checkpoint().to('width',w.width*.9).to('height',w.height*.9).to('rotateZ',y).duration(100).checkpoint().to('width',w.width).to('height',w.height).to('rotateZ',0).duration(100).ondone(function(){k.emit(k.FINISH_ANIMATION,t,v);}).go();}},_pop:function(t){i.pop();this._growthAnimation.stop().to('width',0).to('height',0).duration(100).ondone(function(){k.emit(k.REMOVE,t);}).go();}});f.exports=s;},null);
__d('MercuryAttachments.react',['MercuryAttachmentRenderer','ImmutableObject','MercuryAttachment','MercuryAttachmentMalicious.react','MercuryAttachmentError.react','MessengerHotLikePreview.react','React','SubscriptionsHandler','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=n.PropTypes,r=n.createClass({displayName:'MercuryAttachments',propTypes:{attachments:q.array.isRequired,customLike:q.string,maxWidth:q.number.isRequired,message:q.instanceOf(i).isRequired,isChat:q.bool,onAttachmentLoad:q.func,onStickerClick:q.func},getDefaultProps:function(){return {isChat:false,onAttachmentLoad:p,onStickerClick:p};},_onAttachmentLoad:function(s){this.props.onAttachmentLoad&&this.props.onAttachmentLoad(s);},_subscriptionsHandler:null,componentDidMount:function(){this._subscriptionsHandler=new o();},componentWillUnmount:function(){this._subscriptionsHandler&&this._subscriptionsHandler.release();},_renderAttachment:function(s){if(j.isStickerAttachment(s)){return h.constructStickerComponent(this.props.message,this.props.attachments[0].metadata,this.props.onStickerClick,this.props.isChat,this.props.customLike,this._onAttachmentLoad);}else if(j.isVoiceAttachment(s)){return h.renderAudioClip(this.props.attachments[0],this.props.isChat);}else if(j.isVideoAttachment(s)){return h.renderVideo(s,this.props.isChat,this.props.message,this._onAttachmentLoad);}else if(j.isShareAttachment(s)){return h.constructStoryBasedShareAttachment(this.props.message,s,this.props.isChat,this.props.maxWidth,this._onAttachmentLoad);}else if(j.isFileAttachment(s)){return h.renderFile(s,this.props.isChat);}else if(j.isErrorAttachment(s))return n.createElement(l,null);return n.createElement(k,null);},render:function(){if(this.props.message.is_like_preview)return (n.createElement(m,{isChat:this.props.isChat,key:'hlp:'+this.props.message.like_preview_since,since:this.props.message.like_preview_since,customLike:this.props.customLike}));if(this.props.attachments.length===0)return n.createElement('div',this.props);var s=h.renderPhotoAttachments(this.props.attachments.filter(j.isPhotoAttachment),this.props.message,this.props.maxWidth,this._onAttachmentLoad),t=h.sortAttachmentsStablyByType(this.props.attachments.filter(function(u){return !j.isPhotoAttachment(u);})).map((function(u,v){return (n.createElement('span',{key:v},this._renderAttachment(u)));}).bind(this));return (n.createElement('div',this.props,s,t));}});f.exports=r;},null);
__d('HelpLink.react',['React','joinClasses','TooltipLink.react'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'HelpLink',render:function(){return (h.createElement(j,babelHelpers._extends({},this.props,{className:i(this.props.className,"uiHelpLink mls")}),undefined));}});f.exports=k;},null);
__d('UFICreatorInfo.react',['HelpLink.react','React','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'UFICreatorInfo',propTypes:{creatorID:m.string.isRequired,creatorType:m.string.isRequired,creatorName:m.string.isRequired,labelType:m.string.isRequired,pageID:m.string.isRequired,profileURI:m.string},render:function(){var o,p=this.getCreatorLink();switch(this.props.labelType){case 'commented':o=l._("\u0110\u01b0\u1ee3c b\u00ecnh lu\u1eadn b\u1edfi {creator}",[l.param('creator',p)]);break;case 'edited_comment':o=l._("\u0110\u01b0\u1ee3c ch\u1ec9nh s\u1eeda b\u1edfi {creator}",[l.param('creator',p)]);break;case 'sent_message':o=l._("\u0110\u01b0\u1ee3c g\u1eedi b\u1edfi {creator}",[l.param('creator',p)]);break;case 'page_admin_note':o=l._("Ghi ch\u00fa c\u1ee7a {creator}",[l.param('creator',p)]);break;default:return;}return (i.createElement('span',null,o,i.createElement(h,{tooltip:this.getHelpText()})));},getCreatorLink:function(){switch(this.props.creatorType){case 'application':case 'gray_account':case 'indirect_admin':return (i.createElement('a',{className:'uiLinkSubtle','aria-label':this.getTooltipText(),'data-hover':'tooltip'},this.props.creatorName));case 'business_admin':return (i.createElement('a',{className:'uiLinkSubtle',href:this.props.profileURI},this.props.creatorName));case 'direct_admin':return this.getProfileLinkWithHovercard();case 'former_admin':return (i.createElement('span',{className:'uiLinkSubtle'},i.createElement('img',{src:'/images/privacy/cant-see.png',width:9,height:9,className:"_3-8_"}),this.getProfileLinkWithHovercard()));default:return (i.createElement('span',{className:'uiLinkSubtle'},this.props.creatorName));}},getTooltipText:function(){switch(this.props.creatorType){case 'application':return this.getApplicationText();case 'gray_account':return this.getGrayAccountText();case 'indirect_admin':return this.getIndirectAdminText();}},getProfileLinkWithHovercard:function(){if(!this.props.profileURI)return i.createElement('span',null,this.props.creatorName);var o=new j('/ajax/hovercard/user.php').setQueryData({id:this.props.creatorID}).addQueryData({type:'page_admin',extragetparams:JSON.stringify({directed_target_id:this.props.pageID})});return (i.createElement('a',{className:'uiLinkSubtle','data-hovercard':o,href:this.props.profileURI},this.props.creatorName));},getApplicationText:function(){switch(this.props.labelType){case 'commented':return l._("B\u00ecnh lu\u1eadn n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi ai \u0111\u00f3 \u0111ang s\u1eed d\u1ee5ng {application}.",[l.param('application',this.props.creatorName)]);case 'edited_comment':return l._("B\u00e0i vi\u1ebft n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ai \u0111\u00f3 s\u1eed d\u1ee5ng {application} ch\u1ec9nh s\u1eeda.",[l.param('application',this.props.creatorName)]);case 'sent_message':return l._("Tin nh\u1eafn n\u00e0y \u0111\u01b0\u1ee3c g\u1eedi b\u1edfi ai \u0111\u00f3 \u0111ang s\u1eed d\u1ee5ng {application}.",[l.param('application',this.props.creatorName)]);case 'page_admin_note':return l._("\u0110\u00e2y l\u00e0 ghi ch\u00fa c\u1ee7a ai \u0111\u00f3 s\u1eed d\u1ee5ng {application}.",[l.param('application',this.props.creatorName)]);}},getIndirectAdminText:function(){switch(this.props.labelType){case 'commented':return l._("B\u00ecnh lu\u1eadn n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi ai \u0111\u00f3 t\u1eeb {page}.",[l.param('page',this.props.creatorName)]);case 'edited_comment':return l._("B\u00e0i vi\u1ebft n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ai \u0111\u00f3 t\u1eeb {page} ch\u1ec9nh s\u1eeda.",[l.param('page',this.props.creatorName)]);case 'sent_message':return l._("Tin nh\u1eafn n\u00e0y \u0111\u01b0\u1ee3c g\u1eedi b\u1edfi ai \u0111\u00f3 t\u1eeb {page}.",[l.param('page',this.props.creatorName)]);case 'page_admin_note':return l._("\u0110\u00e2y l\u00e0 ghi ch\u00fa c\u1ee7a ai \u0111\u00f3 t\u1eeb {page}.",[l.param('page',this.props.creatorName)]);}},getGrayAccountText:function(){switch(this.props.labelType){case 'commented':return l._("B\u00ecnh lu\u1eadn n\u00e0y \u0111\u01b0\u1ee3c th\u1ef1c hi\u1ec7n b\u1edfi ai \u0111\u00f3 kh\u00f4ng c\u00f3 t\u00e0i kho\u1ea3n Facebook c\u00e1 nh\u00e2n.");case 'edited_comment':return l._("B\u00e0i vi\u1ebft n\u00e0y \u0111\u00e3 \u0111\u01b0\u1ee3c ai \u0111\u00f3 kh\u00f4ng c\u00f3 t\u00e0i kho\u1ea3n c\u00e1 nh\u00e2n tr\u00ean Facebook \u0111\u0103ng.");case 'sent_message':return l._("Tin nh\u1eafn n\u00e0y \u0111\u01b0\u1ee3c g\u1eedi b\u1edfi ai \u0111\u00f3 kh\u00f4ng c\u00f3 t\u00e0i kho\u1ea3n Facebook c\u00e1 nh\u00e2n.");case 'page_admin_note':return l._("\u0110\u00e2y l\u00e0 ghi ch\u00fa c\u1ee7a ai \u0111\u00f3 kh\u00f4ng c\u00f3 t\u00e0i kho\u1ea3n Facebook c\u00e1 nh\u00e2n.");}},getHelpText:function(){switch(this.props.labelType){case 'commented':return l._("Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi qu\u1ea3n l\u00fd Trang n\u00e0y m\u1edbi c\u00f3 th\u1ec3 bi\u1ebft ai \u0111\u00e3 \u0111\u0103ng b\u00ecnh lu\u1eadn");case 'edited_comment':return l._("Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi qu\u1ea3n l\u00fd Trang n\u00e0y m\u1edbi c\u00f3 th\u1ec3 bi\u1ebft ai \u0111\u00e3 ch\u1ec9nh s\u1eeda b\u00ecnh lu\u1eadn");case 'sent_message':return l._("Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi qu\u1ea3n l\u00fd Trang n\u00e0y c\u00f3 th\u1ec3 xem ng\u01b0\u1eddi \u0111\u00e3 g\u1eedi tin nh\u1eafn");case 'page_admin_note':return l._("Ch\u1ec9 nh\u1eefng ng\u01b0\u1eddi qu\u1ea3n l\u00fd Trang n\u00e0y c\u00f3 th\u1ec3 xem ng\u01b0\u1eddi \u0111\u00e3 t\u1ea1o ghi ch\u00fa");}}});f.exports=n;},null);
__d('PagesMessengerMessage.react',['HovercardLink','Image.react','ImageBlock.react','ImmutableObject','Layout.react','LeftRight.react','MercuryLogMessage.react','MercuryActionType','MercuryAttachment','MercuryAttachments.react','MercuryIDs','MercuryMessageBody.react','MercuryMessageError.react','MercuryParticipants','PagesMessengerCreatorInfo.react','React','TooltipLink.react','XUICheckboxInput.react','XUIGrayText.react','cx','formatDate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=w.PropTypes,da=l.Column,ea=l.FillColumn,fa=406,ga=94,ha=200,ia=w.createClass({displayName:'PagesMessengerMessage',propTypes:{customDialogWidth:ca.number.isRequired,messageCheckStatusChangedHandler:ca.func.isRequired,user:ca.string.isRequired,message:ca.object.isRequired},getDefaultProps:function(){return {customDialogWidth:500};},getInitialState:function(){return {participant:{}};},componentWillMount:function(){u.get(this.props.message.author,(function(ja){this.setState({participant:ja});}).bind(this));},isLogMessage:function(){return this.props.message.action_type===o.LOG_MESSAGE;},renderParticipantName:function(){var ja=r.getUserIDFromParticipantID(this.state.participant.id),ka=h.constructEndpoint({id:ja}).toString(),la=null;if(this.state.participant.href){la=w.createElement('a',{href:this.state.participant.href,'data-hovercard':ka},this.state.participant.name);}else la=this.state.participant.name;var ma=new Date(this.props.message.timestamp);return (w.createElement(m,null,w.createElement('div',null,w.createElement('div',{className:"_5hpc"},la),this.renderCreatorInfo()),this.renderMessageDate(ma)));},renderMessageDate:function(ja){var ka=new Date();if(ka.getFullYear()===ja.getFullYear()){return (w.createElement(x,{className:"_5icy",tooltip:w.createElement('span',null,ba(ja,'M d, Y g:ia'))},ba(ja,'M jS, g:ia')));}else return (w.createElement(z,{shade:'light',size:'small',className:"_5icy"},ba(ja,'M d, Y g:ia')));},renderParticipantImage:function(){if(this.isLogMessage())return (w.createElement('div',{className:"_5icz"},w.createElement('div',{className:"_17y6"})));if(this.state.participant.href)return (w.createElement('a',{className:"_5icz",href:this.state.participant.href},w.createElement(i,{src:this.state.participant.image_src,className:"_5ic-"})));return (w.createElement('div',{className:"_5icz"},w.createElement(i,{src:this.state.participant.image_src,className:"_5ic-"})));},renderMessage:function(){if(this.isLogMessage())return w.createElement('div',null);var ja=p.get(this.props.message),ka=null,la=this.props.customDialogWidth?this.props.customDialogWidth-ga:fa;if(ja.length>0)ka=w.createElement(q,{className:"_ksr",maxWidth:la,message:new k(this.props.message),attachments:ja});return (w.createElement('div',null,w.createElement(s,{className:"_3qi9",body:this.props.message.body}),ka,w.createElement(t,{message:new k(this.props.message),authorFBID:this.props.user})));},renderCreatorInfo:function(){if(this.props.message.creator_info)return (w.createElement(v,{creator_info:this.props.message.creator_info}));},renderLogMessage:function(){var ja=new Date(this.props.message.timestamp);return (w.createElement(m,{className:"_17y7"},w.createElement(n,{maxWidth:Math.floor(this.props.customDialogWidth-ha),message:new k(this.props.message)}),this.renderMessageDate(ja)));},render:function(){if(!this.state.participant.id)return w.createElement('div',null);return (w.createElement('div',{className:"_5hpb"},w.createElement(l,null,w.createElement(da,null,w.createElement(y,{className:"_1mtg"+(this.isLogMessage()?' '+"invisible_elem":''),onChange:this.props.messageCheckStatusChangedHandler,value:this.props.message.message_id})),w.createElement(ea,null,w.createElement(j,null,this.renderParticipantImage(),w.createElement('div',null,this.isLogMessage()?this.renderLogMessage():this.renderParticipantName(),this.renderMessage()))))));}});f.exports=ia;},null);
__d('ChatAuthorPhotoBlock.react',['MercuryTimestamp','MercuryParticipants','React','cx','fbt','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o=j.PropTypes,p=j.createClass({displayName:'ChatAuthorPhotoBlock',propTypes:{authorID:o.string.isRequired,className:o.string,hideName:o.bool,hidePhoto:o.bool,timestamp:o.number},getInitialState:function(){return {author:{id:null,name:'',href:'#',image_src:''}};},componentDidMount:function(){this.updateAuthor(this.props.authorID);},componentWillReceiveProps:function(q){if(q.authorID!=this.state.author.id)this.updateAuthor(q.authorID);},render:function(){return (j.createElement('div',babelHelpers._extends({},this.props,{className:n(this.props.className,"_5yt9")}),this.renderAuthorName(),this.renderAuthorPhoto(),this.props.children));},renderAuthorName:function(){if(!this.props.hideName)return (j.createElement('div',{className:"_5ys-",ref:'name'},this.state.author.name));},renderAuthorPhoto:function(){if(!this.props.hidePhoto){var q=null;if(this.props.timestamp)q=h.getPreciseTimestamp(this.props.timestamp);var r=l._("{name} {time}",[l.param('name',this.state.author.name),l.param('time',q)]);return (j.createElement('a',{'aria-label':r,className:"_5ys_",'data-hover':'tooltip','data-tooltip-position':'left',href:this.state.author.href||'#',ref:'link'},j.createElement('img',{src:this.state.author.image_src,ref:'image'})));}},updateAuthor:function(q){i.get(q,(function(r){this.isMounted()&&this.setState({author:r});}).bind(this));}});f.exports=p;},null);
__d('MercuryTypingAnimation.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'MercuryTypingAnimation',propTypes:{color:k.oneOf(['light','dark'])},getDefaultProps:function(){return {color:'dark'};},render:function(){var m="_4a0v"+(this.props.color==='light'?' '+"_4a0w":'')+(this.props.color==='dark'?' '+"_4a0x":'');return (h.createElement('div',{className:j(this.props.className,m)},h.createElement('div',{className:"_4b0g"},h.createElement('div',{className:"_5pd7"}),h.createElement('div',{className:"_5pd7"}),h.createElement('div',{className:"_5pd7"}))));}});f.exports=l;},null);
__d('ChatTypingIndicator.react',['ChatAuthorPhotoBlock.react','ChatConfig','MercuryParticipants','MercuryTypingAnimation.react','ReactComponentWithPureRenderMixin','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p=m.PropTypes,q=i.get('chattab_rounded_profile',false),r=m.createClass({displayName:'ChatTypingIndicator',mixins:[l],propTypes:{userID:p.string,showName:p.bool},render:function(){var s=this.props,t=s.userID,u=s.showName;if(!t)return null;if(i.get('webmessenger_chat_tab_redesign'))return (m.createElement('div',{className:"_4tdt"},this._renderPhoto(t),this._renderBubble()));return (m.createElement(h,{authorID:t,className:"_5wd4"+(' '+"_1nc7")+(u?' '+"_5ysy":''),hideName:!u},m.createElement('div',{className:"_5wd9"},m.createElement(k,{className:"_3e2s",ref:'bubble'}))));},getBubble:function(){return this.refs.bubble;},_renderBubble:function(){var s=this.props.showName;return (m.createElement('div',{className:"_4tdv"},m.createElement('div',{className:"_5wd4"+(' '+"_1nc7")+(' '+"_2cnu")+(s?' '+"_5ysy":'')},m.createElement('div',{className:"_5wd9"+(i.get('webmessenger_chat_tab_redesign')?' '+"_n4o":'')},m.createElement('div',{className:"_5w1r"+(' '+"_5wdf")+(' '+"_3_om")},m.createElement(k,{className:"_5x7x",ref:'bubble'}))))));},_renderPhoto:function(s){if(!s)return null;var t=j.getNow(s),u=o._("{name}",[o.param('name',t.name)]);return (m.createElement('div',{className:"_31o4"+(q?' '+"_3njy":'')},m.createElement('a',{'aria-label':u,className:"_4tdw",'data-hover':'tooltip','data-tooltip-position':'left',href:t.href||'#',ref:'link'},m.createElement('img',{src:t.image_src,ref:'image'}))));}});f.exports=r;},null);
__d("TypingStates",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={INACTIVE:0,TYPING:1,QUITTING:2};f.exports=h;},null);
__d('MercuryTypingReceiver',['Arbiter','ChannelConstants','FBID','MercuryActionType','MercuryIDs','MercuryPayloadSource','MercuryDispatcher','MercurySingletonMixin','MercuryViewer','TypingStates','isEmpty','mixInEventEmitter','setTimeoutAcrossTransitions','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreadIDMap').get(),v=30000;function w(x){'use strict';this.$MercuryTypingReceiver1=null;this.$MercuryTypingReceiver2={};this.$MercuryTypingReceiver3=n.getForFBID(x);this.$MercuryTypingReceiver3.subscribe('update-typing-state',(function(z,aa){var ba=aa.payload_source;if(ba!=m.CLIENT_CHANNEL_MESSAGE)return;var ca=aa.actions;if(!ca||!ca.length)return;var da=k.USER_GENERATED_MESSAGE;ca.forEach((function(ea){if(ea.action_type==da&&ea.author!=p.getID())this.$MercuryTypingReceiver4(ea.thread_id,ea.author);}).bind(this));}).bind(this));var y;if(j.isUser(x)){y=[i.getArbiterType('typ'),i.getArbiterType('ttyp')];}else y=[i.getArbiterType('page_typing')];h.subscribe(y,(function(z,aa){var ba=aa.obj,ca=this.$MercuryTypingReceiver5(ba);if(ca){var da=l.getParticipantIDFromUserID(ba.from);if(ba.st==q.TYPING){this.$MercuryTypingReceiver2[ca]=this.$MercuryTypingReceiver2[ca]||{};var ea=this.$MercuryTypingReceiver2[ca][da];this.$MercuryTypingReceiver2[ca][da]=Date.now();if(!this.$MercuryTypingReceiver1)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);!ea&&this.$MercuryTypingReceiver7(ca);}else if(ba.st==q.INACTIVE)this.$MercuryTypingReceiver4(ca,da);}}).bind(this));}w.prototype.$MercuryTypingReceiver8=function(x){'use strict';var y=this.$MercuryTypingReceiver2[x]||{},z=Object.keys(y);z.sort(function(aa,ba){return y[aa]-y[ba];});return z;};w.prototype.$MercuryTypingReceiver6=function(){'use strict';this.$MercuryTypingReceiver1=null;var x=Date.now(),y={},z=false;for(var aa in this.$MercuryTypingReceiver2){var ba=false;for(var ca in this.$MercuryTypingReceiver2[aa]||{})if(this.$MercuryTypingReceiver2[aa][ca]<x-v){delete this.$MercuryTypingReceiver2[aa][ca];ba=true;}else z=true;if(ba)y[aa]=this.$MercuryTypingReceiver8(aa);}if(!r(y))this.$MercuryTypingReceiver9(y);if(z)this.$MercuryTypingReceiver1=t((function(){this.$MercuryTypingReceiver6();}).bind(this),3000);};w.prototype.$MercuryTypingReceiver4=function(x,y){'use strict';if(x in this.$MercuryTypingReceiver2)if(y in this.$MercuryTypingReceiver2[x]){delete this.$MercuryTypingReceiver2[x][y];this.$MercuryTypingReceiver7(x);}};w.prototype.$MercuryTypingReceiver9=function(x){'use strict';this.releaseHeldEventType('state-changed');this.emitAndHold('state-changed',x);};w.prototype.$MercuryTypingReceiver7=function(x){'use strict';var y={};y[x]=this.$MercuryTypingReceiver8(x);this.$MercuryTypingReceiver9(y);};w.prototype.$MercuryTypingReceiver5=function(x){'use strict';if(x.thread_fbid)return u.getClientIDFromServerIDNow(x.thread_fbid.toString());if(x.type==='typ'||x.type==='page_typing')return l.getThreadIDFromUserID(x.from);return null;};s(w,{'state-changed':true});Object.assign(w,o);f.exports=w;},null);
__d('ChatTypingIndicators.react',['ChatTypingIndicator.react','DOM','MercuryIDs','MercuryThreadInformer','MercuryTypingReceiver','MercuryParticipants','React','ReactDOM','SubscriptionsHandler','TooltipData','createObjectFrom','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();var u=n.PropTypes,v=n.createClass({displayName:'ChatTypingIndicators',propTypes:{indicatorClass:u.func,indicatorsWillShow:u.func,indicatorsDidShow:u.func,rootClassName:u.string,threadID:u.string.isRequired,viewer:u.string.isRequired},getDefaultProps:function(){return {indicatorClass:h,indicatorsWillShow:s,indicatorsDidShow:s};},getInitialState:function(){return {typingUserIDs:[]};},componentDidMount:function(){var w=k.getForFBID(this.props.viewer),x=l.getForFBID(this.props.viewer);this._subscriptions=new p();this._subscriptions.addSubscriptions(x.addRetroactiveListener('state-changed',this.typingStateChanged),w.subscribe('messages-received',this.messagesReceived));},componentWillReceiveProps:function(w){if(w.threadID!=this.props.threadID)this.setState({typingUserIDs:[]});},componentWillUpdate:function(w,x){if(x.typingUserIDs.length>0)this.props.indicatorsWillShow();},componentDidUpdate:function(){if(this.state.typingUserIDs.length>0)this.props.indicatorsDidShow();m.getMulti(this.state.typingUserIDs,(function(w){if(this.isMounted())this.state.typingUserIDs.forEach((function(x){var y=w[x],z=this.refs[x].getBubble();if(z)q.set(o.findDOMNode(z),this.renderTooltip(y.short_name),'above','left');}).bind(this));}).bind(this));},componentWillUnmount:function(){this._subscriptions.release();},render:function(){var w=j.isGroupChat(this.props.threadID);return (n.createElement('div',{className:this.props.rootClassName},this.state.typingUserIDs.map((function(x){return (this._renderTypingIndicator(x,!!w));}).bind(this))));},_renderTypingIndicator:function(w,x){var y=this.props.indicatorClass;return (n.createElement(y,{key:w,ref:w,showName:x,userID:w}));},renderTooltip:function(w){var x=i.create('span');o.render(n.createElement('span',null,t._("{name} \u0111ang nh\u1eadp...",[t.param('name',w)])),x);return x;},typingStateChanged:function(w){if(this.props.threadID in w)this.setState({typingUserIDs:w[this.props.threadID].slice().sort()});},messagesReceived:function(w,x){if(this.props.threadID in x){var y=x[this.props.threadID],z=r(y.map(function(aa){return aa.author;}));this.setState({typingUserIDs:this.state.typingUserIDs.filter(function(aa){return !z[aa];}).sort()});}}});f.exports=v;},null);
__d('MercuryPageThreadActions',['MercuryActionType','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;l=babelHelpers.inherits(n,k);m=l&&l.prototype;function n(o){'use strict';m.constructor.call(this,o);}n.prototype.addFlag=function(o,p){'use strict';this.batchFlag([o],p);};n.prototype.batchAddFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.addThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,true,p));};n.prototype.removeFlag=function(o,p){'use strict';this.batchRemoveFlag([o],p);};n.prototype.batchRemoveFlag=function(o,p){'use strict';o.forEach((function(q){this.__serverRequests.removeThreadFlag(q,p);}).bind(this));this.__dispatcher.handleUpdate(this.$MercuryPageThreadActions1(o,false,p));};n.prototype.$MercuryPageThreadActions1=function(o,p,q){'use strict';return this.__constructClientPayload(o,h.CHANGE_FLAG,i.CLIENT_CHANGE_FLAG,{mark_as_flag:p,source:q});};Object.assign(n,j,{_instances:{}});f.exports=n;},null);
__d('MercuryRoger',['Arbiter','ArbiterMixin','immutable','JSLogger','MercuryActionStatus','MercuryDispatcher','MercurySingletonProvider','MercuryThreads','mixin','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s,t=l.SUCCESS;r=babelHelpers.inherits(u,p(i));s=r&&r.prototype;u.getForFBID=function(y){'use strict';return v.getForFBID(y);};u.get=function(){'use strict';return v.get();};function u(y){'use strict';s.constructor.call(this);this.$MercuryRoger1={};this.$MercuryRoger2=[];this.$MercuryRoger3=y;this.$MercuryRoger4=m.getForFBID(this.$MercuryRoger3);this.$MercuryRoger5=o.getForFBID(this.$MercuryRoger3);this.$MercuryRoger4.subscribe('update-roger',(function(z,aa){for(var ba in aa){var ca=this.$MercuryRoger1[ba]||j.OrderedMap();ca=ca.withMutations((function(da){for(var ea in aa[ba]){var fa=this.$MercuryRoger5.getThreadMetaNow(ba);if(fa&&fa.participants)if(fa.participants.indexOf(ea)==-1){this.$MercuryRoger2.push(x(this.$MercuryRoger1));continue;}var ga=da.get(ea),ha=aa[ba][ea];if(!ga||ha>ga)da.set(ea,ha);}}).bind(this));this.$MercuryRoger1[ba]=ca.sort();}aa&&this.inform('change',aa);}).bind(this));h.subscribe(k.DUMP_EVENT,(function(z,aa){aa.bad_read_receipts={receipts:this.$MercuryRoger2};}).bind(this));}u.prototype.getSeenBy=function(y,z){'use strict';if(!y)return [];var aa=[],ba=this.$MercuryRoger1[y.thread_id];if(!ba)return aa;ba.forEach(function(ca,da){if(w(y,ca,da,z))aa.push(da);});return aa;};u.prototype.wasSeenByAll=function(y){'use strict';if(!y)return false;var z=this.$MercuryRoger1[y.thread_id];if(!z)return false;return z.every(function(aa,ba){return w(y,aa,ba);});};u.prototype.getSeenTimestamps=function(y){'use strict';var z=this.$MercuryRoger1[y];if(!z){z=j.OrderedMap();this.$MercuryRoger1[y]=z;}return z;};u.prototype.getSeenTimestamp=function(y,z){'use strict';var aa=this.$MercuryRoger1[y];return aa?aa.get(z):null;};var v=new n(u);function w(y,z,aa,ba){return !!(z>=y.timestamp&&(y.status===undefined||y.status===t)&&(!ba||aa!=y.author));}function x(y){return q(y,function(z){return z.toJS();});}f.exports=u;},null);
__d('MercuryMessageGroup',['MercuryActionType','MercuryAttachmentType','MercuryShareAttachmentRenderLocations','MercuryThreadlistConstants','toIterator'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={calculateMessageGroups:function(p,q){var r=[],s=null,t={value:null},u=l(p),v;while(!(v=u.next()).done){var w=m.canAppendMessageToLastGroup(t.value,v.value,q);if(!w){s=[];r.push(s);}s.push(v.value);t=v;}return r;},canAppendMessageToLastGroup:function(p,q,r){var s=k.GROUPING_THRESHOLD;if(!p||n(p,r)||n(q,r)||p.author!=q.author||p.timestamp<q.timestamp-s||p.is_spoof_warning!==q.is_spoof_warning||p.page_admin_notes)return false;return true;}};function n(p,q){var r=p.has_attachment;if(r&&(q===j.MESSENGER||q===j.CHAT))r=o(p);return !!(p.action_type==h.LOG_MESSAGE||r||p.forward_count||p.html_body||p.body&&p.body.length>k.MAX_CHARS_BEFORE_BREAK);}function o(p){var q=p.attachments[0];return (!q||q.attach_type===i.STICKER||q.attach_type===i.ANIMATED_IMAGE);}f.exports=m;},null);
__d('MessengerDomIDs',['uniqueID'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={COMPOSER_INPUT_DESCRIPTION:h(),CONVERSATION:h(),MAIN_LABEL:h(),MUTE_DIALOG_TITLE:h(),THREAD_INFO_PANEL:h(),THREAD_TITLE:h()};f.exports=i;},null);
__d('MessageList.react',['immutable','MercuryActionType','MercuryIDs','MercuryMessageGroup','MercuryShareAttachmentRenderLocations','MessengerDomIDs','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=o.PropTypes,r=1000*60*60,s=o.createClass({displayName:'MessageList',mixins:[n],propTypes:{DateBreak:q.func.isRequired,deliveryTimestamp:q.number.isRequired,isCanonical:q.bool,isPageMessage:q.bool,location:q.string.isRequired,LogMessage:q.func.isRequired,loadMoreMessages:q.func,MessageGroup:q.func.isRequired,messages:q.instanceOf(h.List).isRequired,onAttachmentLoad:q.func,onStickerClick:q.func,readReceipts:q.instanceOf(h.OrderedMap).isRequired,viewer:q.string.isRequired},getInitialState:function(){return {activeMessageID:null,messageGroups:k.calculateMessageGroups(this.props.messages,this.props.location)};},componentWillReceiveProps:function(y){if(y.messages!==this.props.messages)this.setState({messageGroups:k.calculateMessageGroups(y.messages,y.location)});},render:function(){var y=this.props,z=y.DateBreak,aa=y.location,ba=y.LogMessage,ca=y.MessageGroup,da=[],ea=this.state.activeMessageID,fa=this.state.messageGroups,ga=fa.length,ha=this.props.readReceipts,ia=ha.last()||0,ja=j.getParticipantIDFromUserID(this.props.viewer);for(var ka=0;ka<ga;ka++){var la=ka>0?fa[ka-1]:null,ma=la&&la.length>0?la[la.length-1]:null,na=fa[ka],oa=na[0],pa=na[na.length-1],qa=false;if(!ma||oa.timestamp-ma.timestamp>r){qa=true;da.push(o.createElement(z,{date:new Date(oa.timestamp),key:'db:'+oa.message_id}));}if(oa.action_type==i.LOG_MESSAGE){da.push(o.createElement(ba,{className:aa===l.CHAT?"_5w0o":null,key:oa.message_id,loadMoreMessages:this.props.loadMoreMessages,message:oa,onImageLoad:this.props.onAttachmentLoad,viewer:this.props.viewer}));continue;}na=h.List(na);var ra=u(fa,ga,ka),sa=!w(ha,na,ra),ta=v(ia,pa),ua=x(this.props.deliveryTimestamp,pa);da.push(o.createElement(ca,{activeMessageID:t(ea,na),author:na.first().author,deliveryTimestamp:ua,hasDateBreak:qa,isCanonical:this.props.isCanonical,isFromViewer:ja===oa.author,isPageMessage:this.props.isPageMessage,key:'mg:'+oa.message_id,lastReadTimestamp:ta,maxBubbleWidth:this.props.maxBubbleWidth,messages:na,nextTimestamp:ra,onAttachmentLoad:this.props.onAttachmentLoad,onMessageDeselect:this._handleMessageDeselect,onMessageSelect:this._handleMessageSelect,onStickerClick:this.props.onStickerClick,readReceipts:sa?ha:h.OrderedMap()}));}return (o.createElement('div',{id:aa===l.MESSENGER?m.CONVERSATION:null},da));},_handleMessageDeselect:function(y){this.setState(function(z){return {activeMessageID:z.activeMessageID===y?null:z.activeMessageID};});},_handleMessageSelect:function(y){this.setState({activeMessageID:y});}});function t(y,z){return z.find(function(aa){return aa.message_id===y;})?y:null;}function u(y,z,aa){return aa<z-1?y[aa+1][0].timestamp:Infinity;}function v(y,z){return z.timestamp>y?y:Infinity;}function w(y,z,aa){return (z.isEmpty()||y.last()<z.first().timestamp||y.first()>=aa);}function x(y,z){return z.timestamp>y?y:Infinity;}f.exports=s;},null);
__d('MessengerDateBreak.react',['React','cx','formatDate','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.PropTypes,m=h.createClass({displayName:'MessengerDateBreak',propTypes:{date:l.instanceOf(Date).isRequired},shouldComponentUpdate:function(n){return this.props.date.getTime()!==n.date.getTime();},render:function(){var n=j(this.props.date,{today:'g:ia',withinWeek:'D g:ia',thisYear:'M jS, g:ia',older:'m/d/Y g:ia'});return (h.createElement('h4',{className:k(this.props.className,"_497p _2lpt")},h.createElement('time',{className:"_3oh-"},n)));}});f.exports=m;},null);
__d('MessengerButton.react',['ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MessengerButton',mixins:[h],propTypes:{label:l.string.isRequired,type:l.oneOf(['primary','secondary']).isRequired,use:l.oneOf(['default','danger']).isRequired},getDefaultProps:function(){return {use:'default'};},handleLinkClick:function(n){if(this.props.disabled){n.preventDefault();}else if(this.props.onClick)this.props.onClick(n);},render:function(){var n=this.props,o=n.className,p=n.label,q=babelHelpers.objectWithoutProperties(n,['className','label']);return (i.createElement('a',babelHelpers._extends({className:k("_3quh"+(' '+"_30yy")+(this.props.type==='primary'?' '+"_2t_":'')+(this.props.type==='secondary'?' '+"_2u0":'')+(this.props.use==='danger'?' '+"_3ay_":'')+(this.props.disabled?' '+"_4zab":''),o),href:'#',role:'button'},q,{onClick:this.handleLinkClick}),p));}});f.exports=m;},null);
__d('MessengerDialogButton.react',['MessengerButton.react','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'MessengerDialogButton',mixins:[i],propTypes:{action:m.oneOf(['button','cancel','confirm'])},render:function(){var o=this.props,p=o.action,q=o.className,r=babelHelpers.objectWithoutProperties(o,['action','className']);return (j.createElement(h,babelHelpers._extends({className:l(q,"_5ixy"+(p==='button'?' '+"layerButton":'')+(p==='cancel'?' '+"layerCancel":'')+(p==='confirm'?' '+"layerConfirm":''))},r)));}});f.exports=n;},null);
__d('P2PButton.react',['CurrentEnvironment','MessengerDialogButton.react','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'P2PButton',render:function(){var m=h.messengerdotcom,n=m?i:k,o=this.props.type;if(!o)o=this.props.use==='confirm'?'primary':'secondary';var p=m?'default':this.props.use,q=babelHelpers._extends({},this.props,{type:o,use:p});return (j.createElement(n,q,this.props.children));}});f.exports=l;},null);
__d('P2PBigAmount.react',['CurrentEnvironment','Image.react','React','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=j.PropTypes,n=j.createClass({displayName:'P2PBigAmount',propTypes:{amount:m.string.isRequired,isPending:m.bool,size:m.oneOf(['medium','large'])},getDefaultProps:function(){return {size:'medium'};},getImage:function(){if(this.isMessengerDotCom()){if(this.props.isPending){return l('/images/p2p/message-icon-dark-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-messenger-blue.png');}else return l('/images/p2p/message-icon-blue.png');}else if(this.props.isPending){return l('/images/p2p/message-icon-gray.png');}else if(this.props.size==='large'){return l('/images/p2p/message-icon-facebook-blue.png');}else return l('/images/p2p/message-icon-www-blue.png');},isMessengerDotCom:function(){return h.messengerdotcom;},render:function(){var o=this.props.size==='large'?'24':'16';return (j.createElement('div',{className:"_8j6"+(this.isMessengerDotCom()?' '+"_8j7":'')+(this.props.size==='large'?' '+"_1fv":'')},j.createElement('div',{className:"_8j8"},j.createElement(i,{height:o,src:this.getImage(),width:o})),j.createElement('div',{className:"_8jc"+(this.props.isPending?' '+"_8jd":'')+(this.props.amount.length>=8?' '+"_8je":'')+(' '+"_3oh-")},this.props.amount)));}});f.exports=n;},null);
__d('MessengerDialog.react',['LayerFadeOnHide','LayerHideOnEscape','React','XUIDialog.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'MessengerDialog',propTypes:{onToggle:n.func.isRequired,repositionOnUpdate:n.bool,shown:n.bool,type:n.oneOf(['alert','default']),width:n.number},getDefaultProps:function(){return {repositionOnUpdate:false,shown:true,type:'alert',width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout((function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}).bind(this),0);},render:function(){return (j.createElement(k,babelHelpers._extends({behaviors:{LayerFadeOnHide:h,LayerHideOnEscape:i}},this.props,{className:m("_4ebx",this.props.className),ref:'dialog'}),j.createElement('div',{className:"_4eby"+(this.props.type==='alert'?' '+"_2c9g":'')+(this.props.type==='default'?' '+"_2c9i":'')},this.props.children)));}});f.exports=o;},null);
__d('P2PDialog.react',['CurrentEnvironment','LayerFadeOnHide','MessengerDialog.react','React','XUIDialog.react','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'P2PDialog',propTypes:{onToggle:n.func,shown:n.bool,width:n.number},getDefaultProps:function(){return {onToggle:m,repositionOnUpdate:false,shown:true,width:400};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout((function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}).bind(this),0);},render:function(){var p=h.messengerdotcom,q=p?j:l;return (k.createElement(q,babelHelpers._extends({behaviors:{LayerFadeOnHide:i}},this.props,{ref:'dialog'}),this.props.children));}});f.exports=o;},null);
__d('MessengerDialogBody.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'MessengerDialogBody',render:function(){return (h.createElement('div',{className:j("_4eb-",this.props.className)},this.props.children));}});f.exports=k;},null);
__d('P2PDialogBody.react',['CurrentEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'P2PDialogBody',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MessengerDialogFooter.react',['LeftRight.react','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MessengerDialogFooter',propTypes:{leftContent:l.object},render:function(){return (i.createElement('div',{className:k("_4eb_",this.props.className)},i.createElement(h,null,i.createElement('div',{className:"_2_d1"},this.props.leftContent),i.createElement('div',null,this.props.children))));}});f.exports=m;},null);
__d('P2PDialogFooter.react',['CurrentEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','cloneWithProps','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'P2PDialogFooter',render:function(){var o=h.messengerdotcom,p=o?i:k,q,r=this.props.children;if(o){q=j.Children.count(this.props.children);r=j.Children.map(this.props.children,function(s,t){if(!s)return null;return l(s,{className:"_4ec0",type:t===0&&q===2?'secondary':'primary'});});}return (j.createElement(p,this.props,r));}});f.exports=n;},null);
__d('MessengerDialogHeader.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'MessengerDialogHeader',render:function(){return (h.createElement('h2',{className:j("_4ebz",this.props.className),id:this.props.id},this.props.children));}});f.exports=k;},null);
__d('MessengerText.react',['ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MessengerText',mixins:[h],propTypes:{display:l.oneOf(['inline','block']),type:l.oneOf(['primary','secondary']).isRequired,size:l.oneOf(['small'])},render:function(){return (i.createElement('div',babelHelpers._extends({},this.props,{className:k("_39r5"+(this.props.type==='primary'?' '+"_39r6":'')+(this.props.type==='secondary'?' '+"_39r7":'')+(this.props.size==='small'?' '+"_39r8":'')+(this.props.display==='inline'?' '+"__0d":''),this.props.className)}),this.props.children));}});f.exports=m;},null);
__d('P2PText.react',['CurrentEnvironment','MessengerText.react','React','XUIGrayText.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'P2PText',propTypes:{type:l.oneOf(['primary','secondary']).isRequired},render:function(){var n=h.messengerdotcom,o=n?i:k,p=this.props.type,q=this.props;if(!n){q=babelHelpers._extends({},this.props,{display:this.props.display||'block',shade:p==='primary'?'dark':'light',size:this.props.size||'small'});}else{q=babelHelpers._extends({},this.props,{size:'small'});delete q.size;}return (j.createElement(o,q,this.props.children));}});f.exports=m;},null);
__d("XP2PTransactionDetailController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/p2p\/transaction\/",{id:{type:"String",required:true}});},null,{});
__d('P2PMercuryLogMessage.react',['CurrentEnvironment','CurrentUser','Link.react','MercuryIDs','P2PGroupSendReceiptDialog.react','P2PPaymentLogMessageSubtype','React','ReactLayeredComponentMixin','XP2PTransactionDetailController','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s=n.PropTypes,t=n.createClass({displayName:'P2PMercuryLogMessage',mixins:[o],propTypes:{amount:s.string,receiver:s.object.isRequired,sender:s.object.isRequired,subtype:s.oneOf(Object.keys(m).map(function(u){return m[u];})),transferID:s.string.isRequired,threadFBID:s.string,threadID:s.string},getDefaultProps:function(){return {amount:'',sender:null,receiver:null,subtype:null};},getInitialState:function(){return {groupSendReceiptDetailsShown:false};},handleGroupDetailsLinkClicked:function(){this.setState({groupSendReceiptDetailsShown:true});},handleThirdPartyReceiptDialogClosed:function(){this.setState({groupSendReceiptDetailsShown:false});},isViewerSender:function(){return (k.getUserIDFromParticipantID(this.props.sender.id)===i.getID());},isViewerReceiver:function(){return (k.getUserIDFromParticipantID(this.props.receiver.id)===i.getID());},renderTransferDetailsLink:function(){var u=p.getURIBuilder().setString('id',this.props.transferID).getURI();return (n.createElement(j,{className:"_kiq",href:u,target:'_blank'},r._("Xem chi ti\u1ebft")));},renderGroupDetailsLink:function(){return (n.createElement(j,{className:"_kiq",href:'#',onClick:this.handleGroupDetailsLinkClicked},r._("Xem chi ti\u1ebft")));},renderLayers:function(){var u={};if(this.state.groupSendReceiptDetailsShown){var v={full_name:this.props.receiver.name,id:this.props.receiver.id,picture:this.props.receiver.image_src,profile_uri:this.props.receiver.href},w={full_name:this.props.sender.name,id:this.props.sender.id,picture:this.props.sender.image_src,profile_uri:this.props.sender.href};u.groupSendReceiptDetailsDialog=n.createElement(l,{amount:this.props.amount,onClose:this.handleThirdPartyReceiptDialogClosed,receiver:v,sender:w});}return u;},render:function(){var u=null,v=this.props.amount,w=this.props.subtype,x=this.isViewerSender(),y=this.isViewerReceiver(),z;if(!x&&!y){z=this.renderGroupDetailsLink();}else z=this.renderTransferDetailsLink();switch(w){case m.SENT_IN_GROUP:u=r._("{sendername} \u0111a\u0303 g\u01b0\u0309i {amount} cho {receivername}. {details}",[r.param('sendername',this.props.sender.name),r.param('amount',v),r.param('receivername',this.props.receiver.name),r.param('details',z)]);break;case m.CANCELED_EXPIRED:case m.CANCELED_SAME_CARD:case m.CANCELED_SENDER_RISK:case m.CANCELED_RECIPIENT_RISK:case m.CANCELED_CUSTOMER_SERVICE:if(x){u=r._("Kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a b\u1ea1n \u0111\u00e3 b\u1ecb h\u1ee7y. {details}",[r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("Kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a {name} \u0111\u00e3 b\u1ecb h\u1ee7y. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("Kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a {sender_name} cho {receiver_name} \u0111\u00e3 b\u1ecb h\u1ee7y. {details}",[r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('receiver_name',this.props.receiver.name),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;case m.CANCELED_DECLINED:if(x){u=r._("{name} \u0111\u00e3 kh\u00f4ng ch\u1ea5p nh\u1eadn kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a b\u1ea1n. {details}",[r.param('name',this.props.receiver.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else if(y){u=r._("B\u1ea1n \u0111\u00e3 kh\u00f4ng ch\u1ea5p nh\u1eadn kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a {name}. {details}",[r.param('name',this.props.sender.name),r.param('amount',v),r.param('details',this.renderTransferDetailsLink())]);}else u=r._("{receiver_name} \u0111\u00e3 kh\u00f4ng ch\u1ea5p nh\u1eadn kho\u1ea3n thanh to\u00e1n {amount} c\u1ee7a {sender_name}. {details}",[r.param('receiver_name',this.props.receiver.name),r.param('sender_name',this.props.sender.name),r.param('amount',v),r.param('details',z)]);u=n.createElement('span',{className:"_5rdx"},u);break;}return (n.createElement('div',{className:h.messengerdotcom?"_5rdy":''},u));}});f.exports=t;},null);
__d('MessengerLogMessageBody.react',['immutable','ImmutableObject','MercuryIDs','MercuryParticipants','MercuryLogMessageType','P2PMercuryLogMessage.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=o.createClass({displayName:'MessengerLogMessageBody',_viewer:'',mixins:[n,p(k)],propTypes:{message:r.instanceOf(i).isRequired,viewer:r.string.isRequired},statics:{calculateState:function(t){var u=[],v=t.message,w=v.log_message_data,x=v.log_message_type;switch(x){case l.SUBSCRIBE:u=w.added_participants;break;case l.UNSUBSCRIBE:u=w.removed_participants;break;case l.ORION:u.push(w.senderId,w.receiverId);break;}if(!u||!u.length)return {};var y=h.Map().withMutations(function(z){u.forEach(function(aa){z.set(aa,k.getOrFetch(aa)||{});});});return {extraParticipants:y};}},render:function(){var t=this.props.message.log_message_type;this._viewer=j.getParticipantIDFromUserID(this.props.viewer);if(this._viewer!==this.props.message.author&&t!==l.ORION)return null;switch(t){case l.SUBSCRIBE:return (o.createElement('span',null,this._renderSubscribeMessage(this.props.message)));case l.UNSUBSCRIBE:return (o.createElement('span',null,this._renderUnsubscribeMessage(this.props.message)));case l.THREAD_NAME:var u=this.props.message.log_message_data;if(!u.name)return (o.createElement('span',null,q._("B\u1ea1n \u0111\u00e3 x\u00f3a t\u00ean nh\u00f3m.")));return (o.createElement('span',null,q._("B\u1ea1n \u0111\u00e3 \u0111\u1eb7t t\u00ean nh\u00f3m l\u00e0 {the new name of the group}.",[q.param('the new name of the group',u.name)])));case l.THREAD_IMAGE:return (o.createElement('span',null,q._("B\u1ea1n \u0111\u00e3 thay \u0111\u1ed5i \u1ea3nh nh\u00f3m.")));case l.ORION:return this._renderP2PLogMessage(this.props.message);default:return null;}},_renderP2PLogMessage:function(t){var u=t.log_message_data,v=u.senderId,w=u.receiverId,x=this.state.extraParticipants,y=x.get(v),z=x.get(w);return (o.createElement(m,{amount:u.formattedAmount,receiver:z,sender:y,subtype:u.subtype,threadFBID:t.thread_fbid,threadID:t.thread_id,transferID:u.transfer_id}));},_renderSubscribeMessage:function(t){var u=this._moveCurrentUserToFront(t.log_message_data.added_participants),v=this.state.extraParticipants;switch(u.length){case 1:return q._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}.",[q.param('subscriber1',v.get(u[0]).name)]);case 2:return q._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1} v\u00e0 {subscriber2}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name)]);case 3:return q._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {subscriber3}.",[q.param('subscriber1',v.get(u[0]).name),q.param('subscriber2',v.get(u[1]).name),q.param('subscriber3',v.get(u[2]).name)]);default:var w=u.map(function(x){return v.get(x);});return q._("B\u1ea1n \u0111\u00e3 th\u00eam {subscriber1}, {subscriber2} v\u00e0 {num} ng\u01b0\u1eddi kh\u00e1c.",[q.param('subscriber1',w[0].name),q.param('subscriber2',w[1].name),q.param('num',w.slice(2).length)]);}},_renderUnsubscribeMessage:function(t){var u=this.state.extraParticipants,v=t.log_message_data.removed_participants[0],w=u.get(v);if(!v||v===t.author){return q._("B\u1ea1n \u0111\u00e3 r\u1eddi kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.");}else return q._("B\u1ea1n \u0111\u00e3 x\u00f3a {name} kh\u1ecfi cu\u1ed9c tr\u00f2 chuy\u1ec7n.",[q.param('name',w.name)]);},_moveCurrentUserToFront:function(t){var u=this._viewer,v=t.indexOf(u);if(v>0){var w=t.filter(function(x){return x!==u;});return [u].concat(w);}return t;}});f.exports=s;},null);
__d('MNCommerceLoggingConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={DIALOG_SURFACE:{SHIPMENT:'shipment',RECEIPT:'receipt',UNLINK:'unlink',UNLINK_ERROR:'unlink_error'}};f.exports=h;},null);
__d('MNCommerceActionTypes',['keyMirrorRecursive'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i=h({RECEIPT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},SHIPMENT:{LOADED:null,LOAD_ERROR:null,RELOAD:null},DIALOG:{SHOW:null,HIDE:null},RETAIL_ITEM:{LOADED:null,LOAD_ERROR:null,RELOAD:null}});f.exports=i;},null);
__d('MNCommerceDialogStateActions',['MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j={showDialog:function(k,l){h.dispatch({type:i.DIALOG.SHOW,dialogContainer:k,state:l});},hideDialog:function(){h.dispatch({type:i.DIALOG.HIDE});}};f.exports=j;},null);
__d('MNCommerceDialogStateStore',['FluxStore','MessengerDispatcher','MNCommerceActionTypes'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k,l;'use strict';k=babelHelpers.inherits(m,h);l=k&&k.prototype;function m(){l.constructor.call(this,i);this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;}m.prototype.__onDispatch=function(n){var o=n.type;switch(o){case j.DIALOG.SHOW:this.$MNCommerceDialogStateStore1=n.dialogContainer;this.$MNCommerceDialogStateStore2=n.state;this.__emitChange();break;case j.DIALOG.HIDE:this.$MNCommerceDialogStateStore1=null;this.$MNCommerceDialogStateStore2=null;this.__emitChange();break;}};m.prototype.getDialogContainer=function(){return this.$MNCommerceDialogStateStore1;};m.prototype.getState=function(){return this.$MNCommerceDialogStateStore2;};f.exports=new m();},null);
__d('MNCommerceButton.react',['CurrentEnvironment','MessengerDialogButton.react','React','XUIButton.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceButton',render:function(){var m=h.messengerdotcom,n=m?i:k,o=this.props.type;if(!o)o=this.props.type==='confirm'?'primary':'secondary';var p=m?'default':this.props.use,q=babelHelpers._extends({},this.props,{type:o,use:p});return (j.createElement(n,q,this.props.children));}});f.exports=l;},null);
__d('MNCommerceAttachmentConstants',[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={XLARGE_IMAGE_DIMENSION:72,LARGE_IMAGE_DIMENSION:60,SMALL_IMAGE_DIMENSION:32,SINGLE_IMAGE_HEIGHT:108,BUBBLE_PADDING:6,IMAGE_HEIGHT:{CHAT:108,WEB_INBOX:130},UNLINK_ERROR_DIALOG:{WIDTH:300},DIALOG:{WIDTH:445,PADDING:12},MDOTCOMDIALOG:{WIDTH:495},ORDER_DETAIL:{SUB_TOTAL:'subTotal',SHIPPING:'shippingCost',TAX:'tax',TOTAL:'totalCost'}};f.exports=h;},null);
__d('MNCommerceDialog.react',['CurrentEnvironment','LayerFadeOnHide','LayerHideOnEscape','MNCommerceAttachmentConstants','MessengerDialog.react','React','XUIDialog.react','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=m.PropTypes,s=m.createClass({displayName:'MNCommerceDialog',propTypes:{onToggle:r.func,shown:r.bool,width:r.number.isRequired},getDefaultProps:function(){return {onToggle:p,repositionOnUpdate:true,shown:true,width:h.messengerdotcom?k.MDOTCOMDIALOG.WIDTH:k.DIALOG.WIDTH};},componentDidUpdate:function(){if(this.props.repositionOnUpdate)setTimeout((function(){if(this.isMounted()&&this.refs.dialog&&this.refs.dialog.layer)this.refs.dialog.layer.updatePosition();}).bind(this),0);},render:function(){var t=h.messengerdotcom,u=t?l:n;return (m.createElement(u,babelHelpers._extends({behaviors:{LayerFadeOnHide:i,LayerHideOnEscape:j}},this.props,{className:q(this.props.className,t?"_3rx0":''),ref:'dialog'}),this.props.children));}});f.exports=s;},null);
__d('MNCommerceDialogBody.react',['CurrentEnvironment','MessengerDialogBody.react','React','XUIDialogBody.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogBody',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceDialogFooter.react',['CurrentEnvironment','MessengerDialogFooter.react','React','XUIDialogFooter.react','cloneWithProps','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.createClass({displayName:'MNCommerceDialogFooter',render:function(){var o=h.messengerdotcom,p=o?i:k,q,r=this.props.children;if(o){q=j.Children.count(this.props.children);r=j.Children.map(this.props.children,function(s,t){if(!s)return null;return l(s,{className:"_4ec0",type:t===0&&q===2?'secondary':'primary'});});}return (j.createElement(p,this.props,r));}});f.exports=n;},null);
__d('MNCommerceDialogTitle.react',['CurrentEnvironment','MessengerDialogHeader.react','React','XUIDialogTitle.react'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.createClass({displayName:'MNCommerceDialogTitle',render:function(){var m=h.messengerdotcom,n=m?i:k;return (j.createElement(n,this.props,this.props.children));}});f.exports=l;},null);
__d('MNCommerceUnlinkDialog.react',['MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=m.PropTypes,p=m.createClass({displayName:'MNCommerceUnlinkDialog',propTypes:{onCancelButtonClick:o.func,onTurnOffButtonClick:o.func},render:function(){var q=n._("Cancel"),r=n._("Turn Off");return (m.createElement(i,{onToggle:this.props.onToggle,shown:this.props.shown},m.createElement(l,{showCloseButton:false},n._("Unlink account?")),m.createElement(j,null,m.createElement('div',null,n._("You can turn off updates if you didn't sign up or just don't want to get them anymore."))),m.createElement(k,null,m.createElement(h,{label:q,onClick:this.props.onCancelButtonClick,use:'default'}),m.createElement(h,{label:r,onClick:this.props.onTurnOffButtonClick,use:'confirm'}))));}});f.exports=p;},null);
__d('MNCommerceUnlinkErrorDialog.react',['MNCommerceAttachmentConstants','MNCommerceErrors','React','MNCommerceButton.react','MNCommerceDialog.react','MNCommerceDialogBody.react','MNCommerceDialogFooter.react','MNCommerceDialogTitle.react','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){'use strict';if(c.__markCompiled)c.__markCompiled();var q=j.PropTypes,r=j.createClass({displayName:'MNCommerceUnlinkErrorDialog',propTypes:{errorType:q.number,onOkayButtonClick:q.func},render:function(){var s=p._("OK"),t=null,u=null;switch(this.props.errorType){case i.ALREADY_UNLINKED:u=j.createElement('div',null,p._("Updates Are Already Off"));t=j.createElement('div',null,p._("You aren't getting updates in Messenger."));break;default:u=j.createElement('div',null,p._("Couldn't Turn Off Updates"));t=j.createElement('div',null,p._("Sorry, something went wrong. Please try again."));break;}return (j.createElement(l,{onToggle:this.props.onToggle,shown:this.props.shown,width:h.UNLINK_ERROR_DIALOG.WIDTH},j.createElement(o,null,u),j.createElement(m,null,t),j.createElement(n,null,j.createElement(k,{label:s,onClick:this.props.onOkayButtonClick,use:'confirm'}))));}});f.exports=r;},null);
__d('MNCommerceUnlinkDialogContainer.react',['BanzaiLogger','MNCommerceDialogStateActions','MNCommerceDialogStateStore','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDialog.react','MNCommerceUnlinkErrorDialog.react','React'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=o.createClass({displayName:'MNCommerceUnlinkDialogContainer',render:function(){var q=j.getState();if(q&&q.errorType){h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK_ERROR})});return (o.createElement(n,{onToggle:this._onToggle,shown:!!q,errorType:q.errorType,onOkayButtonClick:this._hideDialog}));}else{h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_LOAD_SUCCESS,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});return (o.createElement(m,{onToggle:this._onToggle,shown:!!q,onCancelButtonClick:this._hideDialog,onTurnOffButtonClick:q&&q.onTurnOffButtonClick}));}},_onToggle:function(q){if(!q)this._hideDialog();},_hideDialog:function(){i.hideDialog();}});f.exports=p;},null);
__d("XMNCommerceUnlinkController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/messages\/commerce\/unlink\/",{page_id:{type:"String",required:true},user_id:{type:"String",required:true}});},null,{});
__d('MNCommerceUnlinkDataManager',['AsyncRequest','MNCommerceDialogStateActions','MNCommerceUnlinkDialogContainer.react','XMNCommerceUnlinkController'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();l.prototype.unlink=function(m,n){var o=k.getURIBuilder().setString('page_id',m).setString('user_id',n).getURI();new h().setURI(o).setErrorHandler(this.$MNCommerceUnlinkDataManager1).send();};l.prototype.$MNCommerceUnlinkDataManager1=function(m){i.showDialog(j,{errorType:m.error});};function l(){}f.exports=new l();},null);
__d('MNCommerceLogMessageUtils',['BanzaiLogger','Link.react','MercuryIDs','MNCommerceLoggingConstants','MNCommerceLoggerEvents','MNCommerceUnlinkDataManager','MNCommerceDialogStateActions','MNCommerceReplyTypes','MNCommerceUnlinkDialogContainer.react','React','cx','fbt','invariant','MercuryThreads'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=c('MercuryThreads').get();v.prototype.isCommercePageAdminMessage=function(w){return !!(w&&w.log_message_data&&w.log_message_data.replyType===o.COMMERCE_LINK);};v.prototype.getCommercePageUnlink=function(w,x){var y=function(){var z=j.getUserIDFromParticipantID(w.author),aa=u.getThreadMetaNow(w.thread_id);!aa?t(0):undefined;var ba=null;aa.participants.every(function(da){if(da!==w.author){ba=j.getUserIDFromParticipantID(da);return false;}return true;});var ca=function(){n.hideDialog();m.unlink(z,ba);};n.showDialog(p,{onTurnOffButtonClick:ca});h.log('MessengerCommerceLoggerConfig',{event:l.DIALOG_OPENED,debug_data:JSON.stringify({dialog_surface:k.DIALOG_SURFACE.UNLINK})});};return (q.createElement('span',null,w.log_message_body,' ',q.createElement(i,{className:(!x?"_2w2m":'')+(x?' '+"_1jvn":''),onClick:y},s._("T\u1eaft"))));};function v(){}f.exports=new v();},null);
__d('MessengerLogMessage.react',['Image.react','ImmutableObject','MercuryLogMessageType','MercuryMessageInfo','MessagingGenericAdminTextType','MessengerLogMessageBody.react','MNCommerceLogMessageUtils','React','ReactComponentWithPureRenderMixin','cx','fbt','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){'use strict';if(c.__markCompiled)c.__markCompiled();var u=o.PropTypes,v=s('/images/mercury/clients/messenger/message/messageStateFailed.png'),w=o.createClass({displayName:'MessengerLogMessage',mixins:[p],propTypes:{message:u.instanceOf(i).isRequired,viewer:u.string.isRequired},render:function(){return (o.createElement('div',{className:this._computeClass()},this._renderErrorState(),o.createElement('i',{className:"_uwa"}),o.createElement('span',{className:"_3oh-"},this._renderLogMessageBody())));},_renderLogMessageBody:function(){var x;if(this.props.message.log_message_type!==j.ORION){x=this.props.message.log_message_body;if(this.props.message.log_message_data.message_type===l.TURN_ON_PUSH&&x&&x.length>0)x=r._("{admin-text-message} d\u00e0nh cho Messenger tr\u00ean thi\u1ebft b\u1ecb di \u0111\u1ed9ng.",[r.param('admin-text-message',x.substring(0,x.length-1))]);}return (this._renderMNCommerceUnlink()||x||o.createElement(m,{message:this.props.message,viewer:this.props.viewer}));},_renderMNCommerceUnlink:function(){var x=this.props.message;if(n.isCommercePageAdminMessage(x))return n.getCommercePageUnlink(x,true);},_renderErrorState:function(){if(!k.hasError(this.props.message))return null;return (o.createElement(h,{className:"_41-9",src:v}));},_computeClass:function(){var x,y=this.props.message,z=y.log_message_type===j.UNSUBSCRIBE&&y.log_message_data.removed_participants.indexOf(y.author)!==-1,aa=this.props.viewer;switch(y.log_message_type){case j.SUBSCRIBE:x="_uwb";break;case j.UNSUBSCRIBE:x=z?"_uwc":"_uwe";break;case j.PHONE_CALL:x=y.log_message_data.caller.indexOf(aa)!==-1?"_uwf":"_uwg";break;case j.VIDEO_CALL:x=y.log_message_data.caller.indexOf(aa)!==-1?"_uwh":"_uwi";break;case j.THREAD_NAME:x="_uwj";break;case j.THREAD_IMAGE:x="_uwk";break;case j.SERVER_ERROR:x="_uwl";break;case j.LIVE_LISTEN:x="_uwm";break;case j.WALLPAPER:x="_uwn";break;case j.ORION:x="_uwo";break;case j.SWITCH_TO_WORK:x="_uwp";break;case j.PAGE_REPLY:x="_uwq";break;}return t("_497p"+((y.log_message_type===j.PHONE_CALL||y.log_message_type===j.VIDEO_CALL)&&!y.log_message_data.answered?' '+"_3no3":''),x);}});f.exports=w;},null);
__d('MessengerAttachmentAttribution.react',['ImmutableObject','MercuryAttachmentAttribution.react','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerAttachmentAttribution',propTypes:{attachment:l.instanceOf(h)},render:function(){return (j.createElement(i,{attachment:this.props.attachment,className:"_2f5n _4br2"}));}});f.exports=m;},null);
__d('MessengerErrorAttachment.react',['React','cx'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';j=babelHelpers.inherits(l,h.Component);k=j&&j.prototype;function l(m){k.constructor.call(this,m);}l.prototype.render=function(){return (h.createElement('div',{className:"_1o12 _52mr"},h.createElement('div',{className:"_1o13"},this.props.attachment.error_msg)));};f.exports=l;},null);
__d('MessengerFileAttachment.react',['Link.react','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=j.PropTypes,m=j.createClass({displayName:'MessengerFileAttachment',mixins:[i],propTypes:{attachment:l.object.isRequired},render:function(){return (j.createElement(h,{className:"_4pcn _2uf4",href:this.props.attachment.url},j.createElement('div',{className:"_2uf5"}),this.props.attachment.name));}});f.exports=m;},null);
__d('MessengerPhoto.react',['Image.react','MercuryAttachmentType','React','URI','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=206,p=450;function q(u){if(u.metadata){if(u.attach_type===i.VIDEO)return u.metadata.inbox_preview;return new k('/ajax/mercury/attachments/photo.php').addQueryData({fbid:u.metadata.fbid,height:o,mode:'cover',request_user_id:u.metadata.pageid,width:o}).toString();}return null;}function r(u){if(u.preview_uploading)return {height:u.preview_height||o,src:u.preview_url,width:u.preview_width||o};var v=q(u);if(v)return babelHelpers._extends({src:v},u.metadata.inbox_size);if(u.preview_url)return {height:u.preview_height,src:u.preview_url,width:u.preview_width};if(u.media)return u.media.playable&&u.media.animated_image?babelHelpers._extends({},u.media.animated_image_size,{src:u.media.animated_image}):babelHelpers._extends({},u.media.image_size,{src:u.media.image});}function s(u,v){if(u.preview_uploading)return u.preview_url?0:o;var w=u.media?r(u):{height:u.preview_height,width:u.preview_width};return Math.min(w.height*Math.min(1,p/w.width),p);}var t=j.createClass({displayName:'MessengerPhoto',contextTypes:{width:n.number},propTypes:{attachment:n.object.isRequired,isSingle:n.bool.isRequired,onClick:n.func},render:function(){var u=this.props.attachment,v=r(u);if(!v)return null;var w=this._getImageFromMetadata(v),x={};if(v.src)x.backgroundImage='url('+v.src+')';if(this.props.isSingle){var y=s(u,this.context);if(y)x.minHeight=y;}var z=!!this.props.attachment.app_attribution;return (j.createElement('div',{className:m(this.props.className,"_4tsk"+(z?' '+"_mxz":'')+(this.props.isSingle&&!z?' '+"_52mr":'')+(u.preview_uploading&&!v.src?' '+"_3etv":'')),style:x,onClick:this._onClick},w,j.createElement('a',{className:"_4tsl",href:v.src},this.props.children)));},_onClick:function(u){u.preventDefault();if(this.props.onClick)this.props.onClick(this.props.attachment);},_getImageFromMetadata:function(u){if(this.props.attachment.preview_uploading&&!u.src)return null;if(this.props.isSingle)return j.createElement(h,{alt:'',src:u.src});return null;}});f.exports=t;},null);
__d('MessengerVideo.react',['Image.react','MessengerPhoto.react','ReactComponentWithPureRenderMixin','React','cx','ix','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=k.createClass({displayName:'MessengerVideo',mixins:[j],propTypes:{attachment:o.object.isRequired,isSingle:o.bool.isRequired,onClick:o.func},render:function(){return (k.createElement(i,babelHelpers._extends({},this.props,{className:n(this.props.className,"_ccq")}),k.createElement(h,{className:"_ccr",src:m('/images/chat/chat_play_icon.png')}),k.createElement('span',{className:"_ccs"},this._getDuration())));},_getDuration:function(){var q;if(!!this.props.attachment.metadata){q=this.props.attachment.metadata.duration;}else if(!!this.props.attachment.media)q=this.props.attachment.media.duration;return !!q?this._formatDuration(q):null;},_formatDuration:function(q){var r=q%60;return Math.floor(q/60)+':'+(r<10?'0':'')+r;}});f.exports=p;},null);
__d('MessengerPhotosGroup.react',['ChatSpeakingSticker.react','MercuryAttachmentType','MercuryConfig','MessengerPhoto.react','MessengerVideo.react','MessagesViewer','ReactComponentWithPureRenderMixin','React','Vector','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){'use strict';if(c.__markCompiled)c.__markCompiled();var s='empty-spacer',t=o.PropTypes,u=o.createClass({displayName:'MessengerPhotosGroup',mixins:[n],propTypes:{attachType:t.string,attachments:t.arrayOf(t.object).isRequired,message:t.object},componentDidMount:function(){m.preload();},render:function(){var v=this.props.attachments;return (o.createElement('div',{className:this._getRootClassNameFor(v)},this._rowsFor(v)));},_onChildClicked:function(v){if(v.preview_uploading)return;if(v.attach_type===i.VIDEO){m.renderVideo({disableForward:true,rootClassName:"_1j1h",videoID:v.metadata.fbid,videoSize:new p(v.metadata.dimensions.width,v.metadata.dimensions.height),videoURI:v.url});}else if(v.attach_type===i.PHOTO||v.attach_type===i.ANIMATED_IMAGE){m.bootstrapWithConfig({dimensions:v.metadata.dimensions,disablePaging:this.props.attachments.length===1,disableForward:!j.MessengerForwardingEnabled,endpoint:v.url,fbid:v.metadata.fbid,rootClassName:"_1j1h",snapToPhoto:true,src:v.preview_url});}else if(v.uri)window.open(v.uri);},_rowsFor:function(v){if(v.length===1)return [this._photo(v[0],true)];var w=3;if(v.length===2||v.length===4)w=2;var x=[];for(var y=0,z=v.length;y<z;y+=w){var aa=v.slice(y,y+w),ba=w-aa.length;while(ba>0){aa.push({attach_type:s,key:'ghost'+ba});ba--;}x.push(o.createElement('div',{className:"_2n8g",key:y},aa.map((function(ca){return this._photo(ca);}).bind(this))));}return x;},_photo:function(v,w){var x;if(v.deduplication_key){x=v.deduplication_key;}else if(v.metadata){x=v.metadata.fbid;}else x=v.upload_id;var y={attachment:v,isSingle:w||false,key:x,onClick:this._onChildClicked},z=this.props.attachType||v.attach_type;switch(z){case i.PHOTO:case i.ANIMATED_IMAGE:return o.createElement(k,y);case i.VIDEO:if(v.metadata&&v.metadata.render_as_sticker)return (o.createElement(h,{videoSize:v.metadata.dimensions,videoURI:v.url}));return o.createElement(l,y);case s:return (o.createElement('div',{key:v.key,className:"_4tsk _4rf-"}));default:throw v.attachType+' is not handled by MessengerPhotoGroup';}},_getRootClassNameFor:function(v){var w=v.length===2||v.length===4;return r(this.props.className,"_2n8h"+(v.length===1?' '+"_2n8i":'')+(w?' '+"_4ksk":'')+(v.length>1&&!w?' '+"_2n8k":''));}});f.exports=u;},null);
__d('MessengerStickerUtils',['MercuryAttachmentType'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();function i(l){return !!(l&&l.attach_type===h.STICKER);}function j(l){var m=l.attachments;return !!(l.is_like_preview||l.sticker_id||m&&m.length===1&&i(m[0]));}function k(l){return l.size===1&&j(l.first());}f.exports={isStickerMessageGroup:k,isStickerMessage:j,isStickerAttachment:i};},null);
__d('MessengerVoiceClipAttachment.react',['MercuryAttachmentAudioClip.react','MercuryShareAttachmentRenderLocations','ReactComponentWithPureRenderMixin','React','cx'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=k.PropTypes,n=k.createClass({displayName:'MessengerVoiceClipAttachment',mixins:[j],propTypes:{attachment:m.object.isRequired,message:m.object.isRequired},render:function(){var o=this.props.attachment,p=o.metadata.duration/1000,q=200,r=!!o.app_attribution;return (k.createElement('div',{className:"_hh7"+(' '+"_s1-")+(!r?' '+"_52mr":'')+(r?' '+"_mxz":'')+(' '+"_1fz8")+(r?' '+"_1-wa":'')+(' '+"_1nqp")},k.createElement(h,{src:o.url,duration:p,key:'audio:'+this.props.message.message_id,showHelp:false,width:q,location:i.MESSENGER,rootClassName:"_3czg"+(r?' '+"_4yjw":'')+(' '+"_2poz")+(' '+"_ui9")})));}});f.exports=n;},null);
__d('StickersDispatcher',['Dispatcher','StickerConstants'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=Object.assign(new h(),{_handleUpdate:function(k,l){var m=babelHelpers._extends({payloadSource:k},l);this.dispatch(m);},handleUpdateFromViewActions:function(k){this._handleUpdate(i.PayloadSource.VIEW_ACTION,k);}});f.exports=j;},null);
__d('StickerActions',['BanzaiLogger','StickersDispatcher','keyMirror'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=j({ADD_PACK:null,CLICKED_STICKER_IN_THREAD:null,HIDE_TRAY:null,REMOVE_PACK:null,REPLACE_STICKER_STATE:null,RESET_NUM_NEW_PACKS:null,SELECT_PACK:null,SELECT_STORE_PACK:null,SHOW_TRAY:null,UPDATE_TRAY_DATA:null,TRAY_DATA_READY:null}),l={Types:k,addPack:function(m){i.dispatch({type:k.ADD_PACK,packID:m});},removePack:function(m){i.dispatch({type:k.REMOVE_PACK,packID:m});},selectPack:function(m,n){if(!n)h.log('StickersLoggerConfig',{event:'select_pack',packid:m});i.dispatch({type:k.SELECT_PACK,packID:m});},selectStorePack:function(m){i.dispatch({type:k.SELECT_STORE_PACK,packID:m});},resetNumNewPacks:function(){i.dispatch({type:k.RESET_NUM_NEW_PACKS});},handleStickerClick:function(m,n){i.dispatch({packID:m,threadID:n,type:l.Types.CLICKED_STICKER_IN_THREAD});},showStickerTray:function(m){i.dispatch({type:l.Types.SHOW_TRAY,threadID:m});},hideStickerTray:function(){i.dispatch({type:l.Types.HIDE_TRAY});},updateTrayData:function(){i.dispatch({type:l.Types.UPDATE_TRAY_DATA});},loadedTrayData:function(){i.dispatch({type:l.Types.TRAY_DATA_READY});}};f.exports=l;},null);
__d('isRetina',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();f.exports=function(){return (window.devicePixelRatio||1)>1;};},null);
__d('MessengerAttachmentRenderer',['CurrentUser','MercuryAttachment','MercuryAttachmentType','MercuryAudioType','MercuryShareAttachment.react','MercuryShareAttachmentRenderLocations','MessengerErrorAttachment.react','MessengerFileAttachment.react','MessengerHotLikePreview.react','MessengerHotLikeUtils','MessengerPhotosGroup.react','MessengerStickerUtils','MercuryThreads','MessengerVoiceClipAttachment.react','React','Set','Sticker.react','StickerActions','StickerAssetType','StickerConstants','StickerImages','StickerUtils','StoryAttachmentStyle','XStickerAssetController','cx','isRetina'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga){'use strict';if(c.__markCompiled)c.__markCompiled();var ha=new w([j.ANIMATED_IMAGE,j.PHOTO,j.VIDEO]),ia=700,ja=function(la){return la===Object(la);},ka={getAttachmentsInsideBubble:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (!this.attachmentShouldAppearOutsideBubble(na));}).bind(this));return this._getAttachmentComponents(ma,la);},getAttachmentsOutsideBubble:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (this.attachmentShouldAppearOutsideBubble(na));}).bind(this));return this._getAttachmentComponents(ma,la);},_getAttachmentComponents:function(la,ma){var na=this._getPhotosGroup(la.filter(this.isPhotoAttachment),ma),oa=la.filter((function(pa){return !this.isPhotoAttachment(pa);}).bind(this)).map((function(pa){return this._getAttachmentComponent(pa,ma);}).bind(this));if(na)oa.push(na);return oa;},_getAttachmentComponent:function(la,ma){if(s.isStickerAttachment(la))return this._getStickerComponent(la,ma);if(this.isVoiceClip(la))return this._getVoiceClip(la,ma);if(this.isFileAttchment(la))return this._getFileComponent(la,ma);if(this.isP2P(la)||this.isShareAttachment(la))return this._getShareAttachment(la,ma);if(this.isErrorAttachment(la))return this._getErrorAttachment(la,ma);},_getStickerComponent:function(la,ma){if(ma.is_like_preview)return (v.createElement(p,{key:'hlp:'+ma.like_preview_since,since:ma.like_preview_since}));var na=la.metadata;if(!na){na=q.getMetadataForHotLike(ma.sticker_id);if(!na){var oa=ba.getSticker(ma.sticker_id);na=babelHelpers._extends({},oa);var pa=ca.getScaledDimensions(oa?oa.height:aa.THREAD_SIZE,oa?oa.width:aa.THREAD_SIZE,aa.THREAD_SIZE),qa=pa.height,ra=pa.width;na.height=qa;na.width=ra;}na.stickerID=ma.sticker_id;}var sa=ea.getURIBuilder().setInt('sticker_id',na.stickerID),ta=null,ua=null;if(ga()){ta=na.paddedSpriteURI2x;ua=na.spriteURI2x;}else{ta=na.paddedSpriteURI;ua=na.spriteURI;}var va=t.getForFBID(h.getID()).getThreadMetaNow(ma.thread_id),wa=va?va.custom_like_icon:null;return (v.createElement(x,{className:"_2poz _ui9",animationTrigger:'hover',customLike:wa,frameCount:na.frameCount||1,frameRate:na.frameRate||aa.DEFAULT_FRAME_RATE,framesPerCol:na.framesPerCol||1,framesPerRow:na.framesPerRow||1,key:'sticker:'+ma.message_id,onStickerClick:function(xa,ya){y.handleStickerClick(xa,ma.thread_id);},packID:na.packID&&na.packID.toString(),paddedSpriteURI:ta,sourceHeight:na.height,sourceURI:sa.setEnum('image_type',z.IMAGE).getURI().toString(),sourceWidth:na.width,spriteURI:ua,stickerID:na.stickerID.toString()}));},_getShareAttachment:function(la,ma){return v.createElement(l,{attachment:la.share,location:m.MESSENGER,key:'share:'+ma.message_id,maxWidth:ia,thread_id:ma.thread_id});},_getVoiceClip:function(la,ma){return (v.createElement(u,{attachment:la,key:'audio:'+ma.message_id,message:ma}));},_getErrorAttachment:function(la,ma){return (v.createElement(n,{attachment:la,key:'error:'+ma.message_id}));},_getPhotosGroup:function(la,ma){return la.length?v.createElement(r,{attachments:la,className:"_2poz _52mr _ui9",key:'photos:'+ma.message_id,message:ma}):null;},_getFileComponent:function(la,ma){return (v.createElement(o,{attachment:la,className:"_2poz",key:'file:'+la.url}));},attachmentShouldAppearOutsideBubble:function(la){return s.isStickerAttachment(la)||this.isPhotoAttachment(la)||this.isShareAttachment(la)||this.isP2P(la)||this.isVoiceClip(la)||this.isErrorAttachment(la);},isPhotoAttachment:function(la){return ha.has(la.attach_type);},isFileAttchment:function(la){return la.attach_type===j.FILE;},isShareAttachment:function(la){return !!(this._isStoryBased(la)&&!this.isP2P(la)&&(la.share.style_list.indexOf(da.SHARE)>-1||la.share.style_list.indexOf(da.FALLBACK)>-1));},isP2P:function(la){return !!(this._isStoryBased(la)&&la.share.style_list.indexOf(da.ORION)>-1);},_isStoryBased:function(la){return !!(la.attach_type===j.SHARE&&la.share&&la.share.style_list);},isVoiceClip:function(la){return !!la.metadata&&(la.metadata.type===k.AudioClip||la.metadata.type===k.VoiceMessageWithTranscript);},isVoiceClipAttachment:function(la){var ma=i.get(la).filter(ja).filter((function(na){return (this.isVoiceClip(na));}).bind(this));return !!ma.length;},isP2PAttachment:function(la){var ma=i.get(la).filter((function(na){return (ja(na)&&this.isP2P(na));}).bind(this));return !!ma.length;},isErrorAttachment:function(la){return la.attach_type===j.ERROR;}};f.exports=ka;},null);
__d('MessengerBubble.react',['immutable','MercuryMessageBody.react','ReactComponentWithPureRenderMixin','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MessengerBubble',mixins:[j],propTypes:{attachments:n.instanceOf(h.List),body:n.string,isP2PAttachment:n.bool,ranges:n.array,threadID:n.string},render:function(){return (k.createElement('div',{className:m(this.props.className,"_hh7"+(' '+"_s1-")+(' '+"_52mr")+(this.props.isP2PAttachment?' '+"_4z55":''))},k.createElement(i,{className:"_3oh-",body:this.props.body,ranges:this.props.ranges,threadID:this.props.threadID}),this.props.attachments));}});f.exports=o;},null);
__d('MessengerBubbleBlock.react',['React','cx'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=h.createClass({displayName:'MessengerBubbleBlock',render:function(){return (h.createElement('div',{className:"_52mr _4h13 _3058"},this.props.children));}});f.exports=j;},null);
__d('MessengerContextualActions.react',['ContextualLayerUpdateOnScroll','LayerHideOnBlur','Link.react','React','ReactAbstractContextualDialog','ReactLayer','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o=k.PropTypes,p=m.createClass(l.createSpec({displayName:'MessengerContextualActionsDialog',theme:{wrapperClassName:"_hw2",arrowDimensions:{offset:12,length:12}}})),q=k.createClass({displayName:'MessengerContextualActions',propTypes:{onToggle:o.func},render:function(){var s=this.props,t=s.children,u=babelHelpers.objectWithoutProperties(s,['children']);return (k.createElement(p,babelHelpers._extends({},u,{alignment:'center',behaviors:{ContextualLayerUpdateOnScroll:h,LayerHideOnBlur:i},onToggle:this.props.onToggle}),k.createElement('ul',{className:"_hw3"},t)));}}),r=k.createClass({displayName:'MessengerContextualActionsItem',propTypes:{onClick:o.func},render:function(){return (k.createElement('li',{className:"_hw4"},k.createElement(j,{className:"_hw5",onClick:this.props.onClick},this.props.children)));}});q.Item=r;f.exports=q;},null);
__d('MessengerDeleteMessageDialog.react',['MessengerConfig','MessengerDialog.react','MessengerDialogBody.react','MessengerDialogButton.react','MessengerDialogCancelButton.react','MessengerDialogFooter.react','MessengerDialogHeader.react','ReactComponentWithPureRenderMixin','React','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){'use strict';if(c.__markCompiled)c.__markCompiled();var r=p.PropTypes,s=p.createClass({displayName:'MessengerDeleteMessageDialog',mixins:[o],propTypes:{isFromViewer:r.bool,onDelete:r.func,onToggle:r.func},render:function(){return (p.createElement(i,{onToggle:this.props.onToggle},p.createElement(n,null,this._renderDialogHeaderMsg()),p.createElement(j,null,this._renderDialogBodyMsg()),p.createElement(m,null,p.createElement(l,{onClick:this._handleCancel}),p.createElement(k,{label:this._renderDialogButtonMsg(),onClick:this._handleDelete,type:'primary',use:'danger'}))));},_renderDialogHeaderMsg:function(){if(h.GlobalDelete)if(this.props.isFromViewer){return q._("X\u00f3a tin nh\u1eafn?");}else return q._("\u1ea8n tin nh\u1eafn?");return q._("X\u00f3a tin nh\u1eafn");},_renderDialogBodyMsg:function(){if(h.GlobalDelete)if(this.props.isFromViewer){return q._("N\u1ebfu b\u1ea1n x\u00f3a tin nh\u1eafn n\u00e0y, kh\u00f4ng ai trong cu\u1ed9c tr\u00f2 chuy\u1ec7n n\u00e0y c\u00f3 th\u1ec3 xem tin nh\u1eafn n\u1eefa v\u00e0 kh\u00f4ng th\u1ec3 ho\u00e0n t\u00e1c thao t\u00e1c n\u00e0y.");}else return q._("N\u1ebfu b\u1ea1n \u1ea9n b\u1ea3n sao tin nh\u1eafn n\u00e0y, b\u1ea1n kh\u00f4ng th\u1ec3 hi\u1ec3n th\u1ecb l\u1ea1i. Ng\u01b0\u1eddi kh\u00e1c trong cu\u1ed9c tr\u00f2 chuy\u1ec7n c\u00f3 v\u1eabn c\u00f3 th\u1ec3 xem tin nh\u1eafn n\u00e0y.");return q._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a tin nh\u1eafn n\u00e0y kh\u00f4ng?");},_renderDialogButtonMsg:function(){if(!this.props.isFromViewer&&h.GlobalDelete)return q._("\u1ea8n");return q._("X\u00f3a");},_handleDelete:function(){this.props.onToggle&&this.props.onToggle(false);this.props.onDelete&&this.props.onDelete();},_handleCancel:function(){this.props.onCancel&&this.props.onCancel();}});f.exports=s;},null);
__d('MessengerMessageActionsWrapper.react',['MessengerConfig','DOMQuery','ImmutableObject','ReactLayeredComponentMixin','MercuryMessageActions','MercuryMessageInfo','MessengerActions','MessengerContextualActions.react','MessengerDeleteMessageDialog.react','Parent','React','ReactDOM','csx','cx','fbt','invariant','setImmediate'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){'use strict';if(c.__markCompiled)c.__markCompiled();var y=o.Item,z=r.PropTypes,aa="_ui9",ba="._ui9",ca=r.createClass({displayName:'MessengerMessageActionsWrapper',mixins:[k],propTypes:{isActive:z.bool,isDeletable:z.bool,isFromViewer:z.bool,message:z.instanceOf(j).isRequired,onDeselect:z.func.isRequired,onSelect:z.func.isRequired},getDefaultProps:function(){return {isDeletable:true};},render:function(){return (r.createElement('div',babelHelpers._extends({onContextMenu:this._handleContextMenu},this.props),this.props.children));},renderLayers:function(){if(!this.props.isDeletable||!this.props.isActive)return {};var da=s.findDOMNode(this),ea=da&&i.scry(da,ba)[0];if(!ea)return {};return {contextualDialog:r.createElement(o,{context:ea,onToggle:this._handleActionsToggle,shown:this.props.isActive},this._renderRetry(),r.createElement(y,{onClick:this._handleDelete},this._renderActionItemMsg()))};},_renderActionItemMsg:function(){if(!this.props.isFromViewer&&h.GlobalDelete)return v._("\u1ea8n");return v._("X\u00f3a");},_renderRetry:function(){if(!m.hasError(this.props.message))return null;return (r.createElement(y,{onClick:this._handleRetry},v._("Th\u1eed l\u1ea1i")));},_handleActionsToggle:function(da){!da&&this._handleDeselect();},_handleDeselect:function(){this.props.onDeselect(this.props.message.message_id);},_handleDelete:function(){var da=this.props.message;n.showDialog(p,{onDelete:function(){l.get()['delete'](da.thread_id,[da.message_id]);},onToggle:this._handleDialogToggle,onCancel:this._handleDeselect,isFromViewer:this.props.isFromViewer});},_handleDialogToggle:function(da){if(!da)n.hideDialog();},_handleRetry:function(){this._handleDeselect();l.get().resend(this.props.message);},_handleContextMenu:function(da){if(!this._shouldAllowNativeContextMenu(da))da.preventDefault();x((function(){this.props.onSelect(this.props.message.message_id);}).bind(this));},_shouldAllowNativeContextMenu:function(da){!(da.target instanceof HTMLElement)?w(0):undefined;return (da.target.nodeName.toLowerCase()==='a'||window.getSelection().toString()!==''||!q.byClass(da.target,aa));}});f.exports=ca;},null);
__d('MessengerMessageSeenHeads.react',['Image.react','immutable','ImmutableObject','MercuryMessageInfo','MessengerConfig','ReactComponentWithPureRenderMixin','React','cssVar','cx','fbt','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){'use strict';if(c.__markCompiled)c.__markCompiled();var t=n.PropTypes,u=l.MaxSeenHeadCount||8,v=n.createClass({displayName:'MessengerMessageSeenHeads',mixins:[m],propTypes:{isFromViewer:t.bool,message:t.instanceOf(j).isRequired,nextTimestamp:t.number.isRequired,participants:t.instanceOf(i.Map).isRequired,readReceipts:t.instanceOf(i.OrderedMap).isRequired},render:function(){var x=this.props,y=x.message,z=x.nextTimestamp,aa=x.participants,ba=x.readReceipts;if(k.isSending(y)||ba.isEmpty())return null;var ca=i.Seq(ba).filter(function(ka,la){return (ka>=y.timestamp&&ka<z);});if(ca.isEmpty())return null;var da=this.props.isFromViewer?u:w(),ea=ca.count()>da+1,fa=ea?ca.slice(0,da):ca,ga=fa.map(function(ka,la){var ma=aa.get(la);if(!ma)return null;var na=q._("\u0110\u00e3 xem b\u1edfi {full name}",[q.param('full name',ma.name)]);return (n.createElement(h,{alt:na,className:"_jf2",key:la,src:ma.image_src,title:na}));}).toArray(),ha=ga.length;if(!ha)return null;var ia=ea?ca.slice(da).count():0;if(ia>0){var ja=ca.slice(da).map(function(ka,la){var ma=aa.get(la);return ma?ma.name:null;}).filter(function(ka){return !!ka;}).join('\n')+' ';ga.unshift(n.createElement('span',{className:"_jf3",key:'overflow',title:ja},'+'+ia));}return (n.createElement('span',{className:s(this.props.className,"_jf4"+(ha+ia===1?' '+"_jf5":''))},ga));}});function w(){var x=r().width;if(x<parseInt("920px".replace('px',''),10))return Math.min(u,8);if(x<parseInt("1211px".replace('px',''),10))return Math.min(u,3);return u;}f.exports=v;},null);
__d('messengerRTLClasses',['cx','isRTL'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k,l){var m=i(k||'');return l?m?"_4pv0":'':(!m?"direction_ltr":'')+(m?' '+"direction_rtl":'')+(!m?' '+"text_align_ltr":'')+(m?' '+"text_align_rtl":'')+(m?' '+"_4pv0":'');}f.exports=j;},null);
__d('MessengerMessage.react',['MercuryDisplayTimeFilterMessageRenderer','immutable','ImmutableObject','MercuryAttachment','MercuryConfig','MercuryMessageDeliveryState','MercuryMessageInfo','MessengerAttachmentAttribution.react','MessengerAttachmentRenderer','MessengerBubble.react','MessengerBubbleBlock.react','MessengerCodeBubble.react','MessengerCodePasteUtils','MessengerConfig','MessengerMessageActionsWrapper.react','MessengerMessageSeenHeads.react','React','cx','fbt','joinClasses','messengerRTLClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba){'use strict';if(c.__markCompiled)c.__markCompiled();var ca=x.PropTypes;function da(fa){switch(fa){case m.SENDING:return z._("\u0110ang g\u1eedi");case m.SENT:return z._("\u0110\u00e3 g\u1eedi");case m.DELIVERED:return z._("\u0110\u00e3 chuy\u1ec3n");case m.ERROR:return z._("L\u1ed7i");}return null;}var ea=x.createClass({displayName:'MessengerMessage',propTypes:{deliveryTimestamp:ca.number.isRequired,isActive:ca.bool,isFromViewer:ca.bool,message:ca.instanceOf(j).isRequired,nextTimestamp:ca.number.isRequired,onDeselect:ca.func.isRequired,onSelect:ca.func.isRequired,participants:ca.instanceOf(i.Map).isRequired,readReceipts:ca.instanceOf(i.OrderedMap).isRequired,showDeliveryState:ca.bool},shouldComponentUpdate:function(fa){return (fa.isActive!==this.props.isActive||fa.isFromViewer!==this.props.isFromViewer||fa.message!==this.props.message||fa.nextTimestamp!==this.props.nextTimestamp||fa.showDeliveryState!==this.props.showDeliveryState||fa.deliveryTimestamp!==this.props.deliveryTimestamp||!i.is(fa.readReceipts,this.props.readReceipts)||!i.is(fa.participants,this.props.participants));},render:function(){return (x.createElement(v,{className:aa("_o46"+(' '+"_3erg")+(this.props.isActive?' '+"_-5k":'')+(this.props.isFromViewer?' '+"_3i_m":'')+(this.props.isFromViewer?' '+"_nd_":'')+(!this.props.isFromViewer?' '+"_29_7":''),ba(this.props.message.body)),isActive:this.props.isActive,isDeletable:!this._isP2PAttachment(),isFromViewer:this.props.isFromViewer,message:this.props.message,onDeselect:this.props.onDeselect,onSelect:this.props.onSelect},x.createElement('div',{className:'clearfix'},this._renderBubble(),this._renderAttachmentsOutsideBubble()),this._renderErrorState(),this._renderDeliveryState(),x.createElement(w,{className:"_4jzq",isFromViewer:this.props.isFromViewer,message:this.props.message,nextTimestamp:this.props.nextTimestamp,participants:this.props.participants,readReceipts:this.props.readReceipts})));},_renderAttachmentsOutsideBubble:function(){var fa=p.getAttachmentsOutsideBubble(this.props.message);if(!fa||!fa.length)return null;var ga=x.createElement('div',{className:"_3058 _15gf"},fa);if(this.props.message.attachments.length===1&&k.hasAttribution(this.props.message.attachments[0]))return (x.createElement(r,null,ga,x.createElement(o,{attachment:new j(this.props.message.attachments[0])})));return ga;},_isP2PAttachment:function(){return (p.isP2PAttachment(this.props.message));},_renderBubble:function(){var fa=this.props.message,ga=i.List(p.getAttachmentsInsideBubble(fa));if(l.MessengerCodePaste&&t.containsCodeBlock(fa.body))return (x.createElement(s,{attachments:ga,body:fa.body,className:"_3058 _ui9",ranges:fa.ranges||[],threadID:fa.thread_id||''}));if(fa.is_filtered_content)return (x.createElement('div',{className:"_3058 _wiu _52mr uiBoxYellow clearfix"},h.renderFilteredContent(fa)));if(fa.body||!ga.isEmpty())return (x.createElement(q,{attachments:ga,body:fa.body,className:"_3058 _ui9",isP2PAttachment:this._isP2PAttachment(),ranges:fa.ranges,threadID:fa.thread_id}));return null;},_renderDeliveryState:function(){if(!this.props.isFromViewer||!this.props.showDeliveryState||this.props.message.is_like_preview)return null;var fa=n.getDeliveryState(this.props.message,this.props.deliveryTimestamp);if(fa===m.UNKNOWN||!u.DeliveryStateGK&&(fa===m.SENT||fa===m.DELIVERED))return null;return (x.createElement('span',{className:"_2her"+(fa===m.SENDING&&!u.DeliveryStateGK?' '+"_1qbd":'')+(fa===m.SENDING&&!u.DeliveryStateGK?' '+"_3qh2":'')+(fa===m.SENDING&&u.DeliveryStateGK?' '+"_4jzp":'')+(fa===m.SENT?' '+"_3zzf":'')+(fa===m.DELIVERED?' '+"_9ah":'')+(fa===m.ERROR?' '+"_5ei9":''),onClick:fa===m.ERROR?this._handleSelect:null,title:da(fa)}));},_renderErrorState:function(){var fa=this.props.message;if(!n.hasError(fa))return null;return (x.createElement('span',{className:"_3058 _2ygi",onClick:this._handleSelect},z._("Kh\u00f4ng th\u1ec3 g\u1eedi tin nh\u1eafn.")));},_handleSelect:function(fa){fa.stopPropagation();this.props.onSelect(this.props.message.message_id);}});f.exports=ea;},null);
__d('MessengerProfileImageWrapper.react',['ReactComponentWithPureRenderMixin','React','cssVar','cx','getViewportDimensions','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n=i.PropTypes,o=i.createClass({displayName:'MessengerProfileImageWrapper',mixins:[h],propTypes:{isMessengerUser:n.bool,showBadge:n.bool,size:n.number,tooltipContent:n.string},render:function(){var q={};if(this.props.tooltipContent){q['aria-label']=this.props.tooltipContent;q['data-hover']='tooltip';var r=l().width,s=parseInt("640px".replace('px',''),10);q['data-tooltip-position']=r<=s?'above':'left';}return (i.createElement('div',babelHelpers._extends({className:m("_4ldz",this.props.className),style:{width:this.props.size+'px',height:this.props.size+'px'}},q),i.createElement('div',{className:"_4ld-",style:{width:this.props.size+'px',height:this.props.size+'px'}},this.props.children),this._renderBadge()));},_renderBadge:function(){if(!this.props.showBadge||this.props.isMessengerUser==null)return null;return (i.createElement(p,{className:"_4ld_",isMessengerUser:this.props.isMessengerUser}));}}),p=i.createClass({displayName:'MessengerBadge',mixins:[h],propTypes:{isMessengerUser:n.bool,size:n.number},render:function(){return (i.createElement('div',{className:m(this.props.className,"_2pom")},i.createElement('div',{className:"_2pon"+(this.props.isMessengerUser?' '+"_2poo":'')+(!this.props.isMessengerUser?' '+"_2pop":'')})));}});f.exports=o;},null);
__d('MessengerMessageGroup.react',['immutable','ImmutableObject','Image.react','Link.react','MercuryIDs','MercuryParticipants','MercuryTimestamp','MessengerActions','MessengerDateBreak.react','MessengerMessage.react','MessengerPageAdminNoteList.react','MessengerProfileImageWrapper.react','MessengerStickerUtils','PagesMessengerCreatorInfo.react','React','StoreAndPropBasedStateMixin','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y){'use strict';if(c.__markCompiled)c.__markCompiled();var z=h.List,aa=h.OrderedMap,ba=v.PropTypes,ca=32,da=new i({image_src:'',is_messenger_user:true,name:''}),ea=v.createClass({displayName:'MessengerMessageGroup',mixins:[w(m)],propTypes:{activeMessageID:ba.string,deliveryTimestamp:ba.number.isRequired,hasDateBreak:ba.bool,isCanonical:ba.bool,isFromViewer:ba.bool,isPageMessage:ba.bool,lastReadTimestamp:ba.number.isRequired,messages:ba.instanceOf(h.List).isRequired,nextTimestamp:ba.number.isRequired,onMessageDeselect:ba.func.isRequired,onMessageSelect:ba.func.isRequired,readReceipts:ba.instanceOf(aa).isRequired},statics:{calculateState:function(ha){return {participants:fa(ha)};}},shouldComponentUpdate:function(ha,ia){return (this.props.activeMessageID!==ha.activeMessageID||this.props.isFromViewer!==ha.isFromViewer||this.props.deliveryTimestamp!==ha.deliveryTimestamp||this.props.lastReadTimestamp!==ha.lastReadTimestamp||!h.is(this.props.messages,ha.messages)||!h.is(this.props.readReceipts,ha.readReceipts)||!h.is(this.state.participants,ia.participants));},render:function(){return (v.createElement('div',null,v.createElement('div',{className:"_1t_p"+(' '+"clearfix")+(t.isStickerMessageGroup(this.props.messages)?' '+"_5tx1":'')+(this._hasSeenHeadsAtBottom()?' '+"_35fy":'')},this._renderProfileColumn(),this._renderName(),v.createElement('div',{className:"_1t_s"},this._renderMessages())),this.props.isPageMessage?this._renderNotes():null));},_renderProfileColumn:function(){if(this.props.isFromViewer)return null;var ha=this.props.messages.last(),ia=this.state.participants.get(ha.author)||da,ja=y._("{name} {time}",[y.param('name',ia.name),y.param('time',n.getPreciseTimestamp(ha.timestamp))]),ka=v.createElement(s,{className:"_1t_r",isMessengerUser:ia.is_messenger_user,size:ca,showBadge:true,tooltipContent:ja},v.createElement(j,{alt:'',src:ia.image_src,height:ca,width:ca}));if(!this.props.isCanonical)ka=v.createElement(k,{className:"_5f0v",onClick:this._handleContactSelect.bind(this,ia),tabIndex:-1},ka);return (v.createElement('div',{className:"_1t_q"},ka));},_renderMessages:function(){var ha=this.props.messages.size,ia=[];this.props.messages.forEach((function(ja,ka,la){var ma=ja.message_id===this.props.activeMessageID;if(ma&&!(ka===0&&this.props.hasDateBreak))ia.push(v.createElement(p,{className:"_5r8z",date:new Date(ja.timestamp),key:'db:'+ja.message_id}));ia.push(v.createElement(q,{deliveryTimestamp:this.props.deliveryTimestamp,isActive:ma,isFromViewer:this.props.isFromViewer,key:ja.message_id,message:ja,participants:this.state.participants,nextTimestamp:this._getNextTimestamp(la,ha,ka),onDeselect:this.props.onMessageDeselect,onSelect:this.props.onMessageSelect,readReceipts:this.props.readReceipts,showDeliveryState:ja.timestamp>this.props.lastReadTimestamp}));if(ga(this.props.isPageMessage,la,ka,ja))ia.push(v.createElement(u,{key:'creator_info:'+ka,creator_info:ja.creator_info}));}).bind(this));return ia;},_renderNotes:function(){var ha=[];this.props.messages.forEach((function(ia,ja,ka){if(this.props.isPageMessage&&ia.page_admin_notes)ha.push(v.createElement(r,{key:'notes:'+ia.message_id,notes:ia.page_admin_notes}));}).bind(this));return ha;},_renderName:function(){var ha=this.state.participants.get(this.props.messages.first().author);if(!ha)return null;return (v.createElement('h5',{className:"_ih3"+(this.props.isCanonical||this.props.isFromViewer?' '+"_-ne":'')},v.createElement('span',{className:"_3oh-"},ha.short_name)));},_hasSeenHeadsAtBottom:function(){var ha=this.props,ia=ha.messages,ja=ha.nextTimestamp,ka=ha.readReceipts,la=ia.last().timestamp,ma=0;ka.forEach(function(na){if(na>=la&&na<ja)if(++ma===2)return false;});return ma===2;},_getNextTimestamp:function(ha,ia,ja){return ja<ia-1?ha.get(ja+1).timestamp:this.props.nextTimestamp;},_handleContactSelect:function(ha){var ia=l.getThreadIDFromParticipantID(ha.id);ia&&o.selectThread(ia);}});function fa(ha){var ia=ha.messages.first().author;return h.Map().withMutations(function(ja){ha.readReceipts.forEach(function(ka,la){ja.set(la,m.getOrFetch(la));});ja.set(ia,m.getOrFetch(ia));});}function ga(ha,ia,ja,ka){if(!ha||!ka.creator_info)return false;if(ja===ia.size-1)return true;var la=ia.get(ja+1).creator_info;if(!la)return true;return ka.creator_info.creatorID!==la.creatorID;}f.exports=ea;},null);
__d('MessengerPresenceStatus.react',['React','ReactComponentWithPureRenderMixin','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'MessengerPresenceStatus',mixins:[i],propTypes:{isUserActive:k.bool.isRequired,lastActive:k.string,platform:k.string},render:function(){var m;if(this.props.isUserActive){m=j._("Ho\u1ea1t \u0111\u1ed9ng tr\u00ean {platform}",[j.param('platform',this.props.platform)]);}else if(this.props.lastActive){m=j._("Ho\u1ea1t \u0111\u1ed9ng {time} tr\u01b0\u1edbc",[j.param('time',this.props.lastActive)]);}else m=this.props.platform;return (h.createElement('span',{className:this.props.className},m));}});f.exports=l;},null);
__d('MessengerPresenceStatusUtils',['AvailableListConstants','LastMobileActiveTimes','MercuryIDs','PresenceStatus','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m={getStatusFromCanonicalThread:function(n,o){var p=null;if(o&&o.is_canonical){var q=n.get(j.getParticipantIDFromFromThreadID(o.thread_id));if(q){var r=k.get(q.fbid),s,t,u=q.is_messenger_user?l._("Messenger"):l._("Facebook");if(r!==h.ACTIVE){s=i.get(q.fbid);t=i.getShortDisplay(q.fbid);}p={contact:q,platform:u,isUserActive:r===h.ACTIVE,lastActiveTS:s,lastActive:t};}}return p;}};f.exports=m;},null);
__d('MessengerTypingIndicator.react',['Image.react','immutable','MercuryParticipants','MercuryTypingAnimation.react','MessengerProfileImageWrapper.react','MessengerBubble.react','ReactComponentWithPureRenderMixin','React','StoreAndPropBasedStateMixin','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=o.PropTypes,s=32,t=o.createClass({displayName:'MessengerTypingIndicator',mixins:[n,p(j)],propTypes:{userID:r.string,showName:r.bool},statics:{calculateState:function(u){return {author:j.getOrFetch(u.userID)};}},render:function(){if(!this.state.author)return null;var u=this.state.author;return (o.createElement('div',{className:"_1t_p _1hbw"},o.createElement('div',{className:"_1t_q"},o.createElement(l,{className:"_1t_r",isMessengerUser:u.is_messenger_user,size:s,showBadge:true},o.createElement(h,{alt:'',src:u.image_src,height:s,width:s}))),o.createElement('div',{className:"_1t_s"},o.createElement('div',{className:"_o46 _3erg _29_7"},o.createElement('div',{className:'clearfix'},o.createElement(m,{attachments:i.List([o.createElement(k,{key:'animation'})]),body:'',className:"_3058",ref:'bubble'}))))));},getBubble:function(){return this.refs.bubble;}});f.exports=t;},null);
__d('SavedResponsesFooterButton.react',['React','Image.react','XUIButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){return (h.createElement(j,babelHelpers._extends({},this.props,{className:"_3-8i"+(this.props.isHidden?' '+"hidden_elem":''),size:'large',label:this.props.label,onClick:this.props.onClick,use:this.props.use,image:this.props.image?h.createElement(i,{src:this.props.image}):null})));};o.propTypes={image:n.object,isHidden:n.bool,label:n.string.isRequired,onClick:n.func.isRequired,use:n.oneOf(['default','special','confirm'])};o.defaultProps={use:'default',isHidden:false};f.exports=o;},null);
__d('SavedResponsesImage.react',['ActorURI','AsyncRequest','LoadingIndicator.react','React','Image.react','XPagesSavedResponseImagePreviewController','XUICloseButton.react','cx','isEmpty','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=k.PropTypes;r=babelHelpers.inherits(u,k.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);this.$SavedResponsesImage1=null;this.state={currentThumbnailImageId:'',imageUrl:null,isFetchingThumbnail:false};}u.prototype.componentWillReceiveProps=function(v){if(v.imageID!==this.props.imageID)this.$SavedResponsesImage2(v.imageID);};u.prototype.componentDidMount=function(){if(this.props.imageID)this.$SavedResponsesImage2(this.props.imageID);};u.prototype.componentWillUnmount=function(){if(this.$SavedResponsesImage1&&this.$SavedResponsesImage1.abort){this.$SavedResponsesImage1.abort();this.$SavedResponsesImage1=null;}};u.prototype.render=function(){if(!this.$SavedResponsesImage3()&&!this.state.imageUrl)return null;var v="_3mgf";if(this.$SavedResponsesImage3()){v=q(v,this.props.loadingClassName);}else v=q(v,this.props.displayClassName);return (k.createElement('div',{className:this.props.className},k.createElement('div',{className:v},this.$SavedResponsesImage4())));};u.prototype.$SavedResponsesImage2=function(v){if(p(v)){this.setState({imageUrl:null});return;}this.setState({isFetchingThumbnail:true});var w=m.getURIBuilder().getURI();w=h.create(w,this.props.pageID);this.$SavedResponsesImage1=new i();this.$SavedResponsesImage1.setURI(w).setHandler((function(x){return this.$SavedResponsesImage5(x);}).bind(this)).setMethod('POST').setData({image_id:v,target_width:this.props.width,target_height:this.props.height}).send();};u.prototype.$SavedResponsesImage3=function(){return this.state.isFetchingThumbnail||!!this.props.isUploading;};u.prototype.$SavedResponsesImage4=function(){if(this.props.isUploading||this.state.isFetchingThumbnail){return (k.createElement(j,{size:'medium',color:'white',className:"_3mgg"}));}else if(this.state.imageUrl){return (k.createElement('div',null,k.createElement(n,{className:"_3mgn"+(!this.props.shouldShowCloseButton?' '+"hidden_elem":''),size:'medium',onClick:this.props.onClose}),k.createElement(l,{src:this.state.imageUrl})));}else return null;};u.prototype.$SavedResponsesImage5=function(v){this.setState({imageUrl:v.payload.url,isFetchingThumbnail:false});};u.propTypes={displayClassName:t.string.isRequired,height:t.number.isRequired,imageID:t.string,isUploading:t.bool,loadingClassName:t.string.isRequired,onClose:t.func,pageID:t.string.isRequired,shouldShowCloseButton:t.bool.isRequired,width:t.number.isRequired};f.exports=u;},null);
__d("SavedResponsesConstants",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();var h={editPanelViewMode:{LIST:"LIST",CREATE:"CREATE",EDIT:"EDIT",PERSONALIZE:"PERSONALIZE"},browsePanelAttachModeWidth:300,editPanelDialogWidth:600,listItemImageHeight:60,listItemImageWidth:60};f.exports=h;},null);
__d('SavedResponsesListItem.react',['ClientIDs','Link.react','React','ReactDOM','SavedResponsesImage.react','SavedResponsesConstants','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=j.PropTypes,q=j.createClass({displayName:'SavedResponsesListItem',propTypes:{onResponseHover:p.func,onResponseSelected:p.func.isRequired,onResponseUnhover:p.func,pageID:p.string.isRequired,response:p.shape({id:p.string.isRequired,title:p.string,message:p.string.isRequired,image:p.object}),tokens:p.object.isRequired},getInitialState:function(){return {shouldShowSeeMoreLink:false,shouldLimitHeight:true};},componentDidMount:function(){this._refreshSeeMoreLink();},componentDidUpdate:function(){this._refreshSeeMoreLink();},render:function(){var r=this.props.response.image&&true;return (j.createElement('div',{className:"_33w3"+(r?' '+"_33w4":''),'data-id':this.props.response.id,onClick:this._onResponseSelected,onMouseEnter:this._onResponseHover,onMouseLeave:this.props.onResponseUnhover},j.createElement('div',{className:"_33w5"+(r?' '+"_33w6":'')+(' '+"fwb")},this.props.response.title),j.createElement('div',{className:"_33w7"+(this.state.shouldLimitHeight?' '+"_4en5":'')+(!this.props.response.title&&this.props.response.image?' '+"_2pid":''),ref:'message'},this.props.response.image?j.createElement(l,{className:"_33w8",displayClassName:"_33w9",height:m.listItemImageHeight,imageID:this.props.response.image.id,loadingClassName:"_33w9",pageID:this.props.pageID,shouldShowCloseButton:false,width:m.listItemImageWidth}):null,this._processTokens(this.props.response.message)),j.createElement(i,{className:"_4en6"+(!this.state.shouldShowSeeMoreLink?' '+"hidden_elem":''),onClick:this._onShowMoreClicked},o._("Xem th\u00eam"))));},_refreshSeeMoreLink:function(){if(this.state.shouldLimitHeight===false||this.state.shouldShowSeeMoreLink)return;var r=k.findDOMNode(this.refs.message);if(r.scrollHeight>r.clientHeight)this.setState({shouldShowSeeMoreLink:true});},_processTokens:function(r){var s=0,t=0,u=/\{{(.*?)\}}/g,v=u.exec(r),w=[];while(v!=null){t=v.index;w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,t)));s=t+v[0].length;var x=v[1] in this.props.tokens?this.props.tokens[v[1]].value:v[1];w.push(j.createElement('span',{key:h.getNewClientID(),className:"_-8"},x));v=u.exec(r);}w.push(j.createElement('span',{key:h.getNewClientID()},r.substring(s,r.length)));return w;},_onResponseSelected:function(){this.props.onResponseSelected(this.props.response,this.props.tokens);},_onResponseHover:function(){this.props.onResponseHover&&this.props.onResponseHover(this.props.response,this.props.tokens);},_onShowMoreClicked:function(r){this.setState({shouldShowSeeMoreLink:false,shouldLimitHeight:false});r.stopPropagation();}});f.exports=q;},null);
__d('SavedResponsesListView.react',['React','SavedResponsesListItem.react','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){if(this.props.isLoadingResponses)return (h.createElement('div',{className:"_e19"},h.createElement(j,{size:'large'})));var p=this.props.searchQuery.trim().toLowerCase(),q=function(r){return (r.message.toLowerCase().indexOf(p)!==-1||(r.title||'').toLowerCase().indexOf(p)!==-1);};return (h.createElement('ul',{className:this.props.shouldAdjustRightMargin?"_e1a":''},this.props.responses.filter(q).map((function(r){return (h.createElement(i,{key:r.id,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,response:r,tokens:this.props.supportedMacros}));}).bind(this))));};o.propTypes={isLoadingResponses:n.bool.isRequired,onResponseHover:n.func,onResponseSelected:n.func.isRequired,onResponseUnhover:n.func,pageID:n.string.isRequired,responses:n.array.isRequired,searchQuery:n.string.isRequired,shouldAdjustRightMargin:n.bool};f.exports=o;},null);
__d('SavedResponsesListViewContainer.react',['React','XUICloseButton.react','XUITextInput.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n,o;'use strict';var p=h.PropTypes;n=babelHelpers.inherits(q,h.Component);o=n&&n.prototype;function q(r,s){o.constructor.call(this,r,s);}q.prototype.render=function(){var r=m("_3ohy",this.props.className);return (h.createElement('div',{className:r},this.renderSearchField(),this.props.children,h.createElement('div',{className:"_3ohz"},this.props.footerPart)));};q.prototype.renderSearchField=function(){return (h.createElement('div',{className:"_1x3h"},h.createElement('span',{className:"_1x3i"}),h.createElement(j,{onChange:this.props.onSearchQueryChanged,ref:'inputField',placeholder:l._("T\u00ecm ki\u1ebfm c\u00e2u tr\u1ea3 l\u1eddi"),value:this.props.searchQuery}),h.createElement(i,{size:'small',onClick:this.props.onSearchQueryCleared,className:this.props.searchQuery.length===0?"hidden_elem":''})));};q.propTypes={footerPart:p.object.isRequired,onSearchQueryChanged:p.func.isRequired,onSearchQueryCleared:p.func.isRequired,searchQuery:p.string.isRequired};f.exports=q;},null);
__d('SavedResponsesBrowseListView.react',['Link.react','PagesEventObserver','PagesEventType','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesUtils','ScrollableArea.react','React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=p.PropTypes;s=babelHelpers.inherits(v,p.Component);t=s&&s.prototype;function v(w,x){'use strict';t.constructor.call(this,w,x);this.state={isDataReady:false,isFetching:false,responses:[],searchQuery:"",tokens:null};}v.prototype.componentDidMount=function(){'use strict';this.refreshSavedResponsesList();};v.prototype.render=function(){'use strict';return (p.createElement(m,{footerPart:this.$SavedResponsesBrowseListView1(),onSearchQueryChanged:(function(w){return this.$SavedResponsesBrowseListView2(w);}).bind(this),onSearchQueryCleared:(function(){return this.$SavedResponsesBrowseListView3();}).bind(this),searchQuery:this.state.searchQuery},this.$SavedResponsesBrowseListView4()));};v.prototype.refreshSavedResponsesList=function(){'use strict';if(this.state.isFetching)return;this.setState({isFetching:true});n.fetchSavedResponses(this.props.pageID,this.props.otherUserID,(function(w,x){return (this.setState({isDataReady:true,isFetching:false,responses:w,tokens:x}));}).bind(this));};v.prototype.$SavedResponsesBrowseListView4=function(){'use strict';return (p.createElement('div',{className:"_4pno"},p.createElement(o,{fade:true,shadow:true},p.createElement(l,{isLoadingResponses:!this.state.isDataReady,onResponseHover:this.props.onResponseHover,onResponseSelected:this.props.onResponseSelected,onResponseUnhover:this.props.onResponseUnhover,pageID:this.props.pageID,responses:this.state.responses,searchQuery:this.state.searchQuery,supportedMacros:this.state.tokens}),this.$SavedResponsesBrowseListView5())));};v.prototype.$SavedResponsesBrowseListView1=function(){'use strict';var w=r._("Qu\u1ea3n l\u00fd c\u00e2u tr\u1ea3 l\u1eddi");return (p.createElement('div',{className:"_4pnp"},p.createElement(k,{label:w,onClick:(function(){return this.$SavedResponsesBrowseListView6();}).bind(this)})));};v.prototype.$SavedResponsesBrowseListView5=function(){'use strict';return (p.createElement('div',{className:"_4pnq"},p.createElement('div',{className:"_50f8"+(' '+"_4pnr")},r._("Ph\u1ea7n cu\u1ed1i c\u1ee7a c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u")),p.createElement(h,{onClick:(function(){return this.$SavedResponsesBrowseListView7();}).bind(this),className:"_4pnr"+(' '+"_4pns")+(' '+"_50f8")},r._("T\u1ea1o c\u00e2u tr\u1ea3 l\u1eddi m\u1edbi"))));};v.prototype.$SavedResponsesBrowseListView2=function(w){'use strict';this.setState({searchQuery:w.target.value});};v.prototype.$SavedResponsesBrowseListView3=function(){'use strict';this.setState({searchQuery:""});};v.prototype.$SavedResponsesBrowseListView6=function(){'use strict';i.logData_DEPRECATED({event_name:j.SAVED_REPLIES_MANAGE_REPLIES,page_id:this.props.pageID},null);this.props.onManageSavedResponses();};v.prototype.$SavedResponsesBrowseListView7=function(){'use strict';i.logData_DEPRECATED({event_name:j.SAVED_REPLIES_CREATE_REPLY_FROM_BROWSE_VIEW,page_id:this.props.pageID},null);this.props.onCreateNewSavedResponse();};v.propTypes={onCreateNewSavedResponse:u.func.isRequired,onManageSavedResponses:u.func.isRequired,onResponseHover:u.func.isRequired,onResponseSelected:u.func.isRequired,onResponseUnhover:u.func.isRequired,otherUserID:u.string.isRequired,pageID:u.string.isRequired};f.exports=v;},null);
__d('SavedResponsesPanel.react',['React','Image.react','XUICloseButton.react','XUIDialogBody.react','XUIDialogTitle.react','XUIGrayText.react','cx','emptyFunction','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r,s;'use strict';var t=h.PropTypes;r=babelHelpers.inherits(u,h.Component);s=r&&r.prototype;function u(v,w){s.constructor.call(this,v,w);}u.prototype.render=function(){return (h.createElement('div',{className:this.props.className},h.createElement(l,{className:"_3alh",showCloseButton:false},h.createElement('div',{className:"_2rp7"},h.createElement('div',{className:"_2rp8"+(!this.props.shouldShowBackButton?' '+"hidden_elem":''),onClick:this.props.onBackButtonClicked},h.createElement(i,{src:q("/images/help/rooms/back.png"),className:"_2rp9"}),h.createElement(m,{shade:'light',className:"_2rpa"},this.props.backButtonLabel),h.createElement('div',{className:"_2rpb"})),h.createElement('span',{className:"_5hp9"},this.props.title)),this.$SavedResponsesPanel1()),h.createElement(k,{className:"_2rpc"},this.props.children)));};u.prototype.$SavedResponsesPanel1=function(){var v=p._("\u0110\u00f3ng");return (h.createElement(j,{className:"_2rpe",label:v,onClick:this.props.onClose,shade:'dark',size:'medium',title:v,type:'button'}));};u.propTypes={backButtonLabel:t.string,onBackButtonClicked:t.func,onClose:t.func.isRequired,shouldShowBackButton:t.bool,title:t.string.isRequired};u.defaultProps={backButtonLabel:null,onBackButtonClicked:o,shouldShowBackButton:false};f.exports=u;},null);
__d('SavedResponsesBrowsePanel.react',['PagesEventObserver','PagesEventType','React','SavedResponsesBrowseListView.react','SavedResponsesPanel.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=j.PropTypes;o=babelHelpers.inherits(r,j.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);}r.prototype.render=function(){return (j.createElement(l,{className:"_33oq",onClose:this.props.onClose,title:this.getTitle()},this.renderBody()));};r.prototype.getTitle=function(){return n._("C\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u");};r.prototype.refreshSavedResponsesList=function(){this.refs.savedResponsesListView&&this.refs.savedResponsesListView.refreshSavedResponsesList();};r.prototype.renderBody=function(){return (j.createElement(k,{onCreateNewSavedResponse:this.props.onCreateNewSavedResponse,onManageSavedResponses:this.props.onManageSavedResponses,onResponseHover:this.props.onResponseHover,onResponseSelected:(function(s,t){return (this.$SavedResponsesBrowsePanel1(s,t));}).bind(this),onResponseUnhover:this.props.onResponseUnhover,otherUserID:this.props.otherUserID,pageID:this.props.pageID,ref:'savedResponsesListView'}));};r.prototype.$SavedResponsesBrowsePanel2=function(){h.logData_DEPRECATED({event_name:i.SAVED_REPLIES_CLOSE_BROWSE_VIEW,page_id:this.props.pageID},null);this.props.onClose();};r.prototype.$SavedResponsesBrowsePanel1=function(s,t){h.logData_DEPRECATED({event_name:i.SAVED_REPLIES_APPLY_REPLY,page_id:this.props.pageID},null);this.props.onResponseSelected(s,t);};r.propTypes={onClose:q.func.isRequired,onCreateNewSavedResponse:q.func.isRequired,onManageSavedResponses:q.func.isRequired,onResponseHover:q.func.isRequired,onResponseSelected:q.func.isRequired,onResponseUnhover:q.func.isRequired,otherUserID:q.string.isRequired,pageID:q.string.isRequired};f.exports=r;},null);
__d('SavedResponsesActionButton.react',['React','Image.react','XUIGrayText.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m,n;'use strict';var o=h.PropTypes;m=babelHelpers.inherits(p,h.Component);n=m&&m.prototype;function p(q,r){n.constructor.call(this,q,r);}p.prototype.render=function(){var q=l("_uvx",this.props.className);return (h.createElement('div',{className:q,onClick:this.props.onClick},h.createElement(i,{src:this.props.image,className:"_uvy"}),h.createElement(j,{shade:'medium',className:"_uvz"},this.props.label)));};p.propTypes={image:o.object.isRequired,label:o.string.isRequired,onClick:o.func.isRequired};f.exports=p;},null);
__d('SavedResponsesImageUploader.react',['ChatFileUploaderMixin','Image.react','MercuryConfig','MercuryFileUploader','SavedResponsesUtils','URI','XUIGrayText.react','React','ReactDOM','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s=o.PropTypes,t=o.createClass({displayName:'SavedResponsesImageUploader',mixins:[h],propTypes:{image:s.object.isRequired,label:s.string.isRequired,pageID:s.string},componentDidMount:function(){this._fileUploader=new k(this.props.attachmentsShelf,p.findDOMNode(this.refs.form),p.findDOMNode(this.refs.input),p.findDOMNode(this.refs.attachID));if(this.props.imageID)this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);this.setUpSubscriptionsHandler(this._fileUploader);},getActionURI:function(){return this.props.pageID?new m(j.upload_url).addQueryData('request_user_id',this.props.pageID).toString():j.upload_url;},getDefaultProps:function(){return {pageID:null};},componentDidUpdate:function(u,v){if(this.props.imageID){this._fileUploader.removeAttachments();this._fileUploader.addCachedAttachments([l.generateImageMetadata(this.props.imageID)]);}},render:function(){var u=r("_uvx",this.props.className);return (o.createElement('form',{action:this.getActionURI(),className:u,method:'post',ref:'form'},o.createElement('input',{type:'hidden',name:'attach_id',ref:'attachID'}),o.createElement('div',{className:"_4q60"},o.createElement('div',{className:"_4q61 _2d_p"},o.createElement(i,{src:this.props.image,className:"_uvy"}),o.createElement(n,{shade:'medium',className:"_uvz"},this.props.label)),o.createElement('input',{type:'file',className:"_2d_q",name:'attachment[]',accept:this.props.imagesOnly?'image/*':'*',ref:'input'}))));}});f.exports=t;},null);
__d("SavedResponsesImageUploadHelper",[],function a(b,c,d,e,f,g){if(c.__markCompiled)c.__markCompiled();function h(i,j){"use strict";this.$SavedResponsesImageUploadHelper1=i;this.$SavedResponsesImageUploadHelper2=j;}h.prototype.onUploaderMounted=function(i){"use strict";this.$SavedResponsesImageUploadHelper3=i;};h.prototype.onUploadFinished=function(){"use strict";if(!this.$SavedResponsesImageUploadHelper3)return;var i=this.$SavedResponsesImageUploadHelper3.getImageFiles().pop().toString();this.$SavedResponsesImageUploadHelper2(i);};h.prototype.onUploadStarted=function(){"use strict";this.$SavedResponsesImageUploadHelper1();};f.exports=h;},null);
__d('MacroInput.react',['AbstractTextEditor.react','AbstractTextEditorProps','EditorState','React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=k.PropTypes,o=k.createClass({displayName:'MacroInput',propTypes:{autoflip:n.bool,editorState:n.instanceOf(j).isRequired,onChange:n.func.isRequired,placeholder:n.string,spellCheck:n.bool},getDefaultProps:i.getDefaultProps,blur:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.blur();},focus:function(){this.refs.abstractTextEditor&&this.refs.abstractTextEditor.focus();},render:function(){var p=m(this.props.className,"_38bx");return (k.createElement('div',{className:p,onClick:this.focus,onFocus:this.focus},k.createElement('div',{className:"_18_r"},k.createElement(h,babelHelpers._extends({},this.props,{ref:'abstractTextEditor'})))));}});f.exports=o;},null);
__d('SavedResponsesEditResponseContentView.react',['AbstractTextArea.react','React','SavedResponsesActionButton.react','SavedResponsesImage.react','SavedResponsesImageUploader.react','SavedResponsesImageUploadHelper','ScrollableArea.react','MacroInput.react','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=i.PropTypes;s=babelHelpers.inherits(v,i.Component);t=s&&s.prototype;v.prototype.render=function(){'use strict';var w="_38bx"+(' '+"_38by")+(this.props.editorState.getSelection().getHasFocus()?' '+"_38bz":''),x=q._("Nh\u1ea5p ti\u00eau \u0111\u1ec1 c\u00e2u tr\u1ea3 l\u1eddi v\u00e0o \u0111\u00e2y"),y=q._("Nh\u1eadp tin nh\u1eafn c\u1ee7a b\u1ea1n v\u00e0o \u0111\u00e2y");return (i.createElement('div',{className:this.props.className},i.createElement(h,{className:"_4451 _1vw8",onChange:(function(z){return this.props.onTitleChange(z.target.value);}).bind(this),placeholder:x,value:this.props.responseTitle}),i.createElement('div',{className:"_38bw _57hg"},i.createElement(n,{fade:true,shadow:true},i.createElement(o,{className:w,editorState:this.props.editorState,onChange:this.props.onContentChange,placeholder:y,ref:'macroInput'}),i.createElement(k,{className:"_57hh",displayClassName:"_57hn",imageID:this.props.responseImageID,isUploading:this.props.isUploadingImage,loadingClassName:"_57hi",pageID:this.props.pageID,height:250,onClose:this.props.onDeleteImage,shouldShowCloseButton:true,width:250}))),this.$SavedResponsesEditResponseContentView1()));};v.prototype.$SavedResponsesEditResponseContentView1=function(){'use strict';return (i.createElement('div',{className:"_57ho"},i.createElement(l,{className:"_3-8v",image:r('/images/mobile/glyph/photos_dark-grey_l.png'),label:q._("Th\u00eam h\u00ecnh \u1ea3nh"),onFileUploaderMounted:(function(w){return this.props.uploadHandler.onUploaderMounted(w);}).bind(this),onSubmit:(function(){return this.props.uploadHandler.onUploadStarted();}).bind(this),onUploadFinished:(function(){return this.props.uploadHandler.onUploadFinished();}).bind(this),pageID:this.props.pageID}),i.createElement(j,{image:r('/images/mobile/glyph/love_dark-grey_l.png'),className:"_3-8v",label:q._("C\u00e1 nh\u00e2n h\u00f3a"),onClick:this.props.onPersonalize})));};function v(){'use strict';s.apply(this,arguments);}v.propTypes={editorState:u.object.isRequired,isUploadingImage:u.bool.isRequired,pageID:u.string.isRequired,responseImageID:u.string,responseTitle:u.string,onContentChange:u.func.isRequired,onDeleteImage:u.func.isRequired,onPersonalize:u.func.isRequired,onTitleChange:u.func.isRequired,uploadHandler:u.instanceOf(m).isRequired};f.exports=v;},null);
__d('SavedResponsesMacroDetailView.react',['React','ScrollableArea.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);}o.prototype.render=function(){var p=this.props.macro;if(!p)return null;return (h.createElement(i,{fade:true,shadow:true},h.createElement('div',null,h.createElement('div',{className:"_tpd"},p.key),h.createElement('div',{className:"_tpe"},p.description),h.createElement('div',{className:"_tpf"},k._("V\u00ed d\u1ee5:")),h.createElement('div',{className:"_tpg"},p.example))));};o.propTypes={macro:n.shape({description:n.string.isRequired,example:n.string.isRequired,key:n.string.isRequired,name:n.string.isRequired,value:n.string.isRequired})};f.exports=o;},null);
__d('SavedResponsesMacroListItem.react',['React','Image.react','cx','ix'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l,m;'use strict';var n=h.PropTypes;l=babelHelpers.inherits(o,h.Component);m=l&&l.prototype;function o(p,q){m.constructor.call(this,p,q);this.state={isHover:false};}o.prototype.render=function(){return (h.createElement('div',{className:"_5y_z",'data-id':this.props.macro.key,onClick:(function(){return this.$SavedResponsesMacroListItem1();}).bind(this),onMouseOut:(function(){return this.$SavedResponsesMacroListItem2();}).bind(this),onMouseOver:(function(){return this.$SavedResponsesMacroListItem3();}).bind(this)},h.createElement('div',{className:"_5y__"},this.props.macro.key),h.createElement('div',{className:"_5z00"+(!this.state.isHover?' '+"hidden_elem":'')},h.createElement(i,{src:k('/images/pages/macro_listitem_triangle.png')}))));};o.prototype.$SavedResponsesMacroListItem3=function(){this.props.onHover(this.props.macro);this.setState({isHover:true});};o.prototype.$SavedResponsesMacroListItem2=function(){this.setState({isHover:false});};o.prototype.$SavedResponsesMacroListItem1=function(){this.props.onSelect(this.props.macro);};o.propTypes={macro:n.shape({key:n.string.isRequired,value:n.string.isRequired}).isRequired,onHover:n.func.isRequired,onSelect:n.func.isRequired};f.exports=o;},null);
__d('SavedResponsesMacroListView.react',['React','SavedResponsesMacroListItem.react'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j,k;'use strict';var l=h.PropTypes;j=babelHelpers.inherits(m,h.Component);k=j&&j.prototype;function m(n,o){k.constructor.call(this,n,o);}m.prototype.render=function(){return (h.createElement('ul',null,this.$SavedResponsesMacroListView1()));};m.prototype.$SavedResponsesMacroListView1=function(){var n=[];for(var o in this.props.macros){var p=this.props.macros[o];n.push(h.createElement(i,{macro:p,onHover:this.props.onMacroHover,onSelect:this.props.onMacroSelected}));}return n;};m.propTypes={macros:l.object.isRequired,onMacroHover:l.func.isRequired,onMacroSelected:l.func.isRequired};f.exports=m;},null);
__d('SavedResponsesMacroBrowseView.react',['Grid.react','React','SavedResponsesFooterButton.react','SavedResponsesMacroDetailView.react','SavedResponsesMacroListView.react','ScrollableArea.react','cx','fbt','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.GridItem,t=i.PropTypes;q=babelHelpers.inherits(u,i.Component);r=q&&q.prototype;function u(v,w){'use strict';r.constructor.call(this,v,w);this.state={activeMacro:null};}u.prototype.render=function(){'use strict';return (i.createElement('div',null,this.renderBodyPart(),i.createElement('div',{className:"_3ohz"},this.renderFooterPart())));};u.prototype.renderBodyPart=function(){'use strict';var v=p("_552a",this.props.className);return (i.createElement('div',{className:v},i.createElement(h,{cols:2,spacing:'none',className:"_552b"},i.createElement(s,{className:"_552c"},i.createElement('div',{className:"_552d"}),i.createElement(m,{fade:true,shadow:true},i.createElement('div',{className:"_2t-k"},i.createElement(l,{macros:this.props.macros,onMacroSelected:this.props.onMacroSelected,onMacroHover:(function(w){return this.$SavedResponsesMacroBrowseView1(w);}).bind(this)})))),i.createElement(s,{className:"_552e"},i.createElement(k,{macro:this.state.activeMacro})))));};u.prototype.renderFooterPart=function(){'use strict';var v=o._("H\u1ee7y b\u1ecf");return (i.createElement('div',null,i.createElement('div',{className:"_552g"},i.createElement(j,{label:v,onClick:this.props.onCancel}))));};u.prototype.$SavedResponsesMacroBrowseView1=function(v){'use strict';this.setState({activeMacro:v});};u.propTypes={macros:t.object.isRequired,onCancel:t.func.isRequired,onMacroSelected:t.func.isRequired};f.exports=u;},null);
__d('MacroSpan.react',['DraftEntity','React','XUICloseButton.react','cx'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=i.PropTypes,m=i.createClass({displayName:'MacroSpan',propTypes:{entityKey:l.string.isRequired,offsetKey:l.string.isRequired,onRemoveToken:l.func.isRequired,tokens:l.object.isRequired},getInitialState:function(){return {isMouseOver:false};},render:function(){var n=this._getEntityData();return (i.createElement('span',{className:"_vxd",onMouseEnter:this._onMouseEnter,onMouseLeave:this._onMouseLeave},i.createElement('span',{className:"_vxe",contentEditable:false,'data-offset-key':this.props.offsetKey,spellCheck:false},this._getContent(n),i.createElement(j,{size:'small',className:"_vxf",onClick:this._removeToken}))));},_getContent:function(n){var o=n.key in this.props.tokens?this.props.tokens[n.key].value:n.key,p=n.key in this.props.tokens?this.props.tokens[n.key].key:n.key;return this.state.isMouseOver?p:o;},_onMouseEnter:function(){this.setState({isMouseOver:true});},_onMouseLeave:function(){this.setState({isMouseOver:false});},_removeToken:function(){this.props.onRemoveToken(this.props.offsetKey);},_getEntityData:function(){return h.get(this.props.entityKey).getData();}});f.exports=m;},null);
__d('getMacrosInputDecorator',['CompositeDraftDecorator','DraftDecorator','MacroSpan.react','getEntityMatcher'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m,n){return new h([new i(k(function(o){return o.getType()==='TOKEN';}),j,{onRemoveToken:n,tokens:m})]);}f.exports=l;},null);
__d('SavedResponsesTokensUtils',['DraftEntity','createEditorStateWithEntities','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=new RegExp('{{(.*?)}}','ig'),l={_parseTemplateFieldTokens:function(m){var n=m,o=[],p;while(p=k.exec(n)){var q={text:p[0],offset:p.index,length:p[0].length,entity:{token:p[0],key:p[1]}};o.push(q);n=n.replace(p[0],q.text);k.lastIndex=q.offset+q.length;}if(o.length>0){if(o[0].offset===0){n=" "+n;o.forEach(function(s){s.offset++;});}var r=o[o.length-1];if(r.length+r.offset===n.length)n=n+" ";}return {ranges:o,text:n};},createTemplateFieldsEditorStateWithText:function(m,n,o){var p=l._parseTemplateFieldTokens(m),q=p.ranges,r=p.text;return i({text:r,ranges:q,decorator:j(o,n),entityCreationFn:function(s){return h.create('TOKEN','IMMUTABLE',s);}});},prepareforSend:function(m,n){var o=m.match(/\{{(.*?)\}}/g);if(o)o.forEach(function(p){var q=p.replace('{{','').replace('}}',''),r=q in n?n[q].value:q;m=m.replace(p,r);});return m;}};f.exports=l;},null);
__d("XPagesSavedResponsesAddController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/add\/",{owner_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},user_message:{type:"String"}});},null,{});
__d("XPagesSavedResponsesDeleteController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/delete\/",{response_id:{type:"Int",required:true}});},null,{});
__d("XPagesSavedResponsesEditController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/edit\/",{response_id:{type:"Int",required:true},title:{type:"String",defaultValue:""},message:{type:"String",required:true},photo_id:{type:"Int"},remove_photo_id:{type:"Int"}});},null,{});
__d('SavedResponsesEditResponseView.react',['ActorURI','AsyncRequest','DraftEntity','DraftModifier','DraftOffsetKey','EditorState','PagesEventObserver','PagesEventType','React','SavedResponsesEditResponseContentView.react','SavedResponsesFooterButton.react','SavedResponsesImageUploadHelper','SavedResponsesMacroBrowseView.react','SavedResponsesPanel.react','SavedResponsesTokensUtils','SelectionState','XPagesSavedResponsesAddController','XPagesSavedResponsesDeleteController','XPagesSavedResponsesEditController','XUISpinner.react','cx','fbt','invariant','getMacrosInputDecorator'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea){if(c.__markCompiled)c.__markCompiled();var fa,ga,ha=p.PropTypes;fa=babelHelpers.inherits(ia,p.Component);ga=fa&&fa.prototype;function ia(ja,ka){'use strict';ga.constructor.call(this,ja,ka);var la=!!this.props.initialResponse||false,ma=!!this.props.initialResponse&&!!this.props.initialResponse.image?this.props.initialResponse.image.id:'',na=this.$SavedResponsesEditResponseView1(la);this.state={anyContent:na.getCurrentContent().hasText(),editorState:na,imageID:ma,isEditing:la,isModified:false,isPersonalizing:false,isProcessing:false,isUploadingImage:false,message:na.getCurrentContent().getPlainText(),shouldShowDeleteWarning:false,shouldShowDiscardWarning:false,title:!!this.props.initialResponse?this.props.initialResponse.title:'',uploadHandler:new s((function(){return this.$SavedResponsesEditResponseView2();}).bind(this),(function(oa){return this.$SavedResponsesEditResponseView3(oa);}).bind(this))};}ia.prototype.render=function(){'use strict';return (p.createElement(u,{backButtonLabel:this.$SavedResponsesEditResponseView4(),className:"_15ht",onBackButtonClicked:(function(){return this.$SavedResponsesEditResponseView5();}).bind(this),onClose:this.props.onClose,shouldShowBackButton:true,title:this.$SavedResponsesEditResponseView6()},this.$SavedResponsesEditResponseView7(),p.createElement('div',{className:"_3ohz"},this.$SavedResponsesEditResponseView8())));};ia.prototype.$SavedResponsesEditResponseView9=function(){'use strict';return ca._("H\u1ee7y b\u1ecf");};ia.prototype.$SavedResponsesEditResponseView10=function(){'use strict';return ca._("X\u00f3a");};ia.prototype.$SavedResponsesEditResponseView11=function(){'use strict';return ca._("L\u01b0u c\u00e2u tr\u1ea3 l\u1eddi");};ia.prototype.$SavedResponsesEditResponseView7=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(t,{className:"_1wxh",macros:this.props.supportedMacros,onCancel:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this),onMacroSelected:(function(ja){return this.$SavedResponsesEditResponseView13(ja);}).bind(this)}));}else return (p.createElement(q,{className:"_1wxh",editorState:this.state.editorState,isUploadingImage:this.state.isUploadingImage,onContentChange:(function(ja){return this.$SavedResponsesEditResponseView14(ja);}).bind(this),onDeleteImage:(function(){return this.$SavedResponsesEditResponseView15();}).bind(this),onPersonalize:(function(){return this.$SavedResponsesEditResponseView16();}).bind(this),onTitleChange:(function(ja){this.setState({title:ja,isModified:true});}).bind(this),pageID:this.props.pageID,responseImageID:this.state.imageID,responseTitle:this.state.title,uploadHandler:this.state.uploadHandler}));};ia.prototype.$SavedResponsesEditResponseView8=function(){'use strict';if(this.state.isPersonalizing){return (p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView12();}).bind(this)}));}else return this.$SavedResponsesEditResponseView17();};ia.prototype.$SavedResponsesEditResponseView18=function(){'use strict';var ja=ca._("Ti\u1ebfp t\u1ee5c ch\u1ec9nh s\u1eeda"),ka=ca._("H\u1ee7y b\u1ecf");return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n h\u1ee7y b\u1ecf ch\u1ec9nh s\u1eeda c\u1ee7a m\u00ecnh kh\u00f4ng?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:ka,onClick:(function(){return this.$SavedResponsesEditResponseView19();}).bind(this)}),p.createElement(r,{label:ja,onClick:(function(){return this.$SavedResponsesEditResponseView20();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView21=function(){'use strict';return (p.createElement('div',null,p.createElement('div',{className:"_2ln1"},ca._("B\u1ea1n c\u00f3 ch\u1eafc ch\u1eafn mu\u1ed1n x\u00f3a c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u n\u00e0y kh\u00f4ng?")),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView22();}).bind(this)}),p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.$SavedResponsesEditResponseView23();}).bind(this),use:'confirm'}))));};ia.prototype.$SavedResponsesEditResponseView24=function(){'use strict';return (p.createElement('div',null,p.createElement(r,{label:this.$SavedResponsesEditResponseView10(),onClick:(function(){return this.$SavedResponsesEditResponseView25();}).bind(this),isHidden:!this.state.isEditing}),p.createElement('div',{className:"_4pnp"},p.createElement(r,{label:this.$SavedResponsesEditResponseView9(),onClick:(function(){return this.props.onEditDone(false);}).bind(this)}),p.createElement(r,{disabled:!this.state.anyContent,label:this.$SavedResponsesEditResponseView11(),onClick:(function(){return this.$SavedResponsesEditResponseView26();}).bind(this),use:'confirm'}),p.createElement(aa,{size:'small',className:(!this.state.isProcessing?"hidden_elem":'')+(' '+"_3-91")+(' '+"_3-99")}))));};ia.prototype.$SavedResponsesEditResponseView17=function(){'use strict';if(this.state.shouldShowDeleteWarning){return this.$SavedResponsesEditResponseView21();}else if(this.state.shouldShowDiscardWarning){return this.$SavedResponsesEditResponseView18();}else return this.$SavedResponsesEditResponseView24();};ia.prototype.$SavedResponsesEditResponseView4=function(){'use strict';if(!this.state.isPersonalizing){return ca._("Danh s\u00e1ch");}else return ca._("Ch\u1ec9nh s\u1eeda");};ia.prototype.$SavedResponsesEditResponseView6=function(){'use strict';if(this.state.isPersonalizing){return ca._("Th\u00eam t\u00f9y ch\u1ecdn c\u00e1 nh\u00e2n h\u00f3a");}else if(this.state.isEditing){return ca._("Ch\u1ec9nh s\u1eeda c\u00e2u tr\u1ea3 l\u1eddi");}else return ca._("T\u1ea1o c\u00e2u tr\u1ea3 l\u1eddi");};ia.prototype.$SavedResponsesEditResponseView27=function(ja){'use strict';var ka={text:'{{'+ja.name+'}}',key:ja.name},la=this.state.editorState,ma=la.getSelection(),na=la.getCurrentContent(),oa=ma.getStartKey(),pa=ma.getStartOffset(),qa=na.getBlockForKey(oa),ra;if(qa.getText().substr(pa-1,1).trim().length>0){var sa=k.replaceText(na,ma,' ');ma=sa.getSelectionAfter();ra=k.insertText(sa,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));}else ra=k.replaceText(na,ma,ka.text,la.getCurrentInlineStyle(),j.create('TOKEN','IMMUTABLE',ka));ra=k.insertText(ra,ra.getSelectionAfter(),' ');la=m.push(la,ra,'insert-fragment');la=m.forceSelection(la,la.getSelection());this.$SavedResponsesEditResponseView14(la);};ia.prototype.$SavedResponsesEditResponseView28=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_EDIT_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.props.initialResponse;!!!ka?da(0):undefined;var la=this.state.imageID?this.state.imageID.toString():'',ma=z.getURIBuilder().setInt('response_id',ka.id).setString('message',ja).setString('title',this.state.title);if(!la&&ka.image&&ka.image.id){ma.setInt('remove_photo_id',ka.image.id);}else ma.setInt('photo_id',la);ma=h.create(ma.getURI(),this.props.pageID);new i().setURI(ma).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView29=function(){'use strict';var ja=this.state.editorState.getCurrentContent().getPlainText();n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_CREATE_REPLY,page_id:this.props.pageID,response_content:ja},null);var ka=this.state.imageID?this.state.imageID.toString():'',la=x.getURIBuilder().setInt('owner_id',this.props.pageID).setString('message',ja).setString('title',this.state.title).setInt('photo_id',ka).getURI();la=h.create(la,this.props.pageID);new i().setURI(la).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView1=function(ja){'use strict';if(ja&&this.props.initialResponse){var ka=this.props.initialResponse.message||'';return v.createTemplateFieldsEditorStateWithText(ka,(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this),this.props.supportedMacros);}else return m.createEmpty(ea(this.props.supportedMacros||{},(function(la){return this.$SavedResponsesEditResponseView30(la);}).bind(this)));};ia.prototype.$SavedResponsesEditResponseView15=function(){'use strict';this.setState({imageID:null});};ia.prototype.$SavedResponsesEditResponseView5=function(){'use strict';if(this.state.isPersonalizing){this.setState({isPersonalizing:false});}else if(this.state.isModified){this.setState({shouldShowDiscardWarning:true});}else this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView12=function(){'use strict';this.setState({isPersonalizing:false});};ia.prototype.$SavedResponsesEditResponseView13=function(ja){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_PERSONALIZE,page_id:this.props.pageID},null);this.setState({isPersonalizing:false});this.$SavedResponsesEditResponseView27(ja);};ia.prototype.$SavedResponsesEditResponseView16=function(){'use strict';this.setState({isPersonalizing:true});this.props.onEnterPersonalizeView();};ia.prototype.$SavedResponsesEditResponseView14=function(ja){'use strict';this.setState({anyContent:ja.getCurrentContent().hasText(),editorState:ja,isModified:true});};ia.prototype.$SavedResponsesEditResponseView2=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_ADD_IMAGE,page_id:this.props.pageID},null);this.setState({imageID:null,isUploadingImage:true});};ia.prototype.$SavedResponsesEditResponseView3=function(ja){'use strict';this.setState({imageID:ja,isUploadingImage:false});};ia.prototype.$SavedResponsesEditResponseView30=function(ja){'use strict';var ka=this.state.editorState,la=l.decode(ja),ma=la.blockKey,na=la.decoratorKey,oa=ka.getBlockTree(ma).getIn([na]),pa=new w({anchorKey:ma,anchorOffset:oa.get('start'),focusKey:ma,focusOffset:oa.get('end'),isBackward:false,hasFocus:true}),qa=k.removeRange(ka.getCurrentContent(),pa,'forward'),ra=m.push(ka,qa,'remove-range');this.$SavedResponsesEditResponseView14(ra);};ia.prototype.$SavedResponsesEditResponseView25=function(){'use strict';this.setState({shouldShowDeleteWarning:true});};ia.prototype.$SavedResponsesEditResponseView26=function(){'use strict';this.setState({isProcessing:true});this.state.isEditing?this.$SavedResponsesEditResponseView28():this.$SavedResponsesEditResponseView29();};ia.prototype.$SavedResponsesEditResponseView23=function(){'use strict';this.setState({shouldShowDeleteWarning:false});};ia.prototype.$SavedResponsesEditResponseView22=function(){'use strict';n.logData_DEPRECATED({event_name:o.SAVED_REPLIES_DELETE_REPLY,page_id:this.props.pageID},null);this.setState({shouldShowDeleteWarning:false,isProcessing:true});!!!this.props.initialResponse?da(0):undefined;var ja=y.getURIBuilder().setInt('response_id',this.props.initialResponse.id).getURI();new i().setURI(ja).setMethod('POST').setHandler((function(){return this.props.onEditDone(true);}).bind(this)).send();};ia.prototype.$SavedResponsesEditResponseView19=function(){'use strict';this.props.onBackButtonClicked();};ia.prototype.$SavedResponsesEditResponseView20=function(){'use strict';this.setState({shouldShowDiscardWarning:false});};ia.propTypes={initialResponse:ha.shape({id:ha.string.isRequired,title:ha.string,message:ha.string,image:ha.object}),onBackButtonClicked:ha.func.isRequired,onClose:ha.func.isRequired,onEditDone:ha.func.isRequired,onEnterPersonalizeView:ha.func.isRequired,pageID:ha.string.isRequired,supportedMacros:ha.object};f.exports=ia;},null);
__d('SavedResponsesManageListView.react',['React','SavedResponsesFooterButton.react','SavedResponsesListView.react','SavedResponsesListViewContainer.react','SavedResponsesPanel.react','ScrollableArea.react','cx','ix','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q,r,s=h.PropTypes;q=babelHelpers.inherits(t,h.Component);r=q&&q.prototype;function t(u,v){'use strict';r.constructor.call(this,u,v);this.state={searchQuery:""};}t.prototype.render=function(){'use strict';return (h.createElement(l,{className:"_15ht",shouldShowBackButton:false,onClose:this.props.onClose,title:p._("C\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u")},h.createElement(k,{footerPart:this.$SavedResponsesManageListView1(),onSearchQueryChanged:(function(u){return this.$SavedResponsesManageListView2(u);}).bind(this),onSearchQueryCleared:(function(){return this.$SavedResponsesManageListView3();}).bind(this),searchQuery:this.state.searchQuery},this.$SavedResponsesManageListView4())));};t.prototype.$SavedResponsesManageListView4=function(){'use strict';return (h.createElement('div',{className:"_4pno"},h.createElement(m,{fade:true,shadow:true},h.createElement(j,{isLoadingResponses:false,onResponseSelected:this.props.onResponseSelected,pageID:this.props.pageID,responses:this.props.responses,searchQuery:this.state.searchQuery,supportedMacros:this.props.supportedMacros}),this.$SavedResponsesManageListView5())));};t.prototype.$SavedResponsesManageListView1=function(){'use strict';var u=p._("T\u1ea1o c\u00e2u tr\u1ea3 l\u1eddi"),v=p._("Xong");return (h.createElement('div',{className:"_4pnp"},h.createElement(i,{label:u,onClick:this.props.onCreateNewReplyClicked,image:o('/images/mobile/glyph/compose_dark-grey_m.png')}),h.createElement(i,{label:v,onClick:this.props.onDoneClicked})));};t.prototype.$SavedResponsesManageListView5=function(){'use strict';return (h.createElement('div',{className:"_4pnq"},h.createElement('div',{className:"_50f8"+(' '+"_4pnr")},p._("Ph\u1ea7n cu\u1ed1i c\u1ee7a c\u00e2u tr\u1ea3 l\u1eddi \u0111\u00e3 l\u01b0u"))));};t.prototype.$SavedResponsesManageListView2=function(u){'use strict';this.setState({searchQuery:u.target.value});};t.prototype.$SavedResponsesManageListView3=function(){'use strict';this.setState({searchQuery:""});};t.propTypes={onClose:s.func.isRequired,onCreateNewReplyClicked:s.func.isRequired,onDoneClicked:s.func.isRequired,onResponseSelected:s.func.isRequired,otherUserID:s.string.isRequired,pageID:s.string.isRequired,responses:s.array.isRequired,supportedMacros:s.object.isRequired};f.exports=t;},null);
__d('SavedResponsesManagePanel.react',['React','SavedResponsesConstants','SavedResponsesEditResponseView.react','SavedResponsesManageListView.react','SavedResponsesUtils','XUISpinner.react','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){if(c.__markCompiled)c.__markCompiled();var o,p;'use strict';var q=h.PropTypes;o=babelHelpers.inherits(r,h.Component);p=o&&o.prototype;function r(s,t){p.constructor.call(this,s,t);this.state={isLoadingResponses:true,responseToEdit:null,responses:[],supportedMacros:null,viewType:this.props.initialViewType};}r.prototype.componentWillMount=function(){this.$SavedResponsesManagePanel1();};r.prototype.render=function(){if(this.state.isLoadingResponses)return (h.createElement('div',{className:"_15ht"},h.createElement('div',{className:"_15hu"},h.createElement(m,{size:'large'}))));switch(this.state.viewType){case i.editPanelViewMode.LIST:return (h.createElement(k,{onCreateNewReplyClicked:(function(){return this.$SavedResponsesManagePanel2();}).bind(this),onDoneClicked:(function(){return this.$SavedResponsesManagePanel3();}).bind(this),otherUserID:this.props.otherUserID,onResponseSelected:(function(s,t){return (this.$SavedResponsesManagePanel4(s,t));}).bind(this),onClose:this.props.onClose,pageID:this.props.pageID,responses:this.state.responses,supportedMacros:this.state.supportedMacros}));case i.editPanelViewMode.EDIT:case i.editPanelViewMode.CREATE:case i.editPanelViewMode.PERSONALIZE:return (h.createElement(j,{initialResponse:this.state.responseToEdit,onBackButtonClicked:(function(){return this.$SavedResponsesManagePanel5(false);}).bind(this),onClose:this.props.onClose,onEditDone:(function(s){return this.$SavedResponsesManagePanel5(s);}).bind(this),onEnterPersonalizeView:(function(){return this.$SavedResponsesManagePanel6();}).bind(this),pageID:this.props.pageID,supportedMacros:this.state.supportedMacros}));}};r.prototype.$SavedResponsesManagePanel1=function(){this.setState({isLoadingResponses:true});l.fetchSavedResponses(this.props.pageID,this.props.otherUserID,(function(s,t){return (this.setState({responses:s,supportedMacros:t,isLoadingResponses:false}));}).bind(this));};r.prototype.$SavedResponsesManagePanel5=function(s){if(this.props.initialViewType===i.editPanelViewMode.CREATE){this.props.onClose();return;}if(s)this.$SavedResponsesManagePanel1();this.setState({responseToEdit:null,viewType:i.editPanelViewMode.LIST});};r.prototype.$SavedResponsesManagePanel2=function(){this.setState({responseToEdit:null,viewType:i.editPanelViewMode.CREATE});};r.prototype.$SavedResponsesManagePanel3=function(){this.props.onClose();};r.prototype.$SavedResponsesManagePanel6=function(){this.setState({viewType:i.editPanelViewMode.PERSONALIZE});};r.prototype.$SavedResponsesManagePanel4=function(s){this.setState({responseToEdit:s,viewType:i.editPanelViewMode.EDIT});};r.propTypes={initialViewType:q.string,onClose:q.func.isRequired,otherUserID:q.string.isRequired,pageID:q.string.isRequired};r.defaultProps={initialViewType:i.editPanelViewMode.LIST};f.exports=r;},null);
__d("XPagesSavedResponsesImageDuplicationController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/pages\/saved_responses\/image\/duplication\/",{});},null,{});
__d('PagesMessengerThreadDialogMixin',['ActorURI','AsyncRequest','ChatTypingIndicators.react','DOMDimensions','Event','Grid.react','HovercardLink','immutable','Keys','LoadingIndicator.react','MercuryMessages','MercuryPageThreadActions','MercuryPayloadSource','MercuryRoger','MercuryIDs','MercuryThreadInformer','MessageList.react','MessengerDateBreak.react','MessengerLogMessage.react','MessengerMessageGroup.react','MessengerPresenceStatus.react','MessengerPresenceStatusUtils','MessengerTypingIndicator.react','PagesEventObserver','PagesEventType','PagesMessagingActionPlacement','PagesMessengerButtonSet.react','PagesMessengerComposer.react','PagesMessengerConfirmCloseThreadDialog.react','PagesMessengerMessage.react','PagesMessengerThreadUtils','MercuryParticipants','React','MercuryShareAttachmentRenderLocations','SavedResponsesBrowsePanel.react','SavedResponsesConstants','SavedResponsesManagePanel.react','SavedResponsesTokensUtils','ScrollableArea.react','Set','URI','XPagesSavedResponsesImageDuplicationController','XUIAbstractGlyphButton.react','XUICloseButton.react','XUIDialog.react','XUIDialogBody.react','XUIDialogButton.react','XUIDialogFooter.react','XUIDialogTitle.react','cx','emptyFunction','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,aa,ba,ca,da,ea,fa,ga,ha,ia,ja,ka,la,ma,na,oa,pa,qa,ra,sa,ta,ua,va,wa,xa,ya,za,ab,bb,cb,db,eb,fb,gb){if(c.__markCompiled)c.__markCompiled();var hb=m.GridItem,ib=na.PropTypes,jb=10,kb=10,lb=500,mb=318,nb=.7,ob={propTypes:{adminSignatureSettings:ib.object,basePermalinkURI:ib.string.isRequired,enableNewMessageDialog:ib.bool.isRequired,enableSuggestedResponse:ib.bool.isRequired,flowID:ib.string,pagesMessengerComposerProps:ib.shape({isPageAdminNoteEnabled:ib.bool.isRequired,isSavedResponseEnabled:ib.bool.isRequired}).isRequired,threadID:ib.string.isRequired,userID:ib.string,disableComposer:ib.bool},getDefaultProps:function(){return {adminSignatureSettings:null,basePermalinkURI:"",disableComposer:true};},getInitialState:function(){return {_mercuryRoger:u.getForFBID(this.props.userID),_messages:r.getForFBID(this.props.userID),_threadActions:s.getForFBID(this.props.userID),_threadInformer:w.getForFBID(this.props.userID),hovercardLink:'',immutableMessages:o.List(),initDialog:false,initialSavedResponsesManageViewType:qa.editPanelViewMode.LIST,isMessengerComposerOn:true,isSavedResponsesBrowsePanelOn:this.props.pagesMessengerComposerProps.isSavedResponseEnabled,loadingMessages:false,messages:[],moreMessages:false,serverThreadID:null,showCloseDialog:false,thread:null,threadDialogExpanded:false};},getPermalinkURI:function(){var pb=va.getRequestURI();if(this.props.basePermalinkURI)pb=pb.setPath(this.props.basePermalinkURI);pb.addQueryData({index:this.props.index,mercurythreadid:this.props.threadID,threadid:this.state.serverThreadID,timestamp:this.state.thread.timestamp});return pb;},_addURLParam:function(){window.history.replaceState({},null,this.getPermalinkURI());},_clearURLParam:function(){var pb=va.getRequestURI();pb.removeQueryData('index');pb.removeQueryData('mercurythreadid');pb.removeQueryData('threadid');pb.removeQueryData('timestamp');window.history.replaceState({},null,pb);},_displayErrorMessage:function(pb){var qb=na.createElement('div',{className:"_jbx"},gb._("Vui l\u00f2ng ch\u1edd \u0111\u1ebfn khi qu\u00e1 tr\u00ecnh t\u1ea3i l\u00ean ho\u00e0n t\u1ea5t r\u1ed3i m\u1edbi g\u1eedi tin nh\u1eafn c\u1ee7a b\u1ea1n."));if(pb){this.setState({errorMessage:qb});}else this.setState({errorMessage:null});},_fetchMessages:function(pb,qb){if(!pb||this.state.loadingMessages)return;this.setState({loadingMessages:true});this.state._messages.getThreadMessagesRange(this.props.threadID,this.state.messages.length,pb+1,(function(rb){var sb=rb.length>pb,tb=sb?rb.slice(1):rb;if(rb.length){this._oldTimestamp=rb[0].timestamp;}else this._oldTimestamp=0;qb=qb||fb;rb=tb.concat(this.state.messages);this._setMessageState(rb);this.setState({moreMessages:sb,loadingMessages:false},qb);this._updateSuggestedResponse&&this._updateSuggestedResponse();if(this.state.messages.length<=jb){this._scrollToBottom();}else this._maintainScrollView(this._prevScrollHeight,this._prevScrollTop);this._setPrevScroll();}).bind(this));},_fetchEarlierMessages:function(){this._setPreventScroll();this._fetchMessages(kb);},_getComposerSize:function(){if(this.state.threadDialogExpanded){var pb=k.getViewportDimensions();return {height:nb*pb.height,width:nb*pb.width};}else return {height:mb,width:lb};},_calculateReceipts:function(pb){var qb=this.state._mercuryRoger.getSeenTimestamps(this.props.threadID),rb=new ua(qb.keys());return qb.withMutations((function(sb){var tb=pb?pb:this.state.messages;o.Seq(tb).reverse().forEach(function(ub){if(rb.size===0)return false;if(!rb.has(ub.author))return;sb.update(ub.author,function(vb){return Math.max(vb,ub.timestamp);});rb['delete'](ub.author);});}).bind(this));},_maintainScrollView:function(pb,qb){if(!this.refs.scrollContainer)return;var rb=this.refs.scrollContainer.getArea(),sb=rb.getScrollHeight()-pb+qb;rb.setScrollTop(sb,false);},_openMessageDialog:function(event){if(this.state.showDialog)return;ea.logData_DEPRECATED({event_name:fa.MESSAGES_VIEW_THREAD,page_id:this.props.userID,source:this.props.source,thread_id:this.state.serverThreadID});this.setState({showDialog:true,initDialog:true});if(this.state.messages.length===0){ea.logData_DEPRECATED({event_name:fa.MESSAGES_MESSAGELIST_LOAD_START,flowID:this.props.flowID,page_id:this.props.userID,subsection:this.props.folder,loading_event_time:Date.now()});this._fetchMessages(kb,this.logGotMessageEvent);}this.refs.savedResponsesBrowsePanel&&this.refs.savedResponsesBrowsePanel.refreshSavedResponsesList();this._addURLParam();},_onDeleteMessageAction:function(pb){if(pb){this.state._threadActions['delete'](this.props.threadID);}else{this.state._messageActions['delete'](this.props.threadID,Object.keys(this.state.selectedMessages),t.CLIENT_DELETE_MESSAGES);this.setState({selectedMessages:{}});}this._updateDeleteActionState();},_onScroll:function(){if(!this.refs.scrollContainer)return;var pb=this.refs.scrollContainer.getArea(),qb=this._prevScrollTop,rb=this._prevScrollHeight;this._setPrevScroll();if(pb.isScrolledToTop()){this._fetchEarlierMessages();}else if(pb.isScrolledToBottom()){this._setAllowScroll();}else{if(pb.getScrollTop()===qb&&pb.getScrollHeight()!==rb)this._maintainScrollView(rb,qb);this._setPreventScroll();}},componentWillMount:function(){this.setState({readReceipts:this._calculateReceipts()});this.state._mercuryRoger.subscribe('change',(function(pb,qb){qb[this.props.threadID]&&this.state.initDialog&&this.setState({readReceipts:this._calculateReceipts()});}).bind(this));this._messagesReceivedToken=this.state._threadInformer.subscribe('messages-received',(function(pb,qb){if(this._shouldHandleMessageReceived&&!this._shouldHandleMessageReceived())return;var rb=qb[this.props.threadID];if(!rb||!rb.length)return;this._setMessageState(this.state.messages.concat(rb),(function(){this._afterThreadReceived&&this._afterThreadReceived();}).bind(this));}).bind(this));this._messagesReorderToken=this.state._threadInformer.subscribe('messages-reordered',(function(pb,qb){var rb=this.state._messages.getThreadMessagesSinceTimestamp(this.props.threadID,this._oldTimestamp);this._setMessageState(rb);}).bind(this));this._messagesUpdatedToken=this.state._threadInformer.subscribe('messages-updated',(function(pb,qb){var rb=qb[this.props.threadID];if(rb){var sb=this.state._messages.getMessagesFromIDs(Object.keys(rb));if(sb.length>0)this._updateMessages(sb);}}).bind(this));},componentWillUnmount:function(){this.state._threadInformer.unsubscribe(this._messagesReceivedToken);this.state._threadInformer.unsubscribe(this._messagesReorderToken);this.state._threadInformer.unsubscribe(this._messagesUpdatedToken);},componentDidUpdate:function(pb,qb){if(!this.state.showDialog)return;if(!qb.showDialog&&this.state.showDialog&&this.state.messages.length){var rb=this.refs.scrollContainer.getArea();rb.setScrollTop(this._prevScrollHeight);}if(this.refs.threadDialog)setTimeout(this.refs.threadDialog.layer.updatePosition.bind(this.refs.threadDialog.layer));if(this.refs.threadDialog&&!this._threadDialogSubscribed){this.refs.threadDialog.layerSubscribe('key',this._onDialogKey);this._threadDialogSubscribed=true;}this.renderDialogTitle();},componentWillUpdate:function(pb,qb){if(qb.messages!=this.state.messages)this.setState({readReceipts:this._calculateReceipts(qb.messages)});if(!this.state.initDialog&&qb.initDialog){this.setState({hovercardLink:n.constructEndpoint({id:this.state.thread.other_user_fbid})});ma.get(v.getParticipantIDFromUserID(this.state.thread.other_user_fbid),(function(rb){var sb;this.setState({participants:o.Map((sb={},sb[rb.id]=rb,sb))});}).bind(this));}},_onDialogKey:function(pb,event){if(l.getKeyCode(event)===p.ESC)setTimeout(this._onCloseButton);},_onComposerKey:function(event){if(l.getKeyCode(event)===p.ESC)setTimeout(this._onCloseButton);},_logExpandedWindow:function(){if(this.state.threadDialogExpanded)ea.logData_DEPRECATED({page_id:this.props.userID,event_name:fa.MESSAGES_DIALOG_EXPAND_WINDOW,source:this.props.source,thread_id:this.state.serverThreadID});},_onToggleDialogSize:function(){this.setState({threadDialogExpanded:!this.state.threadDialogExpanded},this._logExpandedWindow);},_onToggleDialog:function(pb){if(!this.props.disableComposer&&this.refs.composer.hasInput()){this.setState({showCloseDialog:true});}else this._onToggleDialogNoComposerCheck(pb);if(!pb){this._clearURLParam();this.state._threadActions.markRead(this.props.threadID,ga.MESSAGE_DIALOG_OPENING);}},_onToggleDialogNoComposerCheck:function(pb){this.setState({threadDialogExpanded:!pb?false:this.state.threadDialogExpanded,showDialog:pb,showCloseDialog:false},this._logExpandedWindow);},_onCloseButton:function(){this._onToggleDialog(false);},_onCloseSavedResponsesBrowsePanel:function(){this.setState({isSavedResponsesBrowsePanelOn:false});},_onConfirmCloseButton:function(){if(!this.props.disableComposer)this.refs.composer.clearInput();this._onToggleDialogNoComposerCheck(false);},_onCancelCloseButton:function(){this.setState({showCloseDialog:false});},_onSavedResponseSelected:function(pb,qb){if(this.props.disableComposer)return;if(pb.image){var rb=wa.getURIBuilder().getURI();rb=h.create(rb,this.props.userID);new i().setURI(rb).setMethod('POST').setData({image_id:pb.image.id}).setHandler((function(sb){var tb=sb.payload.duplicatedImageID;this.refs.composer.setSavedResponse(sa.prepareforSend(pb.message,qb),tb);}).bind(this)).send();}else this.refs.composer.setSavedResponse(sa.prepareforSend(pb.message,qb),null);},_onSavedResponseHover:function(pb,qb){if(!this.props.disableComposer){var rb=sa.prepareforSend(pb.message,qb);this.refs.composer.setPlaceholderText(rb);}},_onSavedResponseUnhover:function(){if(!this.props.disableComposer)this.refs.composer.setPlaceholderText(null);},_onMessageCheckStatusChanged:function(event){var pb=this.state.selectedMessages;if(event.target.checked){pb[event.target.value]=true;}else delete pb[event.target.value];this.setState({selectedMessages:pb});this._updateDeleteActionState();},_scrollToBottom:function(){if(!this.state.allowScroll||!this.refs.scrollContainer)return false;var pb=this.refs.scrollContainer.getArea();pb.scrollToBottom(false);return true;},_setAllowScroll:function(){if(!this.state.allowScroll)this.setState({allowScroll:true});},_setMessageState:function(pb,qb){qb=qb||fb;this.setState({immutableMessages:o.List(pb),messages:pb},qb);},_setPreventScroll:function(){if(this.state.allowScroll)this.setState({allowScroll:false});},_setPrevScroll:function(){var pb=this.refs.scrollContainer;this._prevScrollHeight=pb?pb.getArea().getScrollHeight():0;this._prevScrollTop=pb?pb.getArea().getScrollTop():0;},_updateMessages:function(pb,qb){var rb=this.state.messages;pb.forEach((function(sb){var tb=this.state.messages.findIndex(function(ub){return ub.message_id===sb.message_id;});if(tb)rb[tb]=sb;}).bind(this));this._setMessageState(rb,qb);this._maintainScrollView(this._prevScrollHeight,this._prevScrollTop);this._setPrevScroll();},_updateDeleteActionState:function(){if(Object.keys(this.state.selectedMessages).length===0){this.setState({isDeleteButtonDisabled:true});}else this.setState({isDeleteButtonDisabled:false});},_onSavedResponsesButtonClicked:function(){ea.logData_DEPRECATED({event_name:fa.SAVED_REPLIES_TOGGLE_BROWSE_VIEW,page_id:this.props.pageID,toggle_on:!this.state.isSavedResponsesBrowsePanelOn});this.setState({isSavedResponsesBrowsePanelOn:!this.state.isSavedResponsesBrowsePanelOn});},_onManageSavedResponses:function(){this.setState({isSavedResponsesManagePanelOn:true,isSavedResponsesBrowsePanelOn:false,isMessengerComposerOn:false,initialSavedResponsesManageViewType:qa.editPanelViewMode.LIST});},_onCreateNewSavedResponse:function(){this.setState({isSavedResponsesManagePanelOn:true,isSavedResponsesBrowsePanelOn:false,isMessengerComposerOn:false,initialSavedResponsesManageViewType:qa.editPanelViewMode.CREATE});},_getTotalDialogWidth:function(pb){if(this.state.isSavedResponsesBrowsePanelOn){return pb.width+qa.browsePanelAttachModeWidth;}else if(this.state.isSavedResponsesManagePanelOn){return qa.editPanelDialogWidth;}else return pb.width;},_onCloseSavedResponsesManagePanel:function(){this.setState({isSavedResponsesManagePanelOn:false,isSavedResponsesBrowsePanelOn:true,isMessengerComposerOn:true});},logGotMessageEvent:function(){ea.logData_DEPRECATED({page_id:this.props.userID,event_name:fa.MESSAGES_DIALOG_GOTMESSAGES,thread_id:this.state.serverThreadID,message_count:this.state.messages.length});ea.logData_DEPRECATED({event_name:fa.MESSAGES_MESSAGELIST_LOAD_END,flowID:this.props.flowID,page_id:this.props.userID,subsection:this.props.folder,loading_event_time:Date.now()});},renderActionsButton:function(){return (na.createElement('div',{className:"_5vuo"},na.createElement(ha,{isDeleteButtonDisabled:this.state.isDeleteButtonDisabled,user:this.props.userID,onDeleteMessageAction:this._onDeleteMessageAction,threadID:this.props.threadID,threadElementID:this.state.serverThreadID,folder:this.props.folder,thread:this.state.thread,allowReport:this.props.allowReport})));},renderExpandButton:function(){var pb=this.state.threadDialogExpanded?gb._("Tho\u00e1t ch\u1ebf \u0111\u1ed9 xem m\u1edf r\u1ed9ng"):gb._("Chuy\u1ec3n sang ch\u1ebf \u0111\u1ed9 xem m\u1edf r\u1ed9ng"),qb=gb._("Chuy\u1ec3n ch\u1ebf \u0111\u1ed9 xem m\u1edf r\u1ed9ng");return (na.createElement(xa,{'aria-label':pb,className:(this.state.threadDialogExpanded?"_5bwk":'')+(!this.state.threadDialogExpanded?' '+"_5bwl":''),'data-hover':'tooltip','data-tooltip-alignh':'center',label:qb,onClick:this._onToggleDialogSize,ref:'expandButton',size:'medium',title:qb,type:'button'}));},renderAttachmentShelf:function(){return (na.createElement('div',{ref:'attachmentsShelf',className:"_jz4"}));},renderErrorMessage:function(){return na.createElement('div',null,this.state.errorMessage);},renderComposer:function(){if(this.props.disableComposer)return null;return (na.createElement(ia,babelHelpers._extends({},this.props.pagesMessengerComposerProps,{attachmentsShelf:this.refs.attachmentsShelf,creatorInfo:this.props.creatorInfo,displayErrorMessage:this._displayErrorMessage,fileAttachmentEnabled:true,linkPreviewEnabled:true,onBeforeSend:this._setAllowScroll,onKeyUp:this._onComposerKey,otherUserID:this.state.thread.other_user_fbid.toString(),ref:'composer',threadID:this.props.threadID,threadElementID:this.state.serverThreadID,user:this.props.userID,adminSignatureSettings:this.props.adminSignatureSettings,suggestedResponseHandler:this.state.suggestedResponseHandler,isSuggestedResponseEnabled:this.props.enableSuggestedResponse,isSavedResponsesBrowsePanelOn:this.state.isSavedResponsesBrowsePanelOn,onSavedResponsesButtonClicked:this._onSavedResponsesButtonClicked})));},renderCloseButton:function(){var pb=gb._("\u0110\u00f3ng"),qb=gb._("Nh\u1ea5n Esc \u0111\u1ec3 \u0111\u00f3ng");return (na.createElement(ya,{label:pb,onClick:this._onCloseButton,shade:'dark',size:'medium',title:pb,tooltip:qb,type:'button'}));},renderComposerPart:function(pb){return (na.createElement('div',null,na.createElement(db,{className:"_3alh",showCloseButton:false},na.createElement('div',null,na.createElement('a',{className:"_5hp9",ref:'shortThreadName','data-hovercard':this.state.hovercardLink}),this.renderPresenceStatus()),this.renderActionsButton(),this.renderExpandButton(),this.renderCloseButton()),na.createElement(ab,{className:la.isFlagThread(this.state.thread)?"_5s71":'',useCustomPadding:true},na.createElement(ta,{height:pb.height,onScroll:this._onScroll,ref:'scrollContainer',width:pb.width},this.renderLoadingMessages(),this.renderMessages())),this.renderErrorMessage(),this.renderAttachmentShelf(),this.renderComposer()));},renderDialogContent:function(pb){return (na.createElement('div',null,this.renderSavedResponsesManagePanel(),this.renderComposerAndBrowsePanel(pb)));},renderSavedResponsesManagePanel:function(){if(this.state.isSavedResponsesManagePanelOn){return (na.createElement(ra,{onClose:this._onCloseSavedResponsesManagePanel,pageID:this.props.userID,otherUserID:this.state.thread.other_user_fbid.toString(),initialViewType:this.state.initialSavedResponsesManageViewType}));}else return null;},renderSavedResponsesBrowserPanel:function(){if(!this.state.isSavedResponsesBrowsePanelOn)return null;return (na.createElement(pa,{onClose:this._onCloseSavedResponsesBrowsePanel,otherUserID:this.state.thread.other_user_fbid.toString(),onManageSavedResponses:this._onManageSavedResponses,onCreateNewSavedResponse:this._onCreateNewSavedResponse,onResponseSelected:this._onSavedResponseSelected,onResponseHover:(function(pb,qb){return this._onSavedResponseHover(pb,qb);}).bind(this),onResponseUnhover:this._onSavedResponseUnhover,pageID:this.props.userID,ref:'savedResponsesBrowsePanel'}));},renderComposerAndBrowsePanel:function(pb){var qb={maxWidth:pb.width};return (na.createElement(m,{cols:2,spacing:'none',className:(!this.state.isMessengerComposerOn?"hidden_elem":'')+(' '+"_5b17")},na.createElement(hb,{className:"_jz7"+(!this.state.isSavedResponsesBrowsePanelOn?' '+"hidden_elem":'')},this.renderSavedResponsesBrowserPanel()),na.createElement(hb,{style:qb,className:"_jz7"+(!this.state.isMessengerComposerOn?' '+"hidden_elem":'')},this.renderComposerPart(pb))));},renderLayers:function(){if(!this.state.initDialog)return null;var pb=this._getComposerSize();return {threadDialog:na.createElement(za,{layerHideOnBlur:false,ref:'threadDialog',shown:this.state.showDialog,width:this._getTotalDialogWidth(pb)},this.renderDialogContent(pb)),closeThreadDialog:na.createElement(ja,{shown:this.state.showCloseDialog,onCancel:this._onCancelCloseButton,onConfirm:this._onConfirmCloseButton})};},renderLoadingMessages:function(){if(this.state.loadingMessages)return (na.createElement('div',{className:"_3oly _2ph-"},na.createElement(q,{size:'medium',color:'white'})));},renderMessages:function(){if(!this.state.messages)return null;if(this.props.enableNewMessageDialog)return (na.createElement('div',{className:"_511c _1ej0 _2mpc"},na.createElement(x,{DateBreak:y,deliveryTimestamp:0,isCanonical:true,isPageMessage:true,location:oa.MESSENGER,LogMessage:z,MessageGroup:aa,messages:this.state.immutableMessages,readReceipts:this.state.readReceipts,viewer:this.props.userID}),na.createElement(j,{indicatorClass:da,indicatorsWillShow:function(){},indicatorsDidShow:(function(){this.refs.scrollContainer&&this.refs.scrollContainer.getArea().scrollToBottom();}).bind(this),rootClassName:"clearfix _17pz _4gv2",threadID:this.props.threadID,viewer:this.props.userID})));return this.state.messages.map(this.renderMessage);},renderMessage:function(pb){return (na.createElement(ka,{customDialogWidth:this._getComposerSize().width,user:this.props.userID,message:pb,key:pb.message_id,messageCheckStatusChangedHandler:this._onMessageCheckStatusChanged}));},renderPresenceStatus:function(pb){if(!this.props.enableNewMessageDialog||!this.state.participants)return null;var qb=ca.getStatusFromCanonicalThread(this.state.participants,this.state.thread);if(!qb)return null;return (na.createElement(ba,{className:"_2v6o _8m4",isUserActive:qb.isUserActive,lastActive:qb.lastActive,platform:qb.platform}));}};f.exports=ob;},null);
__d('TextEditorModes',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();},null);
__d('encodeEntityRanges',['DraftStringKey','UnicodeUtils'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();var j=i.strlen;function k(l,m){var n=[];l.findEntityRanges(function(o){return !!o.getEntity();},function(o,p){var q=l.getText(),r=l.getEntityAt(o);n.push({offset:j(q.slice(0,o)),length:j(q.slice(o,p)),key:Number(m[h.stringify(r)])});});return n;}f.exports=k;},null);
__d('encodeInlineStyleRanges',['ComposedInlineStyle','UnicodeUtils','findRangesImmutable','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k){'use strict';if(c.__markCompiled)c.__markCompiled();var l=function(q,r){return q===r;},m=function(q){return !!q;},n=[];function o(q,r,s){var t=[],u=r.map(function(v){return v&s;});j(u,l,m,function(v,w){var x=q.getText();t.push({offset:i.strlen(x.slice(0,v)),length:i.strlen(x.slice(v,w)),style:s});});return t;}function p(q){var r=q.getCharacterList().map(function(t){return t.getStyle();}),s=k(h).filter(function(t){return !!t;});return Array.prototype.concat.apply(n,s.map(function(t){return o(q,r,t);}));}f.exports=p;},null);
__d('encodeBlocks',['ComposedBlockType','ComposedEntityType','DraftEntity','DraftStringKey','encodeEntityRanges','encodeInlineStyleRanges','filterObject','mapObject'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){'use strict';if(c.__markCompiled)c.__markCompiled();var p=h.ORDERED_LIST_ITEM,q=h.UNORDERED_LIST_ITEM;function r(t){var u=t.getBlockMap(),v=0,w={},x=[];u.forEach(function(aa,ba){aa.findEntityRanges(function(ca){return ca.getEntity()!==null;},function(ca){var da=k.stringify(aa.getEntityAt(ca));if(!w.hasOwnProperty(da))w[da]=''+v++;});x.push({key:ba,text:aa.getText(),type:aa.getType(),depth:s(aa)?aa.getDepth():0,inlineStyleRanges:m(aa),entityRanges:l(aa,w)});});var y=Object.keys(w),z={};y.forEach(function(aa,ba){var ca=j.get(k.unstringify(aa)),da=ca.getData(),ea=n(da,function(ga,ha){return ha!=='id';}),fa=o(ea,function(ga){return ga==null?'':String(ga);});z[ba]={id:da.id||null,type:i[ca.getType()],data:Object.keys(fa).length?fa:undefined};});return {entityMap:z,blocks:x};}function s(t){var u=t.getType();return u===p||u===q;}f.exports=r;},null);
__d('TextEditorBanzai',['BanzaiScuba','ReactMount','containsNode','encodeBlocks','invariant'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m=3,n={logSetSelectionError:function(t,u){var v=q();v.addNormal('error_type','setSelection');var w=u[0],x=u[1],y=u[2],z=u[3],aa=u[4];v.addNormal('selection_state',w.serialize());var ba=o(x);v.addNormal('node_html',ba);v.addNormal('selection_params','Key: '+y+', Start: '+z+', End: '+aa);v.addNormal('error_text',t.message);v.post();},logGetSelectionError:function(t,u){var v=q();v.addNormal('error_type','getSelection');var w=u[0],x=u[1],y=w.getCurrentContent(),z=k(y),aa=z.blocks;aa=aa.map(function(ea){var fa=ea.text,ga=babelHelpers.objectWithoutProperties(ea,['text']);return babelHelpers._extends({},ga,{length:fa.length});});var ba=w.getSelection();v.addNormal('content_state',JSON.stringify(aa));v.addNormal('selection_state',ba.serialize());v.addNormal('error_text',t.message);var ca=o(x);v.addNormal('node_html',ca);var da=r(x);v.addNormal('dom_selection',da);v.post();}};function o(t){if(!t)return '[empty]';var u=p(t);if(u.nodeType===m)return u.textContent;!(u instanceof Element)?l(0):undefined;return u.innerHTML;}function p(t){if(t.nodeType===m){var u=t.textContent.length;return document.createTextNode('[text '+u+']');}var v=t.cloneNode(),w=t.childNodes;for(var x=0;x<w.length;x++)v.appendChild(p(w[x]));return v;}function q(){return new h('text_editor_error_log',null,{addBrowserFields:true});}function r(t){if(!b.getSelection)return '[not available]';var u=b.getSelection(),v=u.anchorNode,w=u.anchorOffset,x=u.focusNode,y=u.focusOffset;v=s(v,t);x=s(x,t);return JSON.stringify({anchorNode:v,anchorOffset:w,focusNode:x,focusOffset:y});}function s(t,u){if(!t)return '[none]';if(t===window)return '[window]';if(t===document.documentElement)return '[document]';if(t===document.body)return '[body]';if(!j(u,t)){var v=i.getID(t);if(v)return '[outside root: '+v+']';var w=t.id;return w?'[outside root: '+w+']':'[outside root]';}return o(t);}f.exports=n;},null);
__d('EditorChangeType',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();},null);
__d('MercuryDelayedDispatcher',['MercuryDispatcher','MercuryServerPayloadPreprocessor','MercuryServerRequests','MercurySingletonProvider','MercuryThreadIDMap'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();function m(o){this.$MercuryDelayedDispatcher1=o;this.$MercuryDelayedDispatcher2=[];this.$MercuryDelayedDispatcher3=l.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4=h.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher5=j.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher6=i.getForFBID(this.$MercuryDelayedDispatcher1);this.$MercuryDelayedDispatcher4.subscribe('model-update-completed',(function(p,q){return this.$MercuryDelayedDispatcher7();}).bind(this));}m.getForFBID=function(o){return n.getForFBID(o);};m.get=function(){return n.get();};m.prototype.handleUpdateWaitForThread=function(o,p){var q=this.$MercuryDelayedDispatcher3.getClientIDFromServerIDNow(p);if(q){this.$MercuryDelayedDispatcher8(o);return;}this.$MercuryDelayedDispatcher3.getClientIDFromServerID(p,(function(){return this.$MercuryDelayedDispatcher2.push(o);}).bind(this));this.$MercuryDelayedDispatcher5.ensureThreadIsFetched(p);};m.prototype.$MercuryDelayedDispatcher7=function(){if(this.$MercuryDelayedDispatcher2&&this.$MercuryDelayedDispatcher2.length){var o=this.$MercuryDelayedDispatcher2[0];this.$MercuryDelayedDispatcher2=this.$MercuryDelayedDispatcher2.slice(1);this.$MercuryDelayedDispatcher8(o);}};m.prototype.$MercuryDelayedDispatcher8=function(o){if(o.from_client){this.$MercuryDelayedDispatcher4.handleUpdate(o);}else this.$MercuryDelayedDispatcher6.handleUpdate(o);};var n=new k(m);f.exports=m;},null);
__d('MessagingReliabilityLogger',['PresenceUtil','MercuryServerDispatcher','MessagingReliabilityLoggerInitialData','isEmpty','setTimeoutAcrossTransitions'],function a(b,c,d,e,f,g,h,i,j,k,l){if(c.__markCompiled)c.__markCompiled();var m='/ajax/mercury/client_reliability.php',n=60000;function o(u,v){var w={app:j.app,categories:JSON.stringify(u)};if(!k(v))w.extra=JSON.stringify(v);return w;}function p(u,v,w,x){if(u[v]===undefined)u[v]={};if(u[v][w]===undefined)u[v][w]=0;u[v][w]+=x;}function q(u,v,w,x){if(u[v]===undefined)u[v]={};if(u[v][w]===undefined)u[v][w]=[];for(var y=0;y<x.length;++y)u[v][w].push(x[y]);}function r(u,v){if(u&&!u.categories||v&&!v.categories)return;var w=u?JSON.parse(u.categories):{},x=u&&u.extra?JSON.parse(u.extra):{},y=JSON.parse(v.categories),z=v.extra?JSON.parse(v.extra):{};for(var aa in y){var ba=y[aa],ca=z[aa];for(var da in ba){p(w,aa,da,ba[da]);if(ca!==undefined){var ea=ca[da];if(ea!==undefined)q(x,aa,da,ea);}}}return o(w,x);}var s={};s[m]={mode:i.BATCH_SUCCESSIVE_PIGGYBACK_ON_ERROR,batch_function:r};i.registerEndpoints(s);var t={addEntry:function(u,v,w){if(!j.enabled)return;var x={};p(x,u,v,1);var y={};if(w!==undefined)q(y,u,v,[w]);i.trySend(m,o(x,y));}};(function u(){t.addEntry('page_event','active',h.getSessionID());l(u,n);})();f.exports=t;},null);
__d('MercuryChannelHandler',['Arbiter','ChannelConstants','MercuryActionType','MercuryConfig','MercuryDelayedDispatcher','MercuryGlobalActionType','MercuryMessages','MercuryPayloadSource','MercuryServerPayloadPreprocessor','MercurySingletonMixin','MercuryThreadInformer','MercuryViewer','MessagingEvent','MessagingReliabilityLogger','MessagingTag','PresenceUtil','mixin'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x){if(c.__markCompiled)c.__markCompiled();var y,z;y=babelHelpers.inherits(aa,x(q));z=y&&y.prototype;function aa(ba){'use strict';z.constructor.call(this);this.$MercuryChannelHandler1=ba;this.__payloadPreprocessor=p.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler2=r.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler3=n.getForFBID(this.$MercuryChannelHandler1);this.__delayedDispatcher=l.getForFBID(this.$MercuryChannelHandler1);this.$MercuryChannelHandler4=[];}aa.prototype.getInstanceFBID=function(){'use strict';return this.$MercuryChannelHandler1;};aa.prototype.$MercuryChannelHandler5=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.message){u.addEntry('channel_receive','invalid_data');return;}var da=ca.obj.message,ea=da.other_user_fbid?da.other_user_fbid:da.thread_fbid;ea=ea.toString();var fa={author:da.mercury_author_id,author_email:da.mercury_author_email,body:da.body,subject:da.subject,has_attachment:da.has_attachment,attachments:da.attachments,ephemeral_ttl_mode:da.ephemeral_ttl_mode,html_body:da.html_body,thread_id:da.tid,thread_fbid:da.thread_fbid&&da.thread_fbid.toString(),other_user_fbid:da.other_user_fbid&&da.other_user_fbid.toString(),offline_threading_id:da.offline_threading_id,message_id:da.mid,is_spoof_warning:da.is_spoof_warning,ranges:da.ranges,source:da.mercury_source,source_tags:da.mercury_source_tags,threading_id:da.threading_id,timestamp:da.timestamp,timestamp_absolute:da.timestamp_absolute,timestamp_relative:da.timestamp_relative,timestamp_datetime:da.timestamp_datetime,timestamp_time_passed:da.timestamp_time_passed,action_type:j.USER_GENERATED_MESSAGE,is_unread:da.is_unread,is_forward:false,forward_count:da.forward_count||da.forward,forward_message_ids:da.forward_msg_ids,folder:ca.obj.folder};if("sync_id" in da){fa.sync_id=da.sync_id;}else fa.action_id=da.action_id;if(!da.has_attachment&&k.WWWSyncMsgText){return;}else if(da.has_attachment&&k.WWWSyncMsgAttach)return;var ga=[babelHelpers._extends({},fa)];ga=ga.concat(da.forward_actions||[]);var ha=o.CLIENT_CHANNEL_MESSAGE;this.__delayedDispatcher.handleUpdateWaitForThread({actions:ga,payload_source:ha},ea);u.addEntry('channel_receive','success',[ea,fa.message_id,w.getSessionID()]);};aa.prototype.$MercuryChannelHandler7=function(ba,ca){'use strict';var da=ca.obj.other_user_fbid,ea=ca.obj.thread_fbid;if(!this.$MercuryChannelHandler6(ba)||!da&&!ea)return;this.__payloadPreprocessor.handleUpdate({delivery_receipts:[{other_user_fbid:da?da.toString():'',thread_fbid:ea?ea.toString():'',time:ca.obj.timestamp}]});};aa.prototype.$MercuryChannelHandler8=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=[],ea=ca.obj.event==t.READ;(ca.obj.thread_fbids||[]).forEach(function(fa){da.push({action_type:j.CHANGE_READ_STATUS,action_id:null,thread_fbid:fa,mark_as_read:ea,timestamp:ca.obj.timestamp||0,folder:ca.obj.folder_info[fa]});});(ca.obj.other_user_fbids||[]).forEach(function(fa){da.push({action_type:j.CHANGE_READ_STATUS,action_id:null,other_user_fbid:fa,mark_as_read:ea,timestamp:ca.obj.timestamp||0,folder:ca.obj.folder_info[fa]});});this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler9=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!(ca.obj.thread_fbids||ca.obj.other_user_fbids))return;var da=[];(ca.obj.thread_fbids||[]).forEach(function(ea){da.push({action_type:j.DELETE_THREAD,action_id:null,thread_fbid:ea});});(ca.obj.other_user_fbids||[]).forEach(function(ea){da.push({action_type:j.DELETE_THREAD,action_id:null,other_user_fbid:ea});});this.__payloadPreprocessor.handleUpdate({actions:da,payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler10=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids||!ca.obj.mids)return;var da=ca.obj.thread_fbids.length?ca.obj.thread_fbids[0]:null,ea=ca.obj.other_user_fbids.length?ca.obj.other_user_fbids[0]:null,fa={action_type:j.DELETE_MESSAGES,action_id:null,thread_fbid:da,other_user_fbid:ea,message_ids:ca.obj.mids};if(k.MessengerGlobalDeleteGK){if(ca.obj.updated_thread)return;this.__payloadPreprocessor.handleUpdate({actions:[fa],payload_source:o.CLIENT_CHANNEL_MESSAGE});return;}this.__payloadPreprocessor.handleUpdate({actions:[fa],threads:[ca.obj.updated_thread],payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler11=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||!ca.obj.folder)return;var da={action_type:m.MARK_ALL_READ,action_id:ca.obj.action_id,folder:ca.obj.folder};this.__payloadPreprocessor.handleUpdate({global_actions:[da]});};aa.prototype.$MercuryChannelHandler12=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=o.CLIENT_CHANNEL_MESSAGE;(ca.obj.thread_fbids||[]).forEach(function(ea){var fa={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:ea.toString(),other_user_fbid:null,archived:ca.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},fa)],payload_source:da},ea.toString());},this);(ca.obj.other_user_fbids||[]).forEach(function(ea){var fa={action_type:j.CHANGE_ARCHIVED_STATUS,action_id:null,thread_fbid:null,other_user_fbid:ea.toString(),archived:ca.obj.state};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},fa)],payload_source:da},ea.toString());},this);};aa.prototype.$MercuryChannelHandler13=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.thread_fbids&&!ca.obj.other_user_fbids)return;var da=o.CLIENT_CHANNEL_MESSAGE,ea;(ca.obj.thread_fbids||[]).forEach(function(fa){if(ca.obj.event==t.TAG){ea=ca.obj.tag;}else ea=ca.obj.marked_as_spam?v.SPAM:v.INBOX;var ga={action_type:j.CHANGE_FOLDER,action_id:null,thread_fbid:fa.toString(),other_user_fbid:null,new_folder:ea};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:da},fa.toString());},this);(ca.obj.other_user_fbids||[]).forEach(function(fa){if(ca.obj.event==t.TAG){ea=ca.obj.tag;}else ea=ca.obj.marked_as_spam?v.SPAM:v.INBOX;var ga={action_type:j.CHANGE_FOLDER,action_id:null,other_user_fbid:fa.toString(),thread_fbid:null,new_folder:ea};this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},ga)],payload_source:da},fa.toString());},this);};aa.prototype.$MercuryChannelHandler14=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj.tag)return;switch(ca.obj.tag){case v.ACTION_ARCHIVED:this.$MercuryChannelHandler12(ba,ca);break;case v.INBOX:case v.OTHER:this.$MercuryChannelHandler13(ba,ca);break;}};aa.prototype.__markAsSeen=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler15(ba)||!ca.obj||!ca.obj.seen_timestamp)return;this.__payloadPreprocessor.handleUpdate({message_counts:[{seen_timestamp:ca.obj.seen_timestamp,folder:v.INBOX}],unseen_thread_fbids:[{thread_fbids:[],other_user_fbids:[],folder:v.INBOX}],payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.__updateModelsFromMercuryPayload=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler16(ba)||!ca.obj)return;this.$MercuryChannelHandler2.synchronizeInforms((function(){var da=ca.obj,ea=[];(da.actions||[]).forEach(function(fa){var ga=j.USER_GENERATED_MESSAGE;if(fa.action_type==j.LOG_MESSAGE){var ha=o.CLIENT_CHANNEL_MESSAGE,ia;ia=fa.other_user_fbid||fa.thread_fbid;this.__delayedDispatcher.handleUpdateWaitForThread({actions:[babelHelpers._extends({},fa)],payload_source:ha},ia);}else if(fa.action_type!=ga)ea.push(fa);},this);da.actions=ea;da.payload_source=o.CLIENT_CHANNEL_MESSAGE;this.__payloadPreprocessor.handleUpdate(da);}).bind(this));};aa.prototype.$MercuryChannelHandler17=function(ba,ca){'use strict';var da,ea,fa=ca.obj.time,ga=ca.obj.reader,ha=ca.obj.thread_fbid||'';this.__payloadPreprocessor.handleUpdate({roger:(ea={},ea[ha]=(da={},da[ga]=fa,da),ea)});};aa.prototype.$MercuryChannelHandler18=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.message_blocked===undefined||!ca.obj.thread_fbid)return;var da=j.UPDATE_BLOCKER_STATUS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,message_blocked:ca.obj.message_blocked,is_blocked_by_recipient:ca.obj.is_blocked_by_recipient}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler19=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.got_blocked===undefined||!ca.obj.thread_fbid)return;var da=j.UPDATE_BLOCKEE_STATUS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,got_blocked:ca.obj.got_blocked}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.$MercuryChannelHandler20=function(ba,ca){'use strict';if(!this.$MercuryChannelHandler6(ba)||!ca.obj||ca.obj.mute_settings===undefined||!ca.obj.thread_fbid&&!ca.obj.other_user_fbid)return;var da=j.CHANGE_MUTE_SETTINGS,ea=[{action_type:da,action_id:null,thread_fbid:ca.obj.thread_fbid,other_user_fbid:ca.obj.other_user_fbid,mute_settings:ca.obj.mute_settings}];this.__payloadPreprocessor.handleUpdate({actions:ea,payload_source:o.CLIENT_CHANNEL_MESSAGE});};aa.prototype.__handleMessagingPayload=function(ba,ca){'use strict';switch(ca.obj.event){case t.DELIVER:this.$MercuryChannelHandler5(ba,ca);break;case t.DELIVERY_RECEIPT:this.$MercuryChannelHandler7(ba,ca);break;case t.READ:case t.UNREAD:this.$MercuryChannelHandler8(ba,ca);break;case t.READ_ALL:this.$MercuryChannelHandler11(ba,ca);break;case t.DELETE:this.$MercuryChannelHandler9(ba,ca);break;case t.DELETE_MESSAGES:this.$MercuryChannelHandler10(ba,ca);break;case t.TAG:this.$MercuryChannelHandler14(ba,ca);break;case t.REPORT_SPAM:this.$MercuryChannelHandler13(ba,ca);break;case t.READ_RECEIPT:this.$MercuryChannelHandler17(ba,ca);break;case t.CHANGE_MUTE_SETTINGS:this.$MercuryChannelHandler20(ba,ca);break;case t.UPDATE_BLOCKER_STATUS:this.$MercuryChannelHandler18(ba,ca);break;case t.UPDATE_BLOCKEE_STATUS:this.$MercuryChannelHandler19(ba,ca);break;}};aa.prototype.getRouting=function(){'use strict';return {mercury:this.__updateModelsFromMercuryPayload,messaging:this.__handleMessagingPayload,inbox:this.__markAsSeen};};aa.prototype.__getMessagingPayloadType=function(){'use strict';return i.getArbiterType('messaging');};aa.prototype.__getMercuryPayloadType=function(){'use strict';return i.getArbiterType('mercury');};aa.prototype.__getInboxPayloadType=function(){'use strict';return i.getArbiterType('inbox');};aa.prototype.$MercuryChannelHandler6=function(ba){'use strict';return ba==this.__getMessagingPayloadType();};aa.prototype.$MercuryChannelHandler16=function(ba){'use strict';return ba==this.__getMercuryPayloadType();};aa.prototype.$MercuryChannelHandler15=function(ba){'use strict';return ba==this.__getInboxPayloadType();};aa.prototype.turnOn=function(){'use strict';if(!this.$MercuryChannelHandler4.length){var ba=this.getRouting();for(var ca in ba)this.$MercuryChannelHandler4.push(h.subscribe(i.getArbiterType(ca),ba[ca].bind(this)));}return this;};aa.prototype.turnOff=function(){'use strict';if(this.$MercuryChannelHandler4.length){this.$MercuryChannelHandler4.forEach(h.unsubscribe);this.$MercuryChannelHandler4=[];}return this;};Object.assign(aa,q);f.exports=aa;},null);
__d('MercuryFilters',['MessagingTag','arrayContains'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=[h.UNREAD],k={ALL:'all',UNREAD:h.UNREAD,getSupportedFilters:function(){return j.concat();},isSupportedFilter:function(l){return i(j,l);}};f.exports=k;},null);
__d('MercuryOrderedThreadlist',['LogHistory','MercuryActionType','MercuryDispatcher','MercuryFilters','MercuryFolders','MercuryPayloadSource','MercurySingletonMixin','MercuryThreadIDMap','MessagingTag','PageMessageEnumTag','RangedCallbackManager','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){'use strict';if(c.__markCompiled)c.__markCompiled();var w=h.getInstance('ordered_threadlist_model'),x=k.getSupportedFilters().concat([k.ALL,p.GROUPS]),y=l.getSupportedFolders();function z(ja,ka,la,ma){var na=[],oa=false,pa=false,qa=(ka||[]).filter(function(xa){var ya=xa.filter||k.ALL;return (xa.folder==la||!xa.folder&&la==p.INBOX)&&ya==ma;}),ra=ja._threadlistOrderMap[la][ma].getAllResources(),sa;qa.forEach(function(xa){na=na.concat(xa.thread_ids);if(xa.error){if(xa.end>ra.length)pa=xa.error;}else{var ya=xa.end-xa.start;if(xa.thread_ids.length<ya)oa=true;}if(!sa||xa.end>sa)sa=xa.end;});da(ja,na,la,ma);if(oa){ja._threadlistOrderMap[la][ma].setReachedEndOfArray();}else if(pa){ja._threadlistOrderMap[la][ma].setError(pa);}else{var ta=ja._threadlistOrderMap[la][ma].getCurrentArraySize();if(sa&&ta<sa){var ua={},va=ra.concat(na),wa=va.filter(function(xa){var ya=ua[xa];ua[xa]=true;return ya;});if(wa.length){w.warn('duplicate_threads',{folder:la,expected_final_size:sa,actual_final_size:ta,duplicate_thread_ids:wa});ja._serverRequests.fetchThreadlistInfo(sa,wa.length,la,ma==k.ALL?null:ma);}}}}function aa(ja,ka){y.forEach(function(la){x.forEach(function(ma){z(ja,ka,la,ma);});});}function ba(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]={to_add:[],to_remove:[],to_remove_if_last_after_add:{}};});});ka.forEach(function(ma){if(ma.is_forward)return;var na=ma.thread_id,oa=ea(ja,na),pa=fa(ja,na);function qa(){pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_add.push(na);if(!ja._threadlistOrderMap[oa][sa].hasReachedEndOfArray()&&!ja._threadlistOrderMap[oa][sa].hasResource(na))la[oa][sa].to_remove_if_last_after_add[na]=true;});}function ra(sa){if(v(x,sa))if(v(pa,sa)){la[oa][sa].to_add.push(na);}else la[oa][sa].to_remove.push(na);}if(!oa){if(ma.action_type===i.CHANGE_FOLDER||ma.action_type===i.CHANGE_ARCHIVED_STATUS)y.forEach(function(sa){if(sa!==oa)x.forEach(function(ta){ja._threadlistOrderMap[sa][ta].removeResources([na]);});});return;}switch(ma.action_type){case i.DELETE_THREAD:pa.forEach(function(sa){if(!v(x,sa))return;la[oa][sa].to_remove.push(na);});break;case i.CHANGE_ARCHIVED_STATUS:case i.CHANGE_FOLDER:qa();break;case i.CHANGE_READ_STATUS:ra(p.UNREAD);break;case i.USER_GENERATED_MESSAGE:case i.LOG_MESSAGE:pa.forEach(function(sa){if(!v(x,sa))return;if(ga(ja,na,oa,sa))la[oa][sa].to_add.push(na);});break;case i.CHANGE_FLAG:ra(q.FLAG);break;}});y.forEach(function(ma){x.forEach(function(na){var oa=ja._threadlistOrderMap[ma][na];da(ja,la[ma][na].to_add,ma,na);for(var pa=oa.getCurrentArraySize()-1;pa>=0;pa--){var qa=oa.getResourceAtIndex(pa);if(!la[ma][na].to_remove_if_last_after_add[qa])break;la[ma][na].to_remove.push(qa);}oa.removeResources(la[ma][na].to_remove);});});}function ca(ja,ka){var la={};y.forEach(function(ma){la[ma]={};x.forEach(function(na){la[ma][na]=[];});});ka.forEach(function(ma){var na=ea(ja,ma.thread_id),oa=fa(ja,ma.thread_id);if(na)oa.forEach(function(pa){if(ga(ja,ma.thread_id,na,pa))la[na][pa].push(ma.thread_id);});});y.forEach(function(ma){x.forEach(function(na){if(la[ma][na].length>0)da(ja,la[ma][na],ma,na);});});}function da(ja,ka,la,ma){ma=ma||k.ALL;ja._threadlistOrderMap[la][ma].addResources(ka);y.forEach(function(na){if(na!=la)ja._threadlistOrderMap[na][ma].removeResources(ka);});}function ea(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=null;if(!la){ma='No thread metadata';}else if(!la.folder)ma='No thread folder';if(ma){var na={error:ma,tid:ka};w.warn('no_thread_folder',na);return null;}var oa=la.folder;if(la.is_archived)oa=p.ACTION_ARCHIVED;if(ja._threadlistOrderMap[oa]){return oa;}else return null;}function fa(ja,ka){var la=ja._threads.getThreadMetaNow(ka),ma=[k.ALL];if(!la){var na={error:'no_thread_metadata',tid:ka};w.warn('no_thread_metadata',na);return [];}if(la.unread_count)ma.push(p.UNREAD);if(!la.is_canonical)ma.push(p.GROUPS);var oa=la.page_thread_info;if(oa&&oa.flagged)ma.push(q.FLAG);return ma;}function ga(ja,ka,la,ma){var na=ja._threads.getThreadMetaNow(ka);return !!(na&&na.timestamp&&ea(ja,ka)==la&&v(fa(ja,ka),ma));}function ha(ja){this._fbid=ja;this._serverRequests=s.getForFBID(this._fbid);this._threadIDMap=o.getForFBID(this._fbid);this._threadInformer=t.getForFBID(this._fbid);this._threads=u.getForFBID(this._fbid);this._dispatcher=j.getForFBID(this._fbid);this._threadlistOrderMap={};y.forEach((function(ka){this._threadlistOrderMap[ka]={};x.forEach((function(la){this._threadlistOrderMap[ka][la]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}).bind(this));this._dispatcher.subscribe('update-threadlist',(function(ka,la){if(!ia(la))return;var ma=la.ordered_threadlists;if(ma&&ma.length){aa(this,ma);}else{var na=(la.actions||[]).filter(function(oa){return oa.thread_id;});ca(this,la.threads||[]);ba(this,na);}this._threadInformer.updatedThreadlist();}).bind(this));}Object.assign(ha.prototype,{getThreadlistOrderMap:function(ja,ka){if(!this._threadlistOrderMap[ja][ka]){x=x.concat([ka]);y.forEach((function(la){this._threadlistOrderMap[la][ka]=new r((function(ma){return this._threads.getThreadMetaNow(ma).timestamp;}).bind(this),function(ma,na){return na-ma;},this._threadIDMap.canLinkExternally.bind(this._threadIDMap));}).bind(this));}return this._threadlistOrderMap[ja][ka];},getThreadlist:function(ja,ka,la,ma,na,oa){return this.getFilteredThreadlist(ja,ka,la,k.ALL,ma,na,oa);},getFilteredThreadlist:function(ja,ka,la,ma,na,oa,pa){var qa=this.getThreadlistOrderMap(la,ma),ra=qa.executeOrEnqueue(ja,ka,na,oa),sa=qa.getUnavailableResources(ra),ta=qa.getError(ja,ka,oa);if(sa.length||ta){if(qa.getCurrentArraySize()<ja){var ua={start:ja,limit:ka,filter:ma,resources_size:qa.getCurrentArraySize()};w.warn('range_with_gap',ua);}qa.setError(false);this._serverRequests.fetchThreadlistInfo(qa.getCurrentArraySize(),sa.length,la,ma==k.ALL?null:ma,pa);}return ra;},getThreadlistUntilTimestamp:function(ja,ka,la){la=la||k.ALL;return this.getThreadlistOrderMap(ka,la).getElementsUntil(ja);},getAvailableThreadlistNow:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getAllResources();},getThreadCount:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).getCurrentArraySize();},hasLoadedThreadlist:function(ja,ka){ka=ka||k.ALL;return this.getThreadlistOrderMap(ja,ka).hasReachedEndOfArray();},unsubscribe:function(ja,ka,la){la=la||k.ALL;this.getThreadlistOrderMap(ka,la).unsubscribe(ja);}});Object.assign(ha,n);function ia(ja){switch(ja.payload_source){case m.CLIENT_CHANGE_ARCHIVED_STATUS:case m.CLIENT_CHANGE_READ_STATUS:case m.CLIENT_CHANGE_FOLDER:case m.CLIENT_CHANNEL_MESSAGE:case m.CLIENT_DELETE_MESSAGES:case m.CLIENT_DELETE_THREAD:case m.CLIENT_SEND_MESSAGE:case m.SERVER_SEND_MESSAGE:case m.SERVER_FETCH_THREADLIST_INFO:case m.SERVER_THREAD_SYNC:return true;case m.SERVER_INITIAL_DATA:return !!ja.ordered_threadlists;default:return false;}}f.exports=ha;},null);
__d('MercuryStateCheck',['Arbiter','ChannelConstants','LogHistory','MercuryAPIArgsSource','MercuryFolders','MercuryOrderedThreadlist','MercuryServerRequests','MercurySingletonMixin','MessagingTag','URI'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q){if(c.__markCompiled)c.__markCompiled();var r=j.getInstance('mercury_state_check');function s(t){'use strict';this.$MercuryStateCheck1=t;this.$MercuryStateCheck2=n.getForFBID(this.$MercuryStateCheck1);this.$MercuryStateCheck3=m.getForFBID(this.$MercuryStateCheck1);h.subscribe(i.ON_INVALID_HISTORY,this.$MercuryStateCheck4.bind(this,i.ON_INVALID_HISTORY));e(['ChannelConnection'],(function(u){u.subscribe(u.CONNECTED,(function(v,w){if(!w.init)this.$MercuryStateCheck5(u.CONNECTED);}).bind(this));}).bind(this));}s.prototype.$MercuryStateCheck4=function(t){'use strict';var u;if(q.getRequestURI().getPath().search(/messages/)!==-1){u=l.getSupportedFolders();}else u=[p.INBOX];r.debug('check',{folders:u,source:t});this.$MercuryStateCheck2.fetchMissedMessages(u,k.MERCURYSYNC);};s.prototype.$MercuryStateCheck5=function(t){'use strict';var u=this.$MercuryStateCheck3.getAvailableThreadlistNow(p.INBOX)||[];u=u.slice(0,20);r.debug('full_check',{threads:u,source:t});this.$MercuryStateCheck2.fetchThreadData(u,k.MERCURYSYNC);this.$MercuryStateCheck4(t);};Object.assign(s,o);f.exports=s;},null);