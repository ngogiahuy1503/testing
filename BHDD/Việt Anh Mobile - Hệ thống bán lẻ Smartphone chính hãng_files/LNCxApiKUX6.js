/*!CK:4046274877!*//*1446155283,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["dz4Xp"]); }

__d("MessagingGenericAdminTextType",[],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports={CONFIRM_FRIEND_REQUEST:"confirm_friend_request",ACCEPT_PENDING_THREAD:"accept_pending_thread",RAMP_UP_WELCOME_MESSAGE:"ramp_up_welcome_message",CHANGE_THREAD_THEME:"change_thread_theme",CHANGE_THREAD_ICON:"change_thread_icon",GROUP_THREAD_CREATED:"group_thread_created",THREAD_EPHEMERAL_SEND_MODE:"thread_ephemeral_send_mode",INVITE_ACCEPTED:"invite_accepted",MESSENGER_INVITE_SENT:"messenger_invite_sent",TURN_ON_PUSH:"turn_on_push",JOURNEY_PROMPT_COLOR:"journey_prompt_color",JOURNEY_PROMPT_LIKE:"journey_prompt_like",JOURNEY_PROMPT_NICKNAME:"journey_prompt_nickname",JOURNEY_PROMPT_SETUP:"journey_prompt_setup"};},null,{});
__d('ItunesPluginLogging',['Run','Bootloader'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={logPluginData:function(){h.onAfterLoad(function(){var j=c('Bootloader');j.loadModules(["ItunesDetector","AsyncRequest"],function(k,l){new l().setURI('/ajax/ads/media/log').setData({status:k.hasItunes()}).send();});});}};f.exports=i;},null);
__d('TypingDetector',['ArbiterMixin','Event','Input','Run','SubscriptionsHandler','TypingStates','createObjectFrom','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();function p(q,r){this._input=q;this._ignoreKeys={};this._getValueFn=r;}Object.assign(p.prototype,h,{_timeout:7000,_currentState:m.INACTIVE,init:function(){this.init=o;this.reset();this._subscriptions=new l();this._subscriptions.addSubscriptions(i.listen(this._input,'keyup',this._update.bind(this)),k.onUnload(this._onunload.bind(this)));},reset:function(){clearTimeout(this._checkTimer);this._checkTimer=null;this._lastKeystrokeAt=null;this._currentState=m.INACTIVE;},setIgnoreKeys:function(q){this._ignoreKeys=n(q);},destroy:function(){this._subscriptions.release();},_onunload:function(){if(this._currentState==m.TYPING)this._transition(m.QUITTING);},_update:function(event){var q=i.getKeyCode(event),r=this._currentState;if(!this._ignoreKeys[q]){var s=this._getValueFn?this._getValueFn():j.getValue(this._input);if(s.trim().length===0){if(r==m.TYPING)this._transition(m.INACTIVE);}else if(r==m.TYPING){this._recordKeystroke();}else if(r==m.INACTIVE){this._transition(m.TYPING);this._recordKeystroke();}}},_transition:function(q){this.reset();this._currentState=q;this.inform('change',q);},_recordKeystroke:function(){this._lastKeystrokeTime=Date.now();if(!this._checkTimer)this._checkTimer=setTimeout(this._checkTyping.bind(this),this._timeout);},_checkTyping:function(){var q=this._lastKeystrokeTime+this._timeout,r=Date.now();if(r>q){this._transition(m.INACTIVE);}else{clearTimeout(this._checkTimer);this._checkTimer=setTimeout(this._checkTyping.bind(this),q-r+10);}}});f.exports=p;},null);
__d('TypingDetectorController',['AsyncRequest','AvailableList','AvailableListConstants','ChannelConnection','ChatVisibility','Keys','TypingDetector','TypingStates','emptyFunction','setTimeoutAcrossTransitions','shield'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();function s(t,u,v,w,x,y){'use strict';this.userID=t;this.input=u;this.source=v;this.threadID=x;this.remoteState=o.INACTIVE;this.notifyTimer=null;w=w||{};this.notifyDelay=w.notifyDelay||this.notifyDelay;this._typingDetector=new n(u,y);this._typingDetector.init(w);this._typingDetector.subscribe('change',this._stateChange.bind(this));}s.prototype.setUserAndThread=function(t,u){'use strict';if(this.userID!==t||this.threadID!==u){this.resetState();this.userID=t;this.threadID=u;}};s.prototype.setIgnoreEnter=function(t){'use strict';var u=t?[m.RETURN]:[];this._typingDetector.setIgnoreKeys(u);};s.prototype.resetState=function(){'use strict';this._notifyState(o.INACTIVE);this.remoteState=o.INACTIVE;this._typingDetector.reset();clearTimeout(this.notifyTimer);this.notifyTimer=null;};s.prototype.destroy=function(){'use strict';this.resetState();this._typingDetector.destroy();};s.prototype._stateChange=function(t,u){'use strict';if(u!=o.QUITTING){clearTimeout(this.notifyTimer);this.notifyTimer=q(r(this._notifyState,this,u),this.notifyDelay);}else this._notifyState(u,true);};s.prototype._notifyState=function(t,u){'use strict';if(!this.userID&&!this.threadID||!l.isOnline()||t===this.remoteState||k.disconnected())return;this._sendRequest(t,this.userID,u);};s.prototype._sendRequest=function(t,u,v){'use strict';this.remoteState=t;var w={typ:t,to:u,source:this.source,thread:this.threadID};new h().setHandler(this._onTypResponse.bind(this,u)).setErrorHandler(p).setData(w).setURI('/ajax/messaging/typ.php').setAllowCrossPageTransition(true).setOption('asynchronous',!v).send();};s.prototype._onTypResponse=function(t,u){'use strict';var v=u.getPayload()||{};if(v.offline)i.set(t,j.OFFLINE,'typing_response');};Object.assign(s.prototype,{notifyDelay:1000});f.exports=s;},null);
__d('NotificationBeeperModuleLoader',['BootloadedComponent.react','JSResource','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={load:function(m,n){k.render(j.createElement(h,babelHelpers._extends({bootloadPlaceholder:j.createElement('span',null),bootloadLoader:i('NotificationBeeper.react')},m)),n);}};f.exports=l;},null);
__d('SplitImage.react',['React','Image.react','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'SplitImage',render:function(){var m=this.props.size;return (h.createElement('div',babelHelpers._extends({},this.props,{className:k(this.props.className,"_55lt"),style:babelHelpers._extends({},this.props.style||{},{width:m,height:m})}),this.renderImages()));},renderImages:function(){if(!this.props.srcs)return null;var m=this.props.srcs,n=Array.isArray(m);if(n){m=m.filter(function(o){return o!==null;});if(!m.length)return null;}if(!n||m.length==1)return this.renderOne(n?m[0]:m);return m.length==2?this.renderTwo(m):this.renderThree(m);},renderOne:function(m){return (h.createElement(i,{src:m,width:this.props.size,height:this.props.size,alt:''}));},renderTwo:function(m){var n=this.props.size,o=Math.floor(n/2),p=-Math.floor(o/2),q="_55lu"+(this.props.border?' '+"_57xo":'');return (h.createElement('div',null,h.createElement('div',{className:"_55lu",style:{width:o}},h.createElement(i,{src:m[0],width:n,height:n,style:{marginLeft:p},alt:''})),h.createElement('div',{className:q,style:{width:o}},h.createElement(i,{src:m[1],width:n,height:n,style:{marginLeft:p},alt:''}))));},renderThree:function(m){var n=this.props.size,o=Math.floor(n/3*2),p=-Math.floor((n-o)/2),q=Math.floor(n/2),r=n-o,s=-Math.floor((q-r)/2),t="_55lu"+(this.props.border?' '+"_57pl":''),u="_55lu"+(this.props.border?' '+"_57pm":'');return (h.createElement('div',null,h.createElement('div',{className:t,style:{width:o}},h.createElement(i,{src:m[0],width:n,height:n,style:{marginLeft:p},alt:''})),h.createElement('div',{className:u,style:{width:r,height:q}},h.createElement(i,{src:m[1],width:q,height:q,style:{marginLeft:s},alt:''})),h.createElement('div',{className:"_55lu",style:{width:r,height:q}},h.createElement(i,{src:m[2],width:q,height:q,style:{marginLeft:s},alt:''}))));}});f.exports=l;},null);
__d('ChatSidebarHeader.react',['React','cx','joinClasses'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.createClass({displayName:'ReactChatSidebarHeader',render:function(){return (h.createElement('div',babelHelpers._extends({},this.props,{className:j(this.props.className,"_55ob")}),h.createElement('div',{className:"_55oc"},this.props.children)));}});f.exports=k;},null);
__d('NotificationBeeperItemCloseButton.react',['React','XUIAbstractGlyphButton.react','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l=h.createClass({displayName:'NotificationBeeperItemCloseButton',render:function(){return (h.createElement(i,babelHelpers._extends({},this.props,{className:"_3soc",title:k._("\u0110\u00f3ng")})));}});f.exports=l;},null);
__d('SyncRequestTitle.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestTitle',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("Waiting for {receiver} to accept your invite to play {app_name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app_name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("{sender} wants to play {app_name} with you, right now.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app_name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestAcceptedMessage.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestAcceptedMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("{receiver} accepted your invite to play {app name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("You accepted an invite from {sender} to play {app name}.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestRejectedMessage.react',['AsyncRequest','Link.react','React','URI','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m){if(c.__markCompiled)c.__markCompiled();var n=j.PropTypes,o=j.createClass({displayName:'SyncRequestRejectedMessage',propTypes:{requestId:n.string.isRequired,app:n.object.isRequired,isSender:n.bool.isRequired,receiver:n.object.isRequired,sender:n.object.isRequired},render:function(){if(this.props.isSender){return (j.createElement('div',null,m._("{receiver} declined your invite to play {app_name}.",[m.param('receiver',j.createElement('span',{className:"_dg4"},this.props.receiver.name)),m.param('app_name',j.createElement('span',{className:"_dg5"},this.props.app.name))])));}else return (j.createElement('div',null,m._("You declined an invite from {sender} to play {app_name}.",[m.param('sender',j.createElement('span',{className:"_dg4"},this.props.sender.name)),m.param('app_name',j.createElement('span',{className:"_dg5"},this.props.app.name))]),j.createElement('div',{className:"_13n7"},j.createElement('div',null,j.createElement(i,{onClick:this._submitBlockApp},m._("Block {app}",[m.param('app',this.props.app.name)]))),j.createElement('div',null,j.createElement(i,{onClick:this._submitBlockUser},m._("Block requests from {sender}",[m.param('sender',this.props.sender.name)]))))));},_submitBlockApp:function(){var p=new k('/games/block_app/'),q=new h().setURI(p);q.setData({app_id:this.props.app.id,source:'sync_request'});q.send();},_submitBlockUser:function(){var p=new k('/games/block_user/'),q=new h().setURI(p);q.setData({app_id:this.props.app.id,blockee_uid:this.props.sender.id});q.send();}});f.exports=o;},null);
__d('SyncRequestExpiredMessage.react',['React','fbt','cx'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestExpiredMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("{receiver} missed your invite to play {app name}.",[i.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,i._("You missed an invite from {sender} to play {app name}.",[i.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),i.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestCanceledMessage.react',['React','cx','fbt'],function a(b,c,d,e,f,g,h,i,j){'use strict';if(c.__markCompiled)c.__markCompiled();var k=h.PropTypes,l=h.createClass({displayName:'SyncRequestCanceledMessage',propTypes:{appName:k.string.isRequired,isSender:k.bool.isRequired,receiverName:k.string.isRequired,senderName:k.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,j._("You canceled an invite to {receiver} to play {app name}.",[j.param('receiver',h.createElement('span',{className:"_dg4"},this.props.receiverName)),j.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}else return (h.createElement('div',null,j._("{sender} canceled an invitation to play {app name}.",[j.param('sender',h.createElement('span',{className:"_dg4"},this.props.senderName)),j.param('app name',h.createElement('span',{className:"_dg5"},this.props.appName))])));}});f.exports=l;},null);
__d('SyncRequestTimer.react',['React','fbt'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=h.PropTypes;function k(m){if(m){m=Math.ceil(m);var n=m%60;if(n<10)n='0'+n;var o=Math.floor(m/60);return o+':'+n;}else return "0:00";}var l=h.createClass({displayName:'SyncRequestTimer',propTypes:{timeRemaining:j.number.isRequired,isSender:j.bool.isRequired,receiverName:j.string.isRequired},render:function(){if(this.props.isSender){return (h.createElement('div',null,i._("({time_remaining} remaining)",[i.param('time_remaining',k(this.props.timeRemaining))])));}else return (h.createElement('div',null,i._("You have {time_remaining} to accept.",[i.param('time_remaining',k(this.props.timeRemaining))])));}});f.exports=l;},null);
__d("XSyncRequestSubmitController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/platform\/games\/sync_requests\/submit\/",{request_id:{type:"Int",required:true},sender:{type:"Int",required:true},action:{type:"Int",required:true}});},null,{});
__d('SyncRequest.react',['Arbiter','AsyncRequest','ChannelConstants','React','SyncRequestStatusEnum','SyncRequestTitle.react','SyncRequestAcceptedMessage.react','SyncRequestRejectedMessage.react','SyncRequestExpiredMessage.react','SyncRequestCanceledMessage.react','SyncRequestTimer.react','XUIButton.react','XSyncRequestSubmitController','cx','fbt','getObjectValues'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w){if(c.__markCompiled)c.__markCompiled();var x=k.PropTypes,y=k.createClass({displayName:'SyncRequest',propTypes:{app:x.object.isRequired,creationTime:x.number.isRequired,requestId:x.string.isRequired,receiver:x.object.isRequired,sender:x.object.isRequired,status:x.oneOf(w(l)).isRequired,timeout:x.number.isRequired,timeRemaining:x.number.isRequired,viewerId:x.number.isRequired,onStatusUpdate:x.func},componentWillMount:function(){if(this.props.status===l.PENDING){var z=h.subscribe(j.getArbiterType('sync_request_updated'),(function(ca,da){da=da.obj;if(da.id.toString()!==this.props.requestId)return;this.setState({status:da.status});}).bind(this));this.setState({statusEvent:z});}var aa=null;if(this.props.status===l.PENDING){var ba=function(){this.setState({time_remaining:this.state.time_remaining-1});if(this.state.time_remaining<=0){clearInterval(this.state.counter);var ca={counter:null,time_remaining:0};if(this.state.status===l.PENDING)ca.status=l.EXPIRED;this.setState(ca);}};aa=setInterval(ba.bind(this),1000);}this.setState({time_remaining:this.props.timeRemaining,counter:aa});},componentWillUnmount:function(){if(this.state.counter)clearInterval(this.state.counter);h.unsubscribe(this.state.statusEvent);},getInitialState:function(){return {buttonsDisabled:false,time:Date.now(),status:this.props.status,viewerIsSender:this.props.viewerId===this.props.sender.id};},componentDidUpdate:function(z,aa){if(this.props.status!=l.PENDING)this.state.status=this.props.status;if(this.props.onStatusUpdate)this.props.onStatusUpdate(this.state.status,aa.status);},render:function(){var z;switch(this.state.status){case l.PENDING:var aa;if(!this.state.viewerIsSender){aa=[k.createElement(s,{use:'confirm',onClick:this._handleAccept,disabled:this.state.buttonsDisabled,label:v._("Accept")}),k.createElement(s,{use:'default',onClick:this._handleReject,disabled:this.state.buttonsDisabled,label:v._("Decline")})];}else aa=k.createElement(s,{use:'default',onClick:this._handleCancel,disabled:this.state.buttonsDisabled,label:v._("Cancel")});z=k.createElement('div',null,k.createElement('div',{className:"_372m"},k.createElement(m,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name})),k.createElement('div',{className:"_372n"},k.createElement(r,{isSender:this.state.viewerIsSender,timeRemaining:this.state.time_remaining,receiverName:this.props.receiver.name})),k.createElement('div',{className:"_372o"},aa));break;case l.ACCEPTED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(n,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case l.REJECTED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(o,{requestId:this.props.requestId,app:this.props.app,isSender:this.state.viewerIsSender,receiver:this.props.receiver,sender:this.props.sender}));break;case l.EXPIRED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(p,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;case l.CANCELED:z=k.createElement('div',{className:"_372p mvs"},k.createElement(q,{appName:this.props.app.name,isSender:this.state.viewerIsSender,receiverName:this.props.receiver.name,senderName:this.props.sender.name}));break;default:throw new Error('The request status `%s` is unknown.',this.state.status);}return (k.createElement('div',{className:"_372q"},z));},_handleAccept:function(){this._handleStatusUpdate(l.ACCEPTED);var z=window.open(this.props.app.uri);if(z)z.focus();},_handleReject:function(){this._handleStatusUpdate(l.REJECTED);},_handleCancel:function(){this._handleStatusUpdate(l.CANCELED);},_handleStatusUpdate:function(z){this.setState({status:z,buttonsDisabled:true});var aa=t.getURIBuilder().setInt('request_id',this.props.requestId).setInt('sender',this.props.sender.id).setInt('action',z).getURI();new i().setURI(aa).setHandler((function(ba){this.setState({status:z});}).bind(this)).setErrorHandler((function(ba){this.setState({buttonsDisabled:false});}).bind(this)).send();}});f.exports=y;},null);
__d('ChatEmployeeAwayWarning',['MercuryIDs','MercuryParticipants','MercuryViewer'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k={updateEmployeeAwayWarning:function(l,m,n){i.get(j.getID(),function(o){var p=o.employee;if(p)i.getMulti(l.participants,function(q){var r=false,s=h.getUserIDFromThreadID(l.thread_id);if(!s)return;var t='fbid:'+s;for(var u in q)if(t==q[u].id&&q[u].is_employee_away)r=true;if(r){m();}else n();});});}};f.exports=k;},null);
__d('MessengerContextBannerBootloader',['BootloadedComponent.react','CurrentUser','DOM','JSResource','React','ReactDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();function n(q,r,s,t,u){var v=j.create('div');o(q,r,function(w){m.render(w,v,s(v));},t,u);}function o(q,r,s,t,u,v){v=babelHelpers._extends({left:0,position:'absolute',right:0,top:0},v);p({otherUserFBIDs:t&&[t],threadID:q,style:v},r,s,u);}function p(q,r,s,t){s(l.createElement(h,babelHelpers._extends({bootloadPlaceholder:l.createElement('div',{style:{height:80}}),bootloadLoader:k('MessengerContextBannerContainer.react'),location:r,onResize:t,viewer:i.getID()},q)));}f.exports={bootload:n,getBootloadedComponent:o};},null);
__d('MercuryThreadMuter',['AsyncDialog','AsyncRequest','DOM','MercuryThreadInfo'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();var l={showMuteChangeDialog:function(m,n){h.send(new i('/ajax/mercury/mute_thread_dialog.php').setRelativeTo(n),function(o){o.subscribe('confirm',(function(){this.hide();var p;j.scry(this.getRoot(),'input[type="radio"]').forEach(function(q){if(q.checked)p=q.value;});p=l.convertRawMuteSetting(p);e(['MercuryThreadActions'],function(q){q.get().updateMuteSetting(m,p);});}).bind(o));});},convertRawMuteSetting:function(m){switch(m){case 'always':return -1;case '30minutes':return 1800;case '1hour':return 3600;case '8hours':return 8*3600;case '24hours':return 24*3600;case '8am':var n,o=new Date(),p=new Date();p.setHours(8);p.setMinutes(0);p.setSeconds(0);if(p>o){n=p-o;}else n=p-o+24*3600*1000;return n/1000;default:return 0;}}};f.exports=l;},null);
__d('MercuryIndicatorController',['ArbiterMixin','DOM','MercuryActionType','MercuryDelayedRoger','MercuryIDs','MercuryMessageSourceTags','MercuryParticipants','MercuryViewer','arrayContains','formatDate','removeFromArray','fbt','MercuryRoger','MercuryThreads','MercuryTypingReceiver'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s){if(c.__markCompiled)c.__markCompiled();var t=c('MercuryRoger').get(),u=c('MercuryThreads').get(),v=c('MercuryTypingReceiver').get(),w=[];function x(y){this._threadID=y;this._canonicalUser=l.getUserIDFromThreadID(y);w.push(this);}Object.assign(x.prototype,h,{destroy:function(){r(w,this);},setLastMessage:function(y){this._lastMsg=y;this._handleStateChange();},_informStateChanged:function(y){if(y.activity=='none'&&this._currentActivity=='none')return;if(this._lastMsg&&o.isViewer(this._lastMsg.author))y.self_authored=true;this._currentActivity=y.activity;this.inform('state-changed',y);},_notifySentFrom:function(){var y,z,aa=this._lastMsg.source_tags||[];if(p(aa,m.MESSENGER)){y=i.create('a',{href:'/mobile/messenger','class':'fcg',target:'_blank'},s._("\u0110\u00e3 g\u1eedi t\u1eeb Messenger"));z='sentFromMobile';}else if(p(aa,m.MOBILE)){y=i.create('a',{href:'/mobile','class':'fcg',target:'_blank'},s._("G\u1eedi t\u1eeb \u0111i\u1ec7n tho\u1ea1i di \u0111\u1ed9ng"));z='sentFromMobile';}else if(p(aa,m.EMAIL)){y=s._("G\u1eedi t\u1eeb email");z='sentFromEmail';}else if(p(aa,m.WORK_CHAT)){y=i.create('a',{href:'/mobile','class':'fcg',target:'_blank'},s._("Sent from Work Chat"));z='sentFromMobile';}else{this._informStateChanged({activity:'none'});return;}this._informStateChanged({activity:z,text:y});},_notifySeenTimestamp:function(y){var z=t.getSeenTimestamp(this._threadID,y[0])*.001,aa=Date.now()*.001,ba;if(z<aa-518400){ba='M j';}else if(z<aa-86400){ba='D g:ia';}else ba='g:ia';this._informStateChanged({activity:'seen-timestamp',text:s._("\u0110\u00e3 xem l\u00fac {timestamp}",[s.param('timestamp',q(z,ba))])});},_nameNormalizer:function(y){var z;n.getMulti(y,function(aa){function ba(da){if(aa[da]!==undefined){return aa[da].short_name.toLowerCase();}else return da;}var ca=y.map(ba);z=function(da){var ea=ba(da),fa=ca.indexOf(ea)!==ca.lastIndexOf(ea);return fa?aa[da].name:aa[da].short_name;};});return z;},_seenByEveryone:function(y,z,aa){var ba=aa?aa.participants.length:0,ca=y.length;if(z.author!=o.getID()&&(!aa||aa.participants.indexOf(z.author)>-1))ca++;return ba>2&&ca>=ba-1;},_notifySeenBy:function(y){var z=this._lastMsg,aa=true;n.getMulti(y,(function(ba){aa=false;if(this._lastMsg!=z)return;var ca=u.getThreadMetaNow(this._threadID),da,ea=false,fa;if(ca)fa=this._nameNormalizer(ca.participants);if(!fa)fa=function(ja){return ba[ja].short_name;};if(this._seenByEveryone(y,z,ca)){da=s._("\u0110\u01b0\u1ee3c xem b\u1edfi t\u1ea5t c\u1ea3 m\u1ecdi ng\u01b0\u1eddi");}else if(y.length==1){da=s._("\u0110\u00e3 xem b\u1edfi {user}",[s.param('user',ba[y[0]].short_name)]);}else if(y.length==2){da=s._("\u0110\u00e3 xem b\u1edfi {user1}, {user2}",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name)]);}else if(y.length==3){da=s._("\u0110\u00e3 \u0111\u01b0\u1ee3c xem b\u1edfi {user1}, {user2}, {user3}",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name),s.param('user3',ba[y[2]].short_name)]);}else if(y.length>3){var ga=Object.keys(ba).length-2,ha=s._({"*":"{num} ng\u01b0\u1eddi kh\u00e1c"},[s.param('num',ga,[0])]),ia=i.create('span',{className:'more'},ha);da=s._("\u0110\u00e3 \u0111\u01b0\u1ee3c xem b\u1edfi {user1}, {user2}, {=num more link}",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name),s.param('=num more link',ia)]);ea=true;}this._informStateChanged({activity:'seen-by',text:da,seenBy:y,tooltip:ea});}).bind(this));aa&&this._informStateChanged({activity:'none'});},_notifyTyping:function(y){var z=this._lastMsg,aa=true;n.getMulti(y,(function(ba){aa=false;if(this._lastMsg!=z)return;var ca=u.getThreadMetaNow(this._threadID),da=ca?ca.participants.length:0,ea;if(ca)ea=this._nameNormalizer(ca.participants);if(!ea)ea=function(ka){return ba[ka].short_name;};var fa,ga=false;if(da>2&&y.length>=da-1){fa=s._("M\u1ecdi ng\u01b0\u1eddi \u0111ang nh\u1eadp...");}else if(y.length==1){fa=s._("{name} \u0111ang nh\u1eadp v\u0103n b\u1ea3n...",[s.param('name',ba[y[0]].short_name)]);}else if(y.length==2){fa=s._("{user1} v\u00e0 {user2} \u0111ang nh\u1eadp...",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name)]);}else if(y.length==3){fa=s._("{user1}, {user2} v\u00e0 {user3} \u0111ang nh\u1eadp...",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name),s.param('user3',ba[y[2]].short_name)]);}else if(y.length>3){var ha=Object.keys(ba).length-2,ia=s._({"*":"{num} kh\u00e1c"},[s.param('num',ha,[0])]),ja=i.create('a',{href:'#'},ia);fa=s._("{user1}, {user2} v\u00e0 {=num more link} \u0111ang nh\u1eadp...",[s.param('user1',ba[y[0]].short_name),s.param('user2',ba[y[1]].short_name),s.param('=num more link',ja)]);ga=true;}this._informStateChanged({activity:'typing',text:fa,typing:y,tooltip:ga});}).bind(this));aa&&this._informStateChanged({activity:'none'});},_handleStateChange:function(){var y=j.LOG_MESSAGE;if(!this._lastMsg||this._lastMsg.action_type==y){this._informStateChanged({activity:'none'});return;}if(this._typing&&this._typing.length){this._notifyTyping(this._typing);return;}if(this._canonicalUser&&this._lastMsg.author!=o.getID()){this._notifySentFrom();return;}var z=k.getSeenBy(this._threadID,true);if(z.length)if(this._canonicalUser){this._notifySeenTimestamp(z);return;}else{this._notifySeenBy(z);return;}this._informStateChanged({activity:'none'});}});v.addRetroactiveListener('state-changed',function(y){w.forEach(function(z){var aa=y[z._threadID];if(aa!==undefined){z._typing=aa;z._handleStateChange();}});});k.subscribe('state-changed',function(y,z){w.forEach(function(aa){z[aa._threadID]&&aa._handleStateChange();});});f.exports=x;},null);
__d('MercuryLastMessageIndicator.react',['DOM','MercuryIndicatorController','MercuryParticipants','React','ReactDOM','TooltipData','cx','emptyFunction','joinClasses'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=k.PropTypes,r=k.createClass({displayName:'MercuryLastMessageIndicator',propTypes:{hideTyping:q.bool,indicatorWillShow:q.func,indicatorDidShow:q.func,lastMessage:q.object,threadID:q.string.isRequired},getDefaultProps:function(){return {indicatorWillShow:o,indicatorDidShow:o};},getInitialState:function(){return {data:{}};},componentDidMount:function(){this._setup(this.props);},componentWillReceiveProps:function(s){if(s.threadID!=this.props.threadID){this._destroy();this._setup(s);}else if(s.lastMessage!=this.props.lastMessage)this._controller.setLastMessage(s.lastMessage);},componentWillUpdate:function(s,t){if(this.isVisible(s,t))this.props.indicatorWillShow();},componentDidUpdate:function(){if(!this.isVisible())return;this.setText();this.setTooltip();this.props.indicatorDidShow();},componentWillUnmount:function(){this._destroy();},render:function(){return (k.createElement('div',{className:this.getRootClass()},k.createElement('div',{className:"_510h"}),k.createElement('span',{className:"_510f",ref:'text'},'Â ')));},getRootClass:function(){var s="_510g"+(this.state.data.self_authored?' '+"_510e":''),t=this.state.data.activity,u=null;if(String(t).startsWith('seen')){u='seen';}else if(t=='typing'){u=this.props.hideTyping?null:t;}else u=t;return p(s,u,this.props.className);},isVisible:function(s,t){s=s||this.props;t=t||this.state;return (t.data&&t.data.activity!='none'&&!(s.hideTyping&&t.data.activity=='typing'));},setText:function(){if(this.state.data.text)h.setContent(l.findDOMNode(this.refs.text),this.state.data.text);},setTooltip:function(){if(this.state.data.activity=='seen-by'&&this.state.data.tooltip)j.getMulti(this.state.data.seenBy,(function(s){var t=h.create('div',null,this.state.data.seenBy.map(function(u){return h.create('div',null,s[u].name);}));m.set(h.find(l.findDOMNode(this),'span.more'),t,'above','center');}).bind(this));},_setup:function(s){this._controller=new i(s.threadID);this._subscription=this._controller.subscribe('state-changed',(function(t,u){return this.setState({data:u});}).bind(this));s.lastMessage&&this._controller.setLastMessage(s.lastMessage);},_destroy:function(){this._subscription.unsubscribe();this._controller.destroy();}});f.exports=r;},null);
__d('MercuryProductItemShareSnippet.react',['Image.react','React','cx','fbt','ix'],function a(b,c,d,e,f,g,h,i,j,k,l){'use strict';if(c.__markCompiled)c.__markCompiled();var m=i.PropTypes,n=i.createClass({displayName:'MercuryProductItemShareSnippet',propTypes:{isViewerSender:m.bool,senderName:m.string},render:function(){var o=this.props.isViewerSender?k._("B\u1ea1n \u0111\u00e3 g\u1eedi m\u1ed9t m\u1eb7t h\u00e0ng \u0111\u1ec3 b\u00e1n."):k._("{sender name} \u0111\u00e3 g\u1eedi m\u1ed9t m\u1eb7t h\u00e0ng \u0111\u1ec3 b\u00e1n.",[k.param('sender name',this.props.senderName)]);return (i.createElement('span',{className:"uiIconText _3l6h"},i.createElement(h,{src:l('/images/messaging/docs/generic.png')}),o));}});f.exports=n;},null);
__d('WebMessengerDeleteThreadDialog',['Dialog','fbt','MercuryThreadActions'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j=c('MercuryThreadActions').get(),k={show:function(l){var m=[];m.push({name:'delete_conversation',label:i._("X\u00f3a cu\u1ed9c tr\u00f2 chuy\u1ec7n"),handler:function(){return j['delete'](l);}});m.push(h.CANCEL);new h().setTitle(i._("X\u00f3a to\u00e0n b\u1ed9 cu\u1ed9c tr\u00f2 chuy\u1ec7n n\u00e0y?")).setBody(i._("B\u1ea1n kh\u00f4ng th\u1ec3 ho\u00e0n t\u00e1c sau khi x\u00f3a b\u1ea3n sao c\u1ee7a cu\u1ed9c tr\u00f2 chuy\u1ec7n n\u00e0y.")).setButtons(m).show();}};f.exports=k;},null);
__d('WebMessengerThreadPermalinks',['MercuryIDs','MessagingTag','URI','WebMessengerPermalinkConstants','WWWBase','requireWeak'],function a(b,c,d,e,f,g,h,i,j,k,l,m){'use strict';if(c.__markCompiled)c.__markCompiled();var n={getThreadURI:function(r,s,t){if(h.isCanonical(r)){o(r,s,t);}else p(r,s,t);}};function o(r,s,t){var u=new j(l.uri),v=h.tokenize(r).value;u.setPath(q(t)+'/'+v);s&&s(u.toString());}function p(r,s,t){m('MercuryThreadIDMap',function(u){var v=u.get();v.getServerIDFromClientID(r,function(w){var x=new j(l.uri);x.setPath(k.getURIPathForThreadID(w,q(t)));s&&s(x.toString());});});}function q(r){var s=k.BASE_PATH;if(r&&r!=i.INBOX)s+='/'+r;return s;}f.exports=n;},null);
__d('MercuryTypeaheadDataSource',['Banzai','BanzaiLogger','CurrentUser','DataSource','MercuryConfig','MercuryParticipantTypes','MercuryTypeaheadConstants','OrderedFriendsList','ShortProfiles','WorkModeConfig','debounce'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r){if(c.__markCompiled)c.__markCompiled();var s,t,u=500,v=[],w={},x={},y={},z=false,aa=false;s=babelHelpers.inherits(ba,k);t=s&&s.prototype;function ba(ca){'use strict';ca=ca||{};ca.kanaNormalization=true;t.constructor.call(this,ca);this.logQuery=r(function(da){this.$MercuryTypeaheadDataSource1(da);},u,this,true);this.logResponse=r(function(da){this.$MercuryTypeaheadDataSource1(da);},u,this,true);}ba.prototype.dirty=function(){'use strict';this.$MercuryTypeaheadDataSource2=v;this.localCache=x;this.queryCache=w;this.queryIDs=y;return this;};ba.prototype.bootstrap=function(){'use strict';if(z||aa)return false;this.$MercuryTypeaheadDataSource1({event:'bootstrap_start'});aa=true;p.fetchAll().then((function(){this.updateBootstrapData();this.$MercuryTypeaheadDataSource1({event:'bootstrap_end'});aa=false;z=true;}).bind(this),(function(){this.$MercuryTypeaheadDataSource1({event:'bootstrap_failure'});}).bind(this));return true;};ba.prototype.updateBootstrapData=function(){'use strict';var ca=this.getCachedShortProfileIDs(),da=q.is_work_user?m.FB4C:m.FRIEND,ea=ca.map(function(fa){var ga=p.getNow(fa),ha=fa==j.getID()?da:ga.type,ia=[ga.additionalName,ga.alternateName].concat(ga.searchTokens||[]).join(' ');return {uid:fa,index:o.getActiveRank(fa),text:ga.name,tokens:ia,localized_text:ga.name,additional_text:ga.additionalName,photo:ga.thumbSrc,render_type:ha,type:n.USER_TYPE};});if(ea.length)this.addEntries(ea);};ba.prototype.query=function(ca,da,ea,fa){'use strict';var ga=da||ca.length===1;return t.query.call(this,ca,ga,ea,fa);};ba.prototype.getQueryData=function(ca,da){'use strict';return babelHelpers._extends({},t.getQueryData.call(this,ca,da));};ba.prototype.setEntry=function(ca,da){'use strict';this.$MercuryTypeaheadDataSource2[ca]=da;};ba.prototype.getEntry=function(ca){'use strict';return this.$MercuryTypeaheadDataSource2[ca]||null;};ba.prototype.getCachedShortProfileIDs=function(){'use strict';var ca=p.getCachedProfileIDs(),da=ca.filter(function(ea){var fa=p.getNow(ea);return (ea==j.getID()||fa.type===m.FRIEND||fa.type===m.FB4C||fa.type===m.PAGE&&l.LinkedAgents&&l.LinkedAgents.indexOf(ea.toString())>-1);});return da;};ba.prototype.isBootstrapped=function(){'use strict';return z;};ba.prototype.isBootstrapping=function(){'use strict';return aa;};ba.prototype.processEntries=function(ca,da){'use strict';ca=ca.map(function(ea){if(ea.index==null&&(ea.render_type===m.FRIEND||ea.render_type===m.FB4C))ea.index=o.getActiveRank(ea.uid);if(ea.render_type===m.PAGE&&l.LinkedAgents&&l.LinkedAgents.indexOf(ea.uid.toString())>-1)ea.index=1;return ea;});return t.processEntries.call(this,ca);};ba.prototype.mergeUids=function(ca,da,ea,fa){'use strict';var ga=da.sort((function(ha,ia){return this.getEntry(ha).index-this.getEntry(ia).index;}).bind(this));return t.mergeUids.call(this,ca,ga,ea,fa);};ba.prototype.$MercuryTypeaheadDataSource1=function(ca){'use strict';if(!h.isEnabled('mercury_typeahead_logging'))return;i.log('MercuryQueryResultsLoggerConfig',ca);};f.exports=ba;},null);
__d('MercuryMessageDeliveryState',[],function a(b,c,d,e,f,g){'use strict';if(c.__markCompiled)c.__markCompiled();var h={SENDING:1,SENT:2,DELIVERED:3,ERROR:0,UNKNOWN:-1};f.exports=h;},null);
__d('MercuryThreadMetadataRawRenderer',['Event','CSS','DOM','MercuryActionStatus','MercuryErrorInfo','MercuryStatusTemplates','TooltipData','cx','fbt'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q={renderParticipantListWithNoThreadName:function(r,s,t,u,v,w){var x={callback:true,check_length:true,show_unread_count:true};w=w||{};var y={};for(var z in w)if(x[z]){y[z]=w[z];delete w[z];}var aa=t.map(function(fa){return u[fa];}),ba=this.renderRawParticipantList(r,aa,t.length,w);ba=this.renderRawTitleWithUnreadCount(ba,y.show_unread_count?s.unread_count:0);var ca=w.abbr_mode,da={};for(var ea in w)da[ea]=w[ea];da.abbr_mode=true;v.forEach((function(fa){var ga=v.length>1?this._cloneIfDOMElement(ba):ba;j.setContent(fa,ga);if(y.check_length&&!ca&&fa.scrollWidth>fa.clientWidth){var ha=this.renderRawParticipantList(r,aa,t.length,da),ia=this.renderRawTitleWithUnreadCount(ha,y.show_unread_count?s.unread_count:0);j.setContent(fa,ia);}}).bind(this));y.callback&&y.callback(ba);},renderRawParticipantList:function(r,s,t,u){var v={abbr_mode:true,last_separator_uses_and:true,names_renderer:true};u=u||{};var w=null;if(u.names_renderer){w=u.names_renderer(s);}else w=s.map(function(y){return y.name;});var x=null;if(w.length===0){if(!r){x=p._("Tin nh\u1eafn m\u1edbi");}else x=p._("Kh\u00f4ng c\u00f3 ng\u01b0\u1eddi tham gia n\u00e0o");}else if(w.length==1){x=w[0];}else if(w.length==2){if(u.last_separator_uses_and){x=p._("{participant1} v\u00e0 {participant2}",[p.param('participant1',w[0]),p.param('participant2',w[1])]);}else x=p._("{participant1}, {participant2}",[p.param('participant1',w[0]),p.param('participant2',w[1])]);}else if(u.last_separator_uses_and){if(u.abbr_mode){x=p._("{participant1} v\u00e0 {others_link}",[p.param('participant1',w[0]),p.param('others_link',this.renderRawParticipantCount({render_subset:true,count:t-1}))]);}else if(w.length==3){x=p._("{participant1}, {participant2} v\u00e0 {participant3}",[p.param('participant1',w[0]),p.param('participant2',w[1]),p.param('participant3',w[2])]);}else x=p._("{participant1}, {participant2} v\u00e0 {others_link}",[p.param('participant1',w[0]),p.param('participant2',w[1]),p.param('others_link',this.renderRawParticipantCount({render_subset:true,count:t-2}))]);}else if(w.length==3){x=p._("{participant1}, {participant2}, {participant3}",[p.param('participant1',w[0]),p.param('participant2',w[1]),p.param('participant3',w[2])]);}else x=p._("{participant1}, {participant2}, {participant3}, {others_link}",[p.param('participant1',w[0]),p.param('participant2',w[1]),p.param('participant3',w[2]),p.param('others_link',this.renderRawParticipantCount({render_subset:true,count:t-3}))]);if(Array.isArray(x))x=j.create('span',{},x);return x;},renderRawTitleWithUnreadCount:function(r,s){var t=r;if(s&&s>1)t=j.create('span',{},p._("{conversation_title} ({unread_count})",[p.param('conversation_title',r),p.param('unread_count',s)]));return t;},renderRawParticipantCount:function(r){var s=r.render_subset,t;if(!s){t=r.count>1?p._({"*":"{num} ng\u01b0\u1eddi"},[p.param('num',r.count,[0])]):p._("1 ng\u01b0\u1eddi");}else t=r.count>1?p._({"*":"{others_count} ng\u01b0\u1eddi kh\u00e1c"},[p.param('others_count',r.count,[0])]):p._("1 ng\u01b0\u1eddi kh\u00e1c");return t;},renderShortNames:function(r){if(r.length==1)return [r[0].name];return r.map(function(s){return s.short_name;});},renderStatusIndicator:function(r,s,t){var u;if(r==k.RESENDING){u=this.renderResendIndicator();}else if(r!==undefined&&r!=k.UNSENT&&r!=k.UNCONFIRMED&&r!=k.SUCCESS)u=this.renderErrorIndicator(s,t);return u;},renderResendIndicator:function(){return m[':fb:mercury:resend-indicator'].render();},renderErrorIndicator:function(r,s){if(!r)return null;var t=m[':fb:mercury:error-indicator'].render(),u=r.is_transient,v=l.getMessage(r);if(u)if(l.isConnectionError(r)){v=p._("{message} H\u00e3y ki\u1ec3m tra k\u1ebft n\u1ed1i internet c\u1ee7a b\u1ea1n v\u00e0 nh\u1ea5p \u0111\u1ec3 th\u1eed l\u1ea1i.",[p.param('message',v)]);}else v=p._("{message} Nh\u1ea5p \u0111\u1ec3 g\u1eedi l\u1ea1i.",[p.param('message',v)]);n.set(t,v,'above','center');if(s&&u){h.listen(t,'click',s);t.setAttribute('tabindex','0');i.addClass(t,"_55q-");}return t;},_cloneIfDOMElement:function(r){if(r&&r.cloneNode){return r.cloneNode();}else return r;}};f.exports=q;},null);
__d('MercuryThreadSearchUtils',['escapeRegex','TokenizeUtil'],function a(b,c,d,e,f,g,h,i){if(c.__markCompiled)c.__markCompiled();var j={wordsInString:function(k){return (k||'').split(/\s+/).filter(function(l){return l.trim().length>0;});},anyMatchPredicate:function(k,l){for(var m=0;m<k.length;m++)if(l(k[m]))return true;return false;},allMatchPredicate:function(k,l){for(var m=0;m<k.length;m++)if(!l(k[m]))return false;return true;},queryWordMatchesAnyNameWord:function(k,l){var m=new RegExp('^'+h(k),'i');return this.anyMatchPredicate(l,function(n){var o=i.parse(n).flatValue;return m.test(o);});},queryMatchesName:function(k,l){var m=this.wordsInString(k),n=this.wordsInString(l);return this.allMatchPredicate(m,(function(o){return this.queryWordMatchesAnyNameWord(o,n);}).bind(this));}};f.exports=j;},null);
__d('SyncRequestNotificationBeeperItemContents.react',['Animation','ImageBlock.react','NotificationBeeperItemCloseButton.react','NotificationUserActions','React','ReactDOM','SyncRequest.react','SyncRequestStatusEnum','cx'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=l.createClass({displayName:'SyncRequestNotificationBeeperItemContents',_markAsRead:function(){k.markNotificationsAsRead([this.props.beep.notificationID]);this.props.onHide();},_onClose:function(){this._markAsRead();this.props.onHide();},_doFlash:function(){new h(m.findDOMNode(this.refs.inner)).from('opacity','0').to('opacity','1').duration(200).go();},componentDidMount:function(){if(this.props.beep.rendererData.status!=o.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},componentDidUpdate:function(r){if(this.props.beep.rendererData.status!=o.PENDING&&r.beep.rendererData.status==o.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},onRequestStatusUpdate:function(r,s){if(r!=o.PENDING&&s==o.PENDING)this.props.onReadyToHide(this.props.beep.notificationID);},render:function(){var r=this.props.beep,s=r.rendererData;return (l.createElement('div',{ref:'inner'},l.createElement(j,{onClick:this._onClose}),l.createElement(i,{className:"_3soj"},l.createElement('img',{src:r.actors[0].profile_picture.uri,className:"_3sok"}),l.createElement('div',{className:"_3sol"},l.createElement(n,{app:s.app,creationTime:s.creation_time,requestId:s.id.toString(),receiver:s.receiver,sender:s.sender,status:s.status,timeout:s.timeout,timeRemaining:s.time_remaining,viewerId:s.receiver.id,onStatusUpdate:this.onRequestStatusUpdate})))));}});f.exports=q;},null);
__d('LiveMessageReceiver',['Arbiter','ChannelConstants','emptyFunction','shield'],function a(b,c,d,e,f,g,h,i,j,k){if(c.__markCompiled)c.__markCompiled();function l(m){this.eventName=m;this.subs=null;this.handler=j;this.shutdownHandler=null;this.registered=false;this.appId=1;}Object.assign(l,{getAppMessageType:function(m,n){return 'live_message/'+m+':'+n;},route:function(m){var n=function(o){var p=l.getAppMessageType(m.app_id,m.event_name);h.inform(p,o,h.BEHAVIOR_PERSISTENT);};n(m.response);}});Object.assign(l.prototype,{setAppId:function(m){this.appId=m;return this;},setHandler:function(m){this.handler=m;this._dirty();return this;},setRestartHandler:j,setShutdownHandler:function(m){this.shutdownHandler=k(m);this._dirty();return this;},_dirty:function(){if(this.registered){this.unregister();this.register();}},register:function(){var m=(function(o,p){return this.handler(p);}).bind(this),n=l.getAppMessageType(this.appId,this.eventName);this.subs={};this.subs.main=h.subscribe(n,m);if(this.shutdownHandler)this.subs.shut=h.subscribe(i.ON_SHUTDOWN,this.shutdownHandler);this.registered=true;return this;},unregister:function(){if(!this.subs)return this;for(var m in this.subs)if(this.subs[m])this.subs[m].unsubscribe();this.subs=null;this.registered=false;return this;}});f.exports=l;},null);
__d('initLiveMessageReceiver',['Arbiter','ChannelConstants','LiveMessageReceiver'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();h.subscribe(i.getArbiterType('app_msg'),function(k,l){j.route(l.obj);});},null);
__d("XStickerStateInitialDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/state\/",{});},null,{});
__d("XStickerStateStoreDataController",["XController"],function a(b,c,d,e,f,g){c.__markCompiled&&c.__markCompiled();f.exports=c("XController").create("\/stickers\/state\/store\/",{});},null,{});
__d('StickerState',['ImmutableObject','StickerConfig','PresenceState','StickerActions','StickerConstants','StickerImages','StickerServerRequests'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n){'use strict';if(c.__markCompiled)c.__markCompiled();var o={},p,q,r,s=null,t=0,u={},v=[],w=[],x=[],y=null,z=null,aa=j.get();if(aa)y=aa.tray_pack_id;var ba=i.ShowStickerReplyNUX,ca={onTrayDataReady:function(ea){if(!q)q=n.fetchTrayData(function(fa){v=fa.packs.map(function(ga){return da(ga);});r=fa.mru;t=fa.num_new_packs;x=fa.tags;});q.then(function(){ea();k.loadedTrayData();});},onStoreDataReady:function(ea){if(!p)p=n.fetchStoreData(function(fa){w=fa.packs.map(function(ga){return da(ga);});});p.then(ea);},onPackDataReady:function(ea,fa){if(!o[ea])o[ea]=n.fetchPackData(ea,function(ga){da(ga);});o[ea].then(fa);},getPacksInTrayAllInterfaces:function(){return v;},getPacksInTray:function(){var ea=[],fa;for(var ga=0;ga<v.length;ga++)if(v[ga].id==l.EMOTICON_PACK_ID){fa=v[ga];}else if(v[ga].isMessengerCapable)ea.push(v[ga]);fa&&ea.push(fa);return ea;},getPacksInCommentsTray:function(){var ea=[],fa=[],ga;for(var ha=0;ha<v.length;ha++)if(v[ha].id==l.EMOTICON_PACK_ID){ga=v[ha];}else if(v[ha].isCommentsCapable){ea.push(v[ha]);}else fa.push(v[ha]);var ia=ea.concat(fa);if(ga)ia.push(ga);return ia;},getPacksInComposerTray:function(){return v.filter(function(ea){return ea.isComposerCapable;});},getPacksInFramesTray:function(){return v.filter(function(ea){return ea.isFramePack;});},getPackIDsInTray:function(){return v.map(function(ea){return ea.id;});},getPacksInStore:function(){return w.filter(function(ea){return ea.isMessengerCapable;});},getComposerPacksInStore:function(){return w.filter(function(ea){return ea.isComposerCapable;});},getPack:function(ea){return u[ea];},getNumNewPacks:function(){return t;},getFeaturedTags:function(){return x;},resetNumNewPacks:function(){t=0;},addMRUPack:function(){if(r){this._addPackToTray(r);r=null;}},addPack:function(ea){var fa=false;if(u[ea])fa=u[ea].isPromoted;n.addPack(ea,fa,(function(ga){this._addPackToTray(ga);}).bind(this));},removePack:function(ea){n.removePack(ea,function(fa){v=v.filter(function(ga){return ga.id!==fa;});u[fa]=h.set(u[fa],{isInTray:false});w=w.map(function(ga){return u[ga.id];});k.updateTrayData();});},setTrayPackID:function(ea){y=ea;j.doSync();},getTrayPackID:function(ea){if(ea&&ea.length>0&&!ea.some(function(fa){return fa.id===y;})){return ea[0].id;}else return y;},setStorePackID:function(ea){z=ea;},getStorePackID:function(){return z;},shouldShowStickerReplyNUX:function(){return ba;},clearShowStickerReplyNUX:function(){ba=false;},_addPackToTray:function(ea,fa){da(ea);u[ea.id]=h.set(u[ea.id],{isPurchased:!fa,isInTray:true});var ga=v.filter(function(ia){return ia.id===ea.id;}).length>0;if(!ga){var ha;if(!fa){ha=v.filter(function(ia){return ia.isMRU||ia.isSearch;}).length;}else ha=v.filter(function(ia){return ia.id!==l.EMOTICON_PACK_ID;}).length;v.splice(ha,0,u[ea.id]);}w=w.map(function(ia){return u[ia.id];});k.updateTrayData();},_addRecentlyUsedSticker:function(ea){for(var fa=0;fa<s.length;++fa)if(s[fa].id===ea.id){s.splice(fa,1);break;}s.unshift(ea);},getMRUStickerPack:function(ea){if(!s)s=ea;return s;},updateRecentlyUsed:function(ea){if(!s){this.addMRUPack();return;}this._addRecentlyUsedSticker(m.getSticker(ea));}};j.registerStateStorer(function(ea){ea.tray_pack_id=y;});function da(ea){var fa=ea.id;if(!u[fa]){return u[fa]=new h(ea);}else return u[fa]=h.set(u[fa],ea);}f.exports=ca;},null);
__d('AbstractDialogFitHeight',['CSS','DOM','Event','Style','SubscriptionsHandler','Vector','csx','cx','throttle'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){if(c.__markCompiled)c.__markCompiled();var q=450,r=100,s=67,t=67;function u(v){'use strict';this.$AbstractDialogFitHeight1=v;}u.prototype.enable=function(){'use strict';this.$AbstractDialogFitHeight2=new l();this.$AbstractDialogFitHeight2.addSubscriptions(this.$AbstractDialogFitHeight1.subscribe('beforeshow',this.$AbstractDialogFitHeight3.bind(this)),j.listen(window,'resize',p(this.$AbstractDialogFitHeight3.bind(this))));this.$AbstractDialogFitHeight4=i.find(this.$AbstractDialogFitHeight1.getRoot(),"._4-i2");h.addClass(this.$AbstractDialogFitHeight4,"_5pfh");this.$AbstractDialogFitHeight5=r;if(i.scry(this.$AbstractDialogFitHeight1.getRoot(),"._4-i0").length)this.$AbstractDialogFitHeight5+=s;if(i.scry(this.$AbstractDialogFitHeight1.getRoot(),"._5a8u").length)this.$AbstractDialogFitHeight5+=t;};u.prototype.disable=function(){'use strict';this.$AbstractDialogFitHeight2.release();this.$AbstractDialogFitHeight2=null;h.removeClass(this.$AbstractDialogFitHeight4,"_5pfh");};u.prototype.$AbstractDialogFitHeight3=function(){'use strict';var v=m.getViewportDimensions().y,w=v-this.$AbstractDialogFitHeight5;k.set(this.$AbstractDialogFitHeight4,this.getHeightProperty(),Math.max(q,w)+'px');this.$AbstractDialogFitHeight1.updatePosition();};f.exports=u;},null);
__d('DialogFitHeight',['AbstractDialogFitHeight'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i,j;i=babelHelpers.inherits(k,h);j=i&&i.prototype;k.prototype.getHeightProperty=function(){'use strict';return 'height';};function k(){'use strict';i.apply(this,arguments);}f.exports=k;},null);
__d('StickerStoreController',['Bootloader','DialogFitHeight','DOM','LayerAutoFocus','LayerFadeOnHide','LayerHideOnEscape','React','ReactComponentRenderer','StickerActions','XUIDialog.react','XUIDialogBody.react','XUISpinner.react','cx','requestAnimationFrame'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u){'use strict';if(c.__markCompiled)c.__markCompiled();var v=n.PropTypes,w=688,x=null,y=n.createClass({displayName:'StoreLayer',propTypes:{isComposer:v.bool,shown:v.bool},getDefaultProps:function(){return {isComposer:false,shown:false};},getInitialState:function(){return {renderStore:function(){return (n.createElement('div',{className:"_5r5e"},n.createElement(s,{background:'light',size:'large'})));}};},componentDidMount:function(){h.loadModules(["StickerStore.react"],(function(ba){this.setState({renderStore:(function(){return (n.createElement(ba,{isComposer:this.props.isComposer,shown:this.props.shown}));}).bind(this)});}).bind(this));},_onToggle:function(ba){u((function(){return this.setProps({shown:ba});}).bind(this));},render:function(){return (n.createElement(q,{behaviors:{DialogFitHeight:i,LayerAutoFocus:k,LayerFadeOnHide:l,LayerHideOnEscape:m},onToggle:this._onToggle,shown:this.props.shown,width:w},n.createElement(r,{className:"_5rq- autofocus"},this.state.renderStore())));}});function z(ba){var ca=j.create('div');j.appendContent(document.body,ca);x=new o(y,ca);x.setProps({isComposer:ba,shown:true});}var aa={showStore:function(ba,ca){if(!x){z(!!ca);}else x.setProps({shown:true,isComposer:!!ca});p.selectStorePack(ba);}};f.exports=aa;},null);
__d('StickerStateStore',['FluxStore','StickerActions','StickerInterfaces','StickersDispatcher','StickerState','StickerStoreController','arrayContains','emptyFunction'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o){if(c.__markCompiled)c.__markCompiled();var p,q;'use strict';p=babelHelpers.inherits(r,h);q=p&&p.prototype;function r(){q.constructor.call(this,k);this.$StickerStateStore1=false;}r.prototype.getState=function(s){var t=null;if(s===j.COMPOSER){t=l.getPacksInComposerTray();}else if(s===j.COMMENTS){t=l.getPacksInCommentsTray();}else if(s===j.FRAMES){t=l.getPacksInFramesTray();}else t=l.getPacksInTray();return {showTray:this.$StickerStateStore2,storePackID:l.getStorePackID(),packID:l.getTrayPackID(t),trayPacks:t,numNewPacks:l.getNumNewPacks(),threadID:this.$StickerStateStore3,trayDataReady:this.$StickerStateStore1};};r.prototype.isPackInTray=function(s){if(!this.$StickerStateStore1)l.onTrayDataReady(o);var t=l.getPacksInTrayAllInterfaces();return t.some(function(u){return u.id===s;});};r.prototype.__onDispatch=function(s){var t=i.Types;switch(s.type){case t.REPLACE_STICKER_STATE:this.$StickerStateStore2=!!s.showTray;break;case t.SHOW_TRAY:this.$StickerStateStore2=true;this.$StickerStateStore3=s.threadID;break;case t.HIDE_TRAY:this.$StickerStateStore2=false;break;case t.CLICKED_STICKER_IN_THREAD:l.onTrayDataReady((function(){if(n(l.getPackIDsInTray(),s.packID)){l.setTrayPackID(s.packID);this.$StickerStateStore2=true;this.$StickerStateStore3=s.threadID;}else{this.$StickerStateStore2=false;m.showStore(s.packID);}}).bind(this));break;case t.SELECT_PACK:l.setTrayPackID(s.packID);break;case t.SELECT_STORE_PACK:l.setStorePackID(s.packID);break;case t.RESET_NUM_NEW_PACKS:l.resetNumNewPacks();break;case t.ADD_PACK:l.addPack(s.packID);break;case t.REMOVE_PACK:l.removePack(s.packID);break;case t.UPDATE_TRAY_DATA:break;case t.TRAY_DATA_READY:this.$StickerStateStore1=true;break;}this.__emitChange();};f.exports=new r();},null);
__d('ClearableTypeahead',['Event'],function a(b,c,d,e,f,g,h){if(c.__markCompiled)c.__markCompiled();var i={resetOnCloseButtonClick:function(j,k){h.listen(k,'click',function(){var l=j.getCore();l.getElement().focus();l.reset();});}};f.exports=i;},null);
__d('legacy:CompactTypeaheadRenderer',['CompactTypeaheadRenderer'],function a(b,c,d,e){if(c.__markCompiled)c.__markCompiled();if(!b.TypeaheadRenderers)b.TypeaheadRenderers={};b.TypeaheadRenderers.compact=c('CompactTypeaheadRenderer');},3);