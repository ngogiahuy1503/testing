/*!CK:3135753364!*//*1445957345,*/

if (self.CavalryLogger) { CavalryLogger.start_js(["V8dqg"]); }

__d('BlueBarMinWidthWithJewel',['BanzaiODS','BlueBar','DOMQuery','DOMDimensions','Event','Locale','Style','UITinyViewportAction','Vector','CSS','csx','cx','queryThenMutateDOM'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t){if(c.__markCompiled)c.__markCompiled();g.init=function(u){var v=i.getNavRoot(),w=j.scry(v,"._fmc")[0],x=j.scry(document,"a._23nx")[0],y=j.scry(document,"a._23ny")[0],z=false,aa;if(u&&x&&y){l.listen(x,'click',function(){q.removeClass(document.body,"_23nw");q.hide(x);h.bumpEntityKey('tinyview.bookmark','show.click');});l.listen(y,'click',function(){q.addClass(document.body,"_23nw");q.show(x);h.bumpEntityKey('tinyview.bookmark','hide.click');});}var ba=t.bind(null,function(){var ca=k.getElementDimensions(v).width,da=k.getViewportDimensions().width,ea=k.measureElementBox(v,'width',true);z=o.isTinyWidth();var fa;if(m.isRTL()){fa=-p.getElementPosition(v).x;}else fa=2*p.getElementPosition(v).x+ca-da;var ga=ca-fa-ea;if(fa>0&&ga>0){aa=ga+'px';}else aa='';},function(){n.set(w,'width',aa);if(u){q.conditionClass(document.body,"_23nw",z);if(x&&y){if(z)h.bumpEntityKey('tinyview.bookmark','icon.show');q.conditionShow(x,z);q.conditionShow(y,z);}}},'BlueBarMinWidthWithJewel');l.listen(window,'resize',ba);ba();};},null);
__d('MercurySingletonProvider',['CurrentUser','Map'],function a(b,c,d,e,f,g,h,i){'use strict';if(c.__markCompiled)c.__markCompiled();function j(k){this.$MercurySingletonProvider1=new i();this.$MercurySingletonProvider2=k;}j.prototype.getForFBID=function(k){if(!this.$MercurySingletonProvider1.has(k))this.$MercurySingletonProvider1.set(k,new this.$MercurySingletonProvider2(k));return this.$MercurySingletonProvider1.get(k);};j.prototype.get=function(){return this.getForFBID(h.getID());};j.mock=function(k){throw new Error('MercurySingletonProvider.mock() must only be used in tests.');};f.exports=j;},null);
__d('MercuryDisplayTimeFilterMessageRenderer',['fbt'],function a(b,c,d,e,f,g,h){'use strict';if(c.__markCompiled)c.__markCompiled();var i={renderFilteredContent:function(j){if(j.is_filtered_content_bh)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec ch\u1ee9a li\u00ean k\u1ebft b\u1ecb ch\u1eb7n ho\u1eb7c c\u00f3 h\u1ea1i.");if(j.is_filtered_content_account)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u0129nh vi\u1ec5n v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi y\u00eau c\u1ea7u x\u00e1c minh.");if(j.is_filtered_content_quasar)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec c\u00f3 ch\u1ee9a n\u1ed9i dung b\u1ecb ch\u1eb7n ho\u1eb7c c\u00f3 h\u1ea1i.");if(j.is_filtered_content_invalid_app)return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 b\u1ecb x\u00f3a v\u00ec \u1ee9ng d\u1ee5ng g\u1eedi tin nh\u1eafn b\u1ecb ch\u1eb7n g\u1eedi tin.");return h._("Tin nh\u1eafn n\u00e0y \u0111\u00e3 t\u1ea1m th\u1eddi b\u1ecb x\u00f3a v\u00ec t\u00e0i kho\u1ea3n c\u1ee7a ng\u01b0\u1eddi g\u1eedi y\u00eau c\u1ea7u x\u00e1c minh ho\u1eb7c \u0111\u00e3 b\u1ecb x\u00e1c \u0111\u1ecbnh l\u00e0 l\u1ea1m d\u1ee5ng.");}};f.exports=i;},null);
__d('MercuryUnreadState',['MercuryFolders','LogHistory','KeyedCallbackManager','MercuryActionType','MercuryDispatcher','MercuryGlobalActionType','MercurySingletonMixin','MercuryThreadlistConstants','MercuryThreadIDMap','MessagingTag','MercuryServerRequests','MercuryThreadInformer','MercuryThreads','arrayContains','createObjectFrom'],function a(b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v){if(c.__markCompiled)c.__markCompiled();var w=(h.getSupportedFolders()||[]).filter(function(oa){return oa!=q.ACTION_ARCHIVED;}),x='unread_thread_hash',y='unseen_thread_list',z=o.MAX_UNREAD_COUNT,aa=i.getInstance('mercury_unread_state');function ba(oa){this._fbid=oa;this._serverRequests=r.getForFBID(this._fbid);this._threadIDMap=p.getForFBID(this._fbid);this._threadInformer=s.getForFBID(this._fbid);this._threads=t.getForFBID(this._fbid);this._dispatcher=l.getForFBID(this._fbid);this._allReadTimestamp={};this._threadReadTimestamp={};this._initialUnreadCount={};this._maxCount={};this._unreadResources={};w.forEach((function(pa){this._initialUnreadCount[pa]=0;this._maxCount[pa]=false;this._unreadResources[pa]=new j();}).bind(this));this._dispatcher.subscribe('update-unread',(function(pa,qa){ga(this,qa);var ra=qa.global_actions||[];for(var sa=0;sa<ra.length;sa++){var ta=ra[sa];if(ta.action_type==m.MARK_ALL_READ)ja(this,ta.folder,ta.timestamp);}}).bind(this));this._dispatcher.subscribe('update-thread-ids',(function(pa,qa){la(this,qa);}).bind(this));}Object.assign(ba.prototype,{getUnreadCount:function(oa){if(this.exceedsMaxCount(oa)){aa.error('unguarded_unread_count_fetch',{});return 0;}return fa(this,oa);},exceedsMaxCount:function(oa){return this._maxCount[oa]||fa(this,oa)>z;},markFolderAsRead:function(oa){if(this._maxCount[oa]||fa(this,oa)>0)this._serverRequests.markFolderAsRead(oa);},getIsThreadUnread:function(oa,pa){var qa=pa||q.INBOX,ra=ea(this,qa);return ra&&ra[oa];}});Object.assign(ba,n);function ca(oa,pa,qa){oa._unreadResources[pa].setResource(x,qa);oa._unreadResources[pa].setResource(y,Object.keys(qa));}function da(oa,pa,qa){var ra=oa._unreadResources[pa].executeOrEnqueue(x,qa),sa=oa._unreadResources[pa].getUnavailableResources(ra);if(sa.length)oa._serverRequests.fetchUnreadThreadIDs(pa);}function ea(oa,pa){return oa._unreadResources[pa].getResource(x);}function fa(oa,pa){var qa=oa._unreadResources[pa].getResource(y);if(qa){return qa.length;}else return oa._initialUnreadCount[pa];}function ga(oa,pa){var qa;(pa.unread_thread_fbids||[]).forEach(function(ra){qa=ra.folder;if(!na(qa))return;var sa=ra.thread_fbids||[];sa=sa.concat(ra.other_user_fbids||[]);var ta=ka(oa,sa);ca(oa,qa,v(ta,true));if(ta.length>z)oa._maxCount[qa]=true;oa._threadInformer.updatedUnreadState();});(pa.message_counts||[]).forEach(function(ra){if(ra.unread_count===undefined)return;qa=ra.folder;if(ra.unread_count>z){oa._maxCount[qa]=true;ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}else{oa._initialUnreadCount[qa]=ra.unread_count;if(oa._initialUnreadCount[qa]===0)ca(oa,qa,{});oa._threadInformer.updatedUnreadState();}});(pa.actions||[]).forEach(function(ra){if(ra.is_forward)return;var sa=k,ta=ra.other_user_fbid?ra.other_user_fbid:ra.thread_fbid,ua=ra.thread_id?ra.thread_id:ta;if(ra.action_type==sa.DELETE_THREAD){w.forEach(function(wa){ia(oa,wa,ua);});}else if(ra.action_type==sa.CHANGE_ARCHIVED_STATUS||ra.action_type==sa.CHANGE_FOLDER){var va=oa._threads.getThreadMetaNow(ra.thread_id);qa=h.getFromMeta(va);if(na(qa)&&va.unread_count>0)ha(oa,qa,ua);w.forEach(function(wa){if(wa!=qa)ia(oa,wa,ua);});}else{qa=ma(oa,ra);if(!na(qa))return;if(ra.action_type==sa.CHANGE_READ_STATUS){if(ra.mark_as_read){ia(oa,qa,ua,ra.timestamp);}else ha(oa,qa,ua,ra.timestamp);}else if(ra.action_type==sa.USER_GENERATED_MESSAGE||ra.action_type==sa.LOG_MESSAGE)if(ra.is_unread)ha(oa,qa,ua,ra.timestamp);}});}function ha(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){var ta=oa._allReadTimestamp[pa]||0,ua=oa._threadReadTimestamp[qa]||0,va=ra||Number.POSITIVE_INFINITY;if(va>=ta&&va>=ua&&!sa[qa]){sa[qa]=ra||0;ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ia(oa,pa,qa,ra){if(oa._maxCount[pa])return;da(oa,pa,function(sa){if(ra){var ta=oa._threadReadTimestamp[qa];if(!ta||ta<ra)oa._threadReadTimestamp[qa]=ra;}var ua=sa[qa];if(ra&&typeof ua=='number'&&ra<ua)return;if(qa in sa){delete sa[qa];ca(oa,pa,sa);oa._threadInformer.updatedUnreadState();}});}function ja(oa,pa,qa){oa._maxCount[pa]=false;ca(oa,pa,{});oa._allReadTimestamp[pa]=Math.max(oa._allReadTimestamp[pa]||0,qa||0);oa._threadInformer.updatedUnreadState();}function ka(oa,pa){return pa.map(oa._threadIDMap.convertThreadIDIfAvailable,oa._threadIDMap);}function la(oa,pa){w.forEach(function(qa){var ra=ea(oa,qa);if(!ra)return;for(var sa in pa){var ta=pa[sa];if(ra[sa]){ra[ta]=ra[sa];delete ra[sa];}}ca(oa,qa,ra);});}function ma(oa,pa){var qa=pa.thread_id?oa._threads.getThreadMetaNow(pa.thread_id):null;return qa?h.getFromMeta(qa):pa.folder;}function na(oa){return u(w,oa);}f.exports=ba;},null);
__d('MercuryLeftNav',['Arbiter','MessagingTag','NavigationMessage','MercuryThreadInformer','MercuryUnreadState'],function a(b,c,d,e,f,g,h,i,j){if(c.__markCompiled)c.__markCompiled();var k=c('MercuryThreadInformer').get(),l=c('MercuryUnreadState').get(),m=false;function n(){var p=l.getUnreadCount(i.INBOX);h.inform(j.NAVIGATION_COUNT_UPDATE,{key:'inbox',hide:true});h.inform(j.NAVIGATION_COUNT_UPDATE,{key:'inbox',count:p});}var o={bootstrap:function(){if(m)return;k.subscribe('unread-updated',n);m=true;}};f.exports=o;},null);